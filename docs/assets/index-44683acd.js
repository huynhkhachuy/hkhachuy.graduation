(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function s3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={},dk={get exports(){return rp},set exports(n){rp=n}},F_={},_e={},pk={get exports(){return _e},set exports(n){_e=n}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=Symbol.for("react.element"),mk=Symbol.for("react.portal"),gk=Symbol.for("react.fragment"),vk=Symbol.for("react.strict_mode"),_k=Symbol.for("react.profiler"),yk=Symbol.for("react.provider"),xk=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),wk=Symbol.for("react.suspense"),Mk=Symbol.for("react.memo"),Ek=Symbol.for("react.lazy"),SC=Symbol.iterator;function Tk(n){return n===null||typeof n!="object"?null:(n=SC&&n[SC]||n["@@iterator"],typeof n=="function"?n:null)}var o3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a3=Object.assign,l3={};function nh(n,e,t){this.props=n,this.context=e,this.refs=l3,this.updater=t||o3}nh.prototype.isReactComponent={};nh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};nh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function u3(){}u3.prototype=nh.prototype;function MM(n,e,t){this.props=n,this.context=e,this.refs=l3,this.updater=t||o3}var EM=MM.prototype=new u3;EM.constructor=MM;a3(EM,nh.prototype);EM.isPureReactComponent=!0;var wC=Array.isArray,c3=Object.prototype.hasOwnProperty,TM={current:null},f3={key:!0,ref:!0,__self:!0,__source:!0};function h3(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)c3.call(e,i)&&!f3.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),f=0;f<a;f++)l[f]=arguments[f+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Qp,type:n,key:s,ref:o,props:r,_owner:TM.current}}function Ak(n,e){return{$$typeof:Qp,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function AM(n){return typeof n=="object"&&n!==null&&n.$$typeof===Qp}function Ck(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var MC=/\/+/g;function Gx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Ck(""+n.key):e.toString(36)}function q0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Qp:case mk:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Gx(o,0):i,wC(r)?(t="",n!=null&&(t=n.replace(MC,"$&/")+"/"),q0(r,e,t,"",function(f){return f})):r!=null&&(AM(r)&&(r=Ak(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(MC,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",wC(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Gx(s,a);o+=q0(s,e,t,l,r)}else if(l=Tk(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Gx(s,a++),o+=q0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gg(n,e,t){if(n==null)return n;var i=[],r=0;return q0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function bk(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Sr={current:null},j0={transition:null},Rk={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:j0,ReactCurrentOwner:TM};nn.Children={map:gg,forEach:function(n,e,t){gg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return gg(n,function(){e++}),e},toArray:function(n){return gg(n,function(e){return e})||[]},only:function(n){if(!AM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};nn.Component=nh;nn.Fragment=gk;nn.Profiler=_k;nn.PureComponent=MM;nn.StrictMode=vk;nn.Suspense=wk;nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rk;nn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=a3({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=TM.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)c3.call(e,l)&&!f3.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var f=0;f<l;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:Qp,type:n.type,key:r,ref:s,props:i,_owner:o}};nn.createContext=function(n){return n={$$typeof:xk,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:yk,_context:n},n.Consumer=n};nn.createElement=h3;nn.createFactory=function(n){var e=h3.bind(null,n);return e.type=n,e};nn.createRef=function(){return{current:null}};nn.forwardRef=function(n){return{$$typeof:Sk,render:n}};nn.isValidElement=AM;nn.lazy=function(n){return{$$typeof:Ek,_payload:{_status:-1,_result:n},_init:bk}};nn.memo=function(n,e){return{$$typeof:Mk,type:n,compare:e===void 0?null:e}};nn.startTransition=function(n){var e=j0.transition;j0.transition={};try{n()}finally{j0.transition=e}};nn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};nn.useCallback=function(n,e){return Sr.current.useCallback(n,e)};nn.useContext=function(n){return Sr.current.useContext(n)};nn.useDebugValue=function(){};nn.useDeferredValue=function(n){return Sr.current.useDeferredValue(n)};nn.useEffect=function(n,e){return Sr.current.useEffect(n,e)};nn.useId=function(){return Sr.current.useId()};nn.useImperativeHandle=function(n,e,t){return Sr.current.useImperativeHandle(n,e,t)};nn.useInsertionEffect=function(n,e){return Sr.current.useInsertionEffect(n,e)};nn.useLayoutEffect=function(n,e){return Sr.current.useLayoutEffect(n,e)};nn.useMemo=function(n,e){return Sr.current.useMemo(n,e)};nn.useReducer=function(n,e,t){return Sr.current.useReducer(n,e,t)};nn.useRef=function(n){return Sr.current.useRef(n)};nn.useState=function(n){return Sr.current.useState(n)};nn.useSyncExternalStore=function(n,e,t){return Sr.current.useSyncExternalStore(n,e,t)};nn.useTransition=function(){return Sr.current.useTransition()};nn.version="18.2.0";(function(n){n.exports=nn})(pk);const ma=s3(_e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk=_e,Ik=Symbol.for("react.element"),Lk=Symbol.for("react.fragment"),Dk=Object.prototype.hasOwnProperty,Nk=Pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ok={key:!0,ref:!0,__self:!0,__source:!0};function d3(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Dk.call(e,i)&&!Ok.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Ik,type:n,key:s,ref:o,props:r,_owner:Nk.current}}F_.Fragment=Lk;F_.jsx=d3;F_.jsxs=d3;(function(n){n.exports=F_})(dk);const z_=rp.Fragment,ot=rp.jsx,Rr=rp.jsxs;var IS={},LS={},Uk={get exports(){return LS},set exports(n){LS=n}},gs={},DS={},kk={get exports(){return DS},set exports(n){DS=n}},p3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,te){var k=B.length;B.push(te);e:for(;0<k;){var ce=k-1>>>1,Se=B[ce];if(0<r(Se,te))B[ce]=te,B[k]=Se,k=ce;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var te=B[0],k=B.pop();if(k!==te){B[0]=k;e:for(var ce=0,Se=B.length,Fe=Se>>>1;ce<Fe;){var ue=2*(ce+1)-1,Ee=B[ue],Te=ue+1,Pe=B[Te];if(0>r(Ee,k))Te<Se&&0>r(Pe,Ee)?(B[ce]=Pe,B[Te]=k,ce=Te):(B[ce]=Ee,B[ue]=k,ce=ue);else if(Te<Se&&0>r(Pe,k))B[ce]=Pe,B[Te]=k,ce=Te;else break e}}return te}function r(B,te){var k=B.sortIndex-te.sortIndex;return k!==0?k:B.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,_=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var te=t(f);te!==null;){if(te.callback===null)i(f);else if(te.startTime<=B)i(f),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(f)}}function E(B){if(y=!1,w(B),!_)if(t(l)!==null)_=!0,K(I);else{var te=t(f);te!==null&&ne(E,te.startTime-B)}}function I(B,te){_=!1,y&&(y=!1,g(b),b=-1),m=!0;var k=p;try{for(w(te),d=t(l);d!==null&&(!(d.expirationTime>te)||B&&!O());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,p=d.priorityLevel;var Se=ce(d.expirationTime<=te);te=n.unstable_now(),typeof Se=="function"?d.callback=Se:d===t(l)&&i(l),w(te)}else i(l);d=t(l)}if(d!==null)var Fe=!0;else{var ue=t(f);ue!==null&&ne(E,ue.startTime-te),Fe=!1}return Fe}finally{d=null,p=k,m=!1}}var R=!1,P=null,b=-1,C=5,A=-1;function O(){return!(n.unstable_now()-A<C)}function F(){if(P!==null){var B=n.unstable_now();A=B;var te=!0;try{te=P(!0,B)}finally{te?V():(R=!1,P=null)}}else R=!1}var V;if(typeof S=="function")V=function(){S(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=F,V=function(){J.postMessage(null)}}else V=function(){x(F,0)};function K(B){P=B,R||(R=!0,V())}function ne(B,te){b=x(function(){B(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){_||m||(_=!0,K(I))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var k=p;p=te;try{return B()}finally{p=k}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var k=p;p=B;try{return te()}finally{p=k}},n.unstable_scheduleCallback=function(B,te,k){var ce=n.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?ce+k:ce):k=ce,B){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=k+Se,B={id:h++,callback:te,priorityLevel:B,startTime:k,expirationTime:Se,sortIndex:-1},k>ce?(B.sortIndex=k,e(f,B),t(l)===null&&B===t(f)&&(y?(g(b),b=-1):y=!0,ne(E,k-ce))):(B.sortIndex=Se,e(l,B),_||m||(_=!0,K(I))),B},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(B){var te=p;return function(){var k=p;p=te;try{return B.apply(this,arguments)}finally{p=k}}}})(p3);(function(n){n.exports=p3})(kk);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m3=_e,hs=DS;function Xe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g3=new Set,sp={};function ec(n,e){Of(n,e),Of(n+"Capture",e)}function Of(n,e){for(sp[n]=e,n=0;n<e.length;n++)g3.add(e[n])}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NS=Object.prototype.hasOwnProperty,Fk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EC={},TC={};function zk(n){return NS.call(TC,n)?!0:NS.call(EC,n)?!1:Fk.test(n)?TC[n]=!0:(EC[n]=!0,!1)}function Bk(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Hk(n,e,t,i){if(e===null||typeof e>"u"||Bk(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){zi[n]=new wr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];zi[e]=new wr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){zi[n]=new wr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){zi[n]=new wr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){zi[n]=new wr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){zi[n]=new wr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){zi[n]=new wr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){zi[n]=new wr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){zi[n]=new wr(n,5,!1,n.toLowerCase(),null,!1,!1)});var CM=/[\-:]([a-z])/g;function bM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(CM,bM);zi[e]=new wr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(CM,bM);zi[e]=new wr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(CM,bM);zi[e]=new wr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){zi[n]=new wr(n,1,!1,n.toLowerCase(),null,!1,!1)});zi.xlinkHref=new wr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){zi[n]=new wr(n,1,!1,n.toLowerCase(),null,!0,!0)});function RM(n,e,t,i){var r=zi.hasOwnProperty(e)?zi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hk(e,t,r,i)&&(t=null),i||r===null?zk(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ta=m3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vg=Symbol.for("react.element"),Jc=Symbol.for("react.portal"),Qc=Symbol.for("react.fragment"),PM=Symbol.for("react.strict_mode"),OS=Symbol.for("react.profiler"),v3=Symbol.for("react.provider"),_3=Symbol.for("react.context"),IM=Symbol.for("react.forward_ref"),US=Symbol.for("react.suspense"),kS=Symbol.for("react.suspense_list"),LM=Symbol.for("react.memo"),Ya=Symbol.for("react.lazy"),y3=Symbol.for("react.offscreen"),AC=Symbol.iterator;function Rh(n){return n===null||typeof n!="object"?null:(n=AC&&n[AC]||n["@@iterator"],typeof n=="function"?n:null)}var qn=Object.assign,Wx;function cd(n){if(Wx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wx=e&&e[1]||""}return`
`+Wx+n}var Xx=!1;function Yx(n,e){if(!n||Xx)return"";Xx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?cd(n):""}function Vk(n){switch(n.tag){case 5:return cd(n.type);case 16:return cd("Lazy");case 13:return cd("Suspense");case 19:return cd("SuspenseList");case 0:case 2:case 15:return n=Yx(n.type,!1),n;case 11:return n=Yx(n.type.render,!1),n;case 1:return n=Yx(n.type,!0),n;default:return""}}function FS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Qc:return"Fragment";case Jc:return"Portal";case OS:return"Profiler";case PM:return"StrictMode";case US:return"Suspense";case kS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _3:return(n.displayName||"Context")+".Consumer";case v3:return(n._context.displayName||"Context")+".Provider";case IM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case LM:return e=n.displayName||null,e!==null?e:FS(n.type)||"Memo";case Ya:e=n._payload,n=n._init;try{return FS(n(e))}catch{}}return null}function Gk(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return FS(e);case 8:return e===PM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function x3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Wk(n){var e=x3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _g(n){n._valueTracker||(n._valueTracker=Wk(n))}function S3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=x3(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function _v(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zS(n,e){var t=e.checked;return qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function CC(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=yl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w3(n,e){e=e.checked,e!=null&&RM(n,"checked",e,!1)}function BS(n,e){w3(n,e);var t=yl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?HS(n,e.type,t):e.hasOwnProperty("defaultValue")&&HS(n,e.type,yl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function bC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function HS(n,e,t){(e!=="number"||_v(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var fd=Array.isArray;function xf(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+yl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function VS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return qn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function RC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Xe(92));if(fd(t)){if(1<t.length)throw Error(Xe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:yl(t)}}function M3(n,e){var t=yl(e.value),i=yl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function PC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function E3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function GS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?E3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yg,T3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function op(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Md={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xk=["Webkit","ms","Moz","O"];Object.keys(Md).forEach(function(n){Xk.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Md[e]=Md[n]})});function A3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Md.hasOwnProperty(n)&&Md[n]?(""+e).trim():e+"px"}function C3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=A3(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var Yk=qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function WS(n,e){if(e){if(Yk[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function XS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var YS=null;function DM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qS=null,Sf=null,wf=null;function IC(n){if(n=nm(n)){if(typeof qS!="function")throw Error(Xe(280));var e=n.stateNode;e&&(e=W_(e),qS(n.stateNode,n.type,e))}}function b3(n){Sf?wf?wf.push(n):wf=[n]:Sf=n}function R3(){if(Sf){var n=Sf,e=wf;if(wf=Sf=null,IC(n),e)for(n=0;n<e.length;n++)IC(e[n])}}function P3(n,e){return n(e)}function I3(){}var qx=!1;function L3(n,e,t){if(qx)return n(e,t);qx=!0;try{return P3(n,e,t)}finally{qx=!1,(Sf!==null||wf!==null)&&(I3(),R3())}}function ap(n,e){var t=n.stateNode;if(t===null)return null;var i=W_(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Xe(231,e,typeof t));return t}var jS=!1;if(_a)try{var Ph={};Object.defineProperty(Ph,"passive",{get:function(){jS=!0}}),window.addEventListener("test",Ph,Ph),window.removeEventListener("test",Ph,Ph)}catch{jS=!1}function qk(n,e,t,i,r,s,o,a,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(h){this.onError(h)}}var Ed=!1,yv=null,xv=!1,ZS=null,jk={onError:function(n){Ed=!0,yv=n}};function Zk(n,e,t,i,r,s,o,a,l){Ed=!1,yv=null,qk.apply(jk,arguments)}function Kk(n,e,t,i,r,s,o,a,l){if(Zk.apply(this,arguments),Ed){if(Ed){var f=yv;Ed=!1,yv=null}else throw Error(Xe(198));xv||(xv=!0,ZS=f)}}function tc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function D3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function LC(n){if(tc(n)!==n)throw Error(Xe(188))}function $k(n){var e=n.alternate;if(!e){if(e=tc(n),e===null)throw Error(Xe(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return LC(r),n;if(s===i)return LC(r),e;s=s.sibling}throw Error(Xe(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Xe(189))}}if(t.alternate!==i)throw Error(Xe(190))}if(t.tag!==3)throw Error(Xe(188));return t.stateNode.current===t?n:e}function N3(n){return n=$k(n),n!==null?O3(n):null}function O3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=O3(n);if(e!==null)return e;n=n.sibling}return null}var U3=hs.unstable_scheduleCallback,DC=hs.unstable_cancelCallback,Jk=hs.unstable_shouldYield,Qk=hs.unstable_requestPaint,ii=hs.unstable_now,eF=hs.unstable_getCurrentPriorityLevel,NM=hs.unstable_ImmediatePriority,k3=hs.unstable_UserBlockingPriority,Sv=hs.unstable_NormalPriority,tF=hs.unstable_LowPriority,F3=hs.unstable_IdlePriority,B_=null,Io=null;function nF(n){if(Io&&typeof Io.onCommitFiberRoot=="function")try{Io.onCommitFiberRoot(B_,n,void 0,(n.current.flags&128)===128)}catch{}}var so=Math.clz32?Math.clz32:sF,iF=Math.log,rF=Math.LN2;function sF(n){return n>>>=0,n===0?32:31-(iF(n)/rF|0)|0}var xg=64,Sg=4194304;function hd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=hd(a):(s&=o,s!==0&&(i=hd(s)))}else o=t&~r,o!==0?i=hd(o):s!==0&&(i=hd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-so(e),r=1<<t,i|=n[t],e&=~r;return i}function oF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aF(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-so(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=oF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function KS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function z3(){var n=xg;return xg<<=1,!(xg&4194240)&&(xg=64),n}function jx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function em(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-so(e),n[e]=t}function lF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-so(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function OM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-so(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var xn=0;function B3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var H3,UM,V3,G3,W3,$S=!1,wg=[],ll=null,ul=null,cl=null,lp=new Map,up=new Map,Za=[],uF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NC(n,e){switch(n){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":lp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":up.delete(e.pointerId)}}function Ih(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=nm(e),e!==null&&UM(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function cF(n,e,t,i,r){switch(e){case"focusin":return ll=Ih(ll,n,e,t,i,r),!0;case"dragenter":return ul=Ih(ul,n,e,t,i,r),!0;case"mouseover":return cl=Ih(cl,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return lp.set(s,Ih(lp.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,up.set(s,Ih(up.get(s)||null,n,e,t,i,r)),!0}return!1}function X3(n){var e=gu(n.target);if(e!==null){var t=tc(e);if(t!==null){if(e=t.tag,e===13){if(e=D3(t),e!==null){n.blockedOn=e,W3(n.priority,function(){V3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Z0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=JS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);YS=i,t.target.dispatchEvent(i),YS=null}else return e=nm(t),e!==null&&UM(e),n.blockedOn=t,!1;e.shift()}return!0}function OC(n,e,t){Z0(n)&&t.delete(e)}function fF(){$S=!1,ll!==null&&Z0(ll)&&(ll=null),ul!==null&&Z0(ul)&&(ul=null),cl!==null&&Z0(cl)&&(cl=null),lp.forEach(OC),up.forEach(OC)}function Lh(n,e){n.blockedOn===e&&(n.blockedOn=null,$S||($S=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,fF)))}function cp(n){function e(r){return Lh(r,n)}if(0<wg.length){Lh(wg[0],n);for(var t=1;t<wg.length;t++){var i=wg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ll!==null&&Lh(ll,n),ul!==null&&Lh(ul,n),cl!==null&&Lh(cl,n),lp.forEach(e),up.forEach(e),t=0;t<Za.length;t++)i=Za[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Za.length&&(t=Za[0],t.blockedOn===null);)X3(t),t.blockedOn===null&&Za.shift()}var Mf=Ta.ReactCurrentBatchConfig,Mv=!0;function hF(n,e,t,i){var r=xn,s=Mf.transition;Mf.transition=null;try{xn=1,kM(n,e,t,i)}finally{xn=r,Mf.transition=s}}function dF(n,e,t,i){var r=xn,s=Mf.transition;Mf.transition=null;try{xn=4,kM(n,e,t,i)}finally{xn=r,Mf.transition=s}}function kM(n,e,t,i){if(Mv){var r=JS(n,e,t,i);if(r===null)r1(n,e,i,Ev,t),NC(n,i);else if(cF(r,n,e,t,i))i.stopPropagation();else if(NC(n,i),e&4&&-1<uF.indexOf(n)){for(;r!==null;){var s=nm(r);if(s!==null&&H3(s),s=JS(n,e,t,i),s===null&&r1(n,e,i,Ev,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else r1(n,e,i,null,t)}}var Ev=null;function JS(n,e,t,i){if(Ev=null,n=DM(i),n=gu(n),n!==null)if(e=tc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=D3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ev=n,null}function Y3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eF()){case NM:return 1;case k3:return 4;case Sv:case tF:return 16;case F3:return 536870912;default:return 16}default:return 16}}var Qa=null,FM=null,K0=null;function q3(){if(K0)return K0;var n,e=FM,t=e.length,i,r="value"in Qa?Qa.value:Qa.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return K0=r.slice(n,1<i?1-i:void 0)}function $0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Mg(){return!0}function UC(){return!1}function vs(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mg:UC,this.isPropagationStopped=UC,this}return qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Mg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Mg)},persist:function(){},isPersistent:Mg}),e}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zM=vs(ih),tm=qn({},ih,{view:0,detail:0}),pF=vs(tm),Zx,Kx,Dh,H_=qn({},tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dh&&(Dh&&n.type==="mousemove"?(Zx=n.screenX-Dh.screenX,Kx=n.screenY-Dh.screenY):Kx=Zx=0,Dh=n),Zx)},movementY:function(n){return"movementY"in n?n.movementY:Kx}}),kC=vs(H_),mF=qn({},H_,{dataTransfer:0}),gF=vs(mF),vF=qn({},tm,{relatedTarget:0}),$x=vs(vF),_F=qn({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),yF=vs(_F),xF=qn({},ih,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),SF=vs(xF),wF=qn({},ih,{data:0}),FC=vs(wF),MF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=TF[n])?!!e[n]:!1}function BM(){return AF}var CF=qn({},tm,{key:function(n){if(n.key){var e=MF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?EF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BM,charCode:function(n){return n.type==="keypress"?$0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),bF=vs(CF),RF=qn({},H_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zC=vs(RF),PF=qn({},tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BM}),IF=vs(PF),LF=qn({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),DF=vs(LF),NF=qn({},H_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),OF=vs(NF),UF=[9,13,27,32],HM=_a&&"CompositionEvent"in window,Td=null;_a&&"documentMode"in document&&(Td=document.documentMode);var kF=_a&&"TextEvent"in window&&!Td,j3=_a&&(!HM||Td&&8<Td&&11>=Td),BC=String.fromCharCode(32),HC=!1;function Z3(n,e){switch(n){case"keyup":return UF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ef=!1;function FF(n,e){switch(n){case"compositionend":return K3(e);case"keypress":return e.which!==32?null:(HC=!0,BC);case"textInput":return n=e.data,n===BC&&HC?null:n;default:return null}}function zF(n,e){if(ef)return n==="compositionend"||!HM&&Z3(n,e)?(n=q3(),K0=FM=Qa=null,ef=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return j3&&e.locale!=="ko"?null:e.data;default:return null}}var BF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!BF[n.type]:e==="textarea"}function $3(n,e,t,i){b3(i),e=Tv(e,"onChange"),0<e.length&&(t=new zM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ad=null,fp=null;function HF(n){lI(n,0)}function V_(n){var e=rf(n);if(S3(e))return n}function VF(n,e){if(n==="change")return e}var J3=!1;if(_a){var Jx;if(_a){var Qx="oninput"in document;if(!Qx){var GC=document.createElement("div");GC.setAttribute("oninput","return;"),Qx=typeof GC.oninput=="function"}Jx=Qx}else Jx=!1;J3=Jx&&(!document.documentMode||9<document.documentMode)}function WC(){Ad&&(Ad.detachEvent("onpropertychange",Q3),fp=Ad=null)}function Q3(n){if(n.propertyName==="value"&&V_(fp)){var e=[];$3(e,fp,n,DM(n)),L3(HF,e)}}function GF(n,e,t){n==="focusin"?(WC(),Ad=e,fp=t,Ad.attachEvent("onpropertychange",Q3)):n==="focusout"&&WC()}function WF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return V_(fp)}function XF(n,e){if(n==="click")return V_(e)}function YF(n,e){if(n==="input"||n==="change")return V_(e)}function qF(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var lo=typeof Object.is=="function"?Object.is:qF;function hp(n,e){if(lo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!NS.call(e,r)||!lo(n[r],e[r]))return!1}return!0}function XC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function YC(n,e){var t=XC(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=XC(t)}}function eI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?eI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function tI(){for(var n=window,e=_v();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=_v(n.document)}return e}function VM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function jF(n){var e=tI(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&eI(t.ownerDocument.documentElement,t)){if(i!==null&&VM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=YC(t,s);var o=YC(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ZF=_a&&"documentMode"in document&&11>=document.documentMode,tf=null,QS=null,Cd=null,ew=!1;function qC(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ew||tf==null||tf!==_v(i)||(i=tf,"selectionStart"in i&&VM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cd&&hp(Cd,i)||(Cd=i,i=Tv(QS,"onSelect"),0<i.length&&(e=new zM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=tf)))}function Eg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var nf={animationend:Eg("Animation","AnimationEnd"),animationiteration:Eg("Animation","AnimationIteration"),animationstart:Eg("Animation","AnimationStart"),transitionend:Eg("Transition","TransitionEnd")},e1={},nI={};_a&&(nI=document.createElement("div").style,"AnimationEvent"in window||(delete nf.animationend.animation,delete nf.animationiteration.animation,delete nf.animationstart.animation),"TransitionEvent"in window||delete nf.transitionend.transition);function G_(n){if(e1[n])return e1[n];if(!nf[n])return n;var e=nf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in nI)return e1[n]=e[t];return n}var iI=G_("animationend"),rI=G_("animationiteration"),sI=G_("animationstart"),oI=G_("transitionend"),aI=new Map,jC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cl(n,e){aI.set(n,e),ec(e,[n])}for(var t1=0;t1<jC.length;t1++){var n1=jC[t1],KF=n1.toLowerCase(),$F=n1[0].toUpperCase()+n1.slice(1);Cl(KF,"on"+$F)}Cl(iI,"onAnimationEnd");Cl(rI,"onAnimationIteration");Cl(sI,"onAnimationStart");Cl("dblclick","onDoubleClick");Cl("focusin","onFocus");Cl("focusout","onBlur");Cl(oI,"onTransitionEnd");Of("onMouseEnter",["mouseout","mouseover"]);Of("onMouseLeave",["mouseout","mouseover"]);Of("onPointerEnter",["pointerout","pointerover"]);Of("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JF=new Set("cancel close invalid load scroll toggle".split(" ").concat(dd));function ZC(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Kk(i,e,void 0,n),n.currentTarget=null}function lI(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,f=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ZC(r,a,f),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,f=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ZC(r,a,f),s=l}}}if(xv)throw n=ZS,xv=!1,ZS=null,n}function Pn(n,e){var t=e[sw];t===void 0&&(t=e[sw]=new Set);var i=n+"__bubble";t.has(i)||(uI(e,n,2,!1),t.add(i))}function i1(n,e,t){var i=0;e&&(i|=4),uI(t,n,i,e)}var Tg="_reactListening"+Math.random().toString(36).slice(2);function dp(n){if(!n[Tg]){n[Tg]=!0,g3.forEach(function(t){t!=="selectionchange"&&(JF.has(t)||i1(t,!1,n),i1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Tg]||(e[Tg]=!0,i1("selectionchange",!1,e))}}function uI(n,e,t,i){switch(Y3(e)){case 1:var r=hF;break;case 4:r=dF;break;default:r=kM}t=r.bind(null,e,t,n),r=void 0,!jS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function r1(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=gu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}L3(function(){var f=s,h=DM(t),d=[];e:{var p=aI.get(n);if(p!==void 0){var m=zM,_=n;switch(n){case"keypress":if($0(t)===0)break e;case"keydown":case"keyup":m=bF;break;case"focusin":_="focus",m=$x;break;case"focusout":_="blur",m=$x;break;case"beforeblur":case"afterblur":m=$x;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=kC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=IF;break;case iI:case rI:case sI:m=yF;break;case oI:m=DF;break;case"scroll":m=pF;break;case"wheel":m=OF;break;case"copy":case"cut":case"paste":m=SF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=zC}var y=(e&4)!==0,x=!y&&n==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var S=f,w;S!==null;){w=S;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,g!==null&&(E=ap(S,g),E!=null&&y.push(pp(S,E,w)))),x)break;S=S.return}0<y.length&&(p=new m(p,_,null,t,h),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==YS&&(_=t.relatedTarget||t.fromElement)&&(gu(_)||_[ya]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=t.relatedTarget||t.toElement,m=f,_=_?gu(_):null,_!==null&&(x=tc(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=f),m!==_)){if(y=kC,E="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(y=zC,E="onPointerLeave",g="onPointerEnter",S="pointer"),x=m==null?p:rf(m),w=_==null?p:rf(_),p=new y(E,S+"leave",m,t,h),p.target=x,p.relatedTarget=w,E=null,gu(h)===f&&(y=new y(g,S+"enter",_,t,h),y.target=w,y.relatedTarget=x,E=y),x=E,m&&_)t:{for(y=m,g=_,S=0,w=y;w;w=yc(w))S++;for(w=0,E=g;E;E=yc(E))w++;for(;0<S-w;)y=yc(y),S--;for(;0<w-S;)g=yc(g),w--;for(;S--;){if(y===g||g!==null&&y===g.alternate)break t;y=yc(y),g=yc(g)}y=null}else y=null;m!==null&&KC(d,p,m,y,!1),_!==null&&x!==null&&KC(d,x,_,y,!0)}}e:{if(p=f?rf(f):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=VF;else if(VC(p))if(J3)I=YF;else{I=WF;var R=GF}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=XF);if(I&&(I=I(n,f))){$3(d,I,t,h);break e}R&&R(n,p,f),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&HS(p,"number",p.value)}switch(R=f?rf(f):window,n){case"focusin":(VC(R)||R.contentEditable==="true")&&(tf=R,QS=f,Cd=null);break;case"focusout":Cd=QS=tf=null;break;case"mousedown":ew=!0;break;case"contextmenu":case"mouseup":case"dragend":ew=!1,qC(d,t,h);break;case"selectionchange":if(ZF)break;case"keydown":case"keyup":qC(d,t,h)}var P;if(HM)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ef?Z3(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(j3&&t.locale!=="ko"&&(ef||b!=="onCompositionStart"?b==="onCompositionEnd"&&ef&&(P=q3()):(Qa=h,FM="value"in Qa?Qa.value:Qa.textContent,ef=!0)),R=Tv(f,b),0<R.length&&(b=new FC(b,n,null,t,h),d.push({event:b,listeners:R}),P?b.data=P:(P=K3(t),P!==null&&(b.data=P)))),(P=kF?FF(n,t):zF(n,t))&&(f=Tv(f,"onBeforeInput"),0<f.length&&(h=new FC("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:f}),h.data=P))}lI(d,e)})}function pp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Tv(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ap(n,t),s!=null&&i.unshift(pp(n,s,r)),s=ap(n,e),s!=null&&i.push(pp(n,s,r))),n=n.return}return i}function yc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function KC(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,f=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&f!==null&&(a=f,r?(l=ap(t,s),l!=null&&o.unshift(pp(t,l,a))):r||(l=ap(t,s),l!=null&&o.push(pp(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var QF=/\r\n?/g,ez=/\u0000|\uFFFD/g;function $C(n){return(typeof n=="string"?n:""+n).replace(QF,`
`).replace(ez,"")}function Ag(n,e,t){if(e=$C(e),$C(n)!==e&&t)throw Error(Xe(425))}function Av(){}var tw=null,nw=null;function iw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rw=typeof setTimeout=="function"?setTimeout:void 0,tz=typeof clearTimeout=="function"?clearTimeout:void 0,JC=typeof Promise=="function"?Promise:void 0,nz=typeof queueMicrotask=="function"?queueMicrotask:typeof JC<"u"?function(n){return JC.resolve(null).then(n).catch(iz)}:rw;function iz(n){setTimeout(function(){throw n})}function s1(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),cp(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);cp(e)}function fl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function QC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rh=Math.random().toString(36).slice(2),Eo="__reactFiber$"+rh,mp="__reactProps$"+rh,ya="__reactContainer$"+rh,sw="__reactEvents$"+rh,rz="__reactListeners$"+rh,sz="__reactHandles$"+rh;function gu(n){var e=n[Eo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ya]||t[Eo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=QC(n);n!==null;){if(t=n[Eo])return t;n=QC(n)}return e}n=t,t=n.parentNode}return null}function nm(n){return n=n[Eo]||n[ya],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function rf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Xe(33))}function W_(n){return n[mp]||null}var ow=[],sf=-1;function bl(n){return{current:n}}function Ln(n){0>sf||(n.current=ow[sf],ow[sf]=null,sf--)}function Rn(n,e){sf++,ow[sf]=n.current,n.current=e}var xl={},ir=bl(xl),Or=bl(!1),Hu=xl;function Uf(n,e){var t=n.type.contextTypes;if(!t)return xl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ur(n){return n=n.childContextTypes,n!=null}function Cv(){Ln(Or),Ln(ir)}function eb(n,e,t){if(ir.current!==xl)throw Error(Xe(168));Rn(ir,e),Rn(Or,t)}function cI(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Xe(108,Gk(n)||"Unknown",r));return qn({},t,i)}function bv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xl,Hu=ir.current,Rn(ir,n),Rn(Or,Or.current),!0}function tb(n,e,t){var i=n.stateNode;if(!i)throw Error(Xe(169));t?(n=cI(n,e,Hu),i.__reactInternalMemoizedMergedChildContext=n,Ln(Or),Ln(ir),Rn(ir,n)):Ln(Or),Rn(Or,t)}var ra=null,X_=!1,o1=!1;function fI(n){ra===null?ra=[n]:ra.push(n)}function oz(n){X_=!0,fI(n)}function Rl(){if(!o1&&ra!==null){o1=!0;var n=0,e=xn;try{var t=ra;for(xn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ra=null,X_=!1}catch(r){throw ra!==null&&(ra=ra.slice(n+1)),U3(NM,Rl),r}finally{xn=e,o1=!1}}return null}var of=[],af=0,Rv=null,Pv=0,Ps=[],Is=0,Vu=null,ca=1,fa="";function ou(n,e){of[af++]=Pv,of[af++]=Rv,Rv=n,Pv=e}function hI(n,e,t){Ps[Is++]=ca,Ps[Is++]=fa,Ps[Is++]=Vu,Vu=n;var i=ca;n=fa;var r=32-so(i)-1;i&=~(1<<r),t+=1;var s=32-so(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ca=1<<32-so(e)+r|t<<r|i,fa=s+n}else ca=1<<s|t<<r|i,fa=n}function GM(n){n.return!==null&&(ou(n,1),hI(n,1,0))}function WM(n){for(;n===Rv;)Rv=of[--af],of[af]=null,Pv=of[--af],of[af]=null;for(;n===Vu;)Vu=Ps[--Is],Ps[Is]=null,fa=Ps[--Is],Ps[Is]=null,ca=Ps[--Is],Ps[Is]=null}var ls=null,os=null,Un=!1,no=null;function dI(n,e){var t=Os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function nb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ls=n,os=fl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ls=n,os=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vu!==null?{id:ca,overflow:fa}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ls=n,os=null,!0):!1;default:return!1}}function aw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lw(n){if(Un){var e=os;if(e){var t=e;if(!nb(n,e)){if(aw(n))throw Error(Xe(418));e=fl(t.nextSibling);var i=ls;e&&nb(n,e)?dI(i,t):(n.flags=n.flags&-4097|2,Un=!1,ls=n)}}else{if(aw(n))throw Error(Xe(418));n.flags=n.flags&-4097|2,Un=!1,ls=n}}}function ib(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ls=n}function Cg(n){if(n!==ls)return!1;if(!Un)return ib(n),Un=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!iw(n.type,n.memoizedProps)),e&&(e=os)){if(aw(n))throw pI(),Error(Xe(418));for(;e;)dI(n,e),e=fl(e.nextSibling)}if(ib(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Xe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){os=fl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}os=null}}else os=ls?fl(n.stateNode.nextSibling):null;return!0}function pI(){for(var n=os;n;)n=fl(n.nextSibling)}function kf(){os=ls=null,Un=!1}function XM(n){no===null?no=[n]:no.push(n)}var az=Ta.ReactCurrentBatchConfig;function Qs(n,e){if(n&&n.defaultProps){e=qn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Iv=bl(null),Lv=null,lf=null,YM=null;function qM(){YM=lf=Lv=null}function jM(n){var e=Iv.current;Ln(Iv),n._currentValue=e}function uw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Ef(n,e){Lv=n,YM=lf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Nr=!0),n.firstContext=null)}function Hs(n){var e=n._currentValue;if(YM!==n)if(n={context:n,memoizedValue:e,next:null},lf===null){if(Lv===null)throw Error(Xe(308));lf=n,Lv.dependencies={lanes:0,firstContext:n}}else lf=lf.next=n;return e}var vu=null;function ZM(n){vu===null?vu=[n]:vu.push(n)}function mI(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,ZM(e)):(t.next=r.next,r.next=t),e.interleaved=t,xa(n,i)}function xa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var qa=!1;function KM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gI(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ga(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function hl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ln&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xa(n,t)}return r=i.interleaved,r===null?(e.next=e,ZM(i)):(e.next=r.next,r.next=e),i.interleaved=e,xa(n,t)}function J0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,OM(n,t)}}function rb(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Dv(n,e,t,i){var r=n.updateQueue;qa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=f:a.next=f,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=f=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=n,y=a;switch(p=e,m=t,y.tag){case 1:if(_=y.payload,typeof _=="function"){d=_.call(m,d,p);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=y.payload,p=typeof _=="function"?_.call(m,d,p):_,p==null)break e;d=qn({},d,p);break e;case 2:qa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(f=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=f,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Wu|=o,n.lanes=o,n.memoizedState=d}}function sb(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Xe(191,r));r.call(i)}}}var vI=new m3.Component().refs;function cw(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:qn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Y_={isMounted:function(n){return(n=n._reactInternals)?tc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=_r(),r=pl(n),s=ga(i,r);s.payload=e,t!=null&&(s.callback=t),e=hl(n,s,r),e!==null&&(oo(e,n,r,i),J0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=_r(),r=pl(n),s=ga(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=hl(n,s,r),e!==null&&(oo(e,n,r,i),J0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=_r(),i=pl(n),r=ga(t,i);r.tag=2,e!=null&&(r.callback=e),e=hl(n,r,i),e!==null&&(oo(e,n,i,t),J0(e,n,i))}};function ob(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hp(t,i)||!hp(r,s):!0}function _I(n,e,t){var i=!1,r=xl,s=e.contextType;return typeof s=="object"&&s!==null?s=Hs(s):(r=Ur(e)?Hu:ir.current,i=e.contextTypes,s=(i=i!=null)?Uf(n,r):xl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Y_,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function ab(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Y_.enqueueReplaceState(e,e.state,null)}function fw(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=vI,KM(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Hs(s):(s=Ur(e)?Hu:ir.current,r.context=Uf(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cw(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Y_.enqueueReplaceState(r,r.state,null),Dv(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Nh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Xe(309));var i=t.stateNode}if(!i)throw Error(Xe(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===vI&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Xe(284));if(!t._owner)throw Error(Xe(290,n))}return n}function bg(n,e){throw n=Object.prototype.toString.call(e),Error(Xe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function lb(n){var e=n._init;return e(n._payload)}function yI(n){function e(g,S){if(n){var w=g.deletions;w===null?(g.deletions=[S],g.flags|=16):w.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function i(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function r(g,S){return g=ml(g,S),g.index=0,g.sibling=null,g}function s(g,S,w){return g.index=w,n?(w=g.alternate,w!==null?(w=w.index,w<S?(g.flags|=2,S):w):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,w,E){return S===null||S.tag!==6?(S=d1(w,g.mode,E),S.return=g,S):(S=r(S,w),S.return=g,S)}function l(g,S,w,E){var I=w.type;return I===Qc?h(g,S,w.props.children,E,w.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ya&&lb(I)===S.type)?(E=r(S,w.props),E.ref=Nh(g,S,w),E.return=g,E):(E=rv(w.type,w.key,w.props,null,g.mode,E),E.ref=Nh(g,S,w),E.return=g,E)}function f(g,S,w,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=p1(w,g.mode,E),S.return=g,S):(S=r(S,w.children||[]),S.return=g,S)}function h(g,S,w,E,I){return S===null||S.tag!==7?(S=bu(w,g.mode,E,I),S.return=g,S):(S=r(S,w),S.return=g,S)}function d(g,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=d1(""+S,g.mode,w),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vg:return w=rv(S.type,S.key,S.props,null,g.mode,w),w.ref=Nh(g,null,S),w.return=g,w;case Jc:return S=p1(S,g.mode,w),S.return=g,S;case Ya:var E=S._init;return d(g,E(S._payload),w)}if(fd(S)||Rh(S))return S=bu(S,g.mode,w,null),S.return=g,S;bg(g,S)}return null}function p(g,S,w,E){var I=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:a(g,S,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vg:return w.key===I?l(g,S,w,E):null;case Jc:return w.key===I?f(g,S,w,E):null;case Ya:return I=w._init,p(g,S,I(w._payload),E)}if(fd(w)||Rh(w))return I!==null?null:h(g,S,w,E,null);bg(g,w)}return null}function m(g,S,w,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(w)||null,a(S,g,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case vg:return g=g.get(E.key===null?w:E.key)||null,l(S,g,E,I);case Jc:return g=g.get(E.key===null?w:E.key)||null,f(S,g,E,I);case Ya:var R=E._init;return m(g,S,w,R(E._payload),I)}if(fd(E)||Rh(E))return g=g.get(w)||null,h(S,g,E,I,null);bg(S,E)}return null}function _(g,S,w,E){for(var I=null,R=null,P=S,b=S=0,C=null;P!==null&&b<w.length;b++){P.index>b?(C=P,P=null):C=P.sibling;var A=p(g,P,w[b],E);if(A===null){P===null&&(P=C);break}n&&P&&A.alternate===null&&e(g,P),S=s(A,S,b),R===null?I=A:R.sibling=A,R=A,P=C}if(b===w.length)return t(g,P),Un&&ou(g,b),I;if(P===null){for(;b<w.length;b++)P=d(g,w[b],E),P!==null&&(S=s(P,S,b),R===null?I=P:R.sibling=P,R=P);return Un&&ou(g,b),I}for(P=i(g,P);b<w.length;b++)C=m(P,g,b,w[b],E),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?b:C.key),S=s(C,S,b),R===null?I=C:R.sibling=C,R=C);return n&&P.forEach(function(O){return e(g,O)}),Un&&ou(g,b),I}function y(g,S,w,E){var I=Rh(w);if(typeof I!="function")throw Error(Xe(150));if(w=I.call(w),w==null)throw Error(Xe(151));for(var R=I=null,P=S,b=S=0,C=null,A=w.next();P!==null&&!A.done;b++,A=w.next()){P.index>b?(C=P,P=null):C=P.sibling;var O=p(g,P,A.value,E);if(O===null){P===null&&(P=C);break}n&&P&&O.alternate===null&&e(g,P),S=s(O,S,b),R===null?I=O:R.sibling=O,R=O,P=C}if(A.done)return t(g,P),Un&&ou(g,b),I;if(P===null){for(;!A.done;b++,A=w.next())A=d(g,A.value,E),A!==null&&(S=s(A,S,b),R===null?I=A:R.sibling=A,R=A);return Un&&ou(g,b),I}for(P=i(g,P);!A.done;b++,A=w.next())A=m(P,g,b,A.value,E),A!==null&&(n&&A.alternate!==null&&P.delete(A.key===null?b:A.key),S=s(A,S,b),R===null?I=A:R.sibling=A,R=A);return n&&P.forEach(function(F){return e(g,F)}),Un&&ou(g,b),I}function x(g,S,w,E){if(typeof w=="object"&&w!==null&&w.type===Qc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case vg:e:{for(var I=w.key,R=S;R!==null;){if(R.key===I){if(I=w.type,I===Qc){if(R.tag===7){t(g,R.sibling),S=r(R,w.props.children),S.return=g,g=S;break e}}else if(R.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ya&&lb(I)===R.type){t(g,R.sibling),S=r(R,w.props),S.ref=Nh(g,R,w),S.return=g,g=S;break e}t(g,R);break}else e(g,R);R=R.sibling}w.type===Qc?(S=bu(w.props.children,g.mode,E,w.key),S.return=g,g=S):(E=rv(w.type,w.key,w.props,null,g.mode,E),E.ref=Nh(g,S,w),E.return=g,g=E)}return o(g);case Jc:e:{for(R=w.key;S!==null;){if(S.key===R)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){t(g,S.sibling),S=r(S,w.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=p1(w,g.mode,E),S.return=g,g=S}return o(g);case Ya:return R=w._init,x(g,S,R(w._payload),E)}if(fd(w))return _(g,S,w,E);if(Rh(w))return y(g,S,w,E);bg(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(t(g,S.sibling),S=r(S,w),S.return=g,g=S):(t(g,S),S=d1(w,g.mode,E),S.return=g,g=S),o(g)):t(g,S)}return x}var Ff=yI(!0),xI=yI(!1),im={},Lo=bl(im),gp=bl(im),vp=bl(im);function _u(n){if(n===im)throw Error(Xe(174));return n}function $M(n,e){switch(Rn(vp,e),Rn(gp,n),Rn(Lo,im),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:GS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=GS(e,n)}Ln(Lo),Rn(Lo,e)}function zf(){Ln(Lo),Ln(gp),Ln(vp)}function SI(n){_u(vp.current);var e=_u(Lo.current),t=GS(e,n.type);e!==t&&(Rn(gp,n),Rn(Lo,t))}function JM(n){gp.current===n&&(Ln(Lo),Ln(gp))}var Bn=bl(0);function Nv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a1=[];function QM(){for(var n=0;n<a1.length;n++)a1[n]._workInProgressVersionPrimary=null;a1.length=0}var Q0=Ta.ReactCurrentDispatcher,l1=Ta.ReactCurrentBatchConfig,Gu=0,Yn=null,vi=null,Ri=null,Ov=!1,bd=!1,_p=0,lz=0;function Xi(){throw Error(Xe(321))}function eE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!lo(n[t],e[t]))return!1;return!0}function tE(n,e,t,i,r,s){if(Gu=s,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Q0.current=n===null||n.memoizedState===null?hz:dz,n=t(i,r),bd){s=0;do{if(bd=!1,_p=0,25<=s)throw Error(Xe(301));s+=1,Ri=vi=null,e.updateQueue=null,Q0.current=pz,n=t(i,r)}while(bd)}if(Q0.current=Uv,e=vi!==null&&vi.next!==null,Gu=0,Ri=vi=Yn=null,Ov=!1,e)throw Error(Xe(300));return n}function nE(){var n=_p!==0;return _p=0,n}function So(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?Yn.memoizedState=Ri=n:Ri=Ri.next=n,Ri}function Vs(){if(vi===null){var n=Yn.alternate;n=n!==null?n.memoizedState:null}else n=vi.next;var e=Ri===null?Yn.memoizedState:Ri.next;if(e!==null)Ri=e,vi=n;else{if(n===null)throw Error(Xe(310));vi=n,n={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Ri===null?Yn.memoizedState=Ri=n:Ri=Ri.next=n}return Ri}function yp(n,e){return typeof e=="function"?e(n):e}function u1(n){var e=Vs(),t=e.queue;if(t===null)throw Error(Xe(311));t.lastRenderedReducer=n;var i=vi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,f=s;do{var h=f.lane;if((Gu&h)===h)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var d={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Yn.lanes|=h,Wu|=h}f=f.next}while(f!==null&&f!==s);l===null?o=i:l.next=a,lo(i,e.memoizedState)||(Nr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Yn.lanes|=s,Wu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function c1(n){var e=Vs(),t=e.queue;if(t===null)throw Error(Xe(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);lo(s,e.memoizedState)||(Nr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function wI(){}function MI(n,e){var t=Yn,i=Vs(),r=e(),s=!lo(i.memoizedState,r);if(s&&(i.memoizedState=r,Nr=!0),i=i.queue,iE(AI.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Ri!==null&&Ri.memoizedState.tag&1){if(t.flags|=2048,xp(9,TI.bind(null,t,i,r,e),void 0,null),Li===null)throw Error(Xe(349));Gu&30||EI(t,e,r)}return r}function EI(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function TI(n,e,t,i){e.value=t,e.getSnapshot=i,CI(e)&&bI(n)}function AI(n,e,t){return t(function(){CI(e)&&bI(n)})}function CI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!lo(n,t)}catch{return!0}}function bI(n){var e=xa(n,1);e!==null&&oo(e,n,1,-1)}function ub(n){var e=So();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:n},e.queue=n,n=n.dispatch=fz.bind(null,Yn,n),[e.memoizedState,n]}function xp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function RI(){return Vs().memoizedState}function ev(n,e,t,i){var r=So();Yn.flags|=n,r.memoizedState=xp(1|e,t,void 0,i===void 0?null:i)}function q_(n,e,t,i){var r=Vs();i=i===void 0?null:i;var s=void 0;if(vi!==null){var o=vi.memoizedState;if(s=o.destroy,i!==null&&eE(i,o.deps)){r.memoizedState=xp(e,t,s,i);return}}Yn.flags|=n,r.memoizedState=xp(1|e,t,s,i)}function cb(n,e){return ev(8390656,8,n,e)}function iE(n,e){return q_(2048,8,n,e)}function PI(n,e){return q_(4,2,n,e)}function II(n,e){return q_(4,4,n,e)}function LI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function DI(n,e,t){return t=t!=null?t.concat([n]):null,q_(4,4,LI.bind(null,e,n),t)}function rE(){}function NI(n,e){var t=Vs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&eE(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function OI(n,e){var t=Vs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&eE(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function UI(n,e,t){return Gu&21?(lo(t,e)||(t=z3(),Yn.lanes|=t,Wu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Nr=!0),n.memoizedState=t)}function uz(n,e){var t=xn;xn=t!==0&&4>t?t:4,n(!0);var i=l1.transition;l1.transition={};try{n(!1),e()}finally{xn=t,l1.transition=i}}function kI(){return Vs().memoizedState}function cz(n,e,t){var i=pl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},FI(n))zI(e,t);else if(t=mI(n,e,t,i),t!==null){var r=_r();oo(t,n,i,r),BI(t,e,i)}}function fz(n,e,t){var i=pl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(FI(n))zI(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,lo(a,o)){var l=e.interleaved;l===null?(r.next=r,ZM(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=mI(n,e,r,i),t!==null&&(r=_r(),oo(t,n,i,r),BI(t,e,i))}}function FI(n){var e=n.alternate;return n===Yn||e!==null&&e===Yn}function zI(n,e){bd=Ov=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function BI(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,OM(n,t)}}var Uv={readContext:Hs,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},hz={readContext:Hs,useCallback:function(n,e){return So().memoizedState=[n,e===void 0?null:e],n},useContext:Hs,useEffect:cb,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ev(4194308,4,LI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ev(4194308,4,n,e)},useInsertionEffect:function(n,e){return ev(4,2,n,e)},useMemo:function(n,e){var t=So();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=So();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=cz.bind(null,Yn,n),[i.memoizedState,n]},useRef:function(n){var e=So();return n={current:n},e.memoizedState=n},useState:ub,useDebugValue:rE,useDeferredValue:function(n){return So().memoizedState=n},useTransition:function(){var n=ub(!1),e=n[0];return n=uz.bind(null,n[1]),So().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Yn,r=So();if(Un){if(t===void 0)throw Error(Xe(407));t=t()}else{if(t=e(),Li===null)throw Error(Xe(349));Gu&30||EI(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,cb(AI.bind(null,i,s,n),[n]),i.flags|=2048,xp(9,TI.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=So(),e=Li.identifierPrefix;if(Un){var t=fa,i=ca;t=(i&~(1<<32-so(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=_p++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=lz++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},dz={readContext:Hs,useCallback:NI,useContext:Hs,useEffect:iE,useImperativeHandle:DI,useInsertionEffect:PI,useLayoutEffect:II,useMemo:OI,useReducer:u1,useRef:RI,useState:function(){return u1(yp)},useDebugValue:rE,useDeferredValue:function(n){var e=Vs();return UI(e,vi.memoizedState,n)},useTransition:function(){var n=u1(yp)[0],e=Vs().memoizedState;return[n,e]},useMutableSource:wI,useSyncExternalStore:MI,useId:kI,unstable_isNewReconciler:!1},pz={readContext:Hs,useCallback:NI,useContext:Hs,useEffect:iE,useImperativeHandle:DI,useInsertionEffect:PI,useLayoutEffect:II,useMemo:OI,useReducer:c1,useRef:RI,useState:function(){return c1(yp)},useDebugValue:rE,useDeferredValue:function(n){var e=Vs();return vi===null?e.memoizedState=n:UI(e,vi.memoizedState,n)},useTransition:function(){var n=c1(yp)[0],e=Vs().memoizedState;return[n,e]},useMutableSource:wI,useSyncExternalStore:MI,useId:kI,unstable_isNewReconciler:!1};function Bf(n,e){try{var t="",i=e;do t+=Vk(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function f1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function hw(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var mz=typeof WeakMap=="function"?WeakMap:Map;function HI(n,e,t){t=ga(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Fv||(Fv=!0,ww=i),hw(n,e)},t}function VI(n,e,t){t=ga(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){hw(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){hw(n,e),typeof i!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function fb(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new mz;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=Rz.bind(null,n,e,t),e.then(n,n))}function hb(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function db(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ga(-1,1),e.tag=2,hl(t,e,1))),t.lanes|=1),n)}var gz=Ta.ReactCurrentOwner,Nr=!1;function hr(n,e,t,i){e.child=n===null?xI(e,null,t,i):Ff(e,n.child,t,i)}function pb(n,e,t,i,r){t=t.render;var s=e.ref;return Ef(e,r),i=tE(n,e,t,i,s,r),t=nE(),n!==null&&!Nr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Sa(n,e,r)):(Un&&t&&GM(e),e.flags|=1,hr(n,e,i,r),e.child)}function mb(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!hE(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,GI(n,e,s,i,r)):(n=rv(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:hp,t(o,i)&&n.ref===e.ref)return Sa(n,e,r)}return e.flags|=1,n=ml(s,i),n.ref=e.ref,n.return=e,e.child=n}function GI(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(hp(s,i)&&n.ref===e.ref)if(Nr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Nr=!0);else return e.lanes=n.lanes,Sa(n,e,r)}return dw(n,e,t,i,r)}function WI(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(cf,Qr),Qr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Rn(cf,Qr),Qr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Rn(cf,Qr),Qr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Rn(cf,Qr),Qr|=i;return hr(n,e,r,t),e.child}function XI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function dw(n,e,t,i,r){var s=Ur(t)?Hu:ir.current;return s=Uf(e,s),Ef(e,r),t=tE(n,e,t,i,s,r),i=nE(),n!==null&&!Nr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Sa(n,e,r)):(Un&&i&&GM(e),e.flags|=1,hr(n,e,t,r),e.child)}function gb(n,e,t,i,r){if(Ur(t)){var s=!0;bv(e)}else s=!1;if(Ef(e,r),e.stateNode===null)tv(n,e),_I(e,t,i),fw(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=Hs(f):(f=Ur(t)?Hu:ir.current,f=Uf(e,f));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==f)&&ab(e,o,i,f),qa=!1;var p=e.memoizedState;o.state=p,Dv(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Or.current||qa?(typeof h=="function"&&(cw(e,t,h,i),l=e.memoizedState),(a=qa||ob(e,t,a,i,p,l,f))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=f,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gI(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:Qs(e.type,a),o.props=f,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Hs(l):(l=Ur(t)?Hu:ir.current,l=Uf(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&ab(e,o,i,l),qa=!1,p=e.memoizedState,o.state=p,Dv(e,i,o,r);var _=e.memoizedState;a!==d||p!==_||Or.current||qa?(typeof m=="function"&&(cw(e,t,m,i),_=e.memoizedState),(f=qa||ob(e,t,f,i,p,_,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=l,i=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return pw(n,e,t,i,s,r)}function pw(n,e,t,i,r,s){XI(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&tb(e,t,!1),Sa(n,e,s);i=e.stateNode,gz.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Ff(e,n.child,null,s),e.child=Ff(e,null,a,s)):hr(n,e,a,s),e.memoizedState=i.state,r&&tb(e,t,!0),e.child}function YI(n){var e=n.stateNode;e.pendingContext?eb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&eb(n,e.context,!1),$M(n,e.containerInfo)}function vb(n,e,t,i,r){return kf(),XM(r),e.flags|=256,hr(n,e,t,i),e.child}var mw={dehydrated:null,treeContext:null,retryLane:0};function gw(n){return{baseLanes:n,cachePool:null,transitions:null}}function qI(n,e,t){var i=e.pendingProps,r=Bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Rn(Bn,r&1),n===null)return lw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=K_(o,i,0,null),n=bu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=gw(t),e.memoizedState=mw,n):sE(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return vz(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ml(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ml(a,s):(s=bu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?gw(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=mw,i}return s=n.child,n=s.sibling,i=ml(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function sE(n,e){return e=K_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rg(n,e,t,i){return i!==null&&XM(i),Ff(e,n.child,null,t),n=sE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function vz(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=f1(Error(Xe(422))),Rg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=K_({mode:"visible",children:i.children},r,0,null),s=bu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ff(e,n.child,null,o),e.child.memoizedState=gw(o),e.memoizedState=mw,s);if(!(e.mode&1))return Rg(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Xe(419)),i=f1(s,i,void 0),Rg(n,e,o,i)}if(a=(o&n.childLanes)!==0,Nr||a){if(i=Li,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,xa(n,r),oo(i,n,r,-1))}return fE(),i=f1(Error(Xe(421))),Rg(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=Pz.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,os=fl(r.nextSibling),ls=e,Un=!0,no=null,n!==null&&(Ps[Is++]=ca,Ps[Is++]=fa,Ps[Is++]=Vu,ca=n.id,fa=n.overflow,Vu=e),e=sE(e,i.children),e.flags|=4096,e)}function _b(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),uw(n.return,e,t)}function h1(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function jI(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(hr(n,e,i.children,t),i=Bn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_b(n,t,e);else if(n.tag===19)_b(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Rn(Bn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Nv(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),h1(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Nv(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}h1(e,!0,t,null,s);break;case"together":h1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Sa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Wu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Xe(153));if(e.child!==null){for(n=e.child,t=ml(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ml(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function _z(n,e,t){switch(e.tag){case 3:YI(e),kf();break;case 5:SI(e);break;case 1:Ur(e.type)&&bv(e);break;case 4:$M(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Rn(Iv,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Rn(Bn,Bn.current&1),e.flags|=128,null):t&e.child.childLanes?qI(n,e,t):(Rn(Bn,Bn.current&1),n=Sa(n,e,t),n!==null?n.sibling:null);Rn(Bn,Bn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return jI(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rn(Bn,Bn.current),i)break;return null;case 22:case 23:return e.lanes=0,WI(n,e,t)}return Sa(n,e,t)}var ZI,vw,KI,$I;ZI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};vw=function(){};KI=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,_u(Lo.current);var s=null;switch(t){case"input":r=zS(n,r),i=zS(n,i),s=[];break;case"select":r=qn({},r,{value:void 0}),i=qn({},i,{value:void 0}),s=[];break;case"textarea":r=VS(n,r),i=VS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Av)}WS(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var a=r[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(sp.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var l=i[f];if(a=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&l!==a&&(l!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(f,t)),t=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(sp.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Pn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(f,l))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};$I=function(n,e,t,i){t!==i&&(e.flags|=4)};function Oh(n,e){if(!Un)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Yi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function yz(n,e,t){var i=e.pendingProps;switch(WM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(e),null;case 1:return Ur(e.type)&&Cv(),Yi(e),null;case 3:return i=e.stateNode,zf(),Ln(Or),Ln(ir),QM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Cg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,no!==null&&(Tw(no),no=null))),vw(n,e),Yi(e),null;case 5:JM(e);var r=_u(vp.current);if(t=e.type,n!==null&&e.stateNode!=null)KI(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Xe(166));return Yi(e),null}if(n=_u(Lo.current),Cg(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Eo]=e,i[mp]=s,n=(e.mode&1)!==0,t){case"dialog":Pn("cancel",i),Pn("close",i);break;case"iframe":case"object":case"embed":Pn("load",i);break;case"video":case"audio":for(r=0;r<dd.length;r++)Pn(dd[r],i);break;case"source":Pn("error",i);break;case"img":case"image":case"link":Pn("error",i),Pn("load",i);break;case"details":Pn("toggle",i);break;case"input":CC(i,s),Pn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Pn("invalid",i);break;case"textarea":RC(i,s),Pn("invalid",i)}WS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ag(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ag(i.textContent,a,n),r=["children",""+a]):sp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pn("scroll",i)}switch(t){case"input":_g(i),bC(i,s,!0);break;case"textarea":_g(i),PC(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Av)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=E3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Eo]=e,n[mp]=i,ZI(n,e,!1,!1),e.stateNode=n;e:{switch(o=XS(t,i),t){case"dialog":Pn("cancel",n),Pn("close",n),r=i;break;case"iframe":case"object":case"embed":Pn("load",n),r=i;break;case"video":case"audio":for(r=0;r<dd.length;r++)Pn(dd[r],n);r=i;break;case"source":Pn("error",n),r=i;break;case"img":case"image":case"link":Pn("error",n),Pn("load",n),r=i;break;case"details":Pn("toggle",n),r=i;break;case"input":CC(n,i),r=zS(n,i),Pn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=qn({},i,{value:void 0}),Pn("invalid",n);break;case"textarea":RC(n,i),r=VS(n,i),Pn("invalid",n);break;default:r=i}WS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?C3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&op(n,l):typeof l=="number"&&op(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pn("scroll",n):l!=null&&RM(n,s,l,o))}switch(t){case"input":_g(n),bC(n,i,!1);break;case"textarea":_g(n),PC(n);break;case"option":i.value!=null&&n.setAttribute("value",""+yl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?xf(n,!!i.multiple,s,!1):i.defaultValue!=null&&xf(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Av)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yi(e),null;case 6:if(n&&e.stateNode!=null)$I(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Xe(166));if(t=_u(vp.current),_u(Lo.current),Cg(e)){if(i=e.stateNode,t=e.memoizedProps,i[Eo]=e,(s=i.nodeValue!==t)&&(n=ls,n!==null))switch(n.tag){case 3:Ag(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ag(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Eo]=e,e.stateNode=i}return Yi(e),null;case 13:if(Ln(Bn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Un&&os!==null&&e.mode&1&&!(e.flags&128))pI(),kf(),e.flags|=98560,s=!1;else if(s=Cg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xe(317));s[Eo]=e}else kf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yi(e),s=!1}else no!==null&&(Tw(no),no=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Bn.current&1?yi===0&&(yi=3):fE())),e.updateQueue!==null&&(e.flags|=4),Yi(e),null);case 4:return zf(),vw(n,e),n===null&&dp(e.stateNode.containerInfo),Yi(e),null;case 10:return jM(e.type._context),Yi(e),null;case 17:return Ur(e.type)&&Cv(),Yi(e),null;case 19:if(Ln(Bn),s=e.memoizedState,s===null)return Yi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Oh(s,!1);else{if(yi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Nv(n),o!==null){for(e.flags|=128,Oh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Rn(Bn,Bn.current&1|2),e.child}n=n.sibling}s.tail!==null&&ii()>Hf&&(e.flags|=128,i=!0,Oh(s,!1),e.lanes=4194304)}else{if(!i)if(n=Nv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Oh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Un)return Yi(e),null}else 2*ii()-s.renderingStartTime>Hf&&t!==1073741824&&(e.flags|=128,i=!0,Oh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ii(),e.sibling=null,t=Bn.current,Rn(Bn,i?t&1|2:t&1),e):(Yi(e),null);case 22:case 23:return cE(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Qr&1073741824&&(Yi(e),e.subtreeFlags&6&&(e.flags|=8192)):Yi(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function xz(n,e){switch(WM(e),e.tag){case 1:return Ur(e.type)&&Cv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return zf(),Ln(Or),Ln(ir),QM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return JM(e),null;case 13:if(Ln(Bn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));kf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ln(Bn),null;case 4:return zf(),null;case 10:return jM(e.type._context),null;case 22:case 23:return cE(),null;case 24:return null;default:return null}}var Pg=!1,Ji=!1,Sz=typeof WeakSet=="function"?WeakSet:Set,ft=null;function uf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Kn(n,e,i)}else t.current=null}function _w(n,e,t){try{t()}catch(i){Kn(n,e,i)}}var yb=!1;function wz(n,e){if(tw=Mv,n=tI(),VM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,f=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++f===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(nw={focusedElem:n,selectionRange:t},Mv=!1,ft=e;ft!==null;)if(e=ft,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ft=n;else for(;ft!==null;){e=ft;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var y=_.memoizedProps,x=_.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Qs(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(E){Kn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,ft=n;break}ft=e.return}return _=yb,yb=!1,_}function Rd(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&_w(e,t,s)}r=r.next}while(r!==i)}}function j_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function yw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function JI(n){var e=n.alternate;e!==null&&(n.alternate=null,JI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Eo],delete e[mp],delete e[sw],delete e[rz],delete e[sz])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function QI(n){return n.tag===5||n.tag===3||n.tag===4}function xb(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||QI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Av));else if(i!==4&&(n=n.child,n!==null))for(xw(n,e,t),n=n.sibling;n!==null;)xw(n,e,t),n=n.sibling}function Sw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Sw(n,e,t),n=n.sibling;n!==null;)Sw(n,e,t),n=n.sibling}var Oi=null,to=!1;function Oa(n,e,t){for(t=t.child;t!==null;)eL(n,e,t),t=t.sibling}function eL(n,e,t){if(Io&&typeof Io.onCommitFiberUnmount=="function")try{Io.onCommitFiberUnmount(B_,t)}catch{}switch(t.tag){case 5:Ji||uf(t,e);case 6:var i=Oi,r=to;Oi=null,Oa(n,e,t),Oi=i,to=r,Oi!==null&&(to?(n=Oi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Oi.removeChild(t.stateNode));break;case 18:Oi!==null&&(to?(n=Oi,t=t.stateNode,n.nodeType===8?s1(n.parentNode,t):n.nodeType===1&&s1(n,t),cp(n)):s1(Oi,t.stateNode));break;case 4:i=Oi,r=to,Oi=t.stateNode.containerInfo,to=!0,Oa(n,e,t),Oi=i,to=r;break;case 0:case 11:case 14:case 15:if(!Ji&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_w(t,e,o),r=r.next}while(r!==i)}Oa(n,e,t);break;case 1:if(!Ji&&(uf(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Kn(t,e,a)}Oa(n,e,t);break;case 21:Oa(n,e,t);break;case 22:t.mode&1?(Ji=(i=Ji)||t.memoizedState!==null,Oa(n,e,t),Ji=i):Oa(n,e,t);break;default:Oa(n,e,t)}}function Sb(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Sz),e.forEach(function(i){var r=Iz.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Ys(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Oi=a.stateNode,to=!1;break e;case 3:Oi=a.stateNode.containerInfo,to=!0;break e;case 4:Oi=a.stateNode.containerInfo,to=!0;break e}a=a.return}if(Oi===null)throw Error(Xe(160));eL(s,o,r),Oi=null,to=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(f){Kn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tL(e,n),e=e.sibling}function tL(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ys(e,n),xo(n),i&4){try{Rd(3,n,n.return),j_(3,n)}catch(y){Kn(n,n.return,y)}try{Rd(5,n,n.return)}catch(y){Kn(n,n.return,y)}}break;case 1:Ys(e,n),xo(n),i&512&&t!==null&&uf(t,t.return);break;case 5:if(Ys(e,n),xo(n),i&512&&t!==null&&uf(t,t.return),n.flags&32){var r=n.stateNode;try{op(r,"")}catch(y){Kn(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&w3(r,s),XS(a,o);var f=XS(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?C3(r,d):h==="dangerouslySetInnerHTML"?T3(r,d):h==="children"?op(r,d):RM(r,h,d,f)}switch(a){case"input":BS(r,s);break;case"textarea":M3(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?xf(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?xf(r,!!s.multiple,s.defaultValue,!0):xf(r,!!s.multiple,s.multiple?[]:"",!1))}r[mp]=s}catch(y){Kn(n,n.return,y)}}break;case 6:if(Ys(e,n),xo(n),i&4){if(n.stateNode===null)throw Error(Xe(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){Kn(n,n.return,y)}}break;case 3:if(Ys(e,n),xo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{cp(e.containerInfo)}catch(y){Kn(n,n.return,y)}break;case 4:Ys(e,n),xo(n);break;case 13:Ys(e,n),xo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(lE=ii())),i&4&&Sb(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Ji=(f=Ji)||h,Ys(e,n),Ji=f):Ys(e,n),xo(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!h&&n.mode&1)for(ft=n,h=n.child;h!==null;){for(d=ft=h;ft!==null;){switch(p=ft,m=p.child,p.tag){case 0:case 11:case 14:case 15:Rd(4,p,p.return);break;case 1:uf(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(y){Kn(i,t,y)}}break;case 5:uf(p,p.return);break;case 22:if(p.memoizedState!==null){Mb(d);continue}}m!==null?(m.return=p,ft=m):Mb(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=A3("display",o))}catch(y){Kn(n,n.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(y){Kn(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ys(e,n),xo(n),i&4&&Sb(n);break;case 21:break;default:Ys(e,n),xo(n)}}function xo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(QI(t)){var i=t;break e}t=t.return}throw Error(Xe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(op(r,""),i.flags&=-33);var s=xb(n);Sw(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=xb(n);xw(n,a,o);break;default:throw Error(Xe(161))}}catch(l){Kn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Mz(n,e,t){ft=n,nL(n)}function nL(n,e,t){for(var i=(n.mode&1)!==0;ft!==null;){var r=ft,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Pg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ji;a=Pg;var f=Ji;if(Pg=o,(Ji=l)&&!f)for(ft=r;ft!==null;)o=ft,l=o.child,o.tag===22&&o.memoizedState!==null?Eb(r):l!==null?(l.return=o,ft=l):Eb(r);for(;s!==null;)ft=s,nL(s),s=s.sibling;ft=r,Pg=a,Ji=f}wb(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ft=s):wb(n)}}function wb(n){for(;ft!==null;){var e=ft;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ji||j_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ji)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Qs(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sb(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}sb(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&cp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Ji||e.flags&512&&yw(e)}catch(p){Kn(e,e.return,p)}}if(e===n){ft=null;break}if(t=e.sibling,t!==null){t.return=e.return,ft=t;break}ft=e.return}}function Mb(n){for(;ft!==null;){var e=ft;if(e===n){ft=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ft=t;break}ft=e.return}}function Eb(n){for(;ft!==null;){var e=ft;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{j_(4,e)}catch(l){Kn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Kn(e,r,l)}}var s=e.return;try{yw(e)}catch(l){Kn(e,s,l)}break;case 5:var o=e.return;try{yw(e)}catch(l){Kn(e,o,l)}}}catch(l){Kn(e,e.return,l)}if(e===n){ft=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ft=a;break}ft=e.return}}var Ez=Math.ceil,kv=Ta.ReactCurrentDispatcher,oE=Ta.ReactCurrentOwner,zs=Ta.ReactCurrentBatchConfig,ln=0,Li=null,di=null,ki=0,Qr=0,cf=bl(0),yi=0,Sp=null,Wu=0,Z_=0,aE=0,Pd=null,Dr=null,lE=0,Hf=1/0,na=null,Fv=!1,ww=null,dl=null,Ig=!1,el=null,zv=0,Id=0,Mw=null,nv=-1,iv=0;function _r(){return ln&6?ii():nv!==-1?nv:nv=ii()}function pl(n){return n.mode&1?ln&2&&ki!==0?ki&-ki:az.transition!==null?(iv===0&&(iv=z3()),iv):(n=xn,n!==0||(n=window.event,n=n===void 0?16:Y3(n.type)),n):1}function oo(n,e,t,i){if(50<Id)throw Id=0,Mw=null,Error(Xe(185));em(n,t,i),(!(ln&2)||n!==Li)&&(n===Li&&(!(ln&2)&&(Z_|=t),yi===4&&Ka(n,ki)),kr(n,i),t===1&&ln===0&&!(e.mode&1)&&(Hf=ii()+500,X_&&Rl()))}function kr(n,e){var t=n.callbackNode;aF(n,e);var i=wv(n,n===Li?ki:0);if(i===0)t!==null&&DC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&DC(t),e===1)n.tag===0?oz(Tb.bind(null,n)):fI(Tb.bind(null,n)),nz(function(){!(ln&6)&&Rl()}),t=null;else{switch(B3(i)){case 1:t=NM;break;case 4:t=k3;break;case 16:t=Sv;break;case 536870912:t=F3;break;default:t=Sv}t=cL(t,iL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function iL(n,e){if(nv=-1,iv=0,ln&6)throw Error(Xe(327));var t=n.callbackNode;if(Tf()&&n.callbackNode!==t)return null;var i=wv(n,n===Li?ki:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Bv(n,i);else{e=i;var r=ln;ln|=2;var s=sL();(Li!==n||ki!==e)&&(na=null,Hf=ii()+500,Cu(n,e));do try{Cz();break}catch(a){rL(n,a)}while(1);qM(),kv.current=s,ln=r,di!==null?e=0:(Li=null,ki=0,e=yi)}if(e!==0){if(e===2&&(r=KS(n),r!==0&&(i=r,e=Ew(n,r))),e===1)throw t=Sp,Cu(n,0),Ka(n,i),kr(n,ii()),t;if(e===6)Ka(n,i);else{if(r=n.current.alternate,!(i&30)&&!Tz(r)&&(e=Bv(n,i),e===2&&(s=KS(n),s!==0&&(i=s,e=Ew(n,s))),e===1))throw t=Sp,Cu(n,0),Ka(n,i),kr(n,ii()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Xe(345));case 2:au(n,Dr,na);break;case 3:if(Ka(n,i),(i&130023424)===i&&(e=lE+500-ii(),10<e)){if(wv(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){_r(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=rw(au.bind(null,n,Dr,na),e);break}au(n,Dr,na);break;case 4:if(Ka(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-so(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=ii()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ez(i/1960))-i,10<i){n.timeoutHandle=rw(au.bind(null,n,Dr,na),i);break}au(n,Dr,na);break;case 5:au(n,Dr,na);break;default:throw Error(Xe(329))}}}return kr(n,ii()),n.callbackNode===t?iL.bind(null,n):null}function Ew(n,e){var t=Pd;return n.current.memoizedState.isDehydrated&&(Cu(n,e).flags|=256),n=Bv(n,e),n!==2&&(e=Dr,Dr=t,e!==null&&Tw(e)),n}function Tw(n){Dr===null?Dr=n:Dr.push.apply(Dr,n)}function Tz(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!lo(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ka(n,e){for(e&=~aE,e&=~Z_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-so(e),i=1<<t;n[t]=-1,e&=~i}}function Tb(n){if(ln&6)throw Error(Xe(327));Tf();var e=wv(n,0);if(!(e&1))return kr(n,ii()),null;var t=Bv(n,e);if(n.tag!==0&&t===2){var i=KS(n);i!==0&&(e=i,t=Ew(n,i))}if(t===1)throw t=Sp,Cu(n,0),Ka(n,e),kr(n,ii()),t;if(t===6)throw Error(Xe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,au(n,Dr,na),kr(n,ii()),null}function uE(n,e){var t=ln;ln|=1;try{return n(e)}finally{ln=t,ln===0&&(Hf=ii()+500,X_&&Rl())}}function Xu(n){el!==null&&el.tag===0&&!(ln&6)&&Tf();var e=ln;ln|=1;var t=zs.transition,i=xn;try{if(zs.transition=null,xn=1,n)return n()}finally{xn=i,zs.transition=t,ln=e,!(ln&6)&&Rl()}}function cE(){Qr=cf.current,Ln(cf)}function Cu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,tz(t)),di!==null)for(t=di.return;t!==null;){var i=t;switch(WM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Cv();break;case 3:zf(),Ln(Or),Ln(ir),QM();break;case 5:JM(i);break;case 4:zf();break;case 13:Ln(Bn);break;case 19:Ln(Bn);break;case 10:jM(i.type._context);break;case 22:case 23:cE()}t=t.return}if(Li=n,di=n=ml(n.current,null),ki=Qr=e,yi=0,Sp=null,aE=Z_=Wu=0,Dr=Pd=null,vu!==null){for(e=0;e<vu.length;e++)if(t=vu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}vu=null}return n}function rL(n,e){do{var t=di;try{if(qM(),Q0.current=Uv,Ov){for(var i=Yn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ov=!1}if(Gu=0,Ri=vi=Yn=null,bd=!1,_p=0,oE.current=null,t===null||t.return===null){yi=1,Sp=e,di=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ki,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=hb(o);if(m!==null){m.flags&=-257,db(m,o,a,s,e),m.mode&1&&fb(s,f,e),e=m,l=f;var _=e.updateQueue;if(_===null){var y=new Set;y.add(l),e.updateQueue=y}else _.add(l);break e}else{if(!(e&1)){fb(s,f,e),fE();break e}l=Error(Xe(426))}}else if(Un&&a.mode&1){var x=hb(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),db(x,o,a,s,e),XM(Bf(l,a));break e}}s=l=Bf(l,a),yi!==4&&(yi=2),Pd===null?Pd=[s]:Pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=HI(s,l,e);rb(s,g);break e;case 1:a=l;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(dl===null||!dl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=VI(s,a,e);rb(s,E);break e}}s=s.return}while(s!==null)}aL(t)}catch(I){e=I,di===t&&t!==null&&(di=t=t.return);continue}break}while(1)}function sL(){var n=kv.current;return kv.current=Uv,n===null?Uv:n}function fE(){(yi===0||yi===3||yi===2)&&(yi=4),Li===null||!(Wu&268435455)&&!(Z_&268435455)||Ka(Li,ki)}function Bv(n,e){var t=ln;ln|=2;var i=sL();(Li!==n||ki!==e)&&(na=null,Cu(n,e));do try{Az();break}catch(r){rL(n,r)}while(1);if(qM(),ln=t,kv.current=i,di!==null)throw Error(Xe(261));return Li=null,ki=0,yi}function Az(){for(;di!==null;)oL(di)}function Cz(){for(;di!==null&&!Jk();)oL(di)}function oL(n){var e=uL(n.alternate,n,Qr);n.memoizedProps=n.pendingProps,e===null?aL(n):di=e,oE.current=null}function aL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=xz(t,e),t!==null){t.flags&=32767,di=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yi=6,di=null;return}}else if(t=yz(t,e,Qr),t!==null){di=t;return}if(e=e.sibling,e!==null){di=e;return}di=e=n}while(e!==null);yi===0&&(yi=5)}function au(n,e,t){var i=xn,r=zs.transition;try{zs.transition=null,xn=1,bz(n,e,t,i)}finally{zs.transition=r,xn=i}return null}function bz(n,e,t,i){do Tf();while(el!==null);if(ln&6)throw Error(Xe(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Xe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(lF(n,s),n===Li&&(di=Li=null,ki=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ig||(Ig=!0,cL(Sv,function(){return Tf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=zs.transition,zs.transition=null;var o=xn;xn=1;var a=ln;ln|=4,oE.current=null,wz(n,t),tL(t,n),jF(nw),Mv=!!tw,nw=tw=null,n.current=t,Mz(t),Qk(),ln=a,xn=o,zs.transition=s}else n.current=t;if(Ig&&(Ig=!1,el=n,zv=r),s=n.pendingLanes,s===0&&(dl=null),nF(t.stateNode),kr(n,ii()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Fv)throw Fv=!1,n=ww,ww=null,n;return zv&1&&n.tag!==0&&Tf(),s=n.pendingLanes,s&1?n===Mw?Id++:(Id=0,Mw=n):Id=0,Rl(),null}function Tf(){if(el!==null){var n=B3(zv),e=zs.transition,t=xn;try{if(zs.transition=null,xn=16>n?16:n,el===null)var i=!1;else{if(n=el,el=null,zv=0,ln&6)throw Error(Xe(331));var r=ln;for(ln|=4,ft=n.current;ft!==null;){var s=ft,o=s.child;if(ft.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var f=a[l];for(ft=f;ft!==null;){var h=ft;switch(h.tag){case 0:case 11:case 15:Rd(8,h,s)}var d=h.child;if(d!==null)d.return=h,ft=d;else for(;ft!==null;){h=ft;var p=h.sibling,m=h.return;if(JI(h),h===f){ft=null;break}if(p!==null){p.return=m,ft=p;break}ft=m}}}var _=s.alternate;if(_!==null){var y=_.child;if(y!==null){_.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ft=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ft=o;else e:for(;ft!==null;){if(s=ft,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,ft=g;break e}ft=s.return}}var S=n.current;for(ft=S;ft!==null;){o=ft;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ft=w;else e:for(o=S;ft!==null;){if(a=ft,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:j_(9,a)}}catch(I){Kn(a,a.return,I)}if(a===o){ft=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ft=E;break e}ft=a.return}}if(ln=r,Rl(),Io&&typeof Io.onPostCommitFiberRoot=="function")try{Io.onPostCommitFiberRoot(B_,n)}catch{}i=!0}return i}finally{xn=t,zs.transition=e}}return!1}function Ab(n,e,t){e=Bf(t,e),e=HI(n,e,1),n=hl(n,e,1),e=_r(),n!==null&&(em(n,1,e),kr(n,e))}function Kn(n,e,t){if(n.tag===3)Ab(n,n,t);else for(;e!==null;){if(e.tag===3){Ab(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(dl===null||!dl.has(i))){n=Bf(t,n),n=VI(e,n,1),e=hl(e,n,1),n=_r(),e!==null&&(em(e,1,n),kr(e,n));break}}e=e.return}}function Rz(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=_r(),n.pingedLanes|=n.suspendedLanes&t,Li===n&&(ki&t)===t&&(yi===4||yi===3&&(ki&130023424)===ki&&500>ii()-lE?Cu(n,0):aE|=t),kr(n,e)}function lL(n,e){e===0&&(n.mode&1?(e=Sg,Sg<<=1,!(Sg&130023424)&&(Sg=4194304)):e=1);var t=_r();n=xa(n,e),n!==null&&(em(n,e,t),kr(n,t))}function Pz(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),lL(n,t)}function Iz(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Xe(314))}i!==null&&i.delete(e),lL(n,t)}var uL;uL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Or.current)Nr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Nr=!1,_z(n,e,t);Nr=!!(n.flags&131072)}else Nr=!1,Un&&e.flags&1048576&&hI(e,Pv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;tv(n,e),n=e.pendingProps;var r=Uf(e,ir.current);Ef(e,t),r=tE(null,e,i,n,r,t);var s=nE();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ur(i)?(s=!0,bv(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,KM(e),r.updater=Y_,e.stateNode=r,r._reactInternals=e,fw(e,i,n,t),e=pw(null,e,i,!0,s,t)):(e.tag=0,Un&&s&&GM(e),hr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(tv(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Dz(i),n=Qs(i,n),r){case 0:e=dw(null,e,i,n,t);break e;case 1:e=gb(null,e,i,n,t);break e;case 11:e=pb(null,e,i,n,t);break e;case 14:e=mb(null,e,i,Qs(i.type,n),t);break e}throw Error(Xe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qs(i,r),dw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qs(i,r),gb(n,e,i,r,t);case 3:e:{if(YI(e),n===null)throw Error(Xe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gI(n,e),Dv(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Bf(Error(Xe(423)),e),e=vb(n,e,i,t,r);break e}else if(i!==r){r=Bf(Error(Xe(424)),e),e=vb(n,e,i,t,r);break e}else for(os=fl(e.stateNode.containerInfo.firstChild),ls=e,Un=!0,no=null,t=xI(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(kf(),i===r){e=Sa(n,e,t);break e}hr(n,e,i,t)}e=e.child}return e;case 5:return SI(e),n===null&&lw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,iw(i,r)?o=null:s!==null&&iw(i,s)&&(e.flags|=32),XI(n,e),hr(n,e,o,t),e.child;case 6:return n===null&&lw(e),null;case 13:return qI(n,e,t);case 4:return $M(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Ff(e,null,i,t):hr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qs(i,r),pb(n,e,i,r,t);case 7:return hr(n,e,e.pendingProps,t),e.child;case 8:return hr(n,e,e.pendingProps.children,t),e.child;case 12:return hr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Rn(Iv,i._currentValue),i._currentValue=o,s!==null)if(lo(s.value,o)){if(s.children===r.children&&!Or.current){e=Sa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ga(-1,t&-t),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?l.next=l:(l.next=h.next,h.next=l),f.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),uw(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),uw(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ef(e,t),r=Hs(r),i=i(r),e.flags|=1,hr(n,e,i,t),e.child;case 14:return i=e.type,r=Qs(i,e.pendingProps),r=Qs(i.type,r),mb(n,e,i,r,t);case 15:return GI(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Qs(i,r),tv(n,e),e.tag=1,Ur(i)?(n=!0,bv(e)):n=!1,Ef(e,t),_I(e,i,r),fw(e,i,r,t),pw(null,e,i,!0,n,t);case 19:return jI(n,e,t);case 22:return WI(n,e,t)}throw Error(Xe(156,e.tag))};function cL(n,e){return U3(n,e)}function Lz(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(n,e,t,i){return new Lz(n,e,t,i)}function hE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Dz(n){if(typeof n=="function")return hE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===IM)return 11;if(n===LM)return 14}return 2}function ml(n,e){var t=n.alternate;return t===null?(t=Os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function rv(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")hE(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Qc:return bu(t.children,r,s,e);case PM:o=8,r|=8;break;case OS:return n=Os(12,t,e,r|2),n.elementType=OS,n.lanes=s,n;case US:return n=Os(13,t,e,r),n.elementType=US,n.lanes=s,n;case kS:return n=Os(19,t,e,r),n.elementType=kS,n.lanes=s,n;case y3:return K_(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case v3:o=10;break e;case _3:o=9;break e;case IM:o=11;break e;case LM:o=14;break e;case Ya:o=16,i=null;break e}throw Error(Xe(130,n==null?n:typeof n,""))}return e=Os(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function bu(n,e,t,i){return n=Os(7,n,i,e),n.lanes=t,n}function K_(n,e,t,i){return n=Os(22,n,i,e),n.elementType=y3,n.lanes=t,n.stateNode={isHidden:!1},n}function d1(n,e,t){return n=Os(6,n,null,e),n.lanes=t,n}function p1(n,e,t){return e=Os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Nz(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jx(0),this.expirationTimes=jx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dE(n,e,t,i,r,s,o,a,l){return n=new Nz(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Os(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},KM(s),n}function Oz(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function fL(n){if(!n)return xl;n=n._reactInternals;e:{if(tc(n)!==n||n.tag!==1)throw Error(Xe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ur(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(n.tag===1){var t=n.type;if(Ur(t))return cI(n,t,e)}return e}function hL(n,e,t,i,r,s,o,a,l){return n=dE(t,i,!0,n,r,s,o,a,l),n.context=fL(null),t=n.current,i=_r(),r=pl(t),s=ga(i,r),s.callback=e??null,hl(t,s,r),n.current.lanes=r,em(n,r,i),kr(n,i),n}function $_(n,e,t,i){var r=e.current,s=_r(),o=pl(r);return t=fL(t),e.context===null?e.context=t:e.pendingContext=t,e=ga(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=hl(r,e,o),n!==null&&(oo(n,r,o,s),J0(n,r,o)),o}function Hv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function pE(n,e){Cb(n,e),(n=n.alternate)&&Cb(n,e)}function Uz(){return null}var dL=typeof reportError=="function"?reportError:function(n){console.error(n)};function mE(n){this._internalRoot=n}J_.prototype.render=mE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Xe(409));$_(n,e,null,null)};J_.prototype.unmount=mE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xu(function(){$_(null,n,null,null)}),e[ya]=null}};function J_(n){this._internalRoot=n}J_.prototype.unstable_scheduleHydration=function(n){if(n){var e=G3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Za.length&&e!==0&&e<Za[t].priority;t++);Za.splice(t,0,n),t===0&&X3(n)}};function gE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Q_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bb(){}function kz(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=Hv(o);s.call(f)}}var o=hL(e,i,n,0,null,!1,!1,"",bb);return n._reactRootContainer=o,n[ya]=o.current,dp(n.nodeType===8?n.parentNode:n),Xu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var f=Hv(l);a.call(f)}}var l=dE(n,0,!1,null,null,!1,!1,"",bb);return n._reactRootContainer=l,n[ya]=l.current,dp(n.nodeType===8?n.parentNode:n),Xu(function(){$_(e,l,t,i)}),l}function ey(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Hv(o);a.call(l)}}$_(e,o,n,r)}else o=kz(t,e,n,r,i);return Hv(o)}H3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=hd(e.pendingLanes);t!==0&&(OM(e,t|1),kr(e,ii()),!(ln&6)&&(Hf=ii()+500,Rl()))}break;case 13:Xu(function(){var i=xa(n,1);if(i!==null){var r=_r();oo(i,n,1,r)}}),pE(n,1)}};UM=function(n){if(n.tag===13){var e=xa(n,134217728);if(e!==null){var t=_r();oo(e,n,134217728,t)}pE(n,134217728)}};V3=function(n){if(n.tag===13){var e=pl(n),t=xa(n,e);if(t!==null){var i=_r();oo(t,n,e,i)}pE(n,e)}};G3=function(){return xn};W3=function(n,e){var t=xn;try{return xn=n,e()}finally{xn=t}};qS=function(n,e,t){switch(e){case"input":if(BS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=W_(i);if(!r)throw Error(Xe(90));S3(i),BS(i,r)}}}break;case"textarea":M3(n,t);break;case"select":e=t.value,e!=null&&xf(n,!!t.multiple,e,!1)}};P3=uE;I3=Xu;var Fz={usingClientEntryPoint:!1,Events:[nm,rf,W_,b3,R3,uE]},Uh={findFiberByHostInstance:gu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zz={bundleType:Uh.bundleType,version:Uh.version,rendererPackageName:Uh.rendererPackageName,rendererConfig:Uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ta.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=N3(n),n===null?null:n.stateNode},findFiberByHostInstance:Uh.findFiberByHostInstance||Uz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lg.isDisabled&&Lg.supportsFiber)try{B_=Lg.inject(zz),Io=Lg}catch{}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fz;gs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gE(e))throw Error(Xe(200));return Oz(n,e,null,t)};gs.createRoot=function(n,e){if(!gE(n))throw Error(Xe(299));var t=!1,i="",r=dL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=dE(n,1,!1,null,null,t,!1,i,r),n[ya]=e.current,dp(n.nodeType===8?n.parentNode:n),new mE(e)};gs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Xe(188)):(n=Object.keys(n).join(","),Error(Xe(268,n)));return n=N3(e),n=n===null?null:n.stateNode,n};gs.flushSync=function(n){return Xu(n)};gs.hydrate=function(n,e,t){if(!Q_(e))throw Error(Xe(200));return ey(null,n,e,!0,t)};gs.hydrateRoot=function(n,e,t){if(!gE(n))throw Error(Xe(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=dL;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=hL(e,null,n,1,t??null,r,!1,s,o),n[ya]=e.current,dp(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new J_(e)};gs.render=function(n,e,t){if(!Q_(e))throw Error(Xe(200));return ey(null,n,e,!1,t)};gs.unmountComponentAtNode=function(n){if(!Q_(n))throw Error(Xe(40));return n._reactRootContainer?(Xu(function(){ey(null,null,n,!1,function(){n._reactRootContainer=null,n[ya]=null})}),!0):!1};gs.unstable_batchedUpdates=uE;gs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Q_(t))throw Error(Xe(200));if(n==null||n._reactInternals===void 0)throw Error(Xe(38));return ey(n,e,t,!1,i)};gs.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=gs})(Uk);var Rb=LS;IS.createRoot=Rb.createRoot,IS.hydrateRoot=Rb.hydrateRoot;function Vv(){return Vv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vv.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rm="166",lu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},pL=0,Aw=1,mL=2,Bz=3,gL=0,ty=1,Ld=2,eo=3,wa=0,yr=1,ro=2,Do=0,Ru=1,Cw=2,bw=3,Rw=4,vL=5,$a=100,_L=101,yL=102,xL=103,SL=104,wL=200,ML=201,EL=202,TL=203,Gv=204,Wv=205,AL=206,CL=207,bL=208,RL=209,PL=210,IL=211,LL=212,DL=213,NL=214,OL=0,UL=1,kL=2,wp=3,FL=4,zL=5,BL=6,HL=7,sm=0,VL=1,GL=2,No=0,WL=1,XL=2,YL=3,vE=4,qL=5,jL=6,ZL=7,Pw="attached",KL="detached",Sl=300,Fo=301,wl=302,Vf=303,Mp=304,sh=306,Ep=1e3,pi=1001,Tp=1002,Pi=1003,_E=1004,Hz=1004,ff=1005,Vz=1005,_n=1006,Dd=1007,Gz=1007,Ao=1008,Iw=1008,Vr=1009,ny=1010,iy=1011,Gf=1012,om=1013,zo=1014,Wn=1015,Ii=1016,ry=1017,sy=1018,Yu=1020,yE=35902,xE=1021,SE=1022,ri=1023,wE=1024,ME=1025,Pu=1026,qu=1027,am=1028,lm=1029,EE=1030,oy=1031,Wz=1032,ay=1033,Nd=33776,Od=33777,Ud=33778,kd=33779,Xv=35840,Yv=35841,qv=35842,jv=35843,Zv=36196,Kv=37492,$v=37496,Jv=37808,Qv=37809,e_=37810,t_=37811,n_=37812,i_=37813,r_=37814,s_=37815,o_=37816,a_=37817,l_=37818,u_=37819,c_=37820,f_=37821,Fd=36492,h_=36494,d_=36495,TE=36283,p_=36284,m_=36285,g_=36286,$L=2200,JL=2201,QL=2202,Ap=2300,v_=2301,sv=2302,yu=2400,xu=2401,Cp=2402,ly=2500,AE=2501,Xz=0,Yz=1,qz=2,eD=3200,tD=3201,Pl=0,nD=1,aa="",Lr="srgb",Gs="srgb-linear",uy="display-p3",um="display-p3-linear",bp="linear",An="srgb",Rp="rec709",Pp="p3",jz=0,cu=7680,Zz=7681,Kz=7682,$z=7683,Jz=34055,Qz=34056,e4=5386,t4=512,n4=513,i4=514,r4=515,s4=516,o4=517,a4=518,Lw=519,iD=512,rD=513,sD=514,CE=515,oD=516,aD=517,lD=518,uD=519,Ip=35044,l4=35048,u4=35040,c4=35045,f4=35049,h4=35041,d4=35046,p4=35050,m4=35042,g4="100",Dw="300 es",Co=2e3,Lp=2001;class Ho{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Pb=1234567;const Iu=Math.PI/180,Wf=180/Math.PI;function us(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qi[n&255]+qi[n>>8&255]+qi[n>>16&255]+qi[n>>24&255]+"-"+qi[e&255]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[t&63|128]+qi[t>>8&255]+"-"+qi[t>>16&255]+qi[t>>24&255]+qi[i&255]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function $n(n,e,t){return Math.max(e,Math.min(t,n))}function bE(n,e){return(n%e+e)%e}function v4(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function _4(n,e,t){return n!==e?(t-n)/(e-n):0}function zd(n,e,t){return(1-t)*n+t*e}function y4(n,e,t,i){return zd(n,e,1-Math.exp(-t*i))}function x4(n,e=1){return e-Math.abs(bE(n,e*2)-e)}function S4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function w4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function M4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function E4(n,e){return n+Math.random()*(e-n)}function T4(n){return n*(.5-Math.random())}function A4(n){n!==void 0&&(Pb=n);let e=Pb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function C4(n){return n*Iu}function b4(n){return n*Wf}function R4(n){return(n&n-1)===0&&n!==0}function P4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function I4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function L4(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),f=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*d,l*p,a*f);break;case"YZY":n.set(l*p,a*h,l*d,a*f);break;case"ZXZ":n.set(l*d,l*p,a*h,a*f);break;case"XZX":n.set(a*h,l*_,l*m,a*f);break;case"YXY":n.set(l*m,a*h,l*_,a*f);break;case"ZYZ":n.set(l*_,l*m,a*h,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function mr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Vt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const RE={DEG2RAD:Iu,RAD2DEG:Wf,generateUUID:us,clamp:$n,euclideanModulo:bE,mapLinear:v4,inverseLerp:_4,lerp:zd,damp:y4,pingpong:x4,smoothstep:S4,smootherstep:w4,randInt:M4,randFloat:E4,randFloatSpread:T4,seededRandom:A4,degToRad:C4,radToDeg:b4,isPowerOfTwo:R4,ceilPowerOfTwo:P4,floorPowerOfTwo:I4,setQuaternionFromProperEuler:L4,normalize:Vt,denormalize:mr};class be{constructor(e=0,t=0){be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($n(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ht{constructor(e,t,i,r,s,o,a,l,f){Ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,f)}set(e,t,i,r,s,o,a,l,f){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],f=i[1],h=i[4],d=i[7],p=i[2],m=i[5],_=i[8],y=r[0],x=r[3],g=r[6],S=r[1],w=r[4],E=r[7],I=r[2],R=r[5],P=r[8];return s[0]=o*y+a*S+l*I,s[3]=o*x+a*w+l*R,s[6]=o*g+a*E+l*P,s[1]=f*y+h*S+d*I,s[4]=f*x+h*w+d*R,s[7]=f*g+h*E+d*P,s[2]=p*y+m*S+_*I,s[5]=p*x+m*w+_*R,s[8]=p*g+m*E+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8];return t*o*h-t*a*f-i*s*h+i*a*l+r*s*f-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=h*o-a*f,p=a*l-h*s,m=f*s-o*l,_=t*d+i*p+r*m;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/_;return e[0]=d*y,e[1]=(r*f-h*i)*y,e[2]=(a*i-r*o)*y,e[3]=p*y,e[4]=(h*t-r*l)*y,e[5]=(r*s-a*t)*y,e[6]=m*y,e[7]=(i*l-f*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),f=Math.sin(s);return this.set(i*l,i*f,-i*(l*o+f*a)+o+e,-r*f,r*l,-r*(-f*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(m1.makeScale(e,t)),this}rotate(e){return this.premultiply(m1.makeRotation(-e)),this}translate(e,t){return this.premultiply(m1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const m1=new Ht;function cD(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const D4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hf(n,e){return new D4[n](e)}function Dp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function fD(){const n=Dp("canvas");return n.style.display="block",n}const Ib={};function PE(n){n in Ib||(Ib[n]=!0,console.warn(n))}function N4(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const Lb=new Ht().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Db=new Ht().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Dg={[Gs]:{transfer:bp,primaries:Rp,toReference:n=>n,fromReference:n=>n},[Lr]:{transfer:An,primaries:Rp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[um]:{transfer:bp,primaries:Pp,toReference:n=>n.applyMatrix3(Db),fromReference:n=>n.applyMatrix3(Lb)},[uy]:{transfer:An,primaries:Pp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(Db),fromReference:n=>n.applyMatrix3(Lb).convertLinearToSRGB()}},O4=new Set([Gs,um]),mn={enabled:!0,_workingColorSpace:Gs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!O4.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Dg[e].toReference,r=Dg[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Dg[n].primaries},getTransfer:function(n){return n===aa?bp:Dg[n].transfer}};function Af(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function g1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let xc;class hD{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{xc===void 0&&(xc=Dp("canvas")),xc.width=e.width,xc.height=e.height;const i=xc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=xc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Dp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Af(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Af(t[i]/255)*255):t[i]=Af(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let U4=0;class Su{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:U4++}),this.uuid=us(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(v1(r[o].image)):s.push(v1(r[o]))}else s=v1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function v1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let k4=0;class dn extends Ho{constructor(e=dn.DEFAULT_IMAGE,t=dn.DEFAULT_MAPPING,i=pi,r=pi,s=_n,o=Ao,a=ri,l=Vr,f=dn.DEFAULT_ANISOTROPY,h=aa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:k4++}),this.uuid=us(),this.name="",this.source=new Su(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=l,this.offset=new be(0,0),this.repeat=new be(1,1),this.center=new be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Sl)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ep:e.x=e.x-Math.floor(e.x);break;case pi:e.x=e.x<0?0:1;break;case Tp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ep:e.y=e.y-Math.floor(e.y);break;case pi:e.y=e.y<0?0:1;break;case Tp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}dn.DEFAULT_IMAGE=null;dn.DEFAULT_MAPPING=Sl;dn.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,i=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,f=l[0],h=l[4],d=l[8],p=l[1],m=l[5],_=l[9],y=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-y)<.01&&Math.abs(_-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+y)<.1&&Math.abs(_+x)<.1&&Math.abs(f+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(f+1)/2,E=(m+1)/2,I=(g+1)/2,R=(h+p)/4,P=(d+y)/4,b=(_+x)/4;return w>E&&w>I?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=R/i,s=P/i):E>I?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=R/r,s=b/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=P/s,r=b/s),this.set(i,r,s,t),this}let S=Math.sqrt((x-_)*(x-_)+(d-y)*(d-y)+(p-h)*(p-h));return Math.abs(S)<.001&&(S=1),this.x=(x-_)/S,this.y=(d-y)/S,this.z=(p-h)/S,this.w=Math.acos((f+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class dD extends Ho{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_n,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new dn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Su(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ds extends dD{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class cy extends dn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Pi,this.minFilter=Pi,this.wrapR=pi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class F4 extends ds{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class IE extends dn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Pi,this.minFilter=Pi,this.wrapR=pi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class z4 extends ds{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new IE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class oi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],f=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],_=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=_,e[t+3]=y;return}if(d!==y||l!==p||f!==m||h!==_){let x=1-a;const g=l*p+f*m+h*_+d*y,S=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const I=Math.sqrt(w),R=Math.atan2(I,g*S);x=Math.sin(x*R)/I,a=Math.sin(a*R)/I}const E=a*S;if(l=l*x+p*E,f=f*x+m*E,h=h*x+_*E,d=d*x+y*E,x===1-a){const I=1/Math.sqrt(l*l+f*f+h*h+d*d);l*=I,f*=I,h*=I,d*=I}}e[t]=l,e[t+1]=f,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],f=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],_=s[o+3];return e[t]=a*_+h*d+l*m-f*p,e[t+1]=l*_+h*p+f*d-a*m,e[t+2]=f*_+h*m+a*p-l*d,e[t+3]=h*_-a*d-l*p-f*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,f=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),_=l(s/2);switch(o){case"XYZ":this._x=p*h*d+f*m*_,this._y=f*m*d-p*h*_,this._z=f*h*_+p*m*d,this._w=f*h*d-p*m*_;break;case"YXZ":this._x=p*h*d+f*m*_,this._y=f*m*d-p*h*_,this._z=f*h*_-p*m*d,this._w=f*h*d+p*m*_;break;case"ZXY":this._x=p*h*d-f*m*_,this._y=f*m*d+p*h*_,this._z=f*h*_+p*m*d,this._w=f*h*d-p*m*_;break;case"ZYX":this._x=p*h*d-f*m*_,this._y=f*m*d+p*h*_,this._z=f*h*_-p*m*d,this._w=f*h*d+p*m*_;break;case"YZX":this._x=p*h*d+f*m*_,this._y=f*m*d+p*h*_,this._z=f*h*_-p*m*d,this._w=f*h*d-p*m*_;break;case"XZY":this._x=p*h*d-f*m*_,this._y=f*m*d-p*h*_,this._z=f*h*_+p*m*d,this._w=f*h*d+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],f=t[2],h=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-f)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+f)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-f)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+f)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($n(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,f=t._z,h=t._w;return this._x=i*h+o*a+r*f-s*l,this._y=r*h+o*l+s*a-i*f,this._z=s*h+o*f+i*l-r*a,this._w=o*h-i*a-r*l-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const f=Math.sqrt(l),h=Math.atan2(f,a),d=Math.sin((1-t)*h)/f,p=Math.sin(t*h)/f;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,t=0,i=0){W.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Nb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Nb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,f=2*(o*r-a*i),h=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*f+o*d-a*h,this.y=i+l*h+a*f-s*d,this.z=r+l*d+s*h-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return _1.copy(this).projectOnVector(e),this.sub(_1)}reflect(e){return this.sub(_1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($n(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _1=new W,Nb=new oi;class xr{constructor(e=new W(1/0,1/0,1/0),t=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(qs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(qs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=qs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,qs):qs.fromBufferAttribute(s,o),qs.applyMatrix4(e.matrixWorld),this.expandByPoint(qs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ng.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ng.copy(i.boundingBox)),Ng.applyMatrix4(e.matrixWorld),this.union(Ng)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,qs),qs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(kh),Og.subVectors(this.max,kh),Sc.subVectors(e.a,kh),wc.subVectors(e.b,kh),Mc.subVectors(e.c,kh),Ua.subVectors(wc,Sc),ka.subVectors(Mc,wc),Xl.subVectors(Sc,Mc);let t=[0,-Ua.z,Ua.y,0,-ka.z,ka.y,0,-Xl.z,Xl.y,Ua.z,0,-Ua.x,ka.z,0,-ka.x,Xl.z,0,-Xl.x,-Ua.y,Ua.x,0,-ka.y,ka.x,0,-Xl.y,Xl.x,0];return!y1(t,Sc,wc,Mc,Og)||(t=[1,0,0,0,1,0,0,0,1],!y1(t,Sc,wc,Mc,Og))?!1:(Ug.crossVectors(Ua,ka),t=[Ug.x,Ug.y,Ug.z],y1(t,Sc,wc,Mc,Og))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Zo=[new W,new W,new W,new W,new W,new W,new W,new W],qs=new W,Ng=new xr,Sc=new W,wc=new W,Mc=new W,Ua=new W,ka=new W,Xl=new W,kh=new W,Og=new W,Ug=new W,Yl=new W;function y1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Yl.fromArray(n,s);const a=r.x*Math.abs(Yl.x)+r.y*Math.abs(Yl.y)+r.z*Math.abs(Yl.z),l=e.dot(Yl),f=t.dot(Yl),h=i.dot(Yl);if(Math.max(-Math.max(l,f,h),Math.min(l,f,h))>a)return!1}return!0}const B4=new xr,Fh=new W,x1=new W;class tr{constructor(e=new W,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):B4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fh.subVectors(e,this.center);const t=Fh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Fh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(x1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fh.copy(e.center).add(x1)),this.expandByPoint(Fh.copy(e.center).sub(x1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ko=new W,S1=new W,kg=new W,Fa=new W,w1=new W,Fg=new W,M1=new W;class nc{constructor(e=new W,t=new W(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ko)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ko.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ko.copy(this.origin).addScaledVector(this.direction,t),Ko.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){S1.copy(e).add(t).multiplyScalar(.5),kg.copy(t).sub(e).normalize(),Fa.copy(this.origin).sub(S1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(kg),a=Fa.dot(this.direction),l=-Fa.dot(kg),f=Fa.lengthSq(),h=Math.abs(1-o*o);let d,p,m,_;if(h>0)if(d=o*l-a,p=o*a-l,_=s*h,d>=0)if(p>=-_)if(p<=_){const y=1/h;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+f}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;else p<=-_?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f):p<=_?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+f):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+f);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(S1).addScaledVector(kg,p),m}intersectSphere(e,t){Ko.subVectors(e.center,this.origin);const i=Ko.dot(this.direction),r=Ko.dot(Ko)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const f=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return f>=0?(i=(e.min.x-p.x)*f,r=(e.max.x-p.x)*f):(i=(e.max.x-p.x)*f,r=(e.min.x-p.x)*f),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ko)!==null}intersectTriangle(e,t,i,r,s){w1.subVectors(t,e),Fg.subVectors(i,e),M1.crossVectors(w1,Fg);let o=this.direction.dot(M1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Fa.subVectors(this.origin,e);const l=a*this.direction.dot(Fg.crossVectors(Fa,Fg));if(l<0)return null;const f=a*this.direction.dot(w1.cross(Fa));if(f<0||l+f>o)return null;const h=-a*Fa.dot(M1);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Lt{constructor(e,t,i,r,s,o,a,l,f,h,d,p,m,_,y,x){Lt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,f,h,d,p,m,_,y,x)}set(e,t,i,r,s,o,a,l,f,h,d,p,m,_,y,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=f,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=_,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Lt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ec.setFromMatrixColumn(e,0).length(),s=1/Ec.setFromMatrixColumn(e,1).length(),o=1/Ec.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),f=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,_=a*h,y=a*d;t[0]=l*h,t[4]=-l*d,t[8]=f,t[1]=m+_*f,t[5]=p-y*f,t[9]=-a*l,t[2]=y-p*f,t[6]=_+m*f,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,_=f*h,y=f*d;t[0]=p+y*a,t[4]=_*a-m,t[8]=o*f,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-_,t[6]=y+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,_=f*h,y=f*d;t[0]=p-y*a,t[4]=-o*d,t[8]=_+m*a,t[1]=m+_*a,t[5]=o*h,t[9]=y-p*a,t[2]=-o*f,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,_=a*h,y=a*d;t[0]=l*h,t[4]=_*f-m,t[8]=p*f+y,t[1]=l*d,t[5]=y*f+p,t[9]=m*f-_,t[2]=-f,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*f,_=a*l,y=a*f;t[0]=l*h,t[4]=y-p*d,t[8]=_*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-f*h,t[6]=m*d+_,t[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*f,_=a*l,y=a*f;t[0]=l*h,t[4]=-d,t[8]=f*h,t[1]=p*d+y,t[5]=o*h,t[9]=m*d-_,t[2]=_*d-m,t[6]=a*h,t[10]=y*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(H4,e,V4)}lookAt(e,t,i){const r=this.elements;return Kr.subVectors(e,t),Kr.lengthSq()===0&&(Kr.z=1),Kr.normalize(),za.crossVectors(i,Kr),za.lengthSq()===0&&(Math.abs(i.z)===1?Kr.x+=1e-4:Kr.z+=1e-4,Kr.normalize(),za.crossVectors(i,Kr)),za.normalize(),zg.crossVectors(Kr,za),r[0]=za.x,r[4]=zg.x,r[8]=Kr.x,r[1]=za.y,r[5]=zg.y,r[9]=Kr.y,r[2]=za.z,r[6]=zg.z,r[10]=Kr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],f=i[12],h=i[1],d=i[5],p=i[9],m=i[13],_=i[2],y=i[6],x=i[10],g=i[14],S=i[3],w=i[7],E=i[11],I=i[15],R=r[0],P=r[4],b=r[8],C=r[12],A=r[1],O=r[5],F=r[9],V=r[13],Y=r[2],J=r[6],K=r[10],ne=r[14],B=r[3],te=r[7],k=r[11],ce=r[15];return s[0]=o*R+a*A+l*Y+f*B,s[4]=o*P+a*O+l*J+f*te,s[8]=o*b+a*F+l*K+f*k,s[12]=o*C+a*V+l*ne+f*ce,s[1]=h*R+d*A+p*Y+m*B,s[5]=h*P+d*O+p*J+m*te,s[9]=h*b+d*F+p*K+m*k,s[13]=h*C+d*V+p*ne+m*ce,s[2]=_*R+y*A+x*Y+g*B,s[6]=_*P+y*O+x*J+g*te,s[10]=_*b+y*F+x*K+g*k,s[14]=_*C+y*V+x*ne+g*ce,s[3]=S*R+w*A+E*Y+I*B,s[7]=S*P+w*O+E*J+I*te,s[11]=S*b+w*F+E*K+I*k,s[15]=S*C+w*V+E*ne+I*ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],f=e[13],h=e[2],d=e[6],p=e[10],m=e[14],_=e[3],y=e[7],x=e[11],g=e[15];return _*(+s*l*d-r*f*d-s*a*p+i*f*p+r*a*m-i*l*m)+y*(+t*l*m-t*f*p+s*o*p-r*o*m+r*f*h-s*l*h)+x*(+t*f*d-t*a*m-s*o*d+i*o*m+s*a*h-i*f*h)+g*(-r*a*h-t*l*d+t*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],f=e[7],h=e[8],d=e[9],p=e[10],m=e[11],_=e[12],y=e[13],x=e[14],g=e[15],S=d*x*f-y*p*f+y*l*m-a*x*m-d*l*g+a*p*g,w=_*p*f-h*x*f-_*l*m+o*x*m+h*l*g-o*p*g,E=h*y*f-_*d*f+_*a*m-o*y*m-h*a*g+o*d*g,I=_*d*l-h*y*l-_*a*p+o*y*p+h*a*x-o*d*x,R=t*S+i*w+r*E+s*I;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/R;return e[0]=S*P,e[1]=(y*p*s-d*x*s-y*r*m+i*x*m+d*r*g-i*p*g)*P,e[2]=(a*x*s-y*l*s+y*r*f-i*x*f-a*r*g+i*l*g)*P,e[3]=(d*l*s-a*p*s-d*r*f+i*p*f+a*r*m-i*l*m)*P,e[4]=w*P,e[5]=(h*x*s-_*p*s+_*r*m-t*x*m-h*r*g+t*p*g)*P,e[6]=(_*l*s-o*x*s-_*r*f+t*x*f+o*r*g-t*l*g)*P,e[7]=(o*p*s-h*l*s+h*r*f-t*p*f-o*r*m+t*l*m)*P,e[8]=E*P,e[9]=(_*d*s-h*y*s-_*i*m+t*y*m+h*i*g-t*d*g)*P,e[10]=(o*y*s-_*a*s+_*i*f-t*y*f-o*i*g+t*a*g)*P,e[11]=(h*a*s-o*d*s-h*i*f+t*d*f+o*i*m-t*a*m)*P,e[12]=I*P,e[13]=(h*y*r-_*d*r+_*i*p-t*y*p-h*i*x+t*d*x)*P,e[14]=(_*a*r-o*y*r-_*i*l+t*y*l+o*i*x-t*a*x)*P,e[15]=(o*d*r-h*a*r+h*i*l-t*d*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,f=s*o,h=s*a;return this.set(f*o+i,f*a-r*l,f*l+r*a,0,f*a+r*l,h*a+i,h*l-r*o,0,f*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,f=s+s,h=o+o,d=a+a,p=s*f,m=s*h,_=s*d,y=o*h,x=o*d,g=a*d,S=l*f,w=l*h,E=l*d,I=i.x,R=i.y,P=i.z;return r[0]=(1-(y+g))*I,r[1]=(m+E)*I,r[2]=(_-w)*I,r[3]=0,r[4]=(m-E)*R,r[5]=(1-(p+g))*R,r[6]=(x+S)*R,r[7]=0,r[8]=(_+w)*P,r[9]=(x-S)*P,r[10]=(1-(p+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ec.set(r[0],r[1],r[2]).length();const o=Ec.set(r[4],r[5],r[6]).length(),a=Ec.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],js.copy(this);const f=1/s,h=1/o,d=1/a;return js.elements[0]*=f,js.elements[1]*=f,js.elements[2]*=f,js.elements[4]*=h,js.elements[5]*=h,js.elements[6]*=h,js.elements[8]*=d,js.elements[9]*=d,js.elements[10]*=d,t.setFromRotationMatrix(js),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Co){const l=this.elements,f=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,_;if(a===Co)m=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===Lp)m=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=f,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Co){const l=this.elements,f=1/(t-e),h=1/(i-r),d=1/(o-s),p=(t+e)*f,m=(i+r)*h;let _,y;if(a===Co)_=(o+s)*d,y=-2*d;else if(a===Lp)_=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ec=new W,js=new Lt,H4=new W(0,0,0),V4=new W(1,1,1),za=new W,zg=new W,Kr=new W,Ob=new Lt,Ub=new oi;class Gr{constructor(e=0,t=0,i=0,r=Gr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],f=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin($n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-$n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin($n(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-$n(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin($n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-$n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Ob.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ob,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ub.setFromEuler(this),this.setFromQuaternion(Ub,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Gr.DEFAULT_ORDER="XYZ";class Lu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let G4=0;const kb=new W,Tc=new oi,$o=new Lt,Bg=new W,zh=new W,W4=new W,X4=new oi,Fb=new W(1,0,0),zb=new W(0,1,0),Bb=new W(0,0,1),Hb={type:"added"},Y4={type:"removed"},Ac={type:"childadded",child:null},E1={type:"childremoved",child:null};class un extends Ho{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:G4++}),this.uuid=us(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=un.DEFAULT_UP.clone();const e=new W,t=new Gr,i=new oi,r=new W(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Lt},normalMatrix:{value:new Ht}}),this.matrix=new Lt,this.matrixWorld=new Lt,this.matrixAutoUpdate=un.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Lu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.multiply(Tc),this}rotateOnWorldAxis(e,t){return Tc.setFromAxisAngle(e,t),this.quaternion.premultiply(Tc),this}rotateX(e){return this.rotateOnAxis(Fb,e)}rotateY(e){return this.rotateOnAxis(zb,e)}rotateZ(e){return this.rotateOnAxis(Bb,e)}translateOnAxis(e,t){return kb.copy(e).applyQuaternion(this.quaternion),this.position.add(kb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Fb,e)}translateY(e){return this.translateOnAxis(zb,e)}translateZ(e){return this.translateOnAxis(Bb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4($o.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Bg.copy(e):Bg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),zh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$o.lookAt(zh,Bg,this.up):$o.lookAt(Bg,zh,this.up),this.quaternion.setFromRotationMatrix($o),r&&($o.extractRotation(r.matrixWorld),Tc.setFromRotationMatrix($o),this.quaternion.premultiply(Tc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Hb),Ac.child=e,this.dispatchEvent(Ac),Ac.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Y4),E1.child=e,this.dispatchEvent(E1),E1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),$o.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),$o.multiply(e.parent.matrixWorld)),e.applyMatrix4($o),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Hb),Ac.child=e,this.dispatchEvent(Ac),Ac.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zh,e,W4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zh,X4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let f=0,h=l.length;f<h;f++){const d=l[f];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,f=this.material.length;l<f;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),f=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),_=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),f.length>0&&(i.textures=f),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),_.length>0&&(i.nodes=_)}return i.object=r,i;function o(a){const l=[];for(const f in a){const h=a[f];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}un.DEFAULT_UP=new W(0,1,0);un.DEFAULT_MATRIX_AUTO_UPDATE=!0;un.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zs=new W,Jo=new W,T1=new W,Qo=new W,Cc=new W,bc=new W,Vb=new W,A1=new W,C1=new W,b1=new W;class is{constructor(e=new W,t=new W,i=new W){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Zs.subVectors(e,t),r.cross(Zs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Zs.subVectors(r,t),Jo.subVectors(i,t),T1.subVectors(e,t);const o=Zs.dot(Zs),a=Zs.dot(Jo),l=Zs.dot(T1),f=Jo.dot(Jo),h=Jo.dot(T1),d=o*f-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(f*l-a*h)*p,_=(o*h-a*l)*p;return s.set(1-m-_,_,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Qo)===null?!1:Qo.x>=0&&Qo.y>=0&&Qo.x+Qo.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Qo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Qo.x),l.addScaledVector(o,Qo.y),l.addScaledVector(a,Qo.z),l)}static isFrontFacing(e,t,i,r){return Zs.subVectors(i,t),Jo.subVectors(e,t),Zs.cross(Jo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zs.subVectors(this.c,this.b),Jo.subVectors(this.a,this.b),Zs.cross(Jo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return is.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return is.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return is.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return is.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return is.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Cc.subVectors(r,i),bc.subVectors(s,i),A1.subVectors(e,i);const l=Cc.dot(A1),f=bc.dot(A1);if(l<=0&&f<=0)return t.copy(i);C1.subVectors(e,r);const h=Cc.dot(C1),d=bc.dot(C1);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*f;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(Cc,o);b1.subVectors(e,s);const m=Cc.dot(b1),_=bc.dot(b1);if(_>=0&&m<=_)return t.copy(s);const y=m*f-l*_;if(y<=0&&f>=0&&_<=0)return a=f/(f-_),t.copy(i).addScaledVector(bc,a);const x=h*_-m*d;if(x<=0&&d-h>=0&&m-_>=0)return Vb.subVectors(s,r),a=(d-h)/(d-h+(m-_)),t.copy(r).addScaledVector(Vb,a);const g=1/(x+y+p);return o=y*g,a=p*g,t.copy(i).addScaledVector(Cc,o).addScaledVector(bc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ba={h:0,s:0,l:0},Hg={h:0,s:0,l:0};function R1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class nt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Lr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,mn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=mn.workingColorSpace){return this.r=e,this.g=t,this.b=i,mn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=mn.workingColorSpace){if(e=bE(e,1),t=$n(t,0,1),i=$n(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=R1(o,s,e+1/3),this.g=R1(o,s,e),this.b=R1(o,s,e-1/3)}return mn.toWorkingColorSpace(this,r),this}setStyle(e,t=Lr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Lr){const i=pD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Af(e.r),this.g=Af(e.g),this.b=Af(e.b),this}copyLinearToSRGB(e){return this.r=g1(e.r),this.g=g1(e.g),this.b=g1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Lr){return mn.fromWorkingColorSpace(ji.copy(this),e),Math.round($n(ji.r*255,0,255))*65536+Math.round($n(ji.g*255,0,255))*256+Math.round($n(ji.b*255,0,255))}getHexString(e=Lr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=mn.workingColorSpace){mn.fromWorkingColorSpace(ji.copy(this),t);const i=ji.r,r=ji.g,s=ji.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,f;const h=(a+o)/2;if(a===o)l=0,f=0;else{const d=o-a;switch(f=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=f,e.l=h,e}getRGB(e,t=mn.workingColorSpace){return mn.fromWorkingColorSpace(ji.copy(this),t),e.r=ji.r,e.g=ji.g,e.b=ji.b,e}getStyle(e=Lr){mn.fromWorkingColorSpace(ji.copy(this),e);const t=ji.r,i=ji.g,r=ji.b;return e!==Lr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ba),this.setHSL(Ba.h+e,Ba.s+t,Ba.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ba),e.getHSL(Hg);const i=zd(Ba.h,Hg.h,t),r=zd(Ba.s,Hg.s,t),s=zd(Ba.l,Hg.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ji=new nt;nt.NAMES=pD;let q4=0;class Bi extends Ho{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:q4++}),this.uuid=us(),this.name="",this.type="Material",this.blending=Ru,this.side=wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gv,this.blendDst=Wv,this.blendEquation=$a,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new nt(0,0,0),this.blendAlpha=0,this.depthFunc=wp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Lw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cu,this.stencilZFail=cu,this.stencilZPass=cu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ru&&(i.blending=this.blending),this.side!==wa&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Gv&&(i.blendSrc=this.blendSrc),this.blendDst!==Wv&&(i.blendDst=this.blendDst),this.blendEquation!==$a&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==wp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Lw&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==cu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==cu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==cu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class Aa extends Bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Gr,this.combine=sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const la=j4();function j4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):f<-14?(i[l]=1024>>-f-14,i[l|256]=1024>>-f-14|32768,r[l]=-f-1,r[l|256]=-f-1):f<=15?(i[l]=f+15<<10,i[l|256]=f+15<<10|32768,r[l]=13,r[l|256]=13):f<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,h=0;for(;!(f&8388608);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[l]=f|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function br(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=$n(n,-65504,65504),la.floatView[0]=n;const e=la.uint32View[0],t=e>>23&511;return la.baseTable[t]+((e&8388607)>>la.shiftTable[t])}function pd(n){const e=n>>10;return la.uint32View[0]=la.mantissaTable[la.offsetTable[e]+(n&1023)]+la.exponentTable[e],la.floatView[0]}const wu={toHalfFloat:br,fromHalfFloat:pd},ui=new W,Vg=new be;class Sn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Wn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return PE("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Vg.fromBufferAttribute(this,t),Vg.applyMatrix3(e),this.setXY(t,Vg.x,Vg.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ui.fromBufferAttribute(this,t),ui.applyMatrix3(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ui.fromBufferAttribute(this,t),ui.applyMatrix4(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ui.fromBufferAttribute(this,t),ui.applyNormalMatrix(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ui.fromBufferAttribute(this,t),ui.transformDirection(e),this.setXYZ(t,ui.x,ui.y,ui.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=mr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Vt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=mr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=mr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=mr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=mr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array),s=Vt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ip&&(e.usage=this.usage),e}}class Z4 extends Sn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class K4 extends Sn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class $4 extends Sn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class J4 extends Sn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class fy extends Sn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Q4 extends Sn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class LE extends Sn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class eB extends Sn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=pd(this.array[e*this.itemSize]);return this.normalized&&(t=mr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize]=br(t),this}getY(e){let t=pd(this.array[e*this.itemSize+1]);return this.normalized&&(t=mr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+1]=br(t),this}getZ(e){let t=pd(this.array[e*this.itemSize+2]);return this.normalized&&(t=mr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+2]=br(t),this}getW(e){let t=pd(this.array[e*this.itemSize+3]);return this.normalized&&(t=mr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+3]=br(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this.array[e+2]=br(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array),s=Vt(s,this.array)),this.array[e+0]=br(t),this.array[e+1]=br(i),this.array[e+2]=br(r),this.array[e+3]=br(s),this}}class xt extends Sn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let tB=0;const Cs=new Lt,P1=new un,Rc=new W,$r=new xr,Bh=new xr,Ai=new W;class Wt extends Ho{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tB++}),this.uuid=us(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cD(e)?LE:fy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ht().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cs.makeRotationFromQuaternion(e),this.applyMatrix4(Cs),this}rotateX(e){return Cs.makeRotationX(e),this.applyMatrix4(Cs),this}rotateY(e){return Cs.makeRotationY(e),this.applyMatrix4(Cs),this}rotateZ(e){return Cs.makeRotationZ(e),this.applyMatrix4(Cs),this}translate(e,t,i){return Cs.makeTranslation(e,t,i),this.applyMatrix4(Cs),this}scale(e,t,i){return Cs.makeScale(e,t,i),this.applyMatrix4(Cs),this}lookAt(e){return P1.lookAt(e),P1.updateMatrix(),this.applyMatrix4(P1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rc).negate(),this.translate(Rc.x,Rc.y,Rc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new xt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];$r.setFromBufferAttribute(s),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,$r.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,$r.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint($r.min),this.boundingBox.expandByPoint($r.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new tr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(e){const i=this.boundingSphere.center;if($r.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Bh.setFromBufferAttribute(a),this.morphTargetsRelative?(Ai.addVectors($r.min,Bh.min),$r.expandByPoint(Ai),Ai.addVectors($r.max,Bh.max),$r.expandByPoint(Ai)):($r.expandByPoint(Bh.min),$r.expandByPoint(Bh.max))}$r.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Ai.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ai));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let f=0,h=a.count;f<h;f++)Ai.fromBufferAttribute(a,f),l&&(Rc.fromBufferAttribute(e,f),Ai.add(Rc)),r=Math.max(r,i.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Sn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let b=0;b<i.count;b++)a[b]=new W,l[b]=new W;const f=new W,h=new W,d=new W,p=new be,m=new be,_=new be,y=new W,x=new W;function g(b,C,A){f.fromBufferAttribute(i,b),h.fromBufferAttribute(i,C),d.fromBufferAttribute(i,A),p.fromBufferAttribute(s,b),m.fromBufferAttribute(s,C),_.fromBufferAttribute(s,A),h.sub(f),d.sub(f),m.sub(p),_.sub(p);const O=1/(m.x*_.y-_.x*m.y);isFinite(O)&&(y.copy(h).multiplyScalar(_.y).addScaledVector(d,-m.y).multiplyScalar(O),x.copy(d).multiplyScalar(m.x).addScaledVector(h,-_.x).multiplyScalar(O),a[b].add(y),a[C].add(y),a[A].add(y),l[b].add(x),l[C].add(x),l[A].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let b=0,C=S.length;b<C;++b){const A=S[b],O=A.start,F=A.count;for(let V=O,Y=O+F;V<Y;V+=3)g(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const w=new W,E=new W,I=new W,R=new W;function P(b){I.fromBufferAttribute(r,b),R.copy(I);const C=a[b];w.copy(C),w.sub(I.multiplyScalar(I.dot(C))).normalize(),E.crossVectors(R,C);const O=E.dot(l[b])<0?-1:1;o.setXYZW(b,w.x,w.y,w.z,O)}for(let b=0,C=S.length;b<C;++b){const A=S[b],O=A.start,F=A.count;for(let V=O,Y=O+F;V<Y;V+=3)P(e.getX(V+0)),P(e.getX(V+1)),P(e.getX(V+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Sn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new W,s=new W,o=new W,a=new W,l=new W,f=new W,h=new W,d=new W;if(e)for(let p=0,m=e.count;p<m;p+=3){const _=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,x),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,_),l.fromBufferAttribute(i,y),f.fromBufferAttribute(i,x),a.add(h),l.add(h),f.add(h),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(x,f.x,f.y,f.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ai.fromBufferAttribute(e,t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)}toNonIndexed(){function e(a,l){const f=a.array,h=a.itemSize,d=a.normalized,p=new f.constructor(l.length*h);let m=0,_=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*h;for(let g=0;g<h;g++)p[_++]=f[m++]}return new Sn(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],f=e(l,i);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const l=[],f=s[a];for(let h=0,d=f.length;h<d;h++){const p=f[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const f=i[l];e.data.attributes[l]=f.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const h=r[f];this.setAttribute(f,h.clone(t))}const s=e.morphAttributes;for(const f in s){const h=[],d=s[f];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[f]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,h=o.length;f<h;f++){const d=o[f];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Gb=new Lt,ql=new nc,Gg=new tr,Wb=new W,Pc=new W,Ic=new W,Lc=new W,I1=new W,Wg=new W,Xg=new be,Yg=new be,qg=new be,Xb=new W,Yb=new W,qb=new W,jg=new W,Zg=new W;class Xn extends un{constructor(e=new Wt,t=new Aa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Wg.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const h=a[l],d=s[l];h!==0&&(I1.fromBufferAttribute(d,e),o?Wg.addScaledVector(I1,h):Wg.addScaledVector(I1.sub(t),h))}t.add(Wg)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Gg.copy(i.boundingSphere),Gg.applyMatrix4(s),ql.copy(e.ray).recast(e.near),!(Gg.containsPoint(ql.origin)===!1&&(ql.intersectSphere(Gg,Wb)===null||ql.origin.distanceToSquared(Wb)>(e.far-e.near)**2))&&(Gb.copy(s).invert(),ql.copy(e.ray).applyMatrix4(Gb),!(i.boundingBox!==null&&ql.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ql)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,f=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,y=p.length;_<y;_++){const x=p[_],g=o[x.materialIndex],S=Math.max(x.start,m.start),w=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=S,I=w;E<I;E+=3){const R=a.getX(E),P=a.getX(E+1),b=a.getX(E+2);r=Kg(this,g,e,i,f,h,d,R,P,b),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const _=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let x=_,g=y;x<g;x+=3){const S=a.getX(x),w=a.getX(x+1),E=a.getX(x+2);r=Kg(this,o,e,i,f,h,d,S,w,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let _=0,y=p.length;_<y;_++){const x=p[_],g=o[x.materialIndex],S=Math.max(x.start,m.start),w=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let E=S,I=w;E<I;E+=3){const R=E,P=E+1,b=E+2;r=Kg(this,g,e,i,f,h,d,R,P,b),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const _=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let x=_,g=y;x<g;x+=3){const S=x,w=x+1,E=x+2;r=Kg(this,o,e,i,f,h,d,S,w,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function nB(n,e,t,i,r,s,o,a){let l;if(e.side===yr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===wa,a),l===null)return null;Zg.copy(a),Zg.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Zg);return f<t.near||f>t.far?null:{distance:f,point:Zg.clone(),object:n}}function Kg(n,e,t,i,r,s,o,a,l,f){n.getVertexPosition(a,Pc),n.getVertexPosition(l,Ic),n.getVertexPosition(f,Lc);const h=nB(n,e,t,i,Pc,Ic,Lc,jg);if(h){r&&(Xg.fromBufferAttribute(r,a),Yg.fromBufferAttribute(r,l),qg.fromBufferAttribute(r,f),h.uv=is.getInterpolation(jg,Pc,Ic,Lc,Xg,Yg,qg,new be)),s&&(Xg.fromBufferAttribute(s,a),Yg.fromBufferAttribute(s,l),qg.fromBufferAttribute(s,f),h.uv1=is.getInterpolation(jg,Pc,Ic,Lc,Xg,Yg,qg,new be)),o&&(Xb.fromBufferAttribute(o,a),Yb.fromBufferAttribute(o,l),qb.fromBufferAttribute(o,f),h.normal=is.getInterpolation(jg,Pc,Ic,Lc,Xb,Yb,qb,new W),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:f,normal:new W,materialIndex:0};is.getNormal(Pc,Ic,Lc,d.normal),h.face=d}return h}class Il extends Wt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],h=[],d=[];let p=0,m=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new xt(f,3)),this.setAttribute("normal",new xt(h,3)),this.setAttribute("uv",new xt(d,2));function _(y,x,g,S,w,E,I,R,P,b,C){const A=E/P,O=I/b,F=E/2,V=I/2,Y=R/2,J=P+1,K=b+1;let ne=0,B=0;const te=new W;for(let k=0;k<K;k++){const ce=k*O-V;for(let Se=0;Se<J;Se++){const Fe=Se*A-F;te[y]=Fe*S,te[x]=ce*w,te[g]=Y,f.push(te.x,te.y,te.z),te[y]=0,te[x]=0,te[g]=R>0?1:-1,h.push(te.x,te.y,te.z),d.push(Se/P),d.push(1-k/b),ne+=1}}for(let k=0;k<b;k++)for(let ce=0;ce<P;ce++){const Se=p+ce+J*k,Fe=p+ce+J*(k+1),ue=p+(ce+1)+J*(k+1),Ee=p+(ce+1)+J*k;l.push(Se,Fe,Ee),l.push(Fe,ue,Ee),B+=6}a.addGroup(m,B,C),m+=B,p+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Il(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function cr(n){const e={};for(let t=0;t<n.length;t++){const i=Xf(n[t]);for(const r in i)e[r]=i[r]}return e}function iB(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function mD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:mn.workingColorSpace}const gD={clone:Xf,merge:cr};var rB=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sB=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Wr extends Bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rB,this.fragmentShader=sB,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xf(e.uniforms),this.uniformsGroups=iB(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class cm extends un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Lt,this.projectionMatrix=new Lt,this.projectionMatrixInverse=new Lt,this.coordinateSystem=Co}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ha=new W,jb=new be,Zb=new be;class Jn extends cm{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Wf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Iu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wf*2*Math.atan(Math.tan(Iu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ha.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ha.x,Ha.y).multiplyScalar(-e/Ha.z),Ha.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ha.x,Ha.y).multiplyScalar(-e/Ha.z)}getViewSize(e,t){return this.getViewBounds(e,jb,Zb),t.subVectors(Zb,jb)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Iu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/f,r*=o.width/l,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Dc=-90,Nc=1;class vD extends un{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Jn(Dc,Nc,e,t);r.layers=this.layers,this.add(r);const s=new Jn(Dc,Nc,e,t);s.layers=this.layers,this.add(s);const o=new Jn(Dc,Nc,e,t);o.layers=this.layers,this.add(o);const a=new Jn(Dc,Nc,e,t);a.layers=this.layers,this.add(a);const l=new Jn(Dc,Nc,e,t);l.layers=this.layers,this.add(l);const f=new Jn(Dc,Nc,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const f of t)this.remove(f);if(e===Co)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Lp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,f,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class fm extends dn{constructor(e,t,i,r,s,o,a,l,f,h){e=e!==void 0?e:[],t=t!==void 0?t:Fo,super(e,t,i,r,s,o,a,l,f,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class DE extends ds{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new fm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:_n}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Il(5,5,5),s=new Wr({name:"CubemapFromEquirect",uniforms:Xf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:yr,blending:Do});s.uniforms.tEquirect.value=t;const o=new Xn(r,s),a=t.minFilter;return t.minFilter===Ao&&(t.minFilter=_n),new vD(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const L1=new W,oB=new W,aB=new Ht;class sa{constructor(e=new W(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=L1.subVectors(i,t).cross(oB.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(L1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||aB.getNormalMatrix(e),r=this.coplanarPoint(L1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jl=new tr,$g=new W;class hm{constructor(e=new sa,t=new sa,i=new sa,r=new sa,s=new sa,o=new sa){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Co){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],f=r[4],h=r[5],d=r[6],p=r[7],m=r[8],_=r[9],y=r[10],x=r[11],g=r[12],S=r[13],w=r[14],E=r[15];if(i[0].setComponents(l-s,p-f,x-m,E-g).normalize(),i[1].setComponents(l+s,p+f,x+m,E+g).normalize(),i[2].setComponents(l+o,p+h,x+_,E+S).normalize(),i[3].setComponents(l-o,p-h,x-_,E-S).normalize(),i[4].setComponents(l-a,p-d,x-y,E-w).normalize(),t===Co)i[5].setComponents(l+a,p+d,x+y,E+w).normalize();else if(t===Lp)i[5].setComponents(a,d,y,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),jl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),jl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jl)}intersectsSprite(e){return jl.center.set(0,0,0),jl.radius=.7071067811865476,jl.applyMatrix4(e.matrixWorld),this.intersectsSphere(jl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if($g.x=r.normal.x>0?e.max.x:e.min.x,$g.y=r.normal.y>0?e.max.y:e.min.y,$g.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint($g)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _D(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function lB(n){const e=new WeakMap;function t(a,l){const f=a.array,h=a.usage,d=f.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,f,h),a.onUploadCallback();let m;if(f instanceof Float32Array)m=n.FLOAT;else if(f instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)m=n.SHORT;else if(f instanceof Uint32Array)m=n.UNSIGNED_INT;else if(f instanceof Int32Array)m=n.INT;else if(f instanceof Int8Array)m=n.BYTE;else if(f instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:p,type:m,bytesPerElement:f.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,f){const h=l.array,d=l._updateRange,p=l.updateRanges;if(n.bindBuffer(f,a),d.count===-1&&p.length===0&&n.bufferSubData(f,0,h),p.length!==0){for(let m=0,_=p.length;m<_;m++){const y=p[m];n.bufferSubData(f,y.start*h.BYTES_PER_ELEMENT,h,y.start,y.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count),d.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const f=e.get(a);if(f===void 0)e.set(a,t(a,l));else if(f.version<a.version){if(f.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,a,l),f.version=a.version}}return{get:r,remove:s,update:o}}class Ll extends Wt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),f=a+1,h=l+1,d=e/a,p=t/l,m=[],_=[],y=[],x=[];for(let g=0;g<h;g++){const S=g*p-o;for(let w=0;w<f;w++){const E=w*d-s;_.push(E,-S,0),y.push(0,0,1),x.push(w/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const w=S+f*g,E=S+f*(g+1),I=S+1+f*(g+1),R=S+1+f*g;m.push(w,E,R),m.push(E,I,R)}this.setIndex(m),this.setAttribute("position",new xt(_,3)),this.setAttribute("normal",new xt(y,3)),this.setAttribute("uv",new xt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ll(e.width,e.height,e.widthSegments,e.heightSegments)}}var uB=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,cB=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fB=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hB=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dB=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,pB=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,mB=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gB=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,vB=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,_B=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,yB=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xB=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SB=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wB=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MB=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,EB=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,TB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,AB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,CB=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,bB=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RB=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PB=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,IB=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,LB=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DB=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NB=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,OB=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,UB=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,kB=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,FB=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zB="gl_FragColor = linearToOutputTexel( gl_FragColor );",BB=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,HB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VB=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,GB=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,WB=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,YB=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,qB=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,jB=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ZB=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KB=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,$B=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,JB=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QB=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,e5=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,t5=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,n5=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,i5=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,r5=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,s5=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,o5=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,a5=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,l5=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,u5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,c5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,f5=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,h5=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,d5=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,p5=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,m5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,g5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,v5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,y5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,x5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,S5=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,w5=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,M5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,E5=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,T5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,A5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,C5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,b5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,R5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,P5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,I5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,L5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,D5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,N5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,O5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,U5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,k5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,F5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,z5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,B5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,H5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,V5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,G5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,W5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,X5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Y5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,q5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,j5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Z5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,K5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,J5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Q5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,mH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,vH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_H=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,MH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,CH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,RH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,PH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,DH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gt={alphahash_fragment:uB,alphahash_pars_fragment:cB,alphamap_fragment:fB,alphamap_pars_fragment:hB,alphatest_fragment:dB,alphatest_pars_fragment:pB,aomap_fragment:mB,aomap_pars_fragment:gB,batching_pars_vertex:vB,batching_vertex:_B,begin_vertex:yB,beginnormal_vertex:xB,bsdfs:SB,iridescence_fragment:wB,bumpmap_pars_fragment:MB,clipping_planes_fragment:EB,clipping_planes_pars_fragment:TB,clipping_planes_pars_vertex:AB,clipping_planes_vertex:CB,color_fragment:bB,color_pars_fragment:RB,color_pars_vertex:PB,color_vertex:IB,common:LB,cube_uv_reflection_fragment:DB,defaultnormal_vertex:NB,displacementmap_pars_vertex:OB,displacementmap_vertex:UB,emissivemap_fragment:kB,emissivemap_pars_fragment:FB,colorspace_fragment:zB,colorspace_pars_fragment:BB,envmap_fragment:HB,envmap_common_pars_fragment:VB,envmap_pars_fragment:GB,envmap_pars_vertex:WB,envmap_physical_pars_fragment:t5,envmap_vertex:XB,fog_vertex:YB,fog_pars_vertex:qB,fog_fragment:jB,fog_pars_fragment:ZB,gradientmap_pars_fragment:KB,lightmap_pars_fragment:$B,lights_lambert_fragment:JB,lights_lambert_pars_fragment:QB,lights_pars_begin:e5,lights_toon_fragment:n5,lights_toon_pars_fragment:i5,lights_phong_fragment:r5,lights_phong_pars_fragment:s5,lights_physical_fragment:o5,lights_physical_pars_fragment:a5,lights_fragment_begin:l5,lights_fragment_maps:u5,lights_fragment_end:c5,logdepthbuf_fragment:f5,logdepthbuf_pars_fragment:h5,logdepthbuf_pars_vertex:d5,logdepthbuf_vertex:p5,map_fragment:m5,map_pars_fragment:g5,map_particle_fragment:v5,map_particle_pars_fragment:_5,metalnessmap_fragment:y5,metalnessmap_pars_fragment:x5,morphinstance_vertex:S5,morphcolor_vertex:w5,morphnormal_vertex:M5,morphtarget_pars_vertex:E5,morphtarget_vertex:T5,normal_fragment_begin:A5,normal_fragment_maps:C5,normal_pars_fragment:b5,normal_pars_vertex:R5,normal_vertex:P5,normalmap_pars_fragment:I5,clearcoat_normal_fragment_begin:L5,clearcoat_normal_fragment_maps:D5,clearcoat_pars_fragment:N5,iridescence_pars_fragment:O5,opaque_fragment:U5,packing:k5,premultiplied_alpha_fragment:F5,project_vertex:z5,dithering_fragment:B5,dithering_pars_fragment:H5,roughnessmap_fragment:V5,roughnessmap_pars_fragment:G5,shadowmap_pars_fragment:W5,shadowmap_pars_vertex:X5,shadowmap_vertex:Y5,shadowmask_pars_fragment:q5,skinbase_vertex:j5,skinning_pars_vertex:Z5,skinning_vertex:K5,skinnormal_vertex:$5,specularmap_fragment:J5,specularmap_pars_fragment:Q5,tonemapping_fragment:eH,tonemapping_pars_fragment:tH,transmission_fragment:nH,transmission_pars_fragment:iH,uv_pars_fragment:rH,uv_pars_vertex:sH,uv_vertex:oH,worldpos_vertex:aH,background_vert:lH,background_frag:uH,backgroundCube_vert:cH,backgroundCube_frag:fH,cube_vert:hH,cube_frag:dH,depth_vert:pH,depth_frag:mH,distanceRGBA_vert:gH,distanceRGBA_frag:vH,equirect_vert:_H,equirect_frag:yH,linedashed_vert:xH,linedashed_frag:SH,meshbasic_vert:wH,meshbasic_frag:MH,meshlambert_vert:EH,meshlambert_frag:TH,meshmatcap_vert:AH,meshmatcap_frag:CH,meshnormal_vert:bH,meshnormal_frag:RH,meshphong_vert:PH,meshphong_frag:IH,meshphysical_vert:LH,meshphysical_frag:DH,meshtoon_vert:NH,meshtoon_frag:OH,points_vert:UH,points_frag:kH,shadow_vert:FH,shadow_frag:zH,sprite_vert:BH,sprite_frag:HH},et={common:{diffuse:{value:new nt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ht},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ht}},envmap:{envMap:{value:null},envMapRotation:{value:new Ht},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ht}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ht}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ht},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ht},normalScale:{value:new be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ht},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ht}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ht}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ht}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new nt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0},uvTransform:{value:new Ht}},sprite:{diffuse:{value:new nt(16777215)},opacity:{value:1},center:{value:new be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ht},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0}}},io={basic:{uniforms:cr([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:cr([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new nt(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:cr([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new nt(0)},specular:{value:new nt(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:cr([et.common,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.roughnessmap,et.metalnessmap,et.fog,et.lights,{emissive:{value:new nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:cr([et.common,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.gradientmap,et.fog,et.lights,{emissive:{value:new nt(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:cr([et.common,et.bumpmap,et.normalmap,et.displacementmap,et.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:cr([et.points,et.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:cr([et.common,et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:cr([et.common,et.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:cr([et.common,et.bumpmap,et.normalmap,et.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.meshnormal_vert,fragmentShader:Gt.meshnormal_frag},sprite:{uniforms:cr([et.sprite,et.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ht}},vertexShader:Gt.backgroundCube_vert,fragmentShader:Gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:cr([et.common,et.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:cr([et.lights,et.fog,{color:{value:new nt(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};io.physical={uniforms:cr([io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ht},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ht},clearcoatNormalScale:{value:new be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ht},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ht},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ht},sheen:{value:0},sheenColor:{value:new nt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ht},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ht},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ht},transmissionSamplerSize:{value:new be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ht},attenuationDistance:{value:0},attenuationColor:{value:new nt(0)},specularColor:{value:new nt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ht},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ht},anisotropyVector:{value:new be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ht}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};const Jg={r:0,b:0,g:0},Zl=new Gr,VH=new Lt;function GH(n,e,t,i,r,s,o){const a=new nt(0);let l=s===!0?0:1,f,h,d=null,p=0,m=null;function _(S){let w=S.isScene===!0?S.background:null;return w&&w.isTexture&&(w=(S.backgroundBlurriness>0?t:e).get(w)),w}function y(S){let w=!1;const E=_(S);E===null?g(a,l):E&&E.isColor&&(g(E,1),w=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?i.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(S,w){const E=_(w);E&&(E.isCubeTexture||E.mapping===sh)?(h===void 0&&(h=new Xn(new Il(1,1,1),new Wr({name:"BackgroundCubeMaterial",uniforms:Xf(io.backgroundCube.uniforms),vertexShader:io.backgroundCube.vertexShader,fragmentShader:io.backgroundCube.fragmentShader,side:yr,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(I,R,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),Zl.copy(w.backgroundRotation),Zl.x*=-1,Zl.y*=-1,Zl.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Zl.y*=-1,Zl.z*=-1),h.material.uniforms.envMap.value=E,h.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(VH.makeRotationFromEuler(Zl)),h.material.toneMapped=mn.getTransfer(E.colorSpace)!==An,(d!==E||p!==E.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=E,p=E.version,m=n.toneMapping),h.layers.enableAll(),S.unshift(h,h.geometry,h.material,0,0,null)):E&&E.isTexture&&(f===void 0&&(f=new Xn(new Ll(2,2),new Wr({name:"BackgroundMaterial",uniforms:Xf(io.background.uniforms),vertexShader:io.background.vertexShader,fragmentShader:io.background.fragmentShader,side:wa,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=E,f.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,f.material.toneMapped=mn.getTransfer(E.colorSpace)!==An,E.matrixAutoUpdate===!0&&E.updateMatrix(),f.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||p!==E.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,d=E,p=E.version,m=n.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null))}function g(S,w){S.getRGB(Jg,mD(n)),i.buffers.color.setClear(Jg.r,Jg.g,Jg.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(S,w=1){a.set(S),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,g(a,l)},render:y,addToRenderList:x}}function WH(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(A,O,F,V,Y){let J=!1;const K=d(V,F,O);s!==K&&(s=K,f(s.object)),J=m(A,V,F,Y),J&&_(A,V,F,Y),Y!==null&&e.update(Y,n.ELEMENT_ARRAY_BUFFER),(J||o)&&(o=!1,E(A,O,F,V),Y!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Y).buffer))}function l(){return n.createVertexArray()}function f(A){return n.bindVertexArray(A)}function h(A){return n.deleteVertexArray(A)}function d(A,O,F){const V=F.wireframe===!0;let Y=i[A.id];Y===void 0&&(Y={},i[A.id]=Y);let J=Y[O.id];J===void 0&&(J={},Y[O.id]=J);let K=J[V];return K===void 0&&(K=p(l()),J[V]=K),K}function p(A){const O=[],F=[],V=[];for(let Y=0;Y<t;Y++)O[Y]=0,F[Y]=0,V[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:F,attributeDivisors:V,object:A,attributes:{},index:null}}function m(A,O,F,V){const Y=s.attributes,J=O.attributes;let K=0;const ne=F.getAttributes();for(const B in ne)if(ne[B].location>=0){const k=Y[B];let ce=J[B];if(ce===void 0&&(B==="instanceMatrix"&&A.instanceMatrix&&(ce=A.instanceMatrix),B==="instanceColor"&&A.instanceColor&&(ce=A.instanceColor)),k===void 0||k.attribute!==ce||ce&&k.data!==ce.data)return!0;K++}return s.attributesNum!==K||s.index!==V}function _(A,O,F,V){const Y={},J=O.attributes;let K=0;const ne=F.getAttributes();for(const B in ne)if(ne[B].location>=0){let k=J[B];k===void 0&&(B==="instanceMatrix"&&A.instanceMatrix&&(k=A.instanceMatrix),B==="instanceColor"&&A.instanceColor&&(k=A.instanceColor));const ce={};ce.attribute=k,k&&k.data&&(ce.data=k.data),Y[B]=ce,K++}s.attributes=Y,s.attributesNum=K,s.index=V}function y(){const A=s.newAttributes;for(let O=0,F=A.length;O<F;O++)A[O]=0}function x(A){g(A,0)}function g(A,O){const F=s.newAttributes,V=s.enabledAttributes,Y=s.attributeDivisors;F[A]=1,V[A]===0&&(n.enableVertexAttribArray(A),V[A]=1),Y[A]!==O&&(n.vertexAttribDivisor(A,O),Y[A]=O)}function S(){const A=s.newAttributes,O=s.enabledAttributes;for(let F=0,V=O.length;F<V;F++)O[F]!==A[F]&&(n.disableVertexAttribArray(F),O[F]=0)}function w(A,O,F,V,Y,J,K){K===!0?n.vertexAttribIPointer(A,O,F,Y,J):n.vertexAttribPointer(A,O,F,V,Y,J)}function E(A,O,F,V){y();const Y=V.attributes,J=F.getAttributes(),K=O.defaultAttributeValues;for(const ne in J){const B=J[ne];if(B.location>=0){let te=Y[ne];if(te===void 0&&(ne==="instanceMatrix"&&A.instanceMatrix&&(te=A.instanceMatrix),ne==="instanceColor"&&A.instanceColor&&(te=A.instanceColor)),te!==void 0){const k=te.normalized,ce=te.itemSize,Se=e.get(te);if(Se===void 0)continue;const Fe=Se.buffer,ue=Se.type,Ee=Se.bytesPerElement,Te=ue===n.INT||ue===n.UNSIGNED_INT||te.gpuType===om;if(te.isInterleavedBufferAttribute){const Pe=te.data,Qe=Pe.stride,ht=te.offset;if(Pe.isInstancedInterleavedBuffer){for(let mt=0;mt<B.locationSize;mt++)g(B.location+mt,Pe.meshPerAttribute);A.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let mt=0;mt<B.locationSize;mt++)x(B.location+mt);n.bindBuffer(n.ARRAY_BUFFER,Fe);for(let mt=0;mt<B.locationSize;mt++)w(B.location+mt,ce/B.locationSize,ue,k,Qe*Ee,(ht+ce/B.locationSize*mt)*Ee,Te)}else{if(te.isInstancedBufferAttribute){for(let Pe=0;Pe<B.locationSize;Pe++)g(B.location+Pe,te.meshPerAttribute);A.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let Pe=0;Pe<B.locationSize;Pe++)x(B.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,Fe);for(let Pe=0;Pe<B.locationSize;Pe++)w(B.location+Pe,ce/B.locationSize,ue,k,ce*Ee,ce/B.locationSize*Pe*Ee,Te)}}else if(K!==void 0){const k=K[ne];if(k!==void 0)switch(k.length){case 2:n.vertexAttrib2fv(B.location,k);break;case 3:n.vertexAttrib3fv(B.location,k);break;case 4:n.vertexAttrib4fv(B.location,k);break;default:n.vertexAttrib1fv(B.location,k)}}}}S()}function I(){b();for(const A in i){const O=i[A];for(const F in O){const V=O[F];for(const Y in V)h(V[Y].object),delete V[Y];delete O[F]}delete i[A]}}function R(A){if(i[A.id]===void 0)return;const O=i[A.id];for(const F in O){const V=O[F];for(const Y in V)h(V[Y].object),delete V[Y];delete O[F]}delete i[A.id]}function P(A){for(const O in i){const F=i[O];if(F[A.id]===void 0)continue;const V=F[A.id];for(const Y in V)h(V[Y].object),delete V[Y];delete F[A.id]}}function b(){C(),o=!0,s!==r&&(s=r,f(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:b,resetDefaultState:C,dispose:I,releaseStatesOfGeometry:R,releaseStatesOfProgram:P,initAttributes:y,enableAttribute:x,disableUnusedAttributes:S}}function XH(n,e,t){let i;function r(f){i=f}function s(f,h){n.drawArrays(i,f,h),t.update(h,i,1)}function o(f,h,d){d!==0&&(n.drawArraysInstanced(i,f,h,d),t.update(h,i,d))}function a(f,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,h,0,d);let m=0;for(let _=0;_<d;_++)m+=h[_];t.update(m,i,1)}function l(f,h,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let _=0;_<f.length;_++)o(f[_],h[_],p[_]);else{m.multiDrawArraysInstancedWEBGL(i,f,0,h,0,p,0,d);let _=0;for(let y=0;y<d;y++)_+=h[y];for(let y=0;y<p.length;y++)t.update(_,i,p[y])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function YH(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(R){return!(R!==ri&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){const P=R===Ii&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==Vr&&i.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Wn&&!P)}function l(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const h=l(f);h!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",h,"instead."),f=h);const d=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:f,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:_,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:g,maxVaryings:S,maxFragmentUniforms:w,vertexTextures:E,maxSamples:I}}function qH(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new sa,a=new Ht,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const _=d.clippingPlanes,y=d.clipIntersection,x=d.clipShadows,g=n.get(d);if(!r||_===null||_.length===0||s&&!x)s?h(null):f();else{const S=s?0:i,w=S*4;let E=g.clippingState||null;l.value=E,E=h(_,p,w,m);for(let I=0;I!==w;++I)E[I]=t[I];g.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}};function f(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,_){const y=d!==null?d.length:0;let x=null;if(y!==0){if(x=l.value,_!==!0||x===null){const g=m+y*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<g)&&(x=new Float32Array(g));for(let w=0,E=m;w!==y;++w,E+=4)o.copy(d[w]).applyMatrix4(S,a),o.normal.toArray(x,E),x[E+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function jH(n){let e=new WeakMap;function t(o,a){return a===Vf?o.mapping=Fo:a===Mp&&(o.mapping=wl),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Vf||a===Mp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new DE(l.height);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class bo extends cm{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const df=4,Kb=[.125,.215,.35,.446,.526,.582],mu=20,D1=new bo,$b=new nt;let N1=null,O1=0,U1=0,k1=!1;const fu=(1+Math.sqrt(5))/2,Oc=1/fu,Jb=[new W(-fu,Oc,0),new W(fu,Oc,0),new W(-Oc,0,fu),new W(Oc,0,fu),new W(0,fu,-Oc),new W(0,fu,Oc),new W(-1,1,-1),new W(1,1,-1),new W(-1,1,1),new W(1,1,1)];class Nw{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){N1=this._renderer.getRenderTarget(),O1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),k1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=t2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=e2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(N1,O1,U1),this._renderer.xr.enabled=k1,e.scissorTest=!1,Qg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Fo||e.mapping===wl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),N1=this._renderer.getRenderTarget(),O1=this._renderer.getActiveCubeFace(),U1=this._renderer.getActiveMipmapLevel(),k1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:_n,minFilter:_n,generateMipmaps:!1,type:Ii,format:ri,colorSpace:Gs,depthBuffer:!1},r=Qb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Qb(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ZH(s)),this._blurMaterial=KH(s,e,t)}return r}_compileMaterial(e){const t=new Xn(this._lodPlanes[0],e);this._renderer.compile(t,D1)}_sceneToCubeUV(e,t,i,r){const a=new Jn(90,1,t,i),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor($b),h.toneMapping=No,h.autoClear=!1;const m=new Aa({name:"PMREM.Background",side:yr,depthWrite:!1,depthTest:!1}),_=new Xn(new Il,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy($b),y=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(f[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,f[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,f[g]));const w=this._cubeSize;Qg(r,S*w,g>2?w:0,w,w),h.setRenderTarget(r),y&&h.render(_,a),h.render(e,a)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Fo||e.mapping===wl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=t2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=e2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Xn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Qg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,D1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Jb[(r-s-1)%Jb.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Xn(this._lodPlanes[r],f),p=f.uniforms,m=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*mu-1),y=s/_,x=isFinite(s)?1+Math.floor(h*y):mu;x>mu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${mu}`);const g=[];let S=0;for(let P=0;P<mu;++P){const b=P/y,C=Math.exp(-b*b/2);g.push(C),P===0?S+=C:P<x&&(S+=2*C)}for(let P=0;P<g.length;P++)g[P]=g[P]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=_,p.mipInt.value=w-i;const E=this._sizeLods[r],I=3*E*(r>w-df?r-w+df:0),R=4*(this._cubeSize-E);Qg(t,I,R,3*E,2*E),l.setRenderTarget(t),l.render(d,D1)}}function ZH(n){const e=[],t=[],i=[];let r=n;const s=n-df+1+Kb.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-df?l=Kb[o-n+df-1]:o===0&&(l=0),i.push(l);const f=1/(a-2),h=-f,d=1+f,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,_=6,y=3,x=2,g=1,S=new Float32Array(y*_*m),w=new Float32Array(x*_*m),E=new Float32Array(g*_*m);for(let R=0;R<m;R++){const P=R%3*2/3-1,b=R>2?0:-1,C=[P,b,0,P+2/3,b,0,P+2/3,b+1,0,P,b,0,P+2/3,b+1,0,P,b+1,0];S.set(C,y*_*R),w.set(p,x*_*R);const A=[R,R,R,R,R,R];E.set(A,g*_*R)}const I=new Wt;I.setAttribute("position",new Sn(S,y)),I.setAttribute("uv",new Sn(w,x)),I.setAttribute("faceIndex",new Sn(E,g)),e.push(I),r>df&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Qb(n,e,t){const i=new ds(n,e,t);return i.texture.mapping=sh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Qg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function KH(n,e,t){const i=new Float32Array(mu),r=new W(0,1,0);return new Wr({name:"SphericalGaussianBlur",defines:{n:mu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function e2(){return new Wr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function t2(){return new Wr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:NE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function NE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $H(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,f=l===Vf||l===Mp,h=l===Fo||l===wl;if(f||h){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new Nw(n)),d=f?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return f&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new Nw(n)),d=f?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const f=6;for(let h=0;h<f;h++)a[h]!==void 0&&l++;return l===f}function s(a){const l=a.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function JH(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&PE("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function QH(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);for(const _ in p.morphAttributes){const y=p.morphAttributes[_];for(let x=0,g=y.length;x<g;x++)e.remove(y[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const _ in p)e.update(p[_],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const _ in m){const y=m[_];for(let x=0,g=y.length;x<g;x++)e.update(y[x],n.ARRAY_BUFFER)}}function f(d){const p=[],m=d.index,_=d.attributes.position;let y=0;if(m!==null){const S=m.array;y=m.version;for(let w=0,E=S.length;w<E;w+=3){const I=S[w+0],R=S[w+1],P=S[w+2];p.push(I,R,R,P,P,I)}}else if(_!==void 0){const S=_.array;y=_.version;for(let w=0,E=S.length/3-1;w<E;w+=3){const I=w+0,R=w+1,P=w+2;p.push(I,R,R,P,P,I)}}else return;const x=new(cD(p)?LE:fy)(p,1);x.version=y;const g=s.get(d);g&&e.remove(g),s.set(d,x)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&f(d)}else f(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function eV(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function f(p,m,_){_!==0&&(n.drawElementsInstanced(i,m,s,p*o,_),t.update(m,i,_))}function h(p,m,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,_);let x=0;for(let g=0;g<_;g++)x+=m[g];t.update(x,i,1)}function d(p,m,_,y){if(_===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)f(p[g]/o,m[g],y[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,y,0,_);let g=0;for(let S=0;S<_;S++)g+=m[S];for(let S=0;S<y.length;S++)t.update(g,i,y[S])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=f,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function tV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function nV(n,e,t){const i=new WeakMap,r=new sn;function s(o,a,l){const f=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==d){let A=function(){b.dispose(),i.delete(a),a.removeEventListener("dispose",A)};var m=A;p!==void 0&&p.texture.dispose();const _=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let E=0;_===!0&&(E=1),y===!0&&(E=2),x===!0&&(E=3);let I=a.attributes.position.count*E,R=1;I>e.maxTextureSize&&(R=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const P=new Float32Array(I*R*4*d),b=new cy(P,I,R,d);b.type=Wn,b.needsUpdate=!0;const C=E*4;for(let O=0;O<d;O++){const F=g[O],V=S[O],Y=w[O],J=I*R*4*O;for(let K=0;K<F.count;K++){const ne=K*C;_===!0&&(r.fromBufferAttribute(F,K),P[J+ne+0]=r.x,P[J+ne+1]=r.y,P[J+ne+2]=r.z,P[J+ne+3]=0),y===!0&&(r.fromBufferAttribute(V,K),P[J+ne+4]=r.x,P[J+ne+5]=r.y,P[J+ne+6]=r.z,P[J+ne+7]=0),x===!0&&(r.fromBufferAttribute(Y,K),P[J+ne+8]=r.x,P[J+ne+9]=r.y,P[J+ne+10]=r.z,P[J+ne+11]=Y.itemSize===4?r.w:1)}}p={count:d,texture:b,size:new be(I,R)},i.set(a,p),a.addEventListener("dispose",A)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let _=0;for(let x=0;x<f.length;x++)_+=f[x];const y=a.morphTargetsRelative?1:1-_;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",f)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function iV(n,e,t,i){let r=new WeakMap;function s(l){const f=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==f&&(e.update(d),r.set(d,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==f&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,f))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==f&&(p.update(),r.set(p,f))}return d}function o(){r=new WeakMap}function a(l){const f=l.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class OE extends dn{constructor(e,t,i,r,s,o,a,l,f,h=Pu){if(h!==Pu&&h!==qu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Pu&&(i=zo),i===void 0&&h===qu&&(i=Yu),super(null,r,s,o,a,l,h,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Pi,this.minFilter=l!==void 0?l:Pi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const yD=new dn,n2=new OE(1,1),xD=new cy,SD=new IE,wD=new fm,i2=[],r2=[],s2=new Float32Array(16),o2=new Float32Array(9),a2=new Float32Array(4);function oh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=i2[r];if(s===void 0&&(s=new Float32Array(r),i2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Si(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function wi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function hy(n,e){let t=r2[e];t===void 0&&(t=new Int32Array(e),r2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function rV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function sV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2fv(this.addr,e),wi(t,e)}}function oV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Si(t,e))return;n.uniform3fv(this.addr,e),wi(t,e)}}function aV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4fv(this.addr,e),wi(t,e)}}function lV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;a2.set(i),n.uniformMatrix2fv(this.addr,!1,a2),wi(t,i)}}function uV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;o2.set(i),n.uniformMatrix3fv(this.addr,!1,o2),wi(t,i)}}function cV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;s2.set(i),n.uniformMatrix4fv(this.addr,!1,s2),wi(t,i)}}function fV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function hV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2iv(this.addr,e),wi(t,e)}}function dV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3iv(this.addr,e),wi(t,e)}}function pV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4iv(this.addr,e),wi(t,e)}}function mV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function gV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2uiv(this.addr,e),wi(t,e)}}function vV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3uiv(this.addr,e),wi(t,e)}}function _V(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4uiv(this.addr,e),wi(t,e)}}function yV(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(n2.compareFunction=CE,s=n2):s=yD,t.setTexture2D(e||s,r)}function xV(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||SD,r)}function SV(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||wD,r)}function wV(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xD,r)}function MV(n){switch(n){case 5126:return rV;case 35664:return sV;case 35665:return oV;case 35666:return aV;case 35674:return lV;case 35675:return uV;case 35676:return cV;case 5124:case 35670:return fV;case 35667:case 35671:return hV;case 35668:case 35672:return dV;case 35669:case 35673:return pV;case 5125:return mV;case 36294:return gV;case 36295:return vV;case 36296:return _V;case 35678:case 36198:case 36298:case 36306:case 35682:return yV;case 35679:case 36299:case 36307:return xV;case 35680:case 36300:case 36308:case 36293:return SV;case 36289:case 36303:case 36311:case 36292:return wV}}function EV(n,e){n.uniform1fv(this.addr,e)}function TV(n,e){const t=oh(e,this.size,2);n.uniform2fv(this.addr,t)}function AV(n,e){const t=oh(e,this.size,3);n.uniform3fv(this.addr,t)}function CV(n,e){const t=oh(e,this.size,4);n.uniform4fv(this.addr,t)}function bV(n,e){const t=oh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function RV(n,e){const t=oh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function PV(n,e){const t=oh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function IV(n,e){n.uniform1iv(this.addr,e)}function LV(n,e){n.uniform2iv(this.addr,e)}function DV(n,e){n.uniform3iv(this.addr,e)}function NV(n,e){n.uniform4iv(this.addr,e)}function OV(n,e){n.uniform1uiv(this.addr,e)}function UV(n,e){n.uniform2uiv(this.addr,e)}function kV(n,e){n.uniform3uiv(this.addr,e)}function FV(n,e){n.uniform4uiv(this.addr,e)}function zV(n,e,t){const i=this.cache,r=e.length,s=hy(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||yD,s[o])}function BV(n,e,t){const i=this.cache,r=e.length,s=hy(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||SD,s[o])}function HV(n,e,t){const i=this.cache,r=e.length,s=hy(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||wD,s[o])}function VV(n,e,t){const i=this.cache,r=e.length,s=hy(t,r);Si(i,s)||(n.uniform1iv(this.addr,s),wi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||xD,s[o])}function GV(n){switch(n){case 5126:return EV;case 35664:return TV;case 35665:return AV;case 35666:return CV;case 35674:return bV;case 35675:return RV;case 35676:return PV;case 5124:case 35670:return IV;case 35667:case 35671:return LV;case 35668:case 35672:return DV;case 35669:case 35673:return NV;case 5125:return OV;case 36294:return UV;case 36295:return kV;case 36296:return FV;case 35678:case 36198:case 36298:case 36306:case 35682:return zV;case 35679:case 36299:case 36307:return BV;case 35680:case 36300:case 36308:case 36293:return HV;case 36289:case 36303:case 36311:case 36292:return VV}}class WV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=MV(t.type)}}class XV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=GV(t.type)}}class YV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const F1=/(\w+)(\])?(\[|\.)?/g;function l2(n,e){n.seq.push(e),n.map[e.id]=e}function qV(n,e,t){const i=n.name,r=i.length;for(F1.lastIndex=0;;){const s=F1.exec(i),o=F1.lastIndex;let a=s[1];const l=s[2]==="]",f=s[3];if(l&&(a=a|0),f===void 0||f==="["&&o+2===r){l2(t,f===void 0?new WV(a,n,e):new XV(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new YV(a),l2(t,d)),t=d}}}class ov{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);qV(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function u2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const jV=37297;let ZV=0;function KV(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function $V(n){const e=mn.getPrimaries(mn.workingColorSpace),t=mn.getPrimaries(n);let i;switch(e===t?i="":e===Pp&&t===Rp?i="LinearDisplayP3ToLinearSRGB":e===Rp&&t===Pp&&(i="LinearSRGBToLinearDisplayP3"),n){case Gs:case um:return[i,"LinearTransferOETF"];case Lr:case uy:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function c2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+KV(n.getShaderSource(e),o)}else return r}function JV(n,e){const t=$V(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function QV(n,e){let t;switch(e){case WL:t="Linear";break;case XL:t="Reinhard";break;case YL:t="OptimizedCineon";break;case vE:t="ACESFilmic";break;case jL:t="AgX";break;case ZL:t="Neutral";break;case qL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function e6(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(md).join(`
`)}function t6(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function n6(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function md(n){return n!==""}function f2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function h2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const i6=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ow(n){return n.replace(i6,s6)}const r6=new Map;function s6(n,e){let t=Gt[e];if(t===void 0){const i=r6.get(e);if(i!==void 0)t=Gt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Ow(t)}const o6=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function d2(n){return n.replace(o6,a6)}function a6(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function p2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function l6(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ty?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ld?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===eo&&(e="SHADOWMAP_TYPE_VSM"),e}function u6(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Fo:case wl:e="ENVMAP_TYPE_CUBE";break;case sh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function c6(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case wl:e="ENVMAP_MODE_REFRACTION";break}return e}function f6(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case sm:e="ENVMAP_BLENDING_MULTIPLY";break;case VL:e="ENVMAP_BLENDING_MIX";break;case GL:e="ENVMAP_BLENDING_ADD";break}return e}function h6(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function d6(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=l6(t),f=u6(t),h=c6(t),d=f6(t),p=h6(t),m=e6(t),_=t6(s),y=r.createProgram();let x,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(md).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(md).join(`
`),g.length>0&&(g+=`
`)):(x=[p2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(md).join(`
`),g=[p2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==No?"#define TONE_MAPPING":"",t.toneMapping!==No?Gt.tonemapping_pars_fragment:"",t.toneMapping!==No?QV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Gt.colorspace_pars_fragment,JV("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(md).join(`
`)),o=Ow(o),o=f2(o,t),o=h2(o,t),a=Ow(a),a=f2(a,t),a=h2(a,t),o=d2(o),a=d2(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===Dw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Dw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=S+x+o,E=S+g+a,I=u2(r,r.VERTEX_SHADER,w),R=u2(r,r.FRAGMENT_SHADER,E);r.attachShader(y,I),r.attachShader(y,R),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function P(O){if(n.debug.checkShaderErrors){const F=r.getProgramInfoLog(y).trim(),V=r.getShaderInfoLog(I).trim(),Y=r.getShaderInfoLog(R).trim();let J=!0,K=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(J=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,I,R);else{const ne=c2(r,I,"vertex"),B=c2(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+O.name+`
Material Type: `+O.type+`

Program Info Log: `+F+`
`+ne+`
`+B)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(V===""||Y==="")&&(K=!1);K&&(O.diagnostics={runnable:J,programLog:F,vertexShader:{log:V,prefix:x},fragmentShader:{log:Y,prefix:g}})}r.deleteShader(I),r.deleteShader(R),b=new ov(r,y),C=n6(r,y)}let b;this.getUniforms=function(){return b===void 0&&P(this),b};let C;this.getAttributes=function(){return C===void 0&&P(this),C};let A=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=r.getProgramParameter(y,jV)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ZV++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=I,this.fragmentShader=R,this}let p6=0;class m6{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new g6(e),t.set(e,i)),i}}class g6{constructor(e){this.id=p6++,this.code=e,this.usedTimes=0}}function v6(n,e,t,i,r,s,o){const a=new Lu,l=new m6,f=new Set,h=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(C){return f.add(C),C===0?"uv":`uv${C}`}function x(C,A,O,F,V){const Y=F.fog,J=V.geometry,K=C.isMeshStandardMaterial?F.environment:null,ne=(C.isMeshStandardMaterial?t:e).get(C.envMap||K),B=ne&&ne.mapping===sh?ne.image.height:null,te=_[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const k=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,ce=k!==void 0?k.length:0;let Se=0;J.morphAttributes.position!==void 0&&(Se=1),J.morphAttributes.normal!==void 0&&(Se=2),J.morphAttributes.color!==void 0&&(Se=3);let Fe,ue,Ee,Te;if(te){const Ot=io[te];Fe=Ot.vertexShader,ue=Ot.fragmentShader}else Fe=C.vertexShader,ue=C.fragmentShader,l.update(C),Ee=l.getVertexShaderID(C),Te=l.getFragmentShaderID(C);const Pe=n.getRenderTarget(),Qe=V.isInstancedMesh===!0,ht=V.isBatchedMesh===!0,mt=!!C.map,ut=!!C.matcap,G=!!ne,ve=!!C.aoMap,Re=!!C.lightMap,He=!!C.bumpMap,Me=!!C.normalMap,se=!!C.displacementMap,Ge=!!C.emissiveMap,Ke=!!C.metalnessMap,j=!!C.roughnessMap,U=C.anisotropy>0,he=C.clearcoat>0,Ie=C.dispersion>0,Le=C.iridescence>0,Ae=C.sheen>0,at=C.transmission>0,Ue=U&&!!C.anisotropyMap,qe=he&&!!C.clearcoatMap,gt=he&&!!C.clearcoatNormalMap,ke=he&&!!C.clearcoatRoughnessMap,$e=Le&&!!C.iridescenceMap,St=Le&&!!C.iridescenceThicknessMap,wt=Ae&&!!C.sheenColorMap,We=Ae&&!!C.sheenRoughnessMap,ie=!!C.specularMap,we=!!C.specularColorMap,Ve=!!C.specularIntensityMap,Q=at&&!!C.transmissionMap,ge=at&&!!C.thicknessMap,re=!!C.gradientMap,xe=!!C.alphaMap,Be=C.alphaTest>0,ct=!!C.alphaHash,At=!!C.extensions;let zt=No;C.toneMapped&&(Pe===null||Pe.isXRRenderTarget===!0)&&(zt=n.toneMapping);const Qt={shaderID:te,shaderType:C.type,shaderName:C.name,vertexShader:Fe,fragmentShader:ue,defines:C.defines,customVertexShaderID:Ee,customFragmentShaderID:Te,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,batching:ht,batchingColor:ht&&V._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&V.instanceColor!==null,instancingMorph:Qe&&V.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Pe===null?n.outputColorSpace:Pe.isXRRenderTarget===!0?Pe.texture.colorSpace:Gs,alphaToCoverage:!!C.alphaToCoverage,map:mt,matcap:ut,envMap:G,envMapMode:G&&ne.mapping,envMapCubeUVHeight:B,aoMap:ve,lightMap:Re,bumpMap:He,normalMap:Me,displacementMap:p&&se,emissiveMap:Ge,normalMapObjectSpace:Me&&C.normalMapType===nD,normalMapTangentSpace:Me&&C.normalMapType===Pl,metalnessMap:Ke,roughnessMap:j,anisotropy:U,anisotropyMap:Ue,clearcoat:he,clearcoatMap:qe,clearcoatNormalMap:gt,clearcoatRoughnessMap:ke,dispersion:Ie,iridescence:Le,iridescenceMap:$e,iridescenceThicknessMap:St,sheen:Ae,sheenColorMap:wt,sheenRoughnessMap:We,specularMap:ie,specularColorMap:we,specularIntensityMap:Ve,transmission:at,transmissionMap:Q,thicknessMap:ge,gradientMap:re,opaque:C.transparent===!1&&C.blending===Ru&&C.alphaToCoverage===!1,alphaMap:xe,alphaTest:Be,alphaHash:ct,combine:C.combine,mapUv:mt&&y(C.map.channel),aoMapUv:ve&&y(C.aoMap.channel),lightMapUv:Re&&y(C.lightMap.channel),bumpMapUv:He&&y(C.bumpMap.channel),normalMapUv:Me&&y(C.normalMap.channel),displacementMapUv:se&&y(C.displacementMap.channel),emissiveMapUv:Ge&&y(C.emissiveMap.channel),metalnessMapUv:Ke&&y(C.metalnessMap.channel),roughnessMapUv:j&&y(C.roughnessMap.channel),anisotropyMapUv:Ue&&y(C.anisotropyMap.channel),clearcoatMapUv:qe&&y(C.clearcoatMap.channel),clearcoatNormalMapUv:gt&&y(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ke&&y(C.clearcoatRoughnessMap.channel),iridescenceMapUv:$e&&y(C.iridescenceMap.channel),iridescenceThicknessMapUv:St&&y(C.iridescenceThicknessMap.channel),sheenColorMapUv:wt&&y(C.sheenColorMap.channel),sheenRoughnessMapUv:We&&y(C.sheenRoughnessMap.channel),specularMapUv:ie&&y(C.specularMap.channel),specularColorMapUv:we&&y(C.specularColorMap.channel),specularIntensityMapUv:Ve&&y(C.specularIntensityMap.channel),transmissionMapUv:Q&&y(C.transmissionMap.channel),thicknessMapUv:ge&&y(C.thicknessMap.channel),alphaMapUv:xe&&y(C.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Me||U),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!J.attributes.uv&&(mt||xe),fog:!!Y,useFog:C.fog===!0,fogExp2:!!Y&&Y.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:Se,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&O.length>0,shadowMapType:n.shadowMap.type,toneMapping:zt,decodeVideoTexture:mt&&C.map.isVideoTexture===!0&&mn.getTransfer(C.map.colorSpace)===An,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ro,flipSided:C.side===yr,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:At&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(At&&C.extensions.multiDraw===!0||ht)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Qt.vertexUv1s=f.has(1),Qt.vertexUv2s=f.has(2),Qt.vertexUv3s=f.has(3),f.clear(),Qt}function g(C){const A=[];if(C.shaderID?A.push(C.shaderID):(A.push(C.customVertexShaderID),A.push(C.customFragmentShaderID)),C.defines!==void 0)for(const O in C.defines)A.push(O),A.push(C.defines[O]);return C.isRawShaderMaterial===!1&&(S(A,C),w(A,C),A.push(n.outputColorSpace)),A.push(C.customProgramCacheKey),A.join()}function S(C,A){C.push(A.precision),C.push(A.outputColorSpace),C.push(A.envMapMode),C.push(A.envMapCubeUVHeight),C.push(A.mapUv),C.push(A.alphaMapUv),C.push(A.lightMapUv),C.push(A.aoMapUv),C.push(A.bumpMapUv),C.push(A.normalMapUv),C.push(A.displacementMapUv),C.push(A.emissiveMapUv),C.push(A.metalnessMapUv),C.push(A.roughnessMapUv),C.push(A.anisotropyMapUv),C.push(A.clearcoatMapUv),C.push(A.clearcoatNormalMapUv),C.push(A.clearcoatRoughnessMapUv),C.push(A.iridescenceMapUv),C.push(A.iridescenceThicknessMapUv),C.push(A.sheenColorMapUv),C.push(A.sheenRoughnessMapUv),C.push(A.specularMapUv),C.push(A.specularColorMapUv),C.push(A.specularIntensityMapUv),C.push(A.transmissionMapUv),C.push(A.thicknessMapUv),C.push(A.combine),C.push(A.fogExp2),C.push(A.sizeAttenuation),C.push(A.morphTargetsCount),C.push(A.morphAttributeCount),C.push(A.numDirLights),C.push(A.numPointLights),C.push(A.numSpotLights),C.push(A.numSpotLightMaps),C.push(A.numHemiLights),C.push(A.numRectAreaLights),C.push(A.numDirLightShadows),C.push(A.numPointLightShadows),C.push(A.numSpotLightShadows),C.push(A.numSpotLightShadowsWithMaps),C.push(A.numLightProbes),C.push(A.shadowMapType),C.push(A.toneMapping),C.push(A.numClippingPlanes),C.push(A.numClipIntersection),C.push(A.depthPacking)}function w(C,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.skinning&&a.enable(4),A.morphTargets&&a.enable(5),A.morphNormals&&a.enable(6),A.morphColors&&a.enable(7),A.premultipliedAlpha&&a.enable(8),A.shadowMapEnabled&&a.enable(9),A.doubleSided&&a.enable(10),A.flipSided&&a.enable(11),A.useDepthPacking&&a.enable(12),A.dithering&&a.enable(13),A.transmission&&a.enable(14),A.sheen&&a.enable(15),A.opaque&&a.enable(16),A.pointsUvs&&a.enable(17),A.decodeVideoTexture&&a.enable(18),A.alphaToCoverage&&a.enable(19),C.push(a.mask)}function E(C){const A=_[C.type];let O;if(A){const F=io[A];O=gD.clone(F.uniforms)}else O=C.uniforms;return O}function I(C,A){let O;for(let F=0,V=h.length;F<V;F++){const Y=h[F];if(Y.cacheKey===A){O=Y,++O.usedTimes;break}}return O===void 0&&(O=new d6(n,A,C,s),h.push(O)),O}function R(C){if(--C.usedTimes===0){const A=h.indexOf(C);h[A]=h[h.length-1],h.pop(),C.destroy()}}function P(C){l.remove(C)}function b(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:E,acquireProgram:I,releaseProgram:R,releaseShaderCache:P,programs:h,dispose:b}}function _6(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function y6(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function m2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function g2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,_,y,x){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:_,renderOrder:d.renderOrder,z:y,group:x},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=_,g.renderOrder=d.renderOrder,g.z=y,g.group=x),e++,g}function a(d,p,m,_,y,x){const g=o(d,p,m,_,y,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(d,p,m,_,y,x){const g=o(d,p,m,_,y,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function f(d,p){t.length>1&&t.sort(d||y6),i.length>1&&i.sort(p||m2),r.length>1&&r.sort(p||m2)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:f}}function x6(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new g2,n.set(i,[o])):r>=s.length?(o=new g2,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function S6(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new W,color:new nt};break;case"SpotLight":t={position:new W,direction:new W,color:new nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new W,color:new nt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new W,skyColor:new nt,groundColor:new nt};break;case"RectAreaLight":t={color:new nt,position:new W,halfWidth:new W,halfHeight:new W};break}return n[e.id]=t,t}}}function w6(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new be,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let M6=0;function E6(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function T6(n){const e=new S6,t=w6(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new W);const r=new W,s=new Lt,o=new Lt;function a(f){let h=0,d=0,p=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,_=0,y=0,x=0,g=0,S=0,w=0,E=0,I=0,R=0,P=0;f.sort(E6);for(let C=0,A=f.length;C<A;C++){const O=f[C],F=O.color,V=O.intensity,Y=O.distance,J=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=F.r*V,d+=F.g*V,p+=F.b*V;else if(O.isLightProbe){for(let K=0;K<9;K++)i.probe[K].addScaledVector(O.sh.coefficients[K],V);P++}else if(O.isDirectionalLight){const K=e.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const ne=O.shadow,B=t.get(O);B.shadowIntensity=ne.intensity,B.shadowBias=ne.bias,B.shadowNormalBias=ne.normalBias,B.shadowRadius=ne.radius,B.shadowMapSize=ne.mapSize,i.directionalShadow[m]=B,i.directionalShadowMap[m]=J,i.directionalShadowMatrix[m]=O.shadow.matrix,S++}i.directional[m]=K,m++}else if(O.isSpotLight){const K=e.get(O);K.position.setFromMatrixPosition(O.matrixWorld),K.color.copy(F).multiplyScalar(V),K.distance=Y,K.coneCos=Math.cos(O.angle),K.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),K.decay=O.decay,i.spot[y]=K;const ne=O.shadow;if(O.map&&(i.spotLightMap[I]=O.map,I++,ne.updateMatrices(O),O.castShadow&&R++),i.spotLightMatrix[y]=ne.matrix,O.castShadow){const B=t.get(O);B.shadowIntensity=ne.intensity,B.shadowBias=ne.bias,B.shadowNormalBias=ne.normalBias,B.shadowRadius=ne.radius,B.shadowMapSize=ne.mapSize,i.spotShadow[y]=B,i.spotShadowMap[y]=J,E++}y++}else if(O.isRectAreaLight){const K=e.get(O);K.color.copy(F).multiplyScalar(V),K.halfWidth.set(O.width*.5,0,0),K.halfHeight.set(0,O.height*.5,0),i.rectArea[x]=K,x++}else if(O.isPointLight){const K=e.get(O);if(K.color.copy(O.color).multiplyScalar(O.intensity),K.distance=O.distance,K.decay=O.decay,O.castShadow){const ne=O.shadow,B=t.get(O);B.shadowIntensity=ne.intensity,B.shadowBias=ne.bias,B.shadowNormalBias=ne.normalBias,B.shadowRadius=ne.radius,B.shadowMapSize=ne.mapSize,B.shadowCameraNear=ne.camera.near,B.shadowCameraFar=ne.camera.far,i.pointShadow[_]=B,i.pointShadowMap[_]=J,i.pointShadowMatrix[_]=O.shadow.matrix,w++}i.point[_]=K,_++}else if(O.isHemisphereLight){const K=e.get(O);K.skyColor.copy(O.color).multiplyScalar(V),K.groundColor.copy(O.groundColor).multiplyScalar(V),i.hemi[g]=K,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=et.LTC_FLOAT_1,i.rectAreaLTC2=et.LTC_FLOAT_2):(i.rectAreaLTC1=et.LTC_HALF_1,i.rectAreaLTC2=et.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const b=i.hash;(b.directionalLength!==m||b.pointLength!==_||b.spotLength!==y||b.rectAreaLength!==x||b.hemiLength!==g||b.numDirectionalShadows!==S||b.numPointShadows!==w||b.numSpotShadows!==E||b.numSpotMaps!==I||b.numLightProbes!==P)&&(i.directional.length=m,i.spot.length=y,i.rectArea.length=x,i.point.length=_,i.hemi.length=g,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=E+I-R,i.spotLightMap.length=I,i.numSpotLightShadowsWithMaps=R,i.numLightProbes=P,b.directionalLength=m,b.pointLength=_,b.spotLength=y,b.rectAreaLength=x,b.hemiLength=g,b.numDirectionalShadows=S,b.numPointShadows=w,b.numSpotShadows=E,b.numSpotMaps=I,b.numLightProbes=P,i.version=M6++)}function l(f,h){let d=0,p=0,m=0,_=0,y=0;const x=h.matrixWorldInverse;for(let g=0,S=f.length;g<S;g++){const w=f[g];if(w.isDirectionalLight){const E=i.directional[d];E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),d++}else if(w.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),m++}else if(w.isRectAreaLight){const E=i.rectArea[_];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),o.identity(),s.copy(w.matrixWorld),s.premultiply(x),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),_++}else if(w.isPointLight){const E=i.point[p];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),p++}else if(w.isHemisphereLight){const E=i.hemi[y];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(x),y++}}}return{setup:a,setupView:l,state:i}}function v2(n){const e=new T6(n),t=[],i=[];function r(h){f.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function A6(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new v2(n),e.set(r,[a])):s>=o.length?(a=new v2(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class UE extends Bi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=eD,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kE extends Bi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const C6=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,b6=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function R6(n,e,t){let i=new hm;const r=new be,s=new be,o=new sn,a=new UE({depthPacking:tD}),l=new kE,f={},h=t.maxTextureSize,d={[wa]:yr,[yr]:wa,[ro]:ro},p=new Wr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new be},radius:{value:4}},vertexShader:C6,fragmentShader:b6}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const _=new Wt;_.setAttribute("position",new Sn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Xn(_,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ty;let g=this.type;this.render=function(R,P,b){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||R.length===0)return;const C=n.getRenderTarget(),A=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),F=n.state;F.setBlending(Do),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const V=g!==eo&&this.type===eo,Y=g===eo&&this.type!==eo;for(let J=0,K=R.length;J<K;J++){const ne=R[J],B=ne.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",ne,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;r.copy(B.mapSize);const te=B.getFrameExtents();if(r.multiply(te),s.copy(B.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/te.x),r.x=s.x*te.x,B.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/te.y),r.y=s.y*te.y,B.mapSize.y=s.y)),B.map===null||V===!0||Y===!0){const ce=this.type!==eo?{minFilter:Pi,magFilter:Pi}:{};B.map!==null&&B.map.dispose(),B.map=new ds(r.x,r.y,ce),B.map.texture.name=ne.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const k=B.getViewportCount();for(let ce=0;ce<k;ce++){const Se=B.getViewport(ce);o.set(s.x*Se.x,s.y*Se.y,s.x*Se.z,s.y*Se.w),F.viewport(o),B.updateMatrices(ne,ce),i=B.getFrustum(),E(P,b,B.camera,ne,this.type)}B.isPointLightShadow!==!0&&this.type===eo&&S(B,b),B.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(C,A,O)};function S(R,P){const b=e.update(y);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new ds(r.x,r.y)),p.uniforms.shadow_pass.value=R.map.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(P,null,b,p,y,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(P,null,b,m,y,null)}function w(R,P,b,C){let A=null;const O=b.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(O!==void 0)A=O;else if(A=b.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const F=A.uuid,V=P.uuid;let Y=f[F];Y===void 0&&(Y={},f[F]=Y);let J=Y[V];J===void 0&&(J=A.clone(),Y[V]=J,P.addEventListener("dispose",I)),A=J}if(A.visible=P.visible,A.wireframe=P.wireframe,C===eo?A.side=P.shadowSide!==null?P.shadowSide:P.side:A.side=P.shadowSide!==null?P.shadowSide:d[P.side],A.alphaMap=P.alphaMap,A.alphaTest=P.alphaTest,A.map=P.map,A.clipShadows=P.clipShadows,A.clippingPlanes=P.clippingPlanes,A.clipIntersection=P.clipIntersection,A.displacementMap=P.displacementMap,A.displacementScale=P.displacementScale,A.displacementBias=P.displacementBias,A.wireframeLinewidth=P.wireframeLinewidth,A.linewidth=P.linewidth,b.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const F=n.properties.get(A);F.light=b}return A}function E(R,P,b,C,A){if(R.visible===!1)return;if(R.layers.test(P.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&A===eo)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,R.matrixWorld);const V=e.update(R),Y=R.material;if(Array.isArray(Y)){const J=V.groups;for(let K=0,ne=J.length;K<ne;K++){const B=J[K],te=Y[B.materialIndex];if(te&&te.visible){const k=w(R,te,C,A);R.onBeforeShadow(n,R,P,b,V,k,B),n.renderBufferDirect(b,null,V,k,R,B),R.onAfterShadow(n,R,P,b,V,k,B)}}}else if(Y.visible){const J=w(R,Y,C,A);R.onBeforeShadow(n,R,P,b,V,J,null),n.renderBufferDirect(b,null,V,J,R,null),R.onAfterShadow(n,R,P,b,V,J,null)}}const F=R.children;for(let V=0,Y=F.length;V<Y;V++)E(F[V],P,b,C,A)}function I(R){R.target.removeEventListener("dispose",I);for(const b in f){const C=f[b],A=R.target.uuid;A in C&&(C[A].dispose(),delete C[A])}}}function P6(n){function e(){let Q=!1;const ge=new sn;let re=null;const xe=new sn(0,0,0,0);return{setMask:function(Be){re!==Be&&!Q&&(n.colorMask(Be,Be,Be,Be),re=Be)},setLocked:function(Be){Q=Be},setClear:function(Be,ct,At,zt,Qt){Qt===!0&&(Be*=zt,ct*=zt,At*=zt),ge.set(Be,ct,At,zt),xe.equals(ge)===!1&&(n.clearColor(Be,ct,At,zt),xe.copy(ge))},reset:function(){Q=!1,re=null,xe.set(-1,0,0,0)}}}function t(){let Q=!1,ge=null,re=null,xe=null;return{setTest:function(Be){Be?Te(n.DEPTH_TEST):Pe(n.DEPTH_TEST)},setMask:function(Be){ge!==Be&&!Q&&(n.depthMask(Be),ge=Be)},setFunc:function(Be){if(re!==Be){switch(Be){case OL:n.depthFunc(n.NEVER);break;case UL:n.depthFunc(n.ALWAYS);break;case kL:n.depthFunc(n.LESS);break;case wp:n.depthFunc(n.LEQUAL);break;case FL:n.depthFunc(n.EQUAL);break;case zL:n.depthFunc(n.GEQUAL);break;case BL:n.depthFunc(n.GREATER);break;case HL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}re=Be}},setLocked:function(Be){Q=Be},setClear:function(Be){xe!==Be&&(n.clearDepth(Be),xe=Be)},reset:function(){Q=!1,ge=null,re=null,xe=null}}}function i(){let Q=!1,ge=null,re=null,xe=null,Be=null,ct=null,At=null,zt=null,Qt=null;return{setTest:function(Ot){Q||(Ot?Te(n.STENCIL_TEST):Pe(n.STENCIL_TEST))},setMask:function(Ot){ge!==Ot&&!Q&&(n.stencilMask(Ot),ge=Ot)},setFunc:function(Ot,_t,st){(re!==Ot||xe!==_t||Be!==st)&&(n.stencilFunc(Ot,_t,st),re=Ot,xe=_t,Be=st)},setOp:function(Ot,_t,st){(ct!==Ot||At!==_t||zt!==st)&&(n.stencilOp(Ot,_t,st),ct=Ot,At=_t,zt=st)},setLocked:function(Ot){Q=Ot},setClear:function(Ot){Qt!==Ot&&(n.clearStencil(Ot),Qt=Ot)},reset:function(){Q=!1,ge=null,re=null,xe=null,Be=null,ct=null,At=null,zt=null,Qt=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let f={},h={},d=new WeakMap,p=[],m=null,_=!1,y=null,x=null,g=null,S=null,w=null,E=null,I=null,R=new nt(0,0,0),P=0,b=!1,C=null,A=null,O=null,F=null,V=null;const Y=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,K=0;const ne=n.getParameter(n.VERSION);ne.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(ne)[1]),J=K>=1):ne.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),J=K>=2);let B=null,te={};const k=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),Se=new sn().fromArray(k),Fe=new sn().fromArray(ce);function ue(Q,ge,re,xe){const Be=new Uint8Array(4),ct=n.createTexture();n.bindTexture(Q,ct),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let At=0;At<re;At++)Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY?n.texImage3D(ge,0,n.RGBA,1,1,xe,0,n.RGBA,n.UNSIGNED_BYTE,Be):n.texImage2D(ge+At,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Be);return ct}const Ee={};Ee[n.TEXTURE_2D]=ue(n.TEXTURE_2D,n.TEXTURE_2D,1),Ee[n.TEXTURE_CUBE_MAP]=ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ee[n.TEXTURE_2D_ARRAY]=ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ee[n.TEXTURE_3D]=ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Te(n.DEPTH_TEST),s.setFunc(wp),He(!1),Me(Aw),Te(n.CULL_FACE),ve(Do);function Te(Q){f[Q]!==!0&&(n.enable(Q),f[Q]=!0)}function Pe(Q){f[Q]!==!1&&(n.disable(Q),f[Q]=!1)}function Qe(Q,ge){return h[Q]!==ge?(n.bindFramebuffer(Q,ge),h[Q]=ge,Q===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=ge),Q===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=ge),!0):!1}function ht(Q,ge){let re=p,xe=!1;if(Q){re=d.get(ge),re===void 0&&(re=[],d.set(ge,re));const Be=Q.textures;if(re.length!==Be.length||re[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,At=Be.length;ct<At;ct++)re[ct]=n.COLOR_ATTACHMENT0+ct;re.length=Be.length,xe=!0}}else re[0]!==n.BACK&&(re[0]=n.BACK,xe=!0);xe&&n.drawBuffers(re)}function mt(Q){return m!==Q?(n.useProgram(Q),m=Q,!0):!1}const ut={[$a]:n.FUNC_ADD,[_L]:n.FUNC_SUBTRACT,[yL]:n.FUNC_REVERSE_SUBTRACT};ut[xL]=n.MIN,ut[SL]=n.MAX;const G={[wL]:n.ZERO,[ML]:n.ONE,[EL]:n.SRC_COLOR,[Gv]:n.SRC_ALPHA,[PL]:n.SRC_ALPHA_SATURATE,[bL]:n.DST_COLOR,[AL]:n.DST_ALPHA,[TL]:n.ONE_MINUS_SRC_COLOR,[Wv]:n.ONE_MINUS_SRC_ALPHA,[RL]:n.ONE_MINUS_DST_COLOR,[CL]:n.ONE_MINUS_DST_ALPHA,[IL]:n.CONSTANT_COLOR,[LL]:n.ONE_MINUS_CONSTANT_COLOR,[DL]:n.CONSTANT_ALPHA,[NL]:n.ONE_MINUS_CONSTANT_ALPHA};function ve(Q,ge,re,xe,Be,ct,At,zt,Qt,Ot){if(Q===Do){_===!0&&(Pe(n.BLEND),_=!1);return}if(_===!1&&(Te(n.BLEND),_=!0),Q!==vL){if(Q!==y||Ot!==b){if((x!==$a||w!==$a)&&(n.blendEquation(n.FUNC_ADD),x=$a,w=$a),Ot)switch(Q){case Ru:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Cw:n.blendFunc(n.ONE,n.ONE);break;case bw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rw:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case Ru:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Cw:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case bw:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rw:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}g=null,S=null,E=null,I=null,R.set(0,0,0),P=0,y=Q,b=Ot}return}Be=Be||ge,ct=ct||re,At=At||xe,(ge!==x||Be!==w)&&(n.blendEquationSeparate(ut[ge],ut[Be]),x=ge,w=Be),(re!==g||xe!==S||ct!==E||At!==I)&&(n.blendFuncSeparate(G[re],G[xe],G[ct],G[At]),g=re,S=xe,E=ct,I=At),(zt.equals(R)===!1||Qt!==P)&&(n.blendColor(zt.r,zt.g,zt.b,Qt),R.copy(zt),P=Qt),y=Q,b=!1}function Re(Q,ge){Q.side===ro?Pe(n.CULL_FACE):Te(n.CULL_FACE);let re=Q.side===yr;ge&&(re=!re),He(re),Q.blending===Ru&&Q.transparent===!1?ve(Do):ve(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),s.setFunc(Q.depthFunc),s.setTest(Q.depthTest),s.setMask(Q.depthWrite),r.setMask(Q.colorWrite);const xe=Q.stencilWrite;o.setTest(xe),xe&&(o.setMask(Q.stencilWriteMask),o.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),o.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Ge(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?Te(n.SAMPLE_ALPHA_TO_COVERAGE):Pe(n.SAMPLE_ALPHA_TO_COVERAGE)}function He(Q){C!==Q&&(Q?n.frontFace(n.CW):n.frontFace(n.CCW),C=Q)}function Me(Q){Q!==pL?(Te(n.CULL_FACE),Q!==A&&(Q===Aw?n.cullFace(n.BACK):Q===mL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Pe(n.CULL_FACE),A=Q}function se(Q){Q!==O&&(J&&n.lineWidth(Q),O=Q)}function Ge(Q,ge,re){Q?(Te(n.POLYGON_OFFSET_FILL),(F!==ge||V!==re)&&(n.polygonOffset(ge,re),F=ge,V=re)):Pe(n.POLYGON_OFFSET_FILL)}function Ke(Q){Q?Te(n.SCISSOR_TEST):Pe(n.SCISSOR_TEST)}function j(Q){Q===void 0&&(Q=n.TEXTURE0+Y-1),B!==Q&&(n.activeTexture(Q),B=Q)}function U(Q,ge,re){re===void 0&&(B===null?re=n.TEXTURE0+Y-1:re=B);let xe=te[re];xe===void 0&&(xe={type:void 0,texture:void 0},te[re]=xe),(xe.type!==Q||xe.texture!==ge)&&(B!==re&&(n.activeTexture(re),B=re),n.bindTexture(Q,ge||Ee[Q]),xe.type=Q,xe.texture=ge)}function he(){const Q=te[B];Q!==void 0&&Q.type!==void 0&&(n.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function Ie(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Le(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ae(){try{n.texSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function at(){try{n.texSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ue(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function qe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function gt(){try{n.texStorage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ke(){try{n.texStorage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function $e(){try{n.texImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function St(){try{n.texImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function wt(Q){Se.equals(Q)===!1&&(n.scissor(Q.x,Q.y,Q.z,Q.w),Se.copy(Q))}function We(Q){Fe.equals(Q)===!1&&(n.viewport(Q.x,Q.y,Q.z,Q.w),Fe.copy(Q))}function ie(Q,ge){let re=l.get(ge);re===void 0&&(re=new WeakMap,l.set(ge,re));let xe=re.get(Q);xe===void 0&&(xe=n.getUniformBlockIndex(ge,Q.name),re.set(Q,xe))}function we(Q,ge){const xe=l.get(ge).get(Q);a.get(ge)!==xe&&(n.uniformBlockBinding(ge,xe,Q.__bindingPointIndex),a.set(ge,xe))}function Ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},B=null,te={},h={},d=new WeakMap,p=[],m=null,_=!1,y=null,x=null,g=null,S=null,w=null,E=null,I=null,R=new nt(0,0,0),P=0,b=!1,C=null,A=null,O=null,F=null,V=null,Se.set(0,0,n.canvas.width,n.canvas.height),Fe.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Te,disable:Pe,bindFramebuffer:Qe,drawBuffers:ht,useProgram:mt,setBlending:ve,setMaterial:Re,setFlipSided:He,setCullFace:Me,setLineWidth:se,setPolygonOffset:Ge,setScissorTest:Ke,activeTexture:j,bindTexture:U,unbindTexture:he,compressedTexImage2D:Ie,compressedTexImage3D:Le,texImage2D:$e,texImage3D:St,updateUBOMapping:ie,uniformBlockBinding:we,texStorage2D:gt,texStorage3D:ke,texSubImage2D:Ae,texSubImage3D:at,compressedTexSubImage2D:Ue,compressedTexSubImage3D:qe,scissor:wt,viewport:We,reset:Ve}}function I6(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function L6(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function D6(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Uw(n,e,t,i){const r=N6(i);switch(t){case xE:return n*e;case wE:return n*e;case ME:return n*e*2;case am:return n*e/r.components*r.byteLength;case lm:return n*e/r.components*r.byteLength;case EE:return n*e*2/r.components*r.byteLength;case oy:return n*e*2/r.components*r.byteLength;case SE:return n*e*3/r.components*r.byteLength;case ri:return n*e*4/r.components*r.byteLength;case ay:return n*e*4/r.components*r.byteLength;case Nd:case Od:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ud:case kd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Yv:case jv:return Math.max(n,16)*Math.max(e,8)/4;case Xv:case qv:return Math.max(n,8)*Math.max(e,8)/2;case Zv:case Kv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $v:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Qv:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case e_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case t_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case n_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case i_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case r_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case s_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case o_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case a_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case l_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case u_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case c_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case f_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Fd:case h_:case d_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case TE:case p_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case m_:case g_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function N6(n){switch(n){case Vr:case ny:return{byteLength:1,components:1};case Gf:case iy:case Ii:return{byteLength:2,components:1};case ry:case sy:return{byteLength:2,components:4};case zo:case om:case Wn:return{byteLength:4,components:1};case yE:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const O6={contain:I6,cover:L6,fill:D6,getByteLength:Uw};function U6(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new be,h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(j,U){return m?new OffscreenCanvas(j,U):Dp("canvas")}function y(j,U,he){let Ie=1;const Le=Ke(j);if((Le.width>he||Le.height>he)&&(Ie=he/Math.max(Le.width,Le.height)),Ie<1)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap||typeof VideoFrame<"u"&&j instanceof VideoFrame){const Ae=Math.floor(Ie*Le.width),at=Math.floor(Ie*Le.height);d===void 0&&(d=_(Ae,at));const Ue=U?_(Ae,at):d;return Ue.width=Ae,Ue.height=at,Ue.getContext("2d").drawImage(j,0,0,Ae,at),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+Ae+"x"+at+")."),Ue}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),j;return j}function x(j){return j.generateMipmaps&&j.minFilter!==Pi&&j.minFilter!==_n}function g(j){n.generateMipmap(j)}function S(j,U,he,Ie,Le=!1){if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ae=U;if(U===n.RED&&(he===n.FLOAT&&(Ae=n.R32F),he===n.HALF_FLOAT&&(Ae=n.R16F),he===n.UNSIGNED_BYTE&&(Ae=n.R8)),U===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(Ae=n.R8UI),he===n.UNSIGNED_SHORT&&(Ae=n.R16UI),he===n.UNSIGNED_INT&&(Ae=n.R32UI),he===n.BYTE&&(Ae=n.R8I),he===n.SHORT&&(Ae=n.R16I),he===n.INT&&(Ae=n.R32I)),U===n.RG&&(he===n.FLOAT&&(Ae=n.RG32F),he===n.HALF_FLOAT&&(Ae=n.RG16F),he===n.UNSIGNED_BYTE&&(Ae=n.RG8)),U===n.RG_INTEGER&&(he===n.UNSIGNED_BYTE&&(Ae=n.RG8UI),he===n.UNSIGNED_SHORT&&(Ae=n.RG16UI),he===n.UNSIGNED_INT&&(Ae=n.RG32UI),he===n.BYTE&&(Ae=n.RG8I),he===n.SHORT&&(Ae=n.RG16I),he===n.INT&&(Ae=n.RG32I)),U===n.RGB&&he===n.UNSIGNED_INT_5_9_9_9_REV&&(Ae=n.RGB9_E5),U===n.RGBA){const at=Le?bp:mn.getTransfer(Ie);he===n.FLOAT&&(Ae=n.RGBA32F),he===n.HALF_FLOAT&&(Ae=n.RGBA16F),he===n.UNSIGNED_BYTE&&(Ae=at===An?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)}return(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function w(j,U){let he;return j?U===null||U===zo||U===Yu?he=n.DEPTH24_STENCIL8:U===Wn?he=n.DEPTH32F_STENCIL8:U===Gf&&(he=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===zo||U===Yu?he=n.DEPTH_COMPONENT24:U===Wn?he=n.DEPTH_COMPONENT32F:U===Gf&&(he=n.DEPTH_COMPONENT16),he}function E(j,U){return x(j)===!0||j.isFramebufferTexture&&j.minFilter!==Pi&&j.minFilter!==_n?Math.log2(Math.max(U.width,U.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?U.mipmaps.length:1}function I(j){const U=j.target;U.removeEventListener("dispose",I),P(U),U.isVideoTexture&&h.delete(U)}function R(j){const U=j.target;U.removeEventListener("dispose",R),C(U)}function P(j){const U=i.get(j);if(U.__webglInit===void 0)return;const he=j.source,Ie=p.get(he);if(Ie){const Le=Ie[U.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&b(j),Object.keys(Ie).length===0&&p.delete(he)}i.remove(j)}function b(j){const U=i.get(j);n.deleteTexture(U.__webglTexture);const he=j.source,Ie=p.get(he);delete Ie[U.__cacheKey],o.memory.textures--}function C(j){const U=i.get(j);if(j.depthTexture&&j.depthTexture.dispose(),j.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(U.__webglFramebuffer[Ie]))for(let Le=0;Le<U.__webglFramebuffer[Ie].length;Le++)n.deleteFramebuffer(U.__webglFramebuffer[Ie][Le]);else n.deleteFramebuffer(U.__webglFramebuffer[Ie]);U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer[Ie])}else{if(Array.isArray(U.__webglFramebuffer))for(let Ie=0;Ie<U.__webglFramebuffer.length;Ie++)n.deleteFramebuffer(U.__webglFramebuffer[Ie]);else n.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&n.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let Ie=0;Ie<U.__webglColorRenderbuffer.length;Ie++)U.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(U.__webglColorRenderbuffer[Ie]);U.__webglDepthRenderbuffer&&n.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const he=j.textures;for(let Ie=0,Le=he.length;Ie<Le;Ie++){const Ae=i.get(he[Ie]);Ae.__webglTexture&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),i.remove(he[Ie])}i.remove(j)}let A=0;function O(){A=0}function F(){const j=A;return j>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+r.maxTextures),A+=1,j}function V(j){const U=[];return U.push(j.wrapS),U.push(j.wrapT),U.push(j.wrapR||0),U.push(j.magFilter),U.push(j.minFilter),U.push(j.anisotropy),U.push(j.internalFormat),U.push(j.format),U.push(j.type),U.push(j.generateMipmaps),U.push(j.premultiplyAlpha),U.push(j.flipY),U.push(j.unpackAlignment),U.push(j.colorSpace),U.join()}function Y(j,U){const he=i.get(j);if(j.isVideoTexture&&se(j),j.isRenderTargetTexture===!1&&j.version>0&&he.__version!==j.version){const Ie=j.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Fe(he,j,U);return}}t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+U)}function J(j,U){const he=i.get(j);if(j.version>0&&he.__version!==j.version){Fe(he,j,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+U)}function K(j,U){const he=i.get(j);if(j.version>0&&he.__version!==j.version){Fe(he,j,U);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+U)}function ne(j,U){const he=i.get(j);if(j.version>0&&he.__version!==j.version){ue(he,j,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+U)}const B={[Ep]:n.REPEAT,[pi]:n.CLAMP_TO_EDGE,[Tp]:n.MIRRORED_REPEAT},te={[Pi]:n.NEAREST,[_E]:n.NEAREST_MIPMAP_NEAREST,[ff]:n.NEAREST_MIPMAP_LINEAR,[_n]:n.LINEAR,[Dd]:n.LINEAR_MIPMAP_NEAREST,[Ao]:n.LINEAR_MIPMAP_LINEAR},k={[iD]:n.NEVER,[uD]:n.ALWAYS,[rD]:n.LESS,[CE]:n.LEQUAL,[sD]:n.EQUAL,[lD]:n.GEQUAL,[oD]:n.GREATER,[aD]:n.NOTEQUAL};function ce(j,U){if(U.type===Wn&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===_n||U.magFilter===Dd||U.magFilter===ff||U.magFilter===Ao||U.minFilter===_n||U.minFilter===Dd||U.minFilter===ff||U.minFilter===Ao)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(j,n.TEXTURE_WRAP_S,B[U.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,B[U.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,B[U.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,te[U.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,te[U.minFilter]),U.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,k[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===Pi||U.minFilter!==ff&&U.minFilter!==Ao||U.type===Wn&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||i.get(U).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");n.texParameterf(j,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,r.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy}}}function Se(j,U){let he=!1;j.__webglInit===void 0&&(j.__webglInit=!0,U.addEventListener("dispose",I));const Ie=U.source;let Le=p.get(Ie);Le===void 0&&(Le={},p.set(Ie,Le));const Ae=V(U);if(Ae!==j.__cacheKey){Le[Ae]===void 0&&(Le[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,he=!0),Le[Ae].usedTimes++;const at=Le[j.__cacheKey];at!==void 0&&(Le[j.__cacheKey].usedTimes--,at.usedTimes===0&&b(U)),j.__cacheKey=Ae,j.__webglTexture=Le[Ae].texture}return he}function Fe(j,U,he){let Ie=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Ie=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(Ie=n.TEXTURE_3D);const Le=Se(j,U),Ae=U.source;t.bindTexture(Ie,j.__webglTexture,n.TEXTURE0+he);const at=i.get(Ae);if(Ae.version!==at.__version||Le===!0){t.activeTexture(n.TEXTURE0+he);const Ue=mn.getPrimaries(mn.workingColorSpace),qe=U.colorSpace===aa?null:mn.getPrimaries(U.colorSpace),gt=U.colorSpace===aa||Ue===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);let ke=y(U.image,!1,r.maxTextureSize);ke=Ge(U,ke);const $e=s.convert(U.format,U.colorSpace),St=s.convert(U.type);let wt=S(U.internalFormat,$e,St,U.colorSpace,U.isVideoTexture);ce(Ie,U);let We;const ie=U.mipmaps,we=U.isVideoTexture!==!0,Ve=at.__version===void 0||Le===!0,Q=Ae.dataReady,ge=E(U,ke);if(U.isDepthTexture)wt=w(U.format===qu,U.type),Ve&&(we?t.texStorage2D(n.TEXTURE_2D,1,wt,ke.width,ke.height):t.texImage2D(n.TEXTURE_2D,0,wt,ke.width,ke.height,0,$e,St,null));else if(U.isDataTexture)if(ie.length>0){we&&Ve&&t.texStorage2D(n.TEXTURE_2D,ge,wt,ie[0].width,ie[0].height);for(let re=0,xe=ie.length;re<xe;re++)We=ie[re],we?Q&&t.texSubImage2D(n.TEXTURE_2D,re,0,0,We.width,We.height,$e,St,We.data):t.texImage2D(n.TEXTURE_2D,re,wt,We.width,We.height,0,$e,St,We.data);U.generateMipmaps=!1}else we?(Ve&&t.texStorage2D(n.TEXTURE_2D,ge,wt,ke.width,ke.height),Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ke.width,ke.height,$e,St,ke.data)):t.texImage2D(n.TEXTURE_2D,0,wt,ke.width,ke.height,0,$e,St,ke.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){we&&Ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ge,wt,ie[0].width,ie[0].height,ke.depth);for(let re=0,xe=ie.length;re<xe;re++)if(We=ie[re],U.format!==ri)if($e!==null)if(we){if(Q)if(U.layerUpdates.size>0){const Be=Uw(We.width,We.height,U.format,U.type);for(const ct of U.layerUpdates){const At=We.data.subarray(ct*Be/We.data.BYTES_PER_ELEMENT,(ct+1)*Be/We.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,re,0,0,ct,We.width,We.height,1,$e,At,0,0)}U.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,re,0,0,0,We.width,We.height,ke.depth,$e,We.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,re,wt,We.width,We.height,ke.depth,0,We.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?Q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,re,0,0,0,We.width,We.height,ke.depth,$e,St,We.data):t.texImage3D(n.TEXTURE_2D_ARRAY,re,wt,We.width,We.height,ke.depth,0,$e,St,We.data)}else{we&&Ve&&t.texStorage2D(n.TEXTURE_2D,ge,wt,ie[0].width,ie[0].height);for(let re=0,xe=ie.length;re<xe;re++)We=ie[re],U.format!==ri?$e!==null?we?Q&&t.compressedTexSubImage2D(n.TEXTURE_2D,re,0,0,We.width,We.height,$e,We.data):t.compressedTexImage2D(n.TEXTURE_2D,re,wt,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?Q&&t.texSubImage2D(n.TEXTURE_2D,re,0,0,We.width,We.height,$e,St,We.data):t.texImage2D(n.TEXTURE_2D,re,wt,We.width,We.height,0,$e,St,We.data)}else if(U.isDataArrayTexture)if(we){if(Ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ge,wt,ke.width,ke.height,ke.depth),Q)if(U.layerUpdates.size>0){const re=Uw(ke.width,ke.height,U.format,U.type);for(const xe of U.layerUpdates){const Be=ke.data.subarray(xe*re/ke.data.BYTES_PER_ELEMENT,(xe+1)*re/ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,xe,ke.width,ke.height,1,$e,St,Be)}U.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ke.width,ke.height,ke.depth,$e,St,ke.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,wt,ke.width,ke.height,ke.depth,0,$e,St,ke.data);else if(U.isData3DTexture)we?(Ve&&t.texStorage3D(n.TEXTURE_3D,ge,wt,ke.width,ke.height,ke.depth),Q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ke.width,ke.height,ke.depth,$e,St,ke.data)):t.texImage3D(n.TEXTURE_3D,0,wt,ke.width,ke.height,ke.depth,0,$e,St,ke.data);else if(U.isFramebufferTexture){if(Ve)if(we)t.texStorage2D(n.TEXTURE_2D,ge,wt,ke.width,ke.height);else{let re=ke.width,xe=ke.height;for(let Be=0;Be<ge;Be++)t.texImage2D(n.TEXTURE_2D,Be,wt,re,xe,0,$e,St,null),re>>=1,xe>>=1}}else if(ie.length>0){if(we&&Ve){const re=Ke(ie[0]);t.texStorage2D(n.TEXTURE_2D,ge,wt,re.width,re.height)}for(let re=0,xe=ie.length;re<xe;re++)We=ie[re],we?Q&&t.texSubImage2D(n.TEXTURE_2D,re,0,0,$e,St,We):t.texImage2D(n.TEXTURE_2D,re,wt,$e,St,We);U.generateMipmaps=!1}else if(we){if(Ve){const re=Ke(ke);t.texStorage2D(n.TEXTURE_2D,ge,wt,re.width,re.height)}Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$e,St,ke)}else t.texImage2D(n.TEXTURE_2D,0,wt,$e,St,ke);x(U)&&g(Ie),at.__version=Ae.version,U.onUpdate&&U.onUpdate(U)}j.__version=U.version}function ue(j,U,he){if(U.image.length!==6)return;const Ie=Se(j,U),Le=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+he);const Ae=i.get(Le);if(Le.version!==Ae.__version||Ie===!0){t.activeTexture(n.TEXTURE0+he);const at=mn.getPrimaries(mn.workingColorSpace),Ue=U.colorSpace===aa?null:mn.getPrimaries(U.colorSpace),qe=U.colorSpace===aa||at===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);const gt=U.isCompressedTexture||U.image[0].isCompressedTexture,ke=U.image[0]&&U.image[0].isDataTexture,$e=[];for(let xe=0;xe<6;xe++)!gt&&!ke?$e[xe]=y(U.image[xe],!0,r.maxCubemapSize):$e[xe]=ke?U.image[xe].image:U.image[xe],$e[xe]=Ge(U,$e[xe]);const St=$e[0],wt=s.convert(U.format,U.colorSpace),We=s.convert(U.type),ie=S(U.internalFormat,wt,We,U.colorSpace),we=U.isVideoTexture!==!0,Ve=Ae.__version===void 0||Ie===!0,Q=Le.dataReady;let ge=E(U,St);ce(n.TEXTURE_CUBE_MAP,U);let re;if(gt){we&&Ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ge,ie,St.width,St.height);for(let xe=0;xe<6;xe++){re=$e[xe].mipmaps;for(let Be=0;Be<re.length;Be++){const ct=re[Be];U.format!==ri?wt!==null?we?Q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be,0,0,ct.width,ct.height,wt,ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be,ie,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be,0,0,ct.width,ct.height,wt,We,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be,ie,ct.width,ct.height,0,wt,We,ct.data)}}}else{if(re=U.mipmaps,we&&Ve){re.length>0&&ge++;const xe=Ke($e[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ge,ie,xe.width,xe.height)}for(let xe=0;xe<6;xe++)if(ke){we?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,$e[xe].width,$e[xe].height,wt,We,$e[xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,ie,$e[xe].width,$e[xe].height,0,wt,We,$e[xe].data);for(let Be=0;Be<re.length;Be++){const At=re[Be].image[xe].image;we?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be+1,0,0,At.width,At.height,wt,We,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be+1,ie,At.width,At.height,0,wt,We,At.data)}}else{we?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,wt,We,$e[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,ie,wt,We,$e[xe]);for(let Be=0;Be<re.length;Be++){const ct=re[Be];we?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be+1,0,0,wt,We,ct.image[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Be+1,ie,wt,We,ct.image[xe])}}}x(U)&&g(n.TEXTURE_CUBE_MAP),Ae.__version=Le.version,U.onUpdate&&U.onUpdate(U)}j.__version=U.version}function Ee(j,U,he,Ie,Le,Ae){const at=s.convert(he.format,he.colorSpace),Ue=s.convert(he.type),qe=S(he.internalFormat,at,Ue,he.colorSpace);if(!i.get(U).__hasExternalTextures){const ke=Math.max(1,U.width>>Ae),$e=Math.max(1,U.height>>Ae);Le===n.TEXTURE_3D||Le===n.TEXTURE_2D_ARRAY?t.texImage3D(Le,Ae,qe,ke,$e,U.depth,0,at,Ue,null):t.texImage2D(Le,Ae,qe,ke,$e,0,at,Ue,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),Me(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ie,Le,i.get(he).__webglTexture,0,He(U)):(Le===n.TEXTURE_2D||Le>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ie,Le,i.get(he).__webglTexture,Ae),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(j,U,he){if(n.bindRenderbuffer(n.RENDERBUFFER,j),U.depthBuffer){const Ie=U.depthTexture,Le=Ie&&Ie.isDepthTexture?Ie.type:null,Ae=w(U.stencilBuffer,Le),at=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ue=He(U);Me(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,Ae,U.width,U.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,Ae,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,at,n.RENDERBUFFER,j)}else{const Ie=U.textures;for(let Le=0;Le<Ie.length;Le++){const Ae=Ie[Le],at=s.convert(Ae.format,Ae.colorSpace),Ue=s.convert(Ae.type),qe=S(Ae.internalFormat,at,Ue,Ae.colorSpace),gt=He(U);he&&Me(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,gt,qe,U.width,U.height):Me(U)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,gt,qe,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,qe,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pe(j,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),Y(U.depthTexture,0);const Ie=i.get(U.depthTexture).__webglTexture,Le=He(U);if(U.depthTexture.format===Pu)Me(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ie,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ie,0);else if(U.depthTexture.format===qu)Me(U)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ie,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ie,0);else throw new Error("Unknown depthTexture format")}function Qe(j){const U=i.get(j),he=j.isWebGLCubeRenderTarget===!0;if(j.depthTexture&&!U.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");Pe(U.__webglFramebuffer,j)}else if(he){U.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[Ie]),U.__webglDepthbuffer[Ie]=n.createRenderbuffer(),Te(U.__webglDepthbuffer[Ie],j,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),Te(U.__webglDepthbuffer,j,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ht(j,U,he){const Ie=i.get(j);U!==void 0&&Ee(Ie.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&Qe(j)}function mt(j){const U=j.texture,he=i.get(j),Ie=i.get(U);j.addEventListener("dispose",R);const Le=j.textures,Ae=j.isWebGLCubeRenderTarget===!0,at=Le.length>1;if(at||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture()),Ie.__version=U.version,o.memory.textures++),Ae){he.__webglFramebuffer=[];for(let Ue=0;Ue<6;Ue++)if(U.mipmaps&&U.mipmaps.length>0){he.__webglFramebuffer[Ue]=[];for(let qe=0;qe<U.mipmaps.length;qe++)he.__webglFramebuffer[Ue][qe]=n.createFramebuffer()}else he.__webglFramebuffer[Ue]=n.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){he.__webglFramebuffer=[];for(let Ue=0;Ue<U.mipmaps.length;Ue++)he.__webglFramebuffer[Ue]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(at)for(let Ue=0,qe=Le.length;Ue<qe;Ue++){const gt=i.get(Le[Ue]);gt.__webglTexture===void 0&&(gt.__webglTexture=n.createTexture(),o.memory.textures++)}if(j.samples>0&&Me(j)===!1){he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Le.length;Ue++){const qe=Le[Ue];he.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[Ue]);const gt=s.convert(qe.format,qe.colorSpace),ke=s.convert(qe.type),$e=S(qe.internalFormat,gt,ke,qe.colorSpace,j.isXRRenderTarget===!0),St=He(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,$e,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,he.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),Te(he.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,Ie.__webglTexture),ce(n.TEXTURE_CUBE_MAP,U);for(let Ue=0;Ue<6;Ue++)if(U.mipmaps&&U.mipmaps.length>0)for(let qe=0;qe<U.mipmaps.length;qe++)Ee(he.__webglFramebuffer[Ue][qe],j,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,qe);else Ee(he.__webglFramebuffer[Ue],j,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,0);x(U)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(at){for(let Ue=0,qe=Le.length;Ue<qe;Ue++){const gt=Le[Ue],ke=i.get(gt);t.bindTexture(n.TEXTURE_2D,ke.__webglTexture),ce(n.TEXTURE_2D,gt),Ee(he.__webglFramebuffer,j,gt,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,0),x(gt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Ue=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(Ue=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ue,Ie.__webglTexture),ce(Ue,U),U.mipmaps&&U.mipmaps.length>0)for(let qe=0;qe<U.mipmaps.length;qe++)Ee(he.__webglFramebuffer[qe],j,U,n.COLOR_ATTACHMENT0,Ue,qe);else Ee(he.__webglFramebuffer,j,U,n.COLOR_ATTACHMENT0,Ue,0);x(U)&&g(Ue),t.unbindTexture()}j.depthBuffer&&Qe(j)}function ut(j){const U=j.textures;for(let he=0,Ie=U.length;he<Ie;he++){const Le=U[he];if(x(Le)){const Ae=j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,at=i.get(Le).__webglTexture;t.bindTexture(Ae,at),g(Ae),t.unbindTexture()}}}const G=[],ve=[];function Re(j){if(j.samples>0){if(Me(j)===!1){const U=j.textures,he=j.width,Ie=j.height;let Le=n.COLOR_BUFFER_BIT;const Ae=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=i.get(j),Ue=U.length>1;if(Ue)for(let qe=0;qe<U.length;qe++)t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,at.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglFramebuffer);for(let qe=0;qe<U.length;qe++){if(j.resolveDepthBuffer&&(j.depthBuffer&&(Le|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&j.resolveStencilBuffer&&(Le|=n.STENCIL_BUFFER_BIT)),Ue){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,at.__webglColorRenderbuffer[qe]);const gt=i.get(U[qe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,gt,0)}n.blitFramebuffer(0,0,he,Ie,0,0,he,Ie,Le,n.NEAREST),l===!0&&(G.length=0,ve.length=0,G.push(n.COLOR_ATTACHMENT0+qe),j.depthBuffer&&j.resolveDepthBuffer===!1&&(G.push(Ae),ve.push(Ae),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ve)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,G))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let qe=0;qe<U.length;qe++){t.bindFramebuffer(n.FRAMEBUFFER,at.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,at.__webglColorRenderbuffer[qe]);const gt=i.get(U[qe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,at.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,gt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,at.__webglMultisampledFramebuffer)}else if(j.depthBuffer&&j.resolveDepthBuffer===!1&&l){const U=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[U])}}}function He(j){return Math.min(r.maxSamples,j.samples)}function Me(j){const U=i.get(j);return j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function se(j){const U=o.render.frame;h.get(j)!==U&&(h.set(j,U),j.update())}function Ge(j,U){const he=j.colorSpace,Ie=j.format,Le=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||he!==Gs&&he!==aa&&(mn.getTransfer(he)===An?(Ie!==ri||Le!==Vr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),U}function Ke(j){return typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement?(f.width=j.naturalWidth||j.width,f.height=j.naturalHeight||j.height):typeof VideoFrame<"u"&&j instanceof VideoFrame?(f.width=j.displayWidth,f.height=j.displayHeight):(f.width=j.width,f.height=j.height),f}this.allocateTextureUnit=F,this.resetTextureUnits=O,this.setTexture2D=Y,this.setTexture2DArray=J,this.setTexture3D=K,this.setTextureCube=ne,this.rebindTextures=ht,this.setupRenderTarget=mt,this.updateRenderTargetMipmap=ut,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=Ee,this.useMultisampledRTT=Me}function MD(n,e){function t(i,r=aa){let s;const o=mn.getTransfer(r);if(i===Vr)return n.UNSIGNED_BYTE;if(i===ry)return n.UNSIGNED_SHORT_4_4_4_4;if(i===sy)return n.UNSIGNED_SHORT_5_5_5_1;if(i===yE)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ny)return n.BYTE;if(i===iy)return n.SHORT;if(i===Gf)return n.UNSIGNED_SHORT;if(i===om)return n.INT;if(i===zo)return n.UNSIGNED_INT;if(i===Wn)return n.FLOAT;if(i===Ii)return n.HALF_FLOAT;if(i===xE)return n.ALPHA;if(i===SE)return n.RGB;if(i===ri)return n.RGBA;if(i===wE)return n.LUMINANCE;if(i===ME)return n.LUMINANCE_ALPHA;if(i===Pu)return n.DEPTH_COMPONENT;if(i===qu)return n.DEPTH_STENCIL;if(i===am)return n.RED;if(i===lm)return n.RED_INTEGER;if(i===EE)return n.RG;if(i===oy)return n.RG_INTEGER;if(i===ay)return n.RGBA_INTEGER;if(i===Nd||i===Od||i===Ud||i===kd)if(o===An)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Nd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Od)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Ud)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===kd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Nd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Od)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Ud)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===kd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Xv||i===Yv||i===qv||i===jv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Xv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Yv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===jv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Zv||i===Kv||i===$v)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Zv||i===Kv)return o===An?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===$v)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Jv||i===Qv||i===e_||i===t_||i===n_||i===i_||i===r_||i===s_||i===o_||i===a_||i===l_||i===u_||i===c_||i===f_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Jv)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Qv)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===e_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===t_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===n_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===i_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===r_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===s_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===o_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===a_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===l_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===u_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===c_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===f_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Fd||i===h_||i===d_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Fd)return o===An?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===h_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===d_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===TE||i===p_||i===m_||i===g_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Fd)return s.COMPRESSED_RED_RGTC1_EXT;if(i===p_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===m_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===g_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Yu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class ED extends Jn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class pf extends un{constructor(){super(),this.isGroup=!0,this.type="Group"}}const k6={type:"move"};class z1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new pf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new pf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new pf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,i),g=this._getHandJoint(f,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=f.joints["index-finger-tip"],d=f.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,_=.005;f.inputState.pinching&&p>m+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&p<=m-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(k6)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new pf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const F6=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,z6=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class B6{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new dn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Wr({vertexShader:F6,fragmentShader:z6,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Xn(new Ll(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class H6 extends Ho{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,f=null,h=null,d=null,p=null,m=null,_=null;const y=new B6,x=t.getContextAttributes();let g=null,S=null;const w=[],E=[],I=new be;let R=null;const P=new Jn;P.layers.enable(1),P.viewport=new sn;const b=new Jn;b.layers.enable(2),b.viewport=new sn;const C=[P,b],A=new ED;A.layers.enable(1),A.layers.enable(2);let O=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ue){let Ee=w[ue];return Ee===void 0&&(Ee=new z1,w[ue]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ue){let Ee=w[ue];return Ee===void 0&&(Ee=new z1,w[ue]=Ee),Ee.getGripSpace()},this.getHand=function(ue){let Ee=w[ue];return Ee===void 0&&(Ee=new z1,w[ue]=Ee),Ee.getHandSpace()};function V(ue){const Ee=E.indexOf(ue.inputSource);if(Ee===-1)return;const Te=w[Ee];Te!==void 0&&(Te.update(ue.inputSource,ue.frame,f||o),Te.dispatchEvent({type:ue.type,data:ue.inputSource}))}function Y(){r.removeEventListener("select",V),r.removeEventListener("selectstart",V),r.removeEventListener("selectend",V),r.removeEventListener("squeeze",V),r.removeEventListener("squeezestart",V),r.removeEventListener("squeezeend",V),r.removeEventListener("end",Y),r.removeEventListener("inputsourceschange",J);for(let ue=0;ue<w.length;ue++){const Ee=E[ue];Ee!==null&&(E[ue]=null,w[ue].disconnect(Ee))}O=null,F=null,y.reset(),e.setRenderTarget(g),m=null,p=null,d=null,r=null,S=null,Fe.stop(),i.isPresenting=!1,e.setPixelRatio(R),e.setSize(I.width,I.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ue){s=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ue){a=ue,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(ue){f=ue},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(ue){if(r=ue,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",V),r.addEventListener("selectstart",V),r.addEventListener("selectend",V),r.addEventListener("squeeze",V),r.addEventListener("squeezestart",V),r.addEventListener("squeezeend",V),r.addEventListener("end",Y),r.addEventListener("inputsourceschange",J),x.xrCompatible!==!0&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(I),r.renderState.layers===void 0){const Ee={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,Ee),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new ds(m.framebufferWidth,m.framebufferHeight,{format:ri,type:Vr,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Ee=null,Te=null,Pe=null;x.depth&&(Pe=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ee=x.stencil?qu:Pu,Te=x.stencil?Yu:zo);const Qe={colorFormat:t.RGBA8,depthFormat:Pe,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(Qe),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new ds(p.textureWidth,p.textureHeight,{format:ri,type:Vr,depthTexture:new OE(p.textureWidth,p.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),f=null,o=await r.requestReferenceSpace(a),Fe.setContext(r),Fe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function J(ue){for(let Ee=0;Ee<ue.removed.length;Ee++){const Te=ue.removed[Ee],Pe=E.indexOf(Te);Pe>=0&&(E[Pe]=null,w[Pe].disconnect(Te))}for(let Ee=0;Ee<ue.added.length;Ee++){const Te=ue.added[Ee];let Pe=E.indexOf(Te);if(Pe===-1){for(let ht=0;ht<w.length;ht++)if(ht>=E.length){E.push(Te),Pe=ht;break}else if(E[ht]===null){E[ht]=Te,Pe=ht;break}if(Pe===-1)break}const Qe=w[Pe];Qe&&Qe.connect(Te)}}const K=new W,ne=new W;function B(ue,Ee,Te){K.setFromMatrixPosition(Ee.matrixWorld),ne.setFromMatrixPosition(Te.matrixWorld);const Pe=K.distanceTo(ne),Qe=Ee.projectionMatrix.elements,ht=Te.projectionMatrix.elements,mt=Qe[14]/(Qe[10]-1),ut=Qe[14]/(Qe[10]+1),G=(Qe[9]+1)/Qe[5],ve=(Qe[9]-1)/Qe[5],Re=(Qe[8]-1)/Qe[0],He=(ht[8]+1)/ht[0],Me=mt*Re,se=mt*He,Ge=Pe/(-Re+He),Ke=Ge*-Re;Ee.matrixWorld.decompose(ue.position,ue.quaternion,ue.scale),ue.translateX(Ke),ue.translateZ(Ge),ue.matrixWorld.compose(ue.position,ue.quaternion,ue.scale),ue.matrixWorldInverse.copy(ue.matrixWorld).invert();const j=mt+Ge,U=ut+Ge,he=Me-Ke,Ie=se+(Pe-Ke),Le=G*ut/U*j,Ae=ve*ut/U*j;ue.projectionMatrix.makePerspective(he,Ie,Le,Ae,j,U),ue.projectionMatrixInverse.copy(ue.projectionMatrix).invert()}function te(ue,Ee){Ee===null?ue.matrixWorld.copy(ue.matrix):ue.matrixWorld.multiplyMatrices(Ee.matrixWorld,ue.matrix),ue.matrixWorldInverse.copy(ue.matrixWorld).invert()}this.updateCamera=function(ue){if(r===null)return;y.texture!==null&&(ue.near=y.depthNear,ue.far=y.depthFar),A.near=b.near=P.near=ue.near,A.far=b.far=P.far=ue.far,(O!==A.near||F!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),O=A.near,F=A.far,P.near=O,P.far=F,b.near=O,b.far=F,P.updateProjectionMatrix(),b.updateProjectionMatrix(),ue.updateProjectionMatrix());const Ee=ue.parent,Te=A.cameras;te(A,Ee);for(let Pe=0;Pe<Te.length;Pe++)te(Te[Pe],Ee);Te.length===2?B(A,P,b):A.projectionMatrix.copy(P.projectionMatrix),k(ue,A,Ee)};function k(ue,Ee,Te){Te===null?ue.matrix.copy(Ee.matrixWorld):(ue.matrix.copy(Te.matrixWorld),ue.matrix.invert(),ue.matrix.multiply(Ee.matrixWorld)),ue.matrix.decompose(ue.position,ue.quaternion,ue.scale),ue.updateMatrixWorld(!0),ue.projectionMatrix.copy(Ee.projectionMatrix),ue.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ue.isPerspectiveCamera&&(ue.fov=Wf*2*Math.atan(1/ue.projectionMatrix.elements[5]),ue.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(ue){l=ue,p!==null&&(p.fixedFoveation=ue),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ue)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(A)};let ce=null;function Se(ue,Ee){if(h=Ee.getViewerPose(f||o),_=Ee,h!==null){const Te=h.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let Pe=!1;Te.length!==A.cameras.length&&(A.cameras.length=0,Pe=!0);for(let ht=0;ht<Te.length;ht++){const mt=Te[ht];let ut=null;if(m!==null)ut=m.getViewport(mt);else{const ve=d.getViewSubImage(p,mt);ut=ve.viewport,ht===0&&(e.setRenderTargetTextures(S,ve.colorTexture,p.ignoreDepthValues?void 0:ve.depthStencilTexture),e.setRenderTarget(S))}let G=C[ht];G===void 0&&(G=new Jn,G.layers.enable(ht),G.viewport=new sn,C[ht]=G),G.matrix.fromArray(mt.transform.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale),G.projectionMatrix.fromArray(mt.projectionMatrix),G.projectionMatrixInverse.copy(G.projectionMatrix).invert(),G.viewport.set(ut.x,ut.y,ut.width,ut.height),ht===0&&(A.matrix.copy(G.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),Pe===!0&&A.cameras.push(G)}const Qe=r.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")){const ht=d.getDepthInformation(Te[0]);ht&&ht.isValid&&ht.texture&&y.init(e,ht,r.renderState)}}for(let Te=0;Te<w.length;Te++){const Pe=E[Te],Qe=w[Te];Pe!==null&&Qe!==void 0&&Qe.update(Pe,Ee,f||o)}ce&&ce(ue,Ee),Ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ee}),_=null}const Fe=new _D;Fe.setAnimationLoop(Se),this.setAnimationLoop=function(ue){ce=ue},this.dispose=function(){}}}const Kl=new Gr,V6=new Lt;function G6(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,mD(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,S,w,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),d(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,E)):g.isMeshMatcapMaterial?(s(x,g),_(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),y(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,S,w):g.isSpriteMaterial?f(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===yr&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===yr&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const S=e.get(g),w=S.envMap,E=S.envMapRotation;w&&(x.envMap.value=w,Kl.copy(E),Kl.x*=-1,Kl.y*=-1,Kl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Kl.y*=-1,Kl.z*=-1),x.envMapRotation.value.setFromMatrix4(V6.makeRotationFromEuler(Kl)),x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,S,w){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*S,x.scale.value=w*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function f(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function d(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,S){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===yr&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function _(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const S=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function W6(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,w){const E=w.program;i.uniformBlockBinding(S,E)}function f(S,w){let E=r[S.id];E===void 0&&(_(S),E=h(S),r[S.id]=E,S.addEventListener("dispose",x));const I=w.program;i.updateUBOMapping(S,I);const R=e.render.frame;s[S.id]!==R&&(p(S),s[S.id]=R)}function h(S){const w=d();S.__bindingPointIndex=w;const E=n.createBuffer(),I=S.__size,R=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,I,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const w=r[S.id],E=S.uniforms,I=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let R=0,P=E.length;R<P;R++){const b=Array.isArray(E[R])?E[R]:[E[R]];for(let C=0,A=b.length;C<A;C++){const O=b[C];if(m(O,R,C,I)===!0){const F=O.__offset,V=Array.isArray(O.value)?O.value:[O.value];let Y=0;for(let J=0;J<V.length;J++){const K=V[J],ne=y(K);typeof K=="number"||typeof K=="boolean"?(O.__data[0]=K,n.bufferSubData(n.UNIFORM_BUFFER,F+Y,O.__data)):K.isMatrix3?(O.__data[0]=K.elements[0],O.__data[1]=K.elements[1],O.__data[2]=K.elements[2],O.__data[3]=0,O.__data[4]=K.elements[3],O.__data[5]=K.elements[4],O.__data[6]=K.elements[5],O.__data[7]=0,O.__data[8]=K.elements[6],O.__data[9]=K.elements[7],O.__data[10]=K.elements[8],O.__data[11]=0):(K.toArray(O.__data,Y),Y+=ne.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,F,O.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,w,E,I){const R=S.value,P=w+"_"+E;if(I[P]===void 0)return typeof R=="number"||typeof R=="boolean"?I[P]=R:I[P]=R.clone(),!0;{const b=I[P];if(typeof R=="number"||typeof R=="boolean"){if(b!==R)return I[P]=R,!0}else if(b.equals(R)===!1)return b.copy(R),!0}return!1}function _(S){const w=S.uniforms;let E=0;const I=16;for(let P=0,b=w.length;P<b;P++){const C=Array.isArray(w[P])?w[P]:[w[P]];for(let A=0,O=C.length;A<O;A++){const F=C[A],V=Array.isArray(F.value)?F.value:[F.value];for(let Y=0,J=V.length;Y<J;Y++){const K=V[Y],ne=y(K),B=E%I;B!==0&&I-B<ne.boundary&&(E+=I-B),F.__data=new Float32Array(ne.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=E,E+=ne.storage}}}const R=E%I;return R>0&&(E+=I-R),S.__size=E,S.__cache={},this}function y(S){const w={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function x(S){const w=S.target;w.removeEventListener("dispose",x);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function g(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:f,dispose:g}}class FE{constructor(e={}){const{canvas:t=fD(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),_=new Int32Array(4);let y=null,x=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Lr,this.toneMapping=No,this.toneMappingExposure=1;const w=this;let E=!1,I=0,R=0,P=null,b=-1,C=null;const A=new sn,O=new sn;let F=null;const V=new nt(0);let Y=0,J=t.width,K=t.height,ne=1,B=null,te=null;const k=new sn(0,0,J,K),ce=new sn(0,0,J,K);let Se=!1;const Fe=new hm;let ue=!1,Ee=!1;const Te=new Lt,Pe=new W,Qe=new sn,ht={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let mt=!1;function ut(){return P===null?ne:1}let G=i;function ve(L,H){return t.getContext(L,H)}try{const L={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${rm}`),t.addEventListener("webglcontextlost",re,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",Be,!1),G===null){const H="webgl2";if(G=ve(H,L),G===null)throw ve(H)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let Re,He,Me,se,Ge,Ke,j,U,he,Ie,Le,Ae,at,Ue,qe,gt,ke,$e,St,wt,We,ie,we,Ve;function Q(){Re=new JH(G),Re.init(),ie=new MD(G,Re),He=new YH(G,Re,e,ie),Me=new P6(G),se=new tV(G),Ge=new _6,Ke=new U6(G,Re,Me,Ge,He,ie,se),j=new jH(w),U=new $H(w),he=new lB(G),we=new WH(G,he),Ie=new QH(G,he,se,we),Le=new iV(G,Ie,he,se),St=new nV(G,He,Ke),gt=new qH(Ge),Ae=new v6(w,j,U,Re,He,we,gt),at=new G6(w,Ge),Ue=new x6,qe=new A6(Re),$e=new GH(w,j,U,Me,Le,p,l),ke=new R6(w,Le,He),Ve=new W6(G,se,He,Me),wt=new XH(G,Re,se),We=new eV(G,Re,se),se.programs=Ae.programs,w.capabilities=He,w.extensions=Re,w.properties=Ge,w.renderLists=Ue,w.shadowMap=ke,w.state=Me,w.info=se}Q();const ge=new H6(w,G);this.xr=ge,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const L=Re.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Re.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(L){L!==void 0&&(ne=L,this.setSize(J,K,!1))},this.getSize=function(L){return L.set(J,K)},this.setSize=function(L,H,X=!0){if(ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=L,K=H,t.width=Math.floor(L*ne),t.height=Math.floor(H*ne),X===!0&&(t.style.width=L+"px",t.style.height=H+"px"),this.setViewport(0,0,L,H)},this.getDrawingBufferSize=function(L){return L.set(J*ne,K*ne).floor()},this.setDrawingBufferSize=function(L,H,X){J=L,K=H,ne=X,t.width=Math.floor(L*X),t.height=Math.floor(H*X),this.setViewport(0,0,L,H)},this.getCurrentViewport=function(L){return L.copy(A)},this.getViewport=function(L){return L.copy(k)},this.setViewport=function(L,H,X,$){L.isVector4?k.set(L.x,L.y,L.z,L.w):k.set(L,H,X,$),Me.viewport(A.copy(k).multiplyScalar(ne).round())},this.getScissor=function(L){return L.copy(ce)},this.setScissor=function(L,H,X,$){L.isVector4?ce.set(L.x,L.y,L.z,L.w):ce.set(L,H,X,$),Me.scissor(O.copy(ce).multiplyScalar(ne).round())},this.getScissorTest=function(){return Se},this.setScissorTest=function(L){Me.setScissorTest(Se=L)},this.setOpaqueSort=function(L){B=L},this.setTransparentSort=function(L){te=L},this.getClearColor=function(L){return L.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(L=!0,H=!0,X=!0){let $=0;if(L){let q=!1;if(P!==null){const ae=P.texture.format;q=ae===ay||ae===oy||ae===lm}if(q){const ae=P.texture.type,de=ae===Vr||ae===zo||ae===Gf||ae===Yu||ae===ry||ae===sy,me=$e.getClearColor(),fe=$e.getClearAlpha(),ze=me.r,De=me.g,Ne=me.b;de?(m[0]=ze,m[1]=De,m[2]=Ne,m[3]=fe,G.clearBufferuiv(G.COLOR,0,m)):(_[0]=ze,_[1]=De,_[2]=Ne,_[3]=fe,G.clearBufferiv(G.COLOR,0,_))}else $|=G.COLOR_BUFFER_BIT}H&&($|=G.DEPTH_BUFFER_BIT),X&&($|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",re,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",Be,!1),Ue.dispose(),qe.dispose(),Ge.dispose(),j.dispose(),U.dispose(),Le.dispose(),we.dispose(),Ve.dispose(),Ae.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",st),ge.removeEventListener("sessionend",Zt),je.stop()};function re(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const L=se.autoReset,H=ke.enabled,X=ke.autoUpdate,$=ke.needsUpdate,q=ke.type;Q(),se.autoReset=L,ke.enabled=H,ke.autoUpdate=X,ke.needsUpdate=$,ke.type=q}function Be(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function ct(L){const H=L.target;H.removeEventListener("dispose",ct),At(H)}function At(L){zt(L),Ge.remove(L)}function zt(L){const H=Ge.get(L).programs;H!==void 0&&(H.forEach(function(X){Ae.releaseProgram(X)}),L.isShaderMaterial&&Ae.releaseShaderCache(L))}this.renderBufferDirect=function(L,H,X,$,q,ae){H===null&&(H=ht);const de=q.isMesh&&q.matrixWorld.determinant()<0,me=N(L,H,X,$,q);Me.setMaterial($,de);let fe=X.index,ze=1;if($.wireframe===!0){if(fe=Ie.getWireframeAttribute(X),fe===void 0)return;ze=2}const De=X.drawRange,Ne=X.attributes.position;let Je=De.start*ze,rt=(De.start+De.count)*ze;ae!==null&&(Je=Math.max(Je,ae.start*ze),rt=Math.min(rt,(ae.start+ae.count)*ze)),fe!==null?(Je=Math.max(Je,0),rt=Math.min(rt,fe.count)):Ne!=null&&(Je=Math.max(Je,0),rt=Math.min(rt,Ne.count));const lt=rt-Je;if(lt<0||lt===1/0)return;we.setup(q,$,me,X,fe);let Ct,Ze=wt;if(fe!==null&&(Ct=he.get(fe),Ze=We,Ze.setIndex(Ct)),q.isMesh)$.wireframe===!0?(Me.setLineWidth($.wireframeLinewidth*ut()),Ze.setMode(G.LINES)):Ze.setMode(G.TRIANGLES);else if(q.isLine){let Oe=$.linewidth;Oe===void 0&&(Oe=1),Me.setLineWidth(Oe*ut()),q.isLineSegments?Ze.setMode(G.LINES):q.isLineLoop?Ze.setMode(G.LINE_LOOP):Ze.setMode(G.LINE_STRIP)}else q.isPoints?Ze.setMode(G.POINTS):q.isSprite&&Ze.setMode(G.TRIANGLES);if(q.isBatchedMesh)if(q._multiDrawInstances!==null)Ze.renderMultiDrawInstances(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount,q._multiDrawInstances);else if(Re.get("WEBGL_multi_draw"))Ze.renderMultiDraw(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount);else{const Oe=q._multiDrawStarts,bt=q._multiDrawCounts,Mt=q._multiDrawCount,Pt=fe?he.get(fe).bytesPerElement:1,on=Ge.get($).currentProgram.getUniforms();for(let gn=0;gn<Mt;gn++)on.setValue(G,"_gl_DrawID",gn),Ze.render(Oe[gn]/Pt,bt[gn])}else if(q.isInstancedMesh)Ze.renderInstances(Je,lt,q.count);else if(X.isInstancedBufferGeometry){const Oe=X._maxInstanceCount!==void 0?X._maxInstanceCount:1/0,bt=Math.min(X.instanceCount,Oe);Ze.renderInstances(Je,lt,bt)}else Ze.render(Je,lt)};function Qt(L,H,X){L.transparent===!0&&L.side===ro&&L.forceSinglePass===!1?(L.side=yr,L.needsUpdate=!0,vt(L,H,X),L.side=wa,L.needsUpdate=!0,vt(L,H,X),L.side=ro):vt(L,H,X)}this.compile=function(L,H,X=null){X===null&&(X=L),x=qe.get(X),x.init(H),S.push(x),X.traverseVisible(function(q){q.isLight&&q.layers.test(H.layers)&&(x.pushLight(q),q.castShadow&&x.pushShadow(q))}),L!==X&&L.traverseVisible(function(q){q.isLight&&q.layers.test(H.layers)&&(x.pushLight(q),q.castShadow&&x.pushShadow(q))}),x.setupLights();const $=new Set;return L.traverse(function(q){const ae=q.material;if(ae)if(Array.isArray(ae))for(let de=0;de<ae.length;de++){const me=ae[de];Qt(me,X,q),$.add(me)}else Qt(ae,X,q),$.add(ae)}),S.pop(),x=null,$},this.compileAsync=function(L,H,X=null){const $=this.compile(L,H,X);return new Promise(q=>{function ae(){if($.forEach(function(de){Ge.get(de).currentProgram.isReady()&&$.delete(de)}),$.size===0){q(L);return}setTimeout(ae,10)}Re.get("KHR_parallel_shader_compile")!==null?ae():setTimeout(ae,10)})};let Ot=null;function _t(L){Ot&&Ot(L)}function st(){je.stop()}function Zt(){je.start()}const je=new _D;je.setAnimationLoop(_t),typeof self<"u"&&je.setContext(self),this.setAnimationLoop=function(L){Ot=L,ge.setAnimationLoop(L),L===null?je.stop():je.start()},ge.addEventListener("sessionstart",st),ge.addEventListener("sessionend",Zt),this.render=function(L,H){if(H!==void 0&&H.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),H.parent===null&&H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ge.enabled===!0&&ge.isPresenting===!0&&(ge.cameraAutoUpdate===!0&&ge.updateCamera(H),H=ge.getCamera()),L.isScene===!0&&L.onBeforeRender(w,L,H,P),x=qe.get(L,S.length),x.init(H),S.push(x),Te.multiplyMatrices(H.projectionMatrix,H.matrixWorldInverse),Fe.setFromProjectionMatrix(Te),Ee=this.localClippingEnabled,ue=gt.init(this.clippingPlanes,Ee),y=Ue.get(L,g.length),y.init(),g.push(y),ge.enabled===!0&&ge.isPresenting===!0){const ae=w.xr.getDepthSensingMesh();ae!==null&&Dt(ae,H,-1/0,w.sortObjects)}Dt(L,H,0,w.sortObjects),y.finish(),w.sortObjects===!0&&y.sort(B,te),mt=ge.enabled===!1||ge.isPresenting===!1||ge.hasDepthSensing()===!1,mt&&$e.addToRenderList(y,L),this.info.render.frame++,ue===!0&&gt.beginShadows();const X=x.state.shadowsArray;ke.render(X,L,H),ue===!0&&gt.endShadows(),this.info.autoReset===!0&&this.info.reset();const $=y.opaque,q=y.transmissive;if(x.setupLights(),H.isArrayCamera){const ae=H.cameras;if(q.length>0)for(let de=0,me=ae.length;de<me;de++){const fe=ae[de];Rt($,q,L,fe)}mt&&$e.render(L);for(let de=0,me=ae.length;de<me;de++){const fe=ae[de];yt(y,L,fe,fe.viewport)}}else q.length>0&&Rt($,q,L,H),mt&&$e.render(L),yt(y,L,H);P!==null&&(Ke.updateMultisampleRenderTarget(P),Ke.updateRenderTargetMipmap(P)),L.isScene===!0&&L.onAfterRender(w,L,H),we.resetDefaultState(),b=-1,C=null,S.pop(),S.length>0?(x=S[S.length-1],ue===!0&&gt.setGlobalState(w.clippingPlanes,x.state.camera)):x=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function Dt(L,H,X,$){if(L.visible===!1)return;if(L.layers.test(H.layers)){if(L.isGroup)X=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(H);else if(L.isLight)x.pushLight(L),L.castShadow&&x.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||Fe.intersectsSprite(L)){$&&Qe.setFromMatrixPosition(L.matrixWorld).applyMatrix4(Te);const de=Le.update(L),me=L.material;me.visible&&y.push(L,de,me,X,Qe.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||Fe.intersectsObject(L))){const de=Le.update(L),me=L.material;if($&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),Qe.copy(L.boundingSphere.center)):(de.boundingSphere===null&&de.computeBoundingSphere(),Qe.copy(de.boundingSphere.center)),Qe.applyMatrix4(L.matrixWorld).applyMatrix4(Te)),Array.isArray(me)){const fe=de.groups;for(let ze=0,De=fe.length;ze<De;ze++){const Ne=fe[ze],Je=me[Ne.materialIndex];Je&&Je.visible&&y.push(L,de,Je,X,Qe.z,Ne)}}else me.visible&&y.push(L,de,me,X,Qe.z,null)}}const ae=L.children;for(let de=0,me=ae.length;de<me;de++)Dt(ae[de],H,X,$)}function yt(L,H,X,$){const q=L.opaque,ae=L.transmissive,de=L.transparent;x.setupLightsView(X),ue===!0&&gt.setGlobalState(w.clippingPlanes,X),$&&Me.viewport(A.copy($)),q.length>0&&pn(q,H,X),ae.length>0&&pn(ae,H,X),de.length>0&&pn(de,H,X),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function Rt(L,H,X,$){if((X.isScene===!0?X.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[$.id]===void 0&&(x.state.transmissionRenderTarget[$.id]=new ds(1,1,{generateMipmaps:!0,type:Re.has("EXT_color_buffer_half_float")||Re.has("EXT_color_buffer_float")?Ii:Vr,minFilter:Ao,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mn.workingColorSpace}));const ae=x.state.transmissionRenderTarget[$.id],de=$.viewport||A;ae.setSize(de.z,de.w);const me=w.getRenderTarget();w.setRenderTarget(ae),w.getClearColor(V),Y=w.getClearAlpha(),Y<1&&w.setClearColor(16777215,.5),mt?$e.render(X):w.clear();const fe=w.toneMapping;w.toneMapping=No;const ze=$.viewport;if($.viewport!==void 0&&($.viewport=void 0),x.setupLightsView($),ue===!0&&gt.setGlobalState(w.clippingPlanes,$),pn(L,X,$),Ke.updateMultisampleRenderTarget(ae),Ke.updateRenderTargetMipmap(ae),Re.has("WEBGL_multisampled_render_to_texture")===!1){let De=!1;for(let Ne=0,Je=H.length;Ne<Je;Ne++){const rt=H[Ne],lt=rt.object,Ct=rt.geometry,Ze=rt.material,Oe=rt.group;if(Ze.side===ro&&lt.layers.test($.layers)){const bt=Ze.side;Ze.side=yr,Ze.needsUpdate=!0,Nt(lt,X,$,Ct,Ze,Oe),Ze.side=bt,Ze.needsUpdate=!0,De=!0}}De===!0&&(Ke.updateMultisampleRenderTarget(ae),Ke.updateRenderTargetMipmap(ae))}w.setRenderTarget(me),w.setClearColor(V,Y),ze!==void 0&&($.viewport=ze),w.toneMapping=fe}function pn(L,H,X){const $=H.isScene===!0?H.overrideMaterial:null;for(let q=0,ae=L.length;q<ae;q++){const de=L[q],me=de.object,fe=de.geometry,ze=$===null?de.material:$,De=de.group;me.layers.test(X.layers)&&Nt(me,H,X,fe,ze,De)}}function Nt(L,H,X,$,q,ae){L.onBeforeRender(w,H,X,$,q,ae),L.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),q.transparent===!0&&q.side===ro&&q.forceSinglePass===!1?(q.side=yr,q.needsUpdate=!0,w.renderBufferDirect(X,H,$,q,L,ae),q.side=wa,q.needsUpdate=!0,w.renderBufferDirect(X,H,$,q,L,ae),q.side=ro):w.renderBufferDirect(X,H,$,q,L,ae),L.onAfterRender(w,H,X,$,q,ae)}function vt(L,H,X){H.isScene!==!0&&(H=ht);const $=Ge.get(L),q=x.state.lights,ae=x.state.shadowsArray,de=q.state.version,me=Ae.getParameters(L,q.state,ae,H,X),fe=Ae.getProgramCacheKey(me);let ze=$.programs;$.environment=L.isMeshStandardMaterial?H.environment:null,$.fog=H.fog,$.envMap=(L.isMeshStandardMaterial?U:j).get(L.envMap||$.environment),$.envMapRotation=$.environment!==null&&L.envMap===null?H.environmentRotation:L.envMapRotation,ze===void 0&&(L.addEventListener("dispose",ct),ze=new Map,$.programs=ze);let De=ze.get(fe);if(De!==void 0){if($.currentProgram===De&&$.lightsStateVersion===de)return yn(L,me),De}else me.uniforms=Ae.getUniforms(L),L.onBeforeCompile(me,w),De=Ae.acquireProgram(me,fe),ze.set(fe,De),$.uniforms=me.uniforms;const Ne=$.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(Ne.clippingPlanes=gt.uniform),yn(L,me),$.needsLights=ee(L),$.lightsStateVersion=de,$.needsLights&&(Ne.ambientLightColor.value=q.state.ambient,Ne.lightProbe.value=q.state.probe,Ne.directionalLights.value=q.state.directional,Ne.directionalLightShadows.value=q.state.directionalShadow,Ne.spotLights.value=q.state.spot,Ne.spotLightShadows.value=q.state.spotShadow,Ne.rectAreaLights.value=q.state.rectArea,Ne.ltc_1.value=q.state.rectAreaLTC1,Ne.ltc_2.value=q.state.rectAreaLTC2,Ne.pointLights.value=q.state.point,Ne.pointLightShadows.value=q.state.pointShadow,Ne.hemisphereLights.value=q.state.hemi,Ne.directionalShadowMap.value=q.state.directionalShadowMap,Ne.directionalShadowMatrix.value=q.state.directionalShadowMatrix,Ne.spotShadowMap.value=q.state.spotShadowMap,Ne.spotLightMatrix.value=q.state.spotLightMatrix,Ne.spotLightMap.value=q.state.spotLightMap,Ne.pointShadowMap.value=q.state.pointShadowMap,Ne.pointShadowMatrix.value=q.state.pointShadowMatrix),$.currentProgram=De,$.uniformsList=null,De}function Dn(L){if(L.uniformsList===null){const H=L.currentProgram.getUniforms();L.uniformsList=ov.seqWithValue(H.seq,L.uniforms)}return L.uniformsList}function yn(L,H){const X=Ge.get(L);X.outputColorSpace=H.outputColorSpace,X.batching=H.batching,X.batchingColor=H.batchingColor,X.instancing=H.instancing,X.instancingColor=H.instancingColor,X.instancingMorph=H.instancingMorph,X.skinning=H.skinning,X.morphTargets=H.morphTargets,X.morphNormals=H.morphNormals,X.morphColors=H.morphColors,X.morphTargetsCount=H.morphTargetsCount,X.numClippingPlanes=H.numClippingPlanes,X.numIntersection=H.numClipIntersection,X.vertexAlphas=H.vertexAlphas,X.vertexTangents=H.vertexTangents,X.toneMapping=H.toneMapping}function N(L,H,X,$,q){H.isScene!==!0&&(H=ht),Ke.resetTextureUnits();const ae=H.fog,de=$.isMeshStandardMaterial?H.environment:null,me=P===null?w.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Gs,fe=($.isMeshStandardMaterial?U:j).get($.envMap||de),ze=$.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,De=!!X.attributes.tangent&&(!!$.normalMap||$.anisotropy>0),Ne=!!X.morphAttributes.position,Je=!!X.morphAttributes.normal,rt=!!X.morphAttributes.color;let lt=No;$.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(lt=w.toneMapping);const Ct=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,Ze=Ct!==void 0?Ct.length:0,Oe=Ge.get($),bt=x.state.lights;if(ue===!0&&(Ee===!0||L!==C)){const Bt=L===C&&$.id===b;gt.setState($,L,Bt)}let Mt=!1;$.version===Oe.__version?(Oe.needsLights&&Oe.lightsStateVersion!==bt.state.version||Oe.outputColorSpace!==me||q.isBatchedMesh&&Oe.batching===!1||!q.isBatchedMesh&&Oe.batching===!0||q.isBatchedMesh&&Oe.batchingColor===!0&&q.colorTexture===null||q.isBatchedMesh&&Oe.batchingColor===!1&&q.colorTexture!==null||q.isInstancedMesh&&Oe.instancing===!1||!q.isInstancedMesh&&Oe.instancing===!0||q.isSkinnedMesh&&Oe.skinning===!1||!q.isSkinnedMesh&&Oe.skinning===!0||q.isInstancedMesh&&Oe.instancingColor===!0&&q.instanceColor===null||q.isInstancedMesh&&Oe.instancingColor===!1&&q.instanceColor!==null||q.isInstancedMesh&&Oe.instancingMorph===!0&&q.morphTexture===null||q.isInstancedMesh&&Oe.instancingMorph===!1&&q.morphTexture!==null||Oe.envMap!==fe||$.fog===!0&&Oe.fog!==ae||Oe.numClippingPlanes!==void 0&&(Oe.numClippingPlanes!==gt.numPlanes||Oe.numIntersection!==gt.numIntersection)||Oe.vertexAlphas!==ze||Oe.vertexTangents!==De||Oe.morphTargets!==Ne||Oe.morphNormals!==Je||Oe.morphColors!==rt||Oe.toneMapping!==lt||Oe.morphTargetsCount!==Ze)&&(Mt=!0):(Mt=!0,Oe.__version=$.version);let Pt=Oe.currentProgram;Mt===!0&&(Pt=vt($,H,q));let on=!1,gn=!1,Nn=!1;const Kt=Pt.getUniforms(),Yt=Oe.uniforms;if(Me.useProgram(Pt.program)&&(on=!0,gn=!0,Nn=!0),$.id!==b&&(b=$.id,gn=!0),on||C!==L){Kt.setValue(G,"projectionMatrix",L.projectionMatrix),Kt.setValue(G,"viewMatrix",L.matrixWorldInverse);const Bt=Kt.map.cameraPosition;Bt!==void 0&&Bt.setValue(G,Pe.setFromMatrixPosition(L.matrixWorld)),He.logarithmicDepthBuffer&&Kt.setValue(G,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&Kt.setValue(G,"isOrthographic",L.isOrthographicCamera===!0),C!==L&&(C=L,gn=!0,Nn=!0)}if(q.isSkinnedMesh){Kt.setOptional(G,q,"bindMatrix"),Kt.setOptional(G,q,"bindMatrixInverse");const Bt=q.skeleton;Bt&&(Bt.boneTexture===null&&Bt.computeBoneTexture(),Kt.setValue(G,"boneTexture",Bt.boneTexture,Ke))}q.isBatchedMesh&&(Kt.setOptional(G,q,"batchingTexture"),Kt.setValue(G,"batchingTexture",q._matricesTexture,Ke),Kt.setOptional(G,q,"batchingIdTexture"),Kt.setValue(G,"batchingIdTexture",q._indirectTexture,Ke),Kt.setOptional(G,q,"batchingColorTexture"),q._colorsTexture!==null&&Kt.setValue(G,"batchingColorTexture",q._colorsTexture,Ke));const Fn=X.morphAttributes;if((Fn.position!==void 0||Fn.normal!==void 0||Fn.color!==void 0)&&St.update(q,X,Pt),(gn||Oe.receiveShadow!==q.receiveShadow)&&(Oe.receiveShadow=q.receiveShadow,Kt.setValue(G,"receiveShadow",q.receiveShadow)),$.isMeshGouraudMaterial&&$.envMap!==null&&(Yt.envMap.value=fe,Yt.flipEnvMap.value=fe.isCubeTexture&&fe.isRenderTargetTexture===!1?-1:1),$.isMeshStandardMaterial&&$.envMap===null&&H.environment!==null&&(Yt.envMapIntensity.value=H.environmentIntensity),gn&&(Kt.setValue(G,"toneMappingExposure",w.toneMappingExposure),Oe.needsLights&&z(Yt,Nn),ae&&$.fog===!0&&at.refreshFogUniforms(Yt,ae),at.refreshMaterialUniforms(Yt,$,ne,K,x.state.transmissionRenderTarget[L.id]),ov.upload(G,Dn(Oe),Yt,Ke)),$.isShaderMaterial&&$.uniformsNeedUpdate===!0&&(ov.upload(G,Dn(Oe),Yt,Ke),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&Kt.setValue(G,"center",q.center),Kt.setValue(G,"modelViewMatrix",q.modelViewMatrix),Kt.setValue(G,"normalMatrix",q.normalMatrix),Kt.setValue(G,"modelMatrix",q.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){const Bt=$.uniformsGroups;for(let tn=0,Tn=Bt.length;tn<Tn;tn++){const _s=Bt[tn];Ve.update(_s,Pt),Ve.bind(_s,Pt)}}return Pt}function z(L,H){L.ambientLightColor.needsUpdate=H,L.lightProbe.needsUpdate=H,L.directionalLights.needsUpdate=H,L.directionalLightShadows.needsUpdate=H,L.pointLights.needsUpdate=H,L.pointLightShadows.needsUpdate=H,L.spotLights.needsUpdate=H,L.spotLightShadows.needsUpdate=H,L.rectAreaLights.needsUpdate=H,L.hemisphereLights.needsUpdate=H}function ee(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(L,H,X){Ge.get(L.texture).__webglTexture=H,Ge.get(L.depthTexture).__webglTexture=X;const $=Ge.get(L);$.__hasExternalTextures=!0,$.__autoAllocateDepthBuffer=X===void 0,$.__autoAllocateDepthBuffer||Re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(L,H){const X=Ge.get(L);X.__webglFramebuffer=H,X.__useDefaultFramebuffer=H===void 0},this.setRenderTarget=function(L,H=0,X=0){P=L,I=H,R=X;let $=!0,q=null,ae=!1,de=!1;if(L){const fe=Ge.get(L);fe.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(G.FRAMEBUFFER,null),$=!1):fe.__webglFramebuffer===void 0?Ke.setupRenderTarget(L):fe.__hasExternalTextures&&Ke.rebindTextures(L,Ge.get(L.texture).__webglTexture,Ge.get(L.depthTexture).__webglTexture);const ze=L.texture;(ze.isData3DTexture||ze.isDataArrayTexture||ze.isCompressedArrayTexture)&&(de=!0);const De=Ge.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(De[H])?q=De[H][X]:q=De[H],ae=!0):L.samples>0&&Ke.useMultisampledRTT(L)===!1?q=Ge.get(L).__webglMultisampledFramebuffer:Array.isArray(De)?q=De[X]:q=De,A.copy(L.viewport),O.copy(L.scissor),F=L.scissorTest}else A.copy(k).multiplyScalar(ne).floor(),O.copy(ce).multiplyScalar(ne).floor(),F=Se;if(Me.bindFramebuffer(G.FRAMEBUFFER,q)&&$&&Me.drawBuffers(L,q),Me.viewport(A),Me.scissor(O),Me.setScissorTest(F),ae){const fe=Ge.get(L.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+H,fe.__webglTexture,X)}else if(de){const fe=Ge.get(L.texture),ze=H||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,fe.__webglTexture,X||0,ze)}b=-1},this.readRenderTargetPixels=function(L,H,X,$,q,ae,de){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let me=Ge.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&de!==void 0&&(me=me[de]),me){Me.bindFramebuffer(G.FRAMEBUFFER,me);try{const fe=L.texture,ze=fe.format,De=fe.type;if(!He.textureFormatReadable(ze)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(De)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H>=0&&H<=L.width-$&&X>=0&&X<=L.height-q&&G.readPixels(H,X,$,q,ie.convert(ze),ie.convert(De),ae)}finally{const fe=P!==null?Ge.get(P).__webglFramebuffer:null;Me.bindFramebuffer(G.FRAMEBUFFER,fe)}}},this.readRenderTargetPixelsAsync=async function(L,H,X,$,q,ae,de){if(!(L&&L.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let me=Ge.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&de!==void 0&&(me=me[de]),me){Me.bindFramebuffer(G.FRAMEBUFFER,me);try{const fe=L.texture,ze=fe.format,De=fe.type;if(!He.textureFormatReadable(ze))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(De))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(H>=0&&H<=L.width-$&&X>=0&&X<=L.height-q){const Ne=G.createBuffer();G.bindBuffer(G.PIXEL_PACK_BUFFER,Ne),G.bufferData(G.PIXEL_PACK_BUFFER,ae.byteLength,G.STREAM_READ),G.readPixels(H,X,$,q,ie.convert(ze),ie.convert(De),0),G.flush();const Je=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,0);await N4(G,Je,4);try{G.bindBuffer(G.PIXEL_PACK_BUFFER,Ne),G.getBufferSubData(G.PIXEL_PACK_BUFFER,0,ae)}finally{G.deleteBuffer(Ne),G.deleteSync(Je)}return ae}}finally{const fe=P!==null?Ge.get(P).__webglFramebuffer:null;Me.bindFramebuffer(G.FRAMEBUFFER,fe)}}},this.copyFramebufferToTexture=function(L,H=null,X=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),H=arguments[0]||null,L=arguments[1]);const $=Math.pow(2,-X),q=Math.floor(L.image.width*$),ae=Math.floor(L.image.height*$),de=H!==null?H.x:0,me=H!==null?H.y:0;Ke.setTexture2D(L,0),G.copyTexSubImage2D(G.TEXTURE_2D,X,0,0,de,me,q,ae),Me.unbindTexture()},this.copyTextureToTexture=function(L,H,X=null,$=null,q=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),$=arguments[0]||null,L=arguments[1],H=arguments[2],q=arguments[3]||0,X=null);let ae,de,me,fe,ze,De;X!==null?(ae=X.max.x-X.min.x,de=X.max.y-X.min.y,me=X.min.x,fe=X.min.y):(ae=L.image.width,de=L.image.height,me=0,fe=0),$!==null?(ze=$.x,De=$.y):(ze=0,De=0);const Ne=ie.convert(H.format),Je=ie.convert(H.type);Ke.setTexture2D(H,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,H.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,H.unpackAlignment);const rt=G.getParameter(G.UNPACK_ROW_LENGTH),lt=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Ct=G.getParameter(G.UNPACK_SKIP_PIXELS),Ze=G.getParameter(G.UNPACK_SKIP_ROWS),Oe=G.getParameter(G.UNPACK_SKIP_IMAGES),bt=L.isCompressedTexture?L.mipmaps[q]:L.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,bt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,bt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,me),G.pixelStorei(G.UNPACK_SKIP_ROWS,fe),L.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,q,ze,De,ae,de,Ne,Je,bt.data):L.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,q,ze,De,bt.width,bt.height,Ne,bt.data):G.texSubImage2D(G.TEXTURE_2D,q,ze,De,ae,de,Ne,Je,bt),G.pixelStorei(G.UNPACK_ROW_LENGTH,rt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,lt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Ct),G.pixelStorei(G.UNPACK_SKIP_ROWS,Ze),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Oe),q===0&&H.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(L,H,X=null,$=null,q=0){L.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),X=arguments[0]||null,$=arguments[1]||null,L=arguments[2],H=arguments[3],q=arguments[4]||0);let ae,de,me,fe,ze,De,Ne,Je,rt;const lt=L.isCompressedTexture?L.mipmaps[q]:L.image;X!==null?(ae=X.max.x-X.min.x,de=X.max.y-X.min.y,me=X.max.z-X.min.z,fe=X.min.x,ze=X.min.y,De=X.min.z):(ae=lt.width,de=lt.height,me=lt.depth,fe=0,ze=0,De=0),$!==null?(Ne=$.x,Je=$.y,rt=$.z):(Ne=0,Je=0,rt=0);const Ct=ie.convert(H.format),Ze=ie.convert(H.type);let Oe;if(H.isData3DTexture)Ke.setTexture3D(H,0),Oe=G.TEXTURE_3D;else if(H.isDataArrayTexture||H.isCompressedArrayTexture)Ke.setTexture2DArray(H,0),Oe=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,H.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,H.unpackAlignment);const bt=G.getParameter(G.UNPACK_ROW_LENGTH),Mt=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Pt=G.getParameter(G.UNPACK_SKIP_PIXELS),on=G.getParameter(G.UNPACK_SKIP_ROWS),gn=G.getParameter(G.UNPACK_SKIP_IMAGES);G.pixelStorei(G.UNPACK_ROW_LENGTH,lt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,lt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,fe),G.pixelStorei(G.UNPACK_SKIP_ROWS,ze),G.pixelStorei(G.UNPACK_SKIP_IMAGES,De),L.isDataTexture||L.isData3DTexture?G.texSubImage3D(Oe,q,Ne,Je,rt,ae,de,me,Ct,Ze,lt.data):H.isCompressedArrayTexture?G.compressedTexSubImage3D(Oe,q,Ne,Je,rt,ae,de,me,Ct,lt.data):G.texSubImage3D(Oe,q,Ne,Je,rt,ae,de,me,Ct,Ze,lt),G.pixelStorei(G.UNPACK_ROW_LENGTH,bt),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Mt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Pt),G.pixelStorei(G.UNPACK_SKIP_ROWS,on),G.pixelStorei(G.UNPACK_SKIP_IMAGES,gn),q===0&&H.generateMipmaps&&G.generateMipmap(Oe),Me.unbindTexture()},this.initRenderTarget=function(L){Ge.get(L).__webglFramebuffer===void 0&&Ke.setupRenderTarget(L)},this.initTexture=function(L){L.isCubeTexture?Ke.setTextureCube(L,0):L.isData3DTexture?Ke.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?Ke.setTexture2DArray(L,0):Ke.setTexture2D(L,0),Me.unbindTexture()},this.resetState=function(){I=0,R=0,P=null,Me.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Co}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===uy?"display-p3":"srgb",t.unpackColorSpace=mn.workingColorSpace===um?"display-p3":"srgb"}}class dy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new nt(e),this.density=t}clone(){return new dy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class py{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new nt(e),this.near=t,this.far=i}clone(){return new py(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Yf extends un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Gr,this.environmentIntensity=1,this.environmentRotation=new Gr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class my{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ip,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=us()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return PE("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=us()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ar=new W;class ju{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.applyMatrix4(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.applyNormalMatrix(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ar.fromBufferAttribute(this,t),ar.transformDirection(e),this.setXYZ(t,ar.x,ar.y,ar.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=mr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Vt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=mr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=mr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=mr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=mr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array),s=Vt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Sn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ju(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zE extends Bi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uc;const Hh=new W,kc=new W,Fc=new W,zc=new be,Vh=new be,TD=new Lt,e0=new W,Gh=new W,t0=new W,_2=new be,B1=new be,y2=new be;class AD extends un{constructor(e=new zE){if(super(),this.isSprite=!0,this.type="Sprite",Uc===void 0){Uc=new Wt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new my(t,5);Uc.setIndex([0,1,2,0,2,3]),Uc.setAttribute("position",new ju(i,3,0,!1)),Uc.setAttribute("uv",new ju(i,2,3,!1))}this.geometry=Uc,this.material=e,this.center=new be(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kc.setFromMatrixScale(this.matrixWorld),TD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Fc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kc.multiplyScalar(-Fc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;n0(e0.set(-.5,-.5,0),Fc,o,kc,r,s),n0(Gh.set(.5,-.5,0),Fc,o,kc,r,s),n0(t0.set(.5,.5,0),Fc,o,kc,r,s),_2.set(0,0),B1.set(1,0),y2.set(1,1);let a=e.ray.intersectTriangle(e0,Gh,t0,!1,Hh);if(a===null&&(n0(Gh.set(-.5,.5,0),Fc,o,kc,r,s),B1.set(0,1),a=e.ray.intersectTriangle(e0,t0,Gh,!1,Hh),a===null))return;const l=e.ray.origin.distanceTo(Hh);l<e.near||l>e.far||t.push({distance:l,point:Hh.clone(),uv:is.getInterpolation(Hh,e0,Gh,t0,_2,B1,y2,new be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function n0(n,e,t,i,r,s){zc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Vh.x=s*zc.x-r*zc.y,Vh.y=r*zc.x+s*zc.y):Vh.copy(zc),n.copy(e),n.x+=Vh.x,n.y+=Vh.y,n.applyMatrix4(TD)}const i0=new W,x2=new W;class CD extends un{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){i0.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(i0);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){i0.setFromMatrixPosition(e.matrixWorld),x2.setFromMatrixPosition(this.matrixWorld);const i=i0.distanceTo(x2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const S2=new W,w2=new sn,M2=new sn,X6=new W,E2=new Lt,r0=new W,H1=new tr,T2=new Lt,V1=new nc;class BE extends Xn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Pw,this.bindMatrix=new Lt,this.bindMatrixInverse=new Lt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new xr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,r0),this.boundingBox.expandByPoint(r0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new tr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,r0),this.boundingSphere.expandByPoint(r0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),H1.copy(this.boundingSphere),H1.applyMatrix4(r),e.ray.intersectsSphere(H1)!==!1&&(T2.copy(r).invert(),V1.copy(e.ray).applyMatrix4(T2),!(this.boundingBox!==null&&V1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,V1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Pw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===KL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;w2.fromBufferAttribute(r.attributes.skinIndex,e),M2.fromBufferAttribute(r.attributes.skinWeight,e),S2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=M2.getComponent(s);if(o!==0){const a=w2.getComponent(s);E2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(X6.copy(S2).applyMatrix4(E2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class gy extends un{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ao extends dn{constructor(e=null,t=1,i=1,r,s,o,a,l,f=Pi,h=Pi,d,p){super(null,o,a,l,f,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const A2=new Lt,Y6=new Lt;class dm{constructor(e=[],t=[]){this.uuid=us(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Y6;A2.multiplyMatrices(a,t[s]),A2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new dm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ao(t,e,e,ri,Wn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new gy),this.bones.push(o),this.boneInverses.push(new Lt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class qf extends Sn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bc=new Lt,C2=new Lt,s0=[],b2=new xr,q6=new Lt,Wh=new Xn,Xh=new tr;class bD extends Xn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new qf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,q6)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new xr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bc),b2.copy(e.boundingBox).applyMatrix4(Bc),this.boundingBox.union(b2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new tr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Bc),Xh.copy(e.boundingSphere).applyMatrix4(Bc),this.boundingSphere.union(Xh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Wh.geometry=this.geometry,Wh.material=this.material,Wh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xh.copy(this.boundingSphere),Xh.applyMatrix4(i),e.ray.intersectsSphere(Xh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Bc),C2.multiplyMatrices(i,Bc),Wh.matrixWorld=C2,Wh.raycast(e,s0);for(let o=0,a=s0.length;o<a;o++){const l=s0[o];l.instanceId=s,l.object=this,t.push(l)}s0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new qf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ao(new Float32Array(r*this.count),r,this.count,am,Wn));const s=this.morphTexture.source.data.data;let o=0;for(let f=0;f<i.length;f++)o+=i[f];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function j6(n,e){return n.z-e.z}function Z6(n,e){return e.z-n.z}class K6{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const Va=new Lt,G1=new Lt,$6=new Lt,J6=new nt(1,1,1),R2=new Lt,W1=new hm,o0=new xr,$l=new tr,Yh=new W,P2=new W,Q6=new W,X1=new K6,Zi=new Xn,a0=[];function e8(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class RD extends Xn{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,r){super(new Wt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ao(t,e,e,ri,Wn);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new ao(t,e,e,lm,zo);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new ao(t,e,e,ri,Wn);i.colorSpace=mn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:f}=o,h=new a.constructor(i*l),d=new Sn(h,l,f);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Sn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xr);const e=this._geometryCount,t=this.boundingBox,i=this._drawInfo;t.makeEmpty();for(let r=0;r<e;r++){if(i[r].active===!1)continue;const s=i[r].geometryIndex;this.getMatrixAt(r,Va),this.getBoundingBoxAt(s,o0).applyMatrix4(Va),t.union(o0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new tr);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Va),this.getBoundingSphereAt(s,$l).applyMatrix4(Va),e.union($l)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,r=i.image.data;$6.toArray(r,t*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(J6.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),h=f!==null;if(h&&(i===-1?r.indexCount=f.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:h?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new xr,sphereInitialized:!1,sphere:new tr}),this.setGeometryAt(d,e),d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,f=a.vertexCount;for(const m in i.attributes){const _=t.getAttribute(m),y=i.getAttribute(m);e8(_,y,l);const x=_.itemSize;for(let g=_.count,S=f;g<S;g++){const w=l+g;for(let E=0;E<x;E++)y.setComponent(w,E,0)}y.needsUpdate=!0,y.addUpdateRange(l*x,f*x)}if(r){const m=a.indexStart;for(let _=0;_<o.count;_++)s.setX(m+_,l+o.getX(_));for(let _=o.count,y=a.indexCount;_<y;_++)s.setX(m+_,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let f=l.start,h=l.start+l.count;f<h;f++){let d=f;o&&(d=o.getX(d)),r.expandByPoint(Yh.fromBufferAttribute(a,d))}i.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,o0),o0.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let f=0;for(let h=l.start,d=l.start+l.count;h<d;h++){let p=h;o&&(p=o.getX(p)),Yh.fromBufferAttribute(a,p),f=Math.max(f,r.center.distanceToSquared(Yh))}r.radius=Math.sqrt(f),i.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;Zi.material=this.material,Zi.geometry.index=o.index,Zi.geometry.attributes=o.attributes,Zi.geometry.boundingBox===null&&(Zi.geometry.boundingBox=new xr),Zi.geometry.boundingSphere===null&&(Zi.geometry.boundingSphere=new tr);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const f=i[a].geometryIndex,h=r[f];Zi.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,Zi.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,Zi.geometry.boundingBox),this.getBoundingSphereAt(f,Zi.geometry.boundingSphere),Zi.raycast(e,a0);for(let d=0,p=a0.length;d<p;d++){const m=a0[d];m.object=this,m.batchId=a,t.push(m)}a0.length=0}Zi.material=null,Zi.geometry.index=null,Zi.geometry.attributes={},Zi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,f=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,_=m.image.data;p&&(R2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),W1.setFromProjectionMatrix(R2,e.coordinateSystem));let y=0;if(this.sortObjects){G1.copy(this.matrixWorld).invert(),Yh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(G1),P2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(G1);for(let S=0,w=l.length;S<w;S++)if(l[S].visible&&l[S].active){const E=l[S].geometryIndex;this.getMatrixAt(S,Va),this.getBoundingSphereAt(E,$l).applyMatrix4(Va);let I=!1;if(p&&(I=!W1.intersectsSphere($l)),!I){const R=Q6.subVectors($l.center,Yh).dot(P2);X1.push(d[E],R,S)}}const x=X1.list,g=this.customSort;g===null?x.sort(s.transparent?Z6:j6):g.call(this,x,i);for(let S=0,w=x.length;S<w;S++){const E=x[S];f[y]=E.start*a,h[y]=E.count,_[y]=E.index,y++}X1.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const S=l[x].geometryIndex;let w=!1;if(p&&(this.getMatrixAt(x,Va),this.getBoundingSphereAt(S,$l).applyMatrix4(Va),w=!W1.intersectsSphere($l)),!w){const E=d[S];f[y]=E.start*a,h[y]=E.count,_[y]=x,y++}}m.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Mr extends Bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new nt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const __=new W,y_=new W,I2=new Lt,qh=new nc,l0=new tr,Y1=new W,L2=new W;class Ml extends un{constructor(e=new Wt,t=new Mr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)__.fromBufferAttribute(t,r-1),y_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=__.distanceTo(y_);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),l0.copy(i.boundingSphere),l0.applyMatrix4(r),l0.radius+=s,e.ray.intersectsSphere(l0)===!1)return;I2.copy(r).invert(),qh.copy(e.ray).applyMatrix4(I2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),_=Math.min(h.count,o.start+o.count);for(let y=m,x=_-1;y<x;y+=f){const g=h.getX(y),S=h.getX(y+1),w=u0(this,e,qh,l,g,S);w&&t.push(w)}if(this.isLineLoop){const y=h.getX(_-1),x=h.getX(m),g=u0(this,e,qh,l,y,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count);for(let y=m,x=_-1;y<x;y+=f){const g=u0(this,e,qh,l,y,y+1);g&&t.push(g)}if(this.isLineLoop){const y=u0(this,e,qh,l,_-1,m);y&&t.push(y)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function u0(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(__.fromBufferAttribute(o,r),y_.fromBufferAttribute(o,s),t.distanceSqToSegment(__,y_,Y1,L2)>i)return;Y1.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Y1);if(!(l<e.near||l>e.far))return{distance:l,point:L2.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const D2=new W,N2=new W;class Vo extends Ml{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)D2.fromBufferAttribute(t,r),N2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+D2.distanceTo(N2);e.setAttribute("lineDistance",new xt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PD extends Ml{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class HE extends Bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const O2=new Lt,kw=new nc,c0=new tr,f0=new W;class ID extends un{constructor(e=new Wt,t=new HE){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),c0.copy(i.boundingSphere),c0.applyMatrix4(r),c0.radius+=s,e.ray.intersectsSphere(c0)===!1)return;O2.copy(r).invert(),kw.copy(e.ray).applyMatrix4(O2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,f=i.index,d=i.attributes.position;if(f!==null){const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let _=p,y=m;_<y;_++){const x=f.getX(_);f0.fromBufferAttribute(d,x),U2(f0,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let _=p,y=m;_<y;_++)f0.fromBufferAttribute(d,_),U2(f0,_,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function U2(n,e,t,i,r,s,o){const a=kw.distanceSqToPoint(n);if(a<t){const l=new W;kw.closestPointToPoint(n,l),l.applyMatrix4(i);const f=r.ray.origin.distanceTo(l);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class t8 extends dn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:_n,this.magFilter=s!==void 0?s:_n,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class n8 extends dn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Pi,this.minFilter=Pi,this.generateMipmaps=!1,this.needsUpdate=!0}}class vy extends dn{constructor(e,t,i,r,s,o,a,l,f,h,d,p){super(null,o,a,l,f,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class i8 extends vy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=pi,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class r8 extends vy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Fo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class s8 extends dn{constructor(e,t,i,r,s,o,a,l,f){super(e,t,i,r,s,o,a,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class uo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,f;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new be:new W);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new W,r=[],s=[],o=[],a=new W,l=new Lt;for(let m=0;m<=e;m++){const _=m/e;r[m]=this.getTangentAt(_,new W)}s[0]=new W,o[0]=new W;let f=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=f&&(f=h,i.set(1,0,0)),d<=f&&(f=d,i.set(0,1,0)),p<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos($n(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,_))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos($n(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(r[_],m*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _y extends uo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new be){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=f-this.aY;l=p*h-m*d+this.aX,f=p*d+m*h+this.aY}return i.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class LD extends _y{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function VE(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,f){r(o,a,f*(a-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,f,h,d){let p=(o-s)/f-(a-s)/(f+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const h0=new W,q1=new VE,j1=new VE,Z1=new VE;class DD extends uo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new W){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let f,h;this.closed||a>0?f=r[(a-1)%s]:(h0.subVectors(r[0],r[1]).add(r[0]),f=h0);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(h0.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=h0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);y<1e-4&&(y=1),_<1e-4&&(_=y),x<1e-4&&(x=y),q1.initNonuniformCatmullRom(f.x,d.x,p.x,h.x,_,y,x),j1.initNonuniformCatmullRom(f.y,d.y,p.y,h.y,_,y,x),Z1.initNonuniformCatmullRom(f.z,d.z,p.z,h.z,_,y,x)}else this.curveType==="catmullrom"&&(q1.initCatmullRom(f.x,d.x,p.x,h.x,this.tension),j1.initCatmullRom(f.y,d.y,p.y,h.y,this.tension),Z1.initCatmullRom(f.z,d.z,p.z,h.z,this.tension));return i.set(q1.calc(l),j1.calc(l),Z1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new W().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function k2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function o8(n,e){const t=1-n;return t*t*e}function a8(n,e){return 2*(1-n)*n*e}function l8(n,e){return n*n*e}function Bd(n,e,t,i){return o8(n,e)+a8(n,t)+l8(n,i)}function u8(n,e){const t=1-n;return t*t*t*e}function c8(n,e){const t=1-n;return 3*t*t*n*e}function f8(n,e){return 3*(1-n)*n*n*e}function h8(n,e){return n*n*n*e}function Hd(n,e,t,i,r){return u8(n,e)+c8(n,t)+f8(n,i)+h8(n,r)}class GE extends uo{constructor(e=new be,t=new be,i=new be,r=new be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Hd(e,r.x,s.x,o.x,a.x),Hd(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ND extends uo{constructor(e=new W,t=new W,i=new W,r=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new W){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Hd(e,r.x,s.x,o.x,a.x),Hd(e,r.y,s.y,o.y,a.y),Hd(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WE extends uo{constructor(e=new be,t=new be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new be){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OD extends uo{constructor(e=new W,t=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new W){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new W){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XE extends uo{constructor(e=new be,t=new be,i=new be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new be){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Bd(e,r.x,s.x,o.x),Bd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YE extends uo{constructor(e=new W,t=new W,i=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new W){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Bd(e,r.x,s.x,o.x),Bd(e,r.y,s.y,o.y),Bd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qE extends uo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new be){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],f=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(k2(a,l.x,f.x,h.x,d.x),k2(a,l.y,f.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new be().fromArray(r))}return this}}var x_=Object.freeze({__proto__:null,ArcCurve:LD,CatmullRomCurve3:DD,CubicBezierCurve:GE,CubicBezierCurve3:ND,EllipseCurve:_y,LineCurve:WE,LineCurve3:OD,QuadraticBezierCurve:XE,QuadraticBezierCurve3:YE,SplineCurve:qE});class UD extends uo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new x_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),f=l===0?0:1-o/l;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let f=0;f<l.length;f++){const h=l[f];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new x_[r.type]().fromJSON(r))}return this}}class Np extends UD{constructor(e){super(),this.type="Path",this.currentPoint=new be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new WE(this.currentPoint.clone(),new be(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new XE(this.currentPoint.clone(),new be(e,t),new be(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new GE(this.currentPoint.clone(),new be(e,t),new be(i,r),new be(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new qE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const f=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+f,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const f=new _y(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=f.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(f);const h=f.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class pm extends Wt{constructor(e=[new be(0,-.5),new be(.5,0),new be(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=$n(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],f=[],h=1/t,d=new W,p=new be,m=new W,_=new W,y=new W;let x=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,_.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(_)}for(let S=0;S<=t;S++){const w=i+S*h*r,E=Math.sin(w),I=Math.cos(w);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*E,d.y=e[R].y,d.z=e[R].x*I,o.push(d.x,d.y,d.z),p.x=S/t,p.y=R/(e.length-1),a.push(p.x,p.y);const P=l[3*R+0]*E,b=l[3*R+1],C=l[3*R+0]*I;f.push(P,b,C)}}for(let S=0;S<t;S++)for(let w=0;w<e.length-1;w++){const E=w+S*e.length,I=E,R=E+e.length,P=E+e.length+1,b=E+1;s.push(I,R,b),s.push(P,b,R)}this.setIndex(s),this.setAttribute("position",new xt(o,3)),this.setAttribute("uv",new xt(a,2)),this.setAttribute("normal",new xt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pm(e.points,e.segments,e.phiStart,e.phiLength)}}class yy extends pm{constructor(e=1,t=1,i=4,r=8){const s=new Np;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new yy(e.radius,e.length,e.capSegments,e.radialSegments)}}class xy extends Wt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],f=new W,h=new be;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;f.x=e*Math.cos(m),f.y=e*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new xt(o,3)),this.setAttribute("normal",new xt(a,3)),this.setAttribute("uv",new xt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ah extends Wt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const f=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let _=0;const y=[],x=i/2;let g=0;S(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(h),this.setAttribute("position",new xt(d,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(m,2));function S(){const E=new W,I=new W;let R=0;const P=(t-e)/i;for(let b=0;b<=s;b++){const C=[],A=b/s,O=A*(t-e)+e;for(let F=0;F<=r;F++){const V=F/r,Y=V*l+a,J=Math.sin(Y),K=Math.cos(Y);I.x=O*J,I.y=-A*i+x,I.z=O*K,d.push(I.x,I.y,I.z),E.set(J,P,K).normalize(),p.push(E.x,E.y,E.z),m.push(V,1-A),C.push(_++)}y.push(C)}for(let b=0;b<r;b++)for(let C=0;C<s;C++){const A=y[C][b],O=y[C+1][b],F=y[C+1][b+1],V=y[C][b+1];h.push(A,O,V),h.push(O,F,V),R+=6}f.addGroup(g,R,0),g+=R}function w(E){const I=_,R=new be,P=new W;let b=0;const C=E===!0?e:t,A=E===!0?1:-1;for(let F=1;F<=r;F++)d.push(0,x*A,0),p.push(0,A,0),m.push(.5,.5),_++;const O=_;for(let F=0;F<=r;F++){const Y=F/r*l+a,J=Math.cos(Y),K=Math.sin(Y);P.x=C*K,P.y=x*A,P.z=C*J,d.push(P.x,P.y,P.z),p.push(0,A,0),R.x=J*.5+.5,R.y=K*.5*A+.5,m.push(R.x,R.y),_++}for(let F=0;F<r;F++){const V=I+F,Y=O+F;E===!0?h.push(Y,Y+1,V):h.push(Y+1,Y,V),b+=3}f.addGroup(g,b,E===!0?1:2),g+=b}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ah(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sy extends ah{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Sy(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dl extends Wt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),f(i),h(),this.setAttribute("position",new xt(s,3)),this.setAttribute("normal",new xt(s.slice(),3)),this.setAttribute("uv",new xt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const w=new W,E=new W,I=new W;for(let R=0;R<t.length;R+=3)m(t[R+0],w),m(t[R+1],E),m(t[R+2],I),l(w,E,I,S)}function l(S,w,E,I){const R=I+1,P=[];for(let b=0;b<=R;b++){P[b]=[];const C=S.clone().lerp(E,b/R),A=w.clone().lerp(E,b/R),O=R-b;for(let F=0;F<=O;F++)F===0&&b===R?P[b][F]=C:P[b][F]=C.clone().lerp(A,F/O)}for(let b=0;b<R;b++)for(let C=0;C<2*(R-b)-1;C++){const A=Math.floor(C/2);C%2===0?(p(P[b][A+1]),p(P[b+1][A]),p(P[b][A])):(p(P[b][A+1]),p(P[b+1][A+1]),p(P[b+1][A]))}}function f(S){const w=new W;for(let E=0;E<s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(S),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function h(){const S=new W;for(let w=0;w<s.length;w+=3){S.x=s[w+0],S.y=s[w+1],S.z=s[w+2];const E=x(S)/2/Math.PI+.5,I=g(S)/Math.PI+.5;o.push(E,1-I)}_(),d()}function d(){for(let S=0;S<o.length;S+=6){const w=o[S+0],E=o[S+2],I=o[S+4],R=Math.max(w,E,I),P=Math.min(w,E,I);R>.9&&P<.1&&(w<.2&&(o[S+0]+=1),E<.2&&(o[S+2]+=1),I<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,w){const E=S*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function _(){const S=new W,w=new W,E=new W,I=new W,R=new be,P=new be,b=new be;for(let C=0,A=0;C<s.length;C+=9,A+=6){S.set(s[C+0],s[C+1],s[C+2]),w.set(s[C+3],s[C+4],s[C+5]),E.set(s[C+6],s[C+7],s[C+8]),R.set(o[A+0],o[A+1]),P.set(o[A+2],o[A+3]),b.set(o[A+4],o[A+5]),I.copy(S).add(w).add(E).divideScalar(3);const O=x(I);y(R,A+0,S,O),y(P,A+2,w,O),y(b,A+4,E,O)}}function y(S,w,E,I){I<0&&S.x===1&&(o[w]=S.x-1),E.x===0&&E.z===0&&(o[w]=I/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dl(e.vertices,e.indices,e.radius,e.details)}}class wy extends Dl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wy(e.radius,e.detail)}}const d0=new W,p0=new W,K1=new W,m0=new is;class kD extends Wt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Iu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let _=0;_<l;_+=3){o?(f[0]=o.getX(_),f[1]=o.getX(_+1),f[2]=o.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:y,b:x,c:g}=m0;if(y.fromBufferAttribute(a,f[0]),x.fromBufferAttribute(a,f[1]),g.fromBufferAttribute(a,f[2]),m0.getNormal(K1),d[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,d[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const w=(S+1)%3,E=d[S],I=d[w],R=m0[h[S]],P=m0[h[w]],b=`${E}_${I}`,C=`${I}_${E}`;C in p&&p[C]?(K1.dot(p[C].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(P.x,P.y,P.z)),p[C]=null):b in p||(p[b]={index0:f[S],index1:f[w],normal:K1.clone()})}}for(const _ in p)if(p[_]){const{index0:y,index1:x}=p[_];d0.fromBufferAttribute(a,y),p0.fromBufferAttribute(a,x),m.push(d0.x,d0.y,d0.z),m.push(p0.x,p0.y,p0.z)}this.setAttribute("position",new xt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Du extends Np{constructor(e){super(e),this.uuid=us(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Np().fromJSON(r))}return this}}const d8={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=FD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,f,h,d,p,m;if(i&&(s=_8(n,e,s,t)),n.length>80*t){a=f=n[0],l=h=n[1];for(let _=t;_<r;_+=t)d=n[_],p=n[_+1],d<a&&(a=d),p<l&&(l=p),d>f&&(f=d),p>h&&(h=p);m=Math.max(f-a,h-l),m=m!==0?32767/m:0}return Op(s,o,t,a,l,m,0),o}};function FD(n,e,t,i,r){let s,o;if(r===R8(n,e,t,i)>0)for(s=e;s<t;s+=i)o=F2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=F2(s,n[s],n[s+1],o);return o&&My(o,o.next)&&(kp(o),o=o.next),o}function Zu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(My(t,t.next)||Vn(t.prev,t,t.next)===0)){if(kp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Op(n,e,t,i,r,s,o){if(!n)return;!o&&s&&M8(n,i,r,s);let a=n,l,f;for(;n.prev!==n.next;){if(l=n.prev,f=n.next,s?m8(n,i,r,s):p8(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),kp(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=g8(Zu(n),e,t),Op(n,e,t,i,r,s,2)):o===2&&v8(n,e,t,i,r,s):Op(Zu(n),e,t,i,r,s,1);break}}}function p8(n){const e=n.prev,t=n,i=n.next;if(Vn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,f=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<f?a:f:l<f?l:f,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>f?a:f:l>f?l:f;let _=i.next;for(;_!==e;){if(_.x>=h&&_.x<=p&&_.y>=d&&_.y<=m&&mf(r,a,s,l,o,f,_.x,_.y)&&Vn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function m8(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Vn(r,s,o)>=0)return!1;const a=r.x,l=s.x,f=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<f?a:f:l<f?l:f,_=h<d?h<p?h:p:d<p?d:p,y=a>l?a>f?a:f:l>f?l:f,x=h>d?h>p?h:p:d>p?d:p,g=Fw(m,_,e,t,i),S=Fw(y,x,e,t,i);let w=n.prevZ,E=n.nextZ;for(;w&&w.z>=g&&E&&E.z<=S;){if(w.x>=m&&w.x<=y&&w.y>=_&&w.y<=x&&w!==r&&w!==o&&mf(a,h,l,d,f,p,w.x,w.y)&&Vn(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=m&&E.x<=y&&E.y>=_&&E.y<=x&&E!==r&&E!==o&&mf(a,h,l,d,f,p,E.x,E.y)&&Vn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=g;){if(w.x>=m&&w.x<=y&&w.y>=_&&w.y<=x&&w!==r&&w!==o&&mf(a,h,l,d,f,p,w.x,w.y)&&Vn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=S;){if(E.x>=m&&E.x<=y&&E.y>=_&&E.y<=x&&E!==r&&E!==o&&mf(a,h,l,d,f,p,E.x,E.y)&&Vn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function g8(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!My(r,s)&&zD(r,i,i.next,s)&&Up(r,s)&&Up(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),kp(i),kp(i.next),i=n=s),i=i.next}while(i!==n);return Zu(i)}function v8(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&A8(o,a)){let l=BD(o,a);o=Zu(o,o.next),l=Zu(l,l.next),Op(o,e,t,i,r,s,0),Op(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function _8(n,e,t,i){const r=[];let s,o,a,l,f;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,f=FD(n,a,l,i,!1),f===f.next&&(f.steiner=!0),r.push(T8(f));for(r.sort(y8),s=0;s<r.length;s++)t=x8(r[s],t);return t}function y8(n,e){return n.x-e.x}function x8(n,e){const t=S8(n,e);if(!t)return e;const i=BD(t,n);return Zu(i,i.next),Zu(t,t.next)}function S8(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,f=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&mf(o<f?s:i,o,l,f,o<f?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Up(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&w8(r,t)))&&(r=t,h=d)),t=t.next;while(t!==a);return r}function w8(n,e){return Vn(n.prev,n,e.prev)<0&&Vn(e.next,n,n.next)<0}function M8(n,e,t,i){let r=n;do r.z===0&&(r.z=Fw(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,E8(r)}function E8(n){let e,t,i,r,s,o,a,l,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<f&&(a++,i=i.nextZ,!!i);e++);for(l=f;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function Fw(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function T8(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function mf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function A8(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!C8(n,e)&&(Up(n,e)&&Up(e,n)&&b8(n,e)&&(Vn(n.prev,n,e.prev)||Vn(n,e.prev,e))||My(n,e)&&Vn(n.prev,n,n.next)>0&&Vn(e.prev,e,e.next)>0)}function Vn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function My(n,e){return n.x===e.x&&n.y===e.y}function zD(n,e,t,i){const r=v0(Vn(n,e,t)),s=v0(Vn(n,e,i)),o=v0(Vn(t,i,n)),a=v0(Vn(t,i,e));return!!(r!==s&&o!==a||r===0&&g0(n,t,e)||s===0&&g0(n,i,e)||o===0&&g0(t,n,i)||a===0&&g0(t,e,i))}function g0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function v0(n){return n>0?1:n<0?-1:0}function C8(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&zD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Up(n,e){return Vn(n.prev,n,n.next)<0?Vn(n,e,n.next)>=0&&Vn(n,n.prev,e)>=0:Vn(n,e,n.prev)<0||Vn(n,n.next,e)<0}function b8(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function BD(n,e){const t=new zw(n.i,n.x,n.y),i=new zw(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function F2(n,e,t,i){const r=new zw(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function kp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function zw(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R8(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Oo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Oo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];z2(e),B2(i,e);let o=e.length;t.forEach(z2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,B2(i,t[l]);const a=d8.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function z2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function B2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ey extends Wt{constructor(e=new Du([new be(.5,.5),new be(-.5,.5),new be(-.5,-.5),new be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const f=e[a];o(f)}this.setAttribute("position",new xt(r,3)),this.setAttribute("uv",new xt(s,2)),this.computeVertexNormals();function o(a){const l=[],f=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:m-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:P8;let w,E=!1,I,R,P,b;g&&(w=g.getSpacedPoints(h),E=!0,p=!1,I=g.computeFrenetFrames(h,!1),R=new W,P=new W,b=new W),p||(x=0,m=0,_=0,y=0);const C=a.extractPoints(f);let A=C.shape;const O=C.holes;if(!Oo.isClockWise(A)){A=A.reverse();for(let G=0,ve=O.length;G<ve;G++){const Re=O[G];Oo.isClockWise(Re)&&(O[G]=Re.reverse())}}const V=Oo.triangulateShape(A,O),Y=A;for(let G=0,ve=O.length;G<ve;G++){const Re=O[G];A=A.concat(Re)}function J(G,ve,Re){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),G.clone().addScaledVector(ve,Re)}const K=A.length,ne=V.length;function B(G,ve,Re){let He,Me,se;const Ge=G.x-ve.x,Ke=G.y-ve.y,j=Re.x-G.x,U=Re.y-G.y,he=Ge*Ge+Ke*Ke,Ie=Ge*U-Ke*j;if(Math.abs(Ie)>Number.EPSILON){const Le=Math.sqrt(he),Ae=Math.sqrt(j*j+U*U),at=ve.x-Ke/Le,Ue=ve.y+Ge/Le,qe=Re.x-U/Ae,gt=Re.y+j/Ae,ke=((qe-at)*U-(gt-Ue)*j)/(Ge*U-Ke*j);He=at+Ge*ke-G.x,Me=Ue+Ke*ke-G.y;const $e=He*He+Me*Me;if($e<=2)return new be(He,Me);se=Math.sqrt($e/2)}else{let Le=!1;Ge>Number.EPSILON?j>Number.EPSILON&&(Le=!0):Ge<-Number.EPSILON?j<-Number.EPSILON&&(Le=!0):Math.sign(Ke)===Math.sign(U)&&(Le=!0),Le?(He=-Ke,Me=Ge,se=Math.sqrt(he)):(He=Ge,Me=Ke,se=Math.sqrt(he/2))}return new be(He/se,Me/se)}const te=[];for(let G=0,ve=Y.length,Re=ve-1,He=G+1;G<ve;G++,Re++,He++)Re===ve&&(Re=0),He===ve&&(He=0),te[G]=B(Y[G],Y[Re],Y[He]);const k=[];let ce,Se=te.concat();for(let G=0,ve=O.length;G<ve;G++){const Re=O[G];ce=[];for(let He=0,Me=Re.length,se=Me-1,Ge=He+1;He<Me;He++,se++,Ge++)se===Me&&(se=0),Ge===Me&&(Ge=0),ce[He]=B(Re[He],Re[se],Re[Ge]);k.push(ce),Se=Se.concat(ce)}for(let G=0;G<x;G++){const ve=G/x,Re=m*Math.cos(ve*Math.PI/2),He=_*Math.sin(ve*Math.PI/2)+y;for(let Me=0,se=Y.length;Me<se;Me++){const Ge=J(Y[Me],te[Me],He);Pe(Ge.x,Ge.y,-Re)}for(let Me=0,se=O.length;Me<se;Me++){const Ge=O[Me];ce=k[Me];for(let Ke=0,j=Ge.length;Ke<j;Ke++){const U=J(Ge[Ke],ce[Ke],He);Pe(U.x,U.y,-Re)}}}const Fe=_+y;for(let G=0;G<K;G++){const ve=p?J(A[G],Se[G],Fe):A[G];E?(P.copy(I.normals[0]).multiplyScalar(ve.x),R.copy(I.binormals[0]).multiplyScalar(ve.y),b.copy(w[0]).add(P).add(R),Pe(b.x,b.y,b.z)):Pe(ve.x,ve.y,0)}for(let G=1;G<=h;G++)for(let ve=0;ve<K;ve++){const Re=p?J(A[ve],Se[ve],Fe):A[ve];E?(P.copy(I.normals[G]).multiplyScalar(Re.x),R.copy(I.binormals[G]).multiplyScalar(Re.y),b.copy(w[G]).add(P).add(R),Pe(b.x,b.y,b.z)):Pe(Re.x,Re.y,d/h*G)}for(let G=x-1;G>=0;G--){const ve=G/x,Re=m*Math.cos(ve*Math.PI/2),He=_*Math.sin(ve*Math.PI/2)+y;for(let Me=0,se=Y.length;Me<se;Me++){const Ge=J(Y[Me],te[Me],He);Pe(Ge.x,Ge.y,d+Re)}for(let Me=0,se=O.length;Me<se;Me++){const Ge=O[Me];ce=k[Me];for(let Ke=0,j=Ge.length;Ke<j;Ke++){const U=J(Ge[Ke],ce[Ke],He);E?Pe(U.x,U.y+w[h-1].y,w[h-1].x+Re):Pe(U.x,U.y,d+Re)}}}ue(),Ee();function ue(){const G=r.length/3;if(p){let ve=0,Re=K*ve;for(let He=0;He<ne;He++){const Me=V[He];Qe(Me[2]+Re,Me[1]+Re,Me[0]+Re)}ve=h+x*2,Re=K*ve;for(let He=0;He<ne;He++){const Me=V[He];Qe(Me[0]+Re,Me[1]+Re,Me[2]+Re)}}else{for(let ve=0;ve<ne;ve++){const Re=V[ve];Qe(Re[2],Re[1],Re[0])}for(let ve=0;ve<ne;ve++){const Re=V[ve];Qe(Re[0]+K*h,Re[1]+K*h,Re[2]+K*h)}}i.addGroup(G,r.length/3-G,0)}function Ee(){const G=r.length/3;let ve=0;Te(Y,ve),ve+=Y.length;for(let Re=0,He=O.length;Re<He;Re++){const Me=O[Re];Te(Me,ve),ve+=Me.length}i.addGroup(G,r.length/3-G,1)}function Te(G,ve){let Re=G.length;for(;--Re>=0;){const He=Re;let Me=Re-1;Me<0&&(Me=G.length-1);for(let se=0,Ge=h+x*2;se<Ge;se++){const Ke=K*se,j=K*(se+1),U=ve+He+Ke,he=ve+Me+Ke,Ie=ve+Me+j,Le=ve+He+j;ht(U,he,Ie,Le)}}}function Pe(G,ve,Re){l.push(G),l.push(ve),l.push(Re)}function Qe(G,ve,Re){mt(G),mt(ve),mt(Re);const He=r.length/3,Me=S.generateTopUV(i,r,He-3,He-2,He-1);ut(Me[0]),ut(Me[1]),ut(Me[2])}function ht(G,ve,Re,He){mt(G),mt(ve),mt(He),mt(ve),mt(Re),mt(He);const Me=r.length/3,se=S.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);ut(se[0]),ut(se[1]),ut(se[3]),ut(se[1]),ut(se[2]),ut(se[3])}function mt(G){r.push(l[G*3+0]),r.push(l[G*3+1]),r.push(l[G*3+2])}function ut(G){s.push(G.x),s.push(G.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return I8(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new x_[r.type]().fromJSON(r)),new Ey(i,e.options)}}const P8={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],f=e[r*3],h=e[r*3+1];return[new be(s,o),new be(a,l),new be(f,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],f=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],_=e[r*3+2],y=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-f)?[new be(o,1-l),new be(f,1-d),new be(p,1-_),new be(y,1-g)]:[new be(a,1-l),new be(h,1-d),new be(m,1-_),new be(x,1-g)]}};function I8(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class mm extends Dl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mm(e.radius,e.detail)}}class gm extends Dl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gm(e.radius,e.detail)}}class Ty extends Wt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],f=[],h=[];let d=e;const p=(t-e)/r,m=new W,_=new be;for(let y=0;y<=r;y++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),f.push(0,0,1),_.x=(m.x/t+1)/2,_.y=(m.y/t+1)/2,h.push(_.x,_.y)}d+=p}for(let y=0;y<r;y++){const x=y*(i+1);for(let g=0;g<i;g++){const S=g+x,w=S,E=S+i+1,I=S+i+2,R=S+1;a.push(w,E,R),a.push(E,I,R)}}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(f,3)),this.setAttribute("uv",new xt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ty(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ay extends Wt{constructor(e=new Du([new be(0,.5),new be(-.5,-.5),new be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let h=0;h<e.length;h++)f(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new xt(r,3)),this.setAttribute("normal",new xt(s,3)),this.setAttribute("uv",new xt(o,2));function f(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const _=p.holes;Oo.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=_.length;x<g;x++){const S=_[x];Oo.isClockWise(S)===!0&&(_[x]=S.reverse())}const y=Oo.triangulateShape(m,_);for(let x=0,g=_.length;x<g;x++){const S=_[x];m=m.concat(S)}for(let x=0,g=m.length;x<g;x++){const S=m[x];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,g=y.length;x<g;x++){const S=y[x],w=S[0]+d,E=S[1]+d,I=S[2]+d;i.push(w,E,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return L8(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ay(i,e.curveSegments)}}function L8(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class vm extends Wt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let f=0;const h=[],d=new W,p=new W,m=[],_=[],y=[],x=[];for(let g=0;g<=i;g++){const S=[],w=g/i;let E=0;g===0&&o===0?E=.5/t:g===i&&l===Math.PI&&(E=-.5/t);for(let I=0;I<=t;I++){const R=I/t;d.x=-e*Math.cos(r+R*s)*Math.sin(o+w*a),d.y=e*Math.cos(o+w*a),d.z=e*Math.sin(r+R*s)*Math.sin(o+w*a),_.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),x.push(R+E,1-w),S.push(f++)}h.push(S)}for(let g=0;g<i;g++)for(let S=0;S<t;S++){const w=h[g][S+1],E=h[g][S],I=h[g+1][S],R=h[g+1][S+1];(g!==0||o>0)&&m.push(w,E,R),(g!==i-1||l<Math.PI)&&m.push(E,I,R)}this.setIndex(m),this.setAttribute("position",new xt(_,3)),this.setAttribute("normal",new xt(y,3)),this.setAttribute("uv",new xt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Cy extends Dl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cy(e.radius,e.detail)}}class by extends Wt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],f=[],h=new W,d=new W,p=new W;for(let m=0;m<=i;m++)for(let _=0;_<=r;_++){const y=_/r*s,x=m/i*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(y),d.y=(e+t*Math.cos(x))*Math.sin(y),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),h.x=e*Math.cos(y),h.y=e*Math.sin(y),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),f.push(_/r),f.push(m/i)}for(let m=1;m<=i;m++)for(let _=1;_<=r;_++){const y=(r+1)*m+_-1,x=(r+1)*(m-1)+_-1,g=(r+1)*(m-1)+_,S=(r+1)*m+_;o.push(y,x,S),o.push(x,g,S)}this.setIndex(o),this.setAttribute("position",new xt(a,3)),this.setAttribute("normal",new xt(l,3)),this.setAttribute("uv",new xt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new by(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ry extends Wt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],f=[],h=[],d=new W,p=new W,m=new W,_=new W,y=new W,x=new W,g=new W;for(let w=0;w<=i;++w){const E=w/i*s*Math.PI*2;S(E,s,o,e,m),S(E+.01,s,o,e,_),x.subVectors(_,m),g.addVectors(_,m),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let I=0;I<=r;++I){const R=I/r*Math.PI*2,P=-t*Math.cos(R),b=t*Math.sin(R);d.x=m.x+(P*g.x+b*y.x),d.y=m.y+(P*g.y+b*y.y),d.z=m.z+(P*g.z+b*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),f.push(p.x,p.y,p.z),h.push(w/i),h.push(I/r)}}for(let w=1;w<=i;w++)for(let E=1;E<=r;E++){const I=(r+1)*(w-1)+(E-1),R=(r+1)*w+(E-1),P=(r+1)*w+E,b=(r+1)*(w-1)+E;a.push(I,R,b),a.push(R,P,b)}this.setIndex(a),this.setAttribute("position",new xt(l,3)),this.setAttribute("normal",new xt(f,3)),this.setAttribute("uv",new xt(h,2));function S(w,E,I,R,P){const b=Math.cos(w),C=Math.sin(w),A=I/E*w,O=Math.cos(A);P.x=R*(2+O)*.5*b,P.y=R*(2+O)*C*.5,P.z=R*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Py extends Wt{constructor(e=new YE(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new W,l=new W,f=new be;let h=new W;const d=[],p=[],m=[],_=[];y(),this.setIndex(_),this.setAttribute("position",new xt(d,3)),this.setAttribute("normal",new xt(p,3)),this.setAttribute("uv",new xt(m,2));function y(){for(let w=0;w<t;w++)x(w);x(s===!1?t:0),S(),g()}function x(w){h=e.getPointAt(w/t,h);const E=o.normals[w],I=o.binormals[w];for(let R=0;R<=r;R++){const P=R/r*Math.PI*2,b=Math.sin(P),C=-Math.cos(P);l.x=C*E.x+b*I.x,l.y=C*E.y+b*I.y,l.z=C*E.z+b*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let w=1;w<=t;w++)for(let E=1;E<=r;E++){const I=(r+1)*(w-1)+(E-1),R=(r+1)*w+(E-1),P=(r+1)*w+E,b=(r+1)*(w-1)+E;_.push(I,R,b),_.push(R,P,b)}}function S(){for(let w=0;w<=t;w++)for(let E=0;E<=r;E++)f.x=w/t,f.y=E/r,m.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Py(new x_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class HD extends Wt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new W,s=new W;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,h=l.length;f<h;++f){const d=l[f],p=d.start,m=d.count;for(let _=p,y=p+m;_<y;_+=3)for(let x=0;x<3;x++){const g=a.getX(_+x),S=a.getX(_+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),H2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let f=0;f<3;f++){const h=3*a+f,d=3*a+(f+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),H2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new xt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function H2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var V2=Object.freeze({__proto__:null,BoxGeometry:Il,CapsuleGeometry:yy,CircleGeometry:xy,ConeGeometry:Sy,CylinderGeometry:ah,DodecahedronGeometry:wy,EdgesGeometry:kD,ExtrudeGeometry:Ey,IcosahedronGeometry:mm,LatheGeometry:pm,OctahedronGeometry:gm,PlaneGeometry:Ll,PolyhedronGeometry:Dl,RingGeometry:Ty,ShapeGeometry:Ay,SphereGeometry:vm,TetrahedronGeometry:Cy,TorusGeometry:by,TorusKnotGeometry:Ry,TubeGeometry:Py,WireframeGeometry:HD});class VD extends Bi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new nt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class GD extends Wr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ha extends Bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Gr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WD extends ha{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new nt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new nt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new nt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class XD extends Bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new nt(16777215),this.specular=new nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Gr,this.combine=sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class YD extends Bi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qD extends Bi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jD extends Bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Gr,this.combine=sm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZD extends Bi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Pl,this.normalScale=new be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KD extends Mr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Mu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function $D(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function JD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Bw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function jE(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function D8(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],h=f.getValueSize(),d=[],p=[];for(let m=0;m<f.times.length;++m){const _=f.times[m]*r;if(!(_<t||_>=i)){d.push(f.times[m]);for(let y=0;y<h;++y)p.push(f.values[m*h+y])}}d.length!==0&&(f.times=Mu(d,f.times.constructor),f.values=Mu(p,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function N8(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const f=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(f===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const _=a.times.length-1;let y;if(s<=a.times[0]){const g=h,S=d-h;y=a.values.slice(g,S)}else if(s>=a.times[_]){const g=_*d+h,S=g+d-h;y=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=h,w=d-h;g.evaluate(s),y=g.resultBuffer.slice(S,w)}l==="quaternion"&&new oi().fromArray(y).normalize().conjugate().toArray(y);const x=f.times.length;for(let g=0;g<x;++g){const S=g*m+p;if(l==="quaternion")oi.multiplyQuaternionsFlat(f.values,S,y,0,f.values,S);else{const w=m-p*2;for(let E=0;E<w;++E)f.values[S+E]-=y[E]}}}return n.blendMode=AE,n}const O8={convertArray:Mu,isTypedArray:$D,getKeyframeOrder:JD,sortedArray:Bw,flattenJSON:jE,subclip:D8,makeClipAdditive:N8};class _m{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class QD extends _m{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yu,endingEnd:yu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case xu:s=e,a=2*t-i;break;case Cp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case xu:o=e,l=2*i-t;break;case Cp:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const f=(i-t)*.5,h=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,_=(i-t)/(r-t),y=_*_,x=y*_,g=-p*x+2*p*y-p*_,S=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*_+1,w=(-1-m)*x+(1.5+m)*y+.5*_,E=m*x-m*y;for(let I=0;I!==a;++I)s[I]=g*o[h+I]+S*o[f+I]+w*o[l+I]+E*o[d+I];return s}}class ZE extends _m{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,f=l-a,h=(i-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[f+p]*d+o[l+p]*h;return s}}class eN extends _m{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class co{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mu(t,this.TimeBufferType),this.values=Mu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Mu(e.times,Array),values:Mu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new eN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ZE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new QD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ap:t=this.InterpolantFactoryMethodDiscrete;break;case v_:t=this.InterpolantFactoryMethodLinear;break;case sv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ap;case this.InterpolantFactoryMethodLinear:return v_;case this.InterpolantFactoryMethodSmooth:return sv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&$D(r))for(let a=0,l=r.length;a!==l;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===sv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const f=e[a],h=e[a+1];if(f!==h&&(a!==1||f!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let _=0;_!==i;++_){const y=t[d+_];if(y!==t[p+_]||y!==t[m+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,f=0;f!==i;++f)t[l+f]=t[a+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}co.prototype.TimeBufferType=Float32Array;co.prototype.ValueBufferType=Float32Array;co.prototype.DefaultInterpolation=v_;class ic extends co{constructor(e,t,i){super(e,t,i)}}ic.prototype.ValueTypeName="bool";ic.prototype.ValueBufferType=Array;ic.prototype.DefaultInterpolation=Ap;ic.prototype.InterpolantFactoryMethodLinear=void 0;ic.prototype.InterpolantFactoryMethodSmooth=void 0;class KE extends co{}KE.prototype.ValueTypeName="color";class Fp extends co{}Fp.prototype.ValueTypeName="number";class tN extends _m{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let f=e*a;for(let h=f+a;f!==h;f+=4)oi.slerpFlat(s,0,o,f-a,o,f,l);return s}}class ym extends co{InterpolantFactoryMethodLinear(e){return new tN(this.times,this.values,this.getValueSize(),e)}}ym.prototype.ValueTypeName="quaternion";ym.prototype.InterpolantFactoryMethodSmooth=void 0;class rc extends co{constructor(e,t,i){super(e,t,i)}}rc.prototype.ValueTypeName="string";rc.prototype.ValueBufferType=Array;rc.prototype.DefaultInterpolation=Ap;rc.prototype.InterpolantFactoryMethodLinear=void 0;rc.prototype.InterpolantFactoryMethodSmooth=void 0;class zp extends co{}zp.prototype.ValueTypeName="vector";class Bp{constructor(e="",t=-1,i=[],r=ly){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=us(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(k8(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(co.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],f=[];l.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const h=JD(l);l=Bw(l,1,h),f=Bw(f,1,h),!r&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new Fp(".morphTargetInfluences["+t[a].name+"]",l,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const f=e[a],h=f.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,_,y){if(m.length!==0){const x=[],g=[];jE(m,x,g,_),x.length!==0&&y.push(new d(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let d=0;d<f.length;d++){const p=f[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let _;for(_=0;_<p.length;_++)if(p[_].morphTargets)for(let y=0;y<p[_].morphTargets.length;y++)m[p[_].morphTargets[y]]=-1;for(const y in m){const x=[],g=[];for(let S=0;S!==p[_].morphTargets.length;++S){const w=p[_];x.push(w.time),g.push(w.morphTarget===y?1:0)}r.push(new Fp(".morphTargetInfluence["+y+"]",x,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(zp,m+".position",p,"pos",r),i(ym,m+".quaternion",p,"rot",r),i(zp,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function U8(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fp;case"vector":case"vector2":case"vector3":case"vector4":return zp;case"color":return KE;case"quaternion":return ym;case"bool":case"boolean":return ic;case"string":return rc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function k8(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=U8(n.type);if(n.times===void 0){const t=[],i=[];jE(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const da={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Iy{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return f.push(h,d),this},this.removeHandler=function(h){const d=f.indexOf(h);return d!==-1&&f.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=f.length;d<p;d+=2){const m=f[d],_=f[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return _}return null}}}const gf=new Iy;let Er=class{constructor(e){this.manager=e!==void 0?e:gf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Er.DEFAULT_MATERIAL_NAME="__DEFAULT";const ea={};class F8 extends Error{constructor(e,t){super(e),this.response=t}}class cs extends Er{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=da.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ea[e]!==void 0){ea[e].push({onLoad:t,onProgress:i,onError:r});return}ea[e]=[],ea[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const h=ea[e],d=f.body.getReader(),p=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),m=p?parseInt(p):0,_=m!==0;let y=0;const x=new ReadableStream({start(g){S();function S(){d.read().then(({done:w,value:E})=>{if(w)g.close();else{y+=E.byteLength;const I=new ProgressEvent("progress",{lengthComputable:_,loaded:y,total:m});for(let R=0,P=h.length;R<P;R++){const b=h[R];b.onProgress&&b.onProgress(I)}g.enqueue(E),S()}},w=>{g.error(w)})}}});return new Response(x)}else throw new F8(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return f.json();default:if(a===void 0)return f.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return f.arrayBuffer().then(_=>m.decode(_))}}}).then(f=>{da.add(e,f);const h=ea[e];delete ea[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(f)}}).catch(f=>{const h=ea[e];if(h===void 0)throw this.manager.itemError(e),f;delete ea[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class z8 extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Bp.parse(e[i]);t.push(r)}return t}}class B8 extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new vy,l=new cs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},f+=1,f===6&&(m.mipmapCount===1&&(a.minFilter=_n),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let _=0;_<m;_++){o[_]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[_].mipmaps.push(p.mipmaps[_*p.mipmapCount+y]),o[_].format=p.format,o[_].width=p.width,o[_].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=_n),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Hp extends Er{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=da.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Dp("img");function l(){h(),da.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class nN extends Er{constructor(e){super(e)}load(e,t,i,r){const s=new fm;s.colorSpace=Lr;const o=new Hp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(f){o.load(e[f],function(h){s.images[f]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)l(f);return s}}class $E extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ao,a=new cs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let f;try{f=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:pi,o.wrapT=f.wrapT!==void 0?f.wrapT:pi,o.magFilter=f.magFilter!==void 0?f.magFilter:_n,o.minFilter=f.minFilter!==void 0?f.minFilter:_n,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Ao),f.mipmapCount===1&&(o.minFilter=_n),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},i,r),o}}class Ly extends Er{constructor(e){super(e)}load(e,t,i,r){const s=new dn,o=new Hp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Nl extends un{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new nt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class iN extends Nl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.groundColor=new nt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const $1=new Lt,G2=new W,W2=new W;class JE{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new be(512,512),this.map=null,this.mapPass=null,this.matrix=new Lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hm,this._frameExtents=new be(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;G2.setFromMatrixPosition(e.matrixWorld),t.position.copy(G2),W2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(W2),t.updateMatrixWorld(),$1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply($1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class H8 extends JE{constructor(){super(new Jn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Wf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class rN extends Nl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new H8}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const X2=new Lt,jh=new W,J1=new W;class V8 extends JE{constructor(){super(new Jn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new be(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jh.setFromMatrixPosition(e.matrixWorld),i.position.copy(jh),J1.copy(i.position),J1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(J1),i.updateMatrixWorld(),r.makeTranslation(-jh.x,-jh.y,-jh.z),X2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X2)}}class sN extends Nl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new V8}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class G8 extends JE{constructor(){super(new bo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oN extends Nl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(un.DEFAULT_UP),this.updateMatrix(),this.target=new un,this.shadow=new G8}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aN extends Nl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class lN extends Nl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class uN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class cN extends Nl{constructor(e=new uN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Dy extends Er{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new cs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Dy.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new nt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new nt().setHex(o.value);break;case"v2":r.uniforms[s].value=new be().fromArray(o.value);break;case"v3":r.uniforms[s].value=new W().fromArray(o.value);break;case"v4":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Ht().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Lt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new be().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:VD,SpriteMaterial:zE,RawShaderMaterial:GD,ShaderMaterial:Wr,PointsMaterial:HE,MeshPhysicalMaterial:WD,MeshStandardMaterial:ha,MeshPhongMaterial:XD,MeshToonMaterial:YD,MeshNormalMaterial:qD,MeshLambertMaterial:jD,MeshDepthMaterial:UE,MeshDistanceMaterial:kE,MeshBasicMaterial:Aa,MeshMatcapMaterial:ZD,LineDashedMaterial:KD,LineBasicMaterial:Mr,Material:Bi};return new t[e]}}class Hw{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class fN extends Wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hN extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,_){if(t[_]!==void 0)return t[_];const x=m.interleavedBuffers[_],g=s(m,x.buffer),S=hf(x.type,g),w=new my(S,x.stride);return w.uuid=x.uuid,t[_]=w,w}function s(m,_){if(i[_]!==void 0)return i[_];const x=m.arrayBuffers[_],g=new Uint32Array(x).buffer;return i[_]=g,g}const o=e.isInstancedBufferGeometry?new fN:new Wt,a=e.data.index;if(a!==void 0){const m=hf(a.type,a.array);o.setIndex(new Sn(m,1))}const l=e.data.attributes;for(const m in l){const _=l[m];let y;if(_.isInterleavedBufferAttribute){const x=r(e.data,_.data);y=new ju(x,_.itemSize,_.offset,_.normalized)}else{const x=hf(_.type,_.array),g=_.isInstancedBufferAttribute?qf:Sn;y=new g(x,_.itemSize,_.normalized)}_.name!==void 0&&(y.name=_.name),_.usage!==void 0&&y.setUsage(_.usage),o.setAttribute(m,y)}const f=e.data.morphAttributes;if(f)for(const m in f){const _=f[m],y=[];for(let x=0,g=_.length;x<g;x++){const S=_[x];let w;if(S.isInterleavedBufferAttribute){const E=r(e.data,S.data);w=new ju(E,S.itemSize,S.offset,S.normalized)}else{const E=hf(S.type,S.array);w=new Sn(E,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),y.push(w)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,_=d.length;m!==_;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new W;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new tr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class W8 extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Hw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new cs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=f.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Hw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new cs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,h),this.bindLightTargets(f),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Du().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new dm().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new hN;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in V2?a=V2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Dy;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Bp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const f=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(h)}else return l.data?{data:hf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Iy(t);s=new Hp(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,h=e.length;f<h;f++){const d=e[f],p=d.url;if(Array.isArray(p)){const m=[];for(let _=0,y=p.length;_<y;_++){const x=p[_],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new ao(g.data,g.width,g.height)))}r[d.uuid]=new Su(m)}else{const m=a(d.url);r[d.uuid]=new Su(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:hf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Hp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const h=[];for(let d=0,p=f.length;d<p;d++){const m=f[d],_=await s(m);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new ao(_.data,_.width,_.height)))}i[l.uuid]=new Su(h)}else{const h=await s(l.url);i[l.uuid]=new Su(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],f=l.data;let h;Array.isArray(f)?(h=new fm,f.length===6&&(h.needsUpdate=!0)):(f&&f.data?h=new ao:h=new dn,f&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,X8)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],Y2),h.wrapT=i(a.wrap[1],Y2)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,q2)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,q2)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let _=0,y=p.length;_<y;_++){const x=p[_];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function f(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new Yf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new nt(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new py(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new dy(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Jn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new bo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new aN(e.color,e.intensity);break;case"DirectionalLight":o=new oN(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new sN(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new lN(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new rN(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new iN(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cN().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new BE(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Xn(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,_=e.instanceColor;o=new bD(h,d,p),o.instanceMatrix=new qf(new Float32Array(m.array),16),_!==void 0&&(o.instanceColor=new qf(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new RD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(y=>{const x=new xr;x.min.fromArray(y.boxMin),x.max.fromArray(y.boxMax);const g=new tr;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:x,sphereInitialized:y.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":o=new CD;break;case"Line":o=new Ml(a(e.geometry),l(e.material));break;case"LineLoop":o=new PD(a(e.geometry),l(e.material));break;case"LineSegments":o=new Vo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new ID(a(e.geometry),l(e.material));break;case"Sprite":o=new AD(l(e.material));break;case"Group":o=new pf;break;case"Bone":o=new gy;break;default:o=new un}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const _=p[m];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const _=p[m],y=o.getObjectByProperty("uuid",_.object);y!==void 0&&o.addLevel(y,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new un}})}}const X8={UVMapping:Sl,CubeReflectionMapping:Fo,CubeRefractionMapping:wl,EquirectangularReflectionMapping:Vf,EquirectangularRefractionMapping:Mp,CubeUVReflectionMapping:sh},Y2={RepeatWrapping:Ep,ClampToEdgeWrapping:pi,MirroredRepeatWrapping:Tp},q2={NearestFilter:Pi,NearestMipmapNearestFilter:_E,NearestMipmapLinearFilter:ff,LinearFilter:_n,LinearMipmapNearestFilter:Dd,LinearMipmapLinearFilter:Ao};class Y8 extends Er{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=da.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return da.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){r&&r(f),da.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});da.add(e,l),s.manager.itemStart(e)}}let _0;class QE{static getContext(){return _0===void 0&&(_0=new(window.AudioContext||window.webkitAudioContext)),_0}static setContext(e){_0=e}}class q8 extends Er{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new cs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const f=l.slice(0);QE.getContext().decodeAudioData(f,function(d){t(d)}).catch(a)}catch(f){a(f)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const j2=new Lt,Z2=new Lt,Jl=new Lt;class j8{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Jn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Jn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Jl.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Iu*t.fov*.5)/t.zoom;let a,l;Z2.elements[12]=-r,j2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Jl.elements[0]=2*t.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Jl),a=-o*t.aspect-s,l=o*t.aspect-s,Jl.elements[0]=2*t.near/(l-a),Jl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Jl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Z2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(j2)}}class eT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=K2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=K2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function K2(){return(typeof performance>"u"?Date:performance).now()}const Ql=new W,$2=new oi,Z8=new W,eu=new W;class K8 extends un{constructor(){super(),this.type="AudioListener",this.context=QE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new eT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ql,$2,Z8),eu.set(0,0,-1).applyQuaternion($2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ql.x,r),t.positionY.linearRampToValueAtTime(Ql.y,r),t.positionZ.linearRampToValueAtTime(Ql.z,r),t.forwardX.linearRampToValueAtTime(eu.x,r),t.forwardY.linearRampToValueAtTime(eu.y,r),t.forwardZ.linearRampToValueAtTime(eu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Ql.x,Ql.y,Ql.z),t.setOrientation(eu.x,eu.y,eu.z,i.x,i.y,i.z)}}let dN=class extends un{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const tu=new W,J2=new oi,$8=new W,nu=new W;class J8 extends dN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(tu,J2,$8),nu.set(0,0,1).applyQuaternion(J2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(tu.x,i),t.positionY.linearRampToValueAtTime(tu.y,i),t.positionZ.linearRampToValueAtTime(tu.z,i),t.orientationX.linearRampToValueAtTime(nu.x,i),t.orientationY.linearRampToValueAtTime(nu.y,i),t.orientationZ.linearRampToValueAtTime(nu.z,i)}else t.setPosition(tu.x,tu.y,tu.z),t.setOrientation(nu.x,nu.y,nu.z)}}class Q8{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class pN{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,f=t+t;l!==f;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){oi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;oi.multiplyQuaternionsFlat(e,o,e,t,e,i),oi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const tT="\\[\\]\\.:\\/",eG=new RegExp("["+tT+"]","g"),nT="[^"+tT+"]",tG="[^"+tT.replace("\\.","")+"]",nG=/((?:WC+[\/:])*)/.source.replace("WC",nT),iG=/(WCOD+)?/.source.replace("WCOD",tG),rG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nT),sG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nT),oG=new RegExp("^"+nG+iG+rG+sG+"$"),aG=["material","materials","bones","map"];class lG{constructor(e,t,i){const r=i||an.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class an{constructor(e,t,i){this.path=t,this.parsedPath=i||an.parseTrackName(t),this.node=an.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new an.Composite(e,t,i):new an(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eG,"")}static parseTrackName(e){const t=oG.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);aG.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=an.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}an.Composite=lG;an.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};an.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};an.prototype.GetterByBindingType=[an.prototype._getValue_direct,an.prototype._getValue_array,an.prototype._getValue_arrayElement,an.prototype._getValue_toArray];an.prototype.SetterByBindingTypeAndVersioning=[[an.prototype._setValue_direct,an.prototype._setValue_direct_setNeedsUpdate,an.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[an.prototype._setValue_array,an.prototype._setValue_array_setNeedsUpdate,an.prototype._setValue_array_setMatrixWorldNeedsUpdate],[an.prototype._setValue_arrayElement,an.prototype._setValue_arrayElement_setNeedsUpdate,an.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[an.prototype._setValue_fromArray,an.prototype._setValue_fromArray_setNeedsUpdate,an.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=us(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,f=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let _=t[m];if(_===void 0){_=l++,t[m]=_,e.push(p);for(let y=0,x=o;y!==x;++y)s[y].push(new an(p,i[y],r[y]))}else if(_<f){a=e[_];const y=--f,x=e[y];t[x.uuid]=_,e[_]=x,t[m]=y,e[y]=p;for(let g=0,S=o;g!==S;++g){const w=s[g],E=w[y];let I=w[_];w[_]=E,I===void 0&&(I=new an(p,i[g],r[g])),w[y]=I}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],f=l.uuid,h=t[f];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[f]=d,e[d]=l;for(let m=0,_=r;m!==_;++m){const y=i[m],x=y[d],g=y[h];y[h]=x,y[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const f=arguments[a],h=f.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],_=--o,y=e[_];t[m.uuid]=d,e[d]=m,t[y.uuid]=p,e[p]=y,e.pop();for(let x=0,g=r;x!==g;++x){const S=i[x],w=S[p],E=S[_];S[d]=w,S[p]=E,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let _=0,y=r;_!==y;++_){const x=i[_];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,f=l.length,h=this.nCachedObjects_,d=new Array(f);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const _=l[p];d[p]=new an(_,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],f=e[a];t[f]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class mN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:yu,endingEnd:yu};for(let f=0;f!==o;++f){const h=s[f].createInterpolant(null);a[f]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,f=a.sampleValues;return l[0]=s,l[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case AE:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulateAdditive(a);break;case ly:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),f[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===QL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===$L){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=xu,r.endingEnd=xu):(e?r.endingStart=this.zeroSlopeAtStart?xu:yu:r.endingStart=Cp,t?r.endingEnd=this.zeroSlopeAtEnd?xu:yu:r.endingEnd=Cp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const cG=new Float32Array(1);class fG extends Ho{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,f=this._bindingsByRootAndName;let h=f[l];h===void 0&&(h={},f[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let _=h[m];if(_!==void 0)++_.referenceCount,o[d]=_;else{if(_=o[d],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,m));continue}const y=t&&t._propertyBindings[d].binding.parsedPath;_=new pN(an.create(i,m,y),p.ValueTypeName,p.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,m),o[d]=_}a[d].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,f=l[l.length-1],h=e._byClipCacheIndex;f._byClipCacheIndex=h,l[h]=f,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],f=e._cacheIndex;l._cacheIndex=f,t[f]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new ZE(new Float32Array(2),new Float32Array(2),1,cG),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Bp.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=ly),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const h=new mN(this,o,t,i);return this._bindAction(h,f),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Bp.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const f=o[a];this._deactivateAction(f);const h=f._cacheIndex,d=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class iT{constructor(e){this.value=e}clone(){return new iT(this.value.clone===void 0?this.value:this.value.clone())}}let hG=0;class dG extends Ho{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hG++}),this.name="",this.usage=Ip,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class pG extends my{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class mG{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Q2=new Lt;class rT{constructor(e,t,i=0,r=1/0){this.ray=new nc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Lu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Q2.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Q2),this}intersectObject(e,t=!0,i=[]){return Vw(e,this,i,t),i.sort(eR),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Vw(e[r],this,i,t);return i.sort(eR),i}}function eR(n,e){return n.distance-e.distance}function Vw(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)Vw(s[o],e,t,!0)}}class S_{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($n(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class gG{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const tR=new be;class vG{constructor(e=new be(1/0,1/0),t=new be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const nR=new W,y0=new W;class _G{constructor(e=new W,t=new W){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){nR.subVectors(e,this.start),y0.subVectors(this.end,this.start);const i=y0.dot(y0);let s=y0.dot(nR)/i;return t&&(s=$n(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const iR=new W;class yG extends un{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Wt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const f=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new xt(r,3));const s=new Mr({fog:!1,toneMapped:!1});this.cone=new Vo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ga=new W,x0=new Lt,Q1=new Lt;class xG extends Vo{constructor(e){const t=gN(e),i=new Wt,r=[],s=[],o=new nt(0,0,1),a=new nt(0,1,0);for(let f=0;f<t.length;f++){const h=t[f];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new xt(r,3)),i.setAttribute("color",new xt(s,3));const l=new Mr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Q1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(x0.multiplyMatrices(Q1,a.matrixWorld),Ga.setFromMatrixPosition(x0),r.setXYZ(o,Ga.x,Ga.y,Ga.z),x0.multiplyMatrices(Q1,a.parent.matrixWorld),Ga.setFromMatrixPosition(x0),r.setXYZ(o+1,Ga.x,Ga.y,Ga.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function gN(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,gN(n.children[t]));return e}class SG extends Xn{constructor(e,t,i){const r=new vm(t,4,2),s=new Aa({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wG=new W,rR=new nt,sR=new nt;class MG extends un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new gm(t);r.rotateY(Math.PI*.5),this.material=new Aa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Sn(o,3)),this.add(new Xn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");rR.copy(this.light.color),sR.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?rR:sR;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class EG extends Vo{constructor(e=10,t=10,i=4473924,r=8947848){i=new nt(i),r=new nt(r);const s=t/2,o=e/t,a=e/2,l=[],f=[];for(let p=0,m=0,_=-a;p<=t;p++,_+=o){l.push(-a,0,_,a,0,_),l.push(_,0,-a,_,0,a);const y=p===s?i:r;y.toArray(f,m),m+=3,y.toArray(f,m),m+=3,y.toArray(f,m),m+=3,y.toArray(f,m),m+=3}const h=new Wt;h.setAttribute("position",new xt(l,3)),h.setAttribute("color",new xt(f,3));const d=new Mr({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class TG extends Vo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new nt(s),o=new nt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,_=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,_);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let _=0;_<r;_++){let y=_/r*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),y=(_+1)/r*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const f=new Wt;f.setAttribute("position",new xt(a,3)),f.setAttribute("color",new xt(l,3));const h=new Mr({vertexColors:!0,toneMapped:!1});super(f,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const oR=new W,S0=new W,aR=new W;class AG extends un{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Wt;r.setAttribute("position",new xt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Mr({fog:!1,toneMapped:!1});this.lightPlane=new Ml(r,s),this.add(this.lightPlane),r=new Wt,r.setAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new Ml(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),oR.setFromMatrixPosition(this.light.matrixWorld),S0.setFromMatrixPosition(this.light.target.matrixWorld),aR.subVectors(S0,oR),this.lightPlane.lookAt(S0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(S0),this.targetLine.scale.z=aR.length()}}const w0=new W,Zn=new cm;class CG extends Vo{constructor(e){const t=new Wt,i=new Mr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,y){l(_),l(y)}function l(_){r.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(r.length/3-1)}t.setAttribute("position",new xt(r,3)),t.setAttribute("color",new xt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new nt(16755200),h=new nt(16711680),d=new nt(43775),p=new nt(16777215),m=new nt(3355443);this.setColors(f,h,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ti("c",t,e,Zn,0,0,-1),ti("t",t,e,Zn,0,0,1),ti("n1",t,e,Zn,-i,-r,-1),ti("n2",t,e,Zn,i,-r,-1),ti("n3",t,e,Zn,-i,r,-1),ti("n4",t,e,Zn,i,r,-1),ti("f1",t,e,Zn,-i,-r,1),ti("f2",t,e,Zn,i,-r,1),ti("f3",t,e,Zn,-i,r,1),ti("f4",t,e,Zn,i,r,1),ti("u1",t,e,Zn,i*.7,r*1.1,-1),ti("u2",t,e,Zn,-i*.7,r*1.1,-1),ti("u3",t,e,Zn,0,r*2,-1),ti("cf1",t,e,Zn,-i,0,1),ti("cf2",t,e,Zn,i,0,1),ti("cf3",t,e,Zn,0,-r,1),ti("cf4",t,e,Zn,0,r,1),ti("cn1",t,e,Zn,-i,0,-1),ti("cn2",t,e,Zn,i,0,-1),ti("cn3",t,e,Zn,0,-r,-1),ti("cn4",t,e,Zn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ti(n,e,t,i,r,s,o){w0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let f=0,h=a.length;f<h;f++)l.setXYZ(a[f],w0.x,w0.y,w0.z)}}const M0=new xr;class bG extends Vo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Wt;s.setIndex(new Sn(i,1)),s.setAttribute("position",new Sn(r,3)),super(s,new Mr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&M0.setFromObject(this.object),M0.isEmpty())return;const t=M0.min,i=M0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class RG extends Vo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Wt;s.setIndex(new Sn(i,1)),s.setAttribute("position",new xt(r,3)),super(s,new Mr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PG extends Ml{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Wt;o.setAttribute("position",new xt(s,3)),o.computeBoundingSphere(),super(o,new Mr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Wt;l.setAttribute("position",new xt(a,3)),l.computeBoundingSphere(),this.add(new Xn(l,new Aa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lR=new W;let E0,eS;class IG extends un{constructor(e=new W(0,0,1),t=new W(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",E0===void 0&&(E0=new Wt,E0.setAttribute("position",new xt([0,0,0,0,1,0],3)),eS=new ah(0,.5,1,5,1),eS.translate(0,-.5,0)),this.position.copy(t),this.line=new Ml(E0,new Mr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xn(eS,new Aa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class LG extends Vo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Wt;r.setAttribute("position",new xt(t,3)),r.setAttribute("color",new xt(i,3));const s=new Mr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new nt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class DG{constructor(){this.type="ShapePath",this.color=new nt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Np,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let w=0,E=g.length;w<E;w++){const I=g[w],R=new Du;R.curves=I.curves,S.push(R)}return S}function i(g,S){const w=S.length;let E=!1;for(let I=w-1,R=0;R<w;I=R++){let P=S[I],b=S[R],C=b.x-P.x,A=b.y-P.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(P=S[R],C=-C,b=S[I],A=-A),g.y<P.y||g.y>b.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const O=A*(g.x-P.x)-C*(g.y-P.y);if(O===0)return!0;if(O<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(b.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=b.x)return!0}}return E}const r=Oo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const f=[];if(s.length===1)return a=s[0],l=new Du,l.curves=a.curves,f.push(l),f;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],_=0,y;p[_]=void 0,m[_]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],y=a.getPoints(),o=r(y),o=e?!o:o,o?(!h&&p[_]&&_++,p[_]={s:new Du,p:y},p[_].s.curves=a.curves,h&&_++,m[_]=[]):m[_].push({h:a,p:y[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let w=0,E=p.length;w<E;w++)d[w]=[];for(let w=0,E=p.length;w<E;w++){const I=m[w];for(let R=0;R<I.length;R++){const P=I[R];let b=!0;for(let C=0;C<p.length;C++)i(P.p,p[C].p)&&(w!==C&&S++,b?(b=!1,d[C].push(P)):g=!0);b&&d[w].push(P)}}S>0&&g===!1&&(m=d)}let x;for(let g=0,S=p.length;g<S;g++){l=p[g].s,f.push(l),x=m[g];for(let w=0,E=x.length;w<E;w++)l.holes.push(x[w].h)}return f}}class NG extends ds{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rm);const OG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vE,AddEquation:$a,AddOperation:GL,AdditiveAnimationBlendMode:AE,AdditiveBlending:Cw,AgXToneMapping:jL,AlphaFormat:xE,AlwaysCompare:uD,AlwaysDepth:UL,AlwaysStencilFunc:Lw,AmbientLight:aN,AnimationAction:mN,AnimationClip:Bp,AnimationLoader:z8,AnimationMixer:fG,AnimationObjectGroup:uG,AnimationUtils:O8,ArcCurve:LD,ArrayCamera:ED,ArrowHelper:IG,AttachedBindMode:Pw,Audio:dN,AudioAnalyser:Q8,AudioContext:QE,AudioListener:K8,AudioLoader:q8,AxesHelper:LG,BackSide:yr,BasicDepthPacking:eD,BasicShadowMap:gL,BatchedMesh:RD,Bone:gy,BooleanKeyframeTrack:ic,Box2:vG,Box3:xr,Box3Helper:RG,BoxGeometry:Il,BoxHelper:bG,BufferAttribute:Sn,BufferGeometry:Wt,BufferGeometryLoader:hN,ByteType:ny,Cache:da,Camera:cm,CameraHelper:CG,CanvasTexture:s8,CapsuleGeometry:yy,CatmullRomCurve3:DD,CineonToneMapping:YL,CircleGeometry:xy,ClampToEdgeWrapping:pi,Clock:eT,Color:nt,ColorKeyframeTrack:KE,ColorManagement:mn,CompressedArrayTexture:i8,CompressedCubeTexture:r8,CompressedTexture:vy,CompressedTextureLoader:B8,ConeGeometry:Sy,ConstantAlphaFactor:DL,ConstantColorFactor:IL,CubeCamera:vD,CubeReflectionMapping:Fo,CubeRefractionMapping:wl,CubeTexture:fm,CubeTextureLoader:nN,CubeUVReflectionMapping:sh,CubicBezierCurve:GE,CubicBezierCurve3:ND,CubicInterpolant:QD,CullFaceBack:Aw,CullFaceFront:mL,CullFaceFrontBack:Bz,CullFaceNone:pL,Curve:uo,CurvePath:UD,CustomBlending:vL,CustomToneMapping:qL,CylinderGeometry:ah,Cylindrical:gG,Data3DTexture:IE,DataArrayTexture:cy,DataTexture:ao,DataTextureLoader:$E,DataUtils:wu,DecrementStencilOp:$z,DecrementWrapStencilOp:Qz,DefaultLoadingManager:gf,DepthFormat:Pu,DepthStencilFormat:qu,DepthTexture:OE,DetachedBindMode:KL,DirectionalLight:oN,DirectionalLightHelper:AG,DiscreteInterpolant:eN,DisplayP3ColorSpace:uy,DodecahedronGeometry:wy,DoubleSide:ro,DstAlphaFactor:AL,DstColorFactor:bL,DynamicCopyUsage:p4,DynamicDrawUsage:l4,DynamicReadUsage:f4,EdgesGeometry:kD,EllipseCurve:_y,EqualCompare:sD,EqualDepth:FL,EqualStencilFunc:i4,EquirectangularReflectionMapping:Vf,EquirectangularRefractionMapping:Mp,Euler:Gr,EventDispatcher:Ho,ExtrudeGeometry:Ey,FileLoader:cs,Float16BufferAttribute:eB,Float32BufferAttribute:xt,FloatType:Wn,Fog:py,FogExp2:dy,FramebufferTexture:n8,FrontSide:wa,Frustum:hm,GLBufferAttribute:mG,GLSL1:g4,GLSL3:Dw,GreaterCompare:oD,GreaterDepth:BL,GreaterEqualCompare:lD,GreaterEqualDepth:zL,GreaterEqualStencilFunc:a4,GreaterStencilFunc:s4,GridHelper:EG,Group:pf,HalfFloatType:Ii,HemisphereLight:iN,HemisphereLightHelper:MG,IcosahedronGeometry:mm,ImageBitmapLoader:Y8,ImageLoader:Hp,ImageUtils:hD,IncrementStencilOp:Kz,IncrementWrapStencilOp:Jz,InstancedBufferAttribute:qf,InstancedBufferGeometry:fN,InstancedInterleavedBuffer:pG,InstancedMesh:bD,Int16BufferAttribute:J4,Int32BufferAttribute:Q4,Int8BufferAttribute:Z4,IntType:om,InterleavedBuffer:my,InterleavedBufferAttribute:ju,Interpolant:_m,InterpolateDiscrete:Ap,InterpolateLinear:v_,InterpolateSmooth:sv,InvertStencilOp:e4,KeepStencilOp:cu,KeyframeTrack:co,LOD:CD,LatheGeometry:pm,Layers:Lu,LessCompare:rD,LessDepth:kL,LessEqualCompare:CE,LessEqualDepth:wp,LessEqualStencilFunc:r4,LessStencilFunc:n4,Light:Nl,LightProbe:cN,Line:Ml,Line3:_G,LineBasicMaterial:Mr,LineCurve:WE,LineCurve3:OD,LineDashedMaterial:KD,LineLoop:PD,LineSegments:Vo,LinearDisplayP3ColorSpace:um,LinearFilter:_n,LinearInterpolant:ZE,LinearMipMapLinearFilter:Iw,LinearMipMapNearestFilter:Gz,LinearMipmapLinearFilter:Ao,LinearMipmapNearestFilter:Dd,LinearSRGBColorSpace:Gs,LinearToneMapping:WL,LinearTransfer:bp,Loader:Er,LoaderUtils:Hw,LoadingManager:Iy,LoopOnce:$L,LoopPingPong:QL,LoopRepeat:JL,LuminanceAlphaFormat:ME,LuminanceFormat:wE,MOUSE:lu,Material:Bi,MaterialLoader:Dy,MathUtils:RE,Matrix3:Ht,Matrix4:Lt,MaxEquation:SL,Mesh:Xn,MeshBasicMaterial:Aa,MeshDepthMaterial:UE,MeshDistanceMaterial:kE,MeshLambertMaterial:jD,MeshMatcapMaterial:ZD,MeshNormalMaterial:qD,MeshPhongMaterial:XD,MeshPhysicalMaterial:WD,MeshStandardMaterial:ha,MeshToonMaterial:YD,MinEquation:xL,MirroredRepeatWrapping:Tp,MixOperation:VL,MultiplyBlending:Rw,MultiplyOperation:sm,NearestFilter:Pi,NearestMipMapLinearFilter:Vz,NearestMipMapNearestFilter:Hz,NearestMipmapLinearFilter:ff,NearestMipmapNearestFilter:_E,NeutralToneMapping:ZL,NeverCompare:iD,NeverDepth:OL,NeverStencilFunc:t4,NoBlending:Do,NoColorSpace:aa,NoToneMapping:No,NormalAnimationBlendMode:ly,NormalBlending:Ru,NotEqualCompare:aD,NotEqualDepth:HL,NotEqualStencilFunc:o4,NumberKeyframeTrack:Fp,Object3D:un,ObjectLoader:W8,ObjectSpaceNormalMap:nD,OctahedronGeometry:gm,OneFactor:ML,OneMinusConstantAlphaFactor:NL,OneMinusConstantColorFactor:LL,OneMinusDstAlphaFactor:CL,OneMinusDstColorFactor:RL,OneMinusSrcAlphaFactor:Wv,OneMinusSrcColorFactor:TL,OrthographicCamera:bo,P3Primaries:Pp,PCFShadowMap:ty,PCFSoftShadowMap:Ld,PMREMGenerator:Nw,Path:Np,PerspectiveCamera:Jn,Plane:sa,PlaneGeometry:Ll,PlaneHelper:PG,PointLight:sN,PointLightHelper:SG,Points:ID,PointsMaterial:HE,PolarGridHelper:TG,PolyhedronGeometry:Dl,PositionalAudio:J8,PropertyBinding:an,PropertyMixer:pN,QuadraticBezierCurve:XE,QuadraticBezierCurve3:YE,Quaternion:oi,QuaternionKeyframeTrack:ym,QuaternionLinearInterpolant:tN,RED_GREEN_RGTC2_Format:m_,RED_RGTC1_Format:TE,REVISION:rm,RGBADepthPacking:tD,RGBAFormat:ri,RGBAIntegerFormat:ay,RGBA_ASTC_10x10_Format:u_,RGBA_ASTC_10x5_Format:o_,RGBA_ASTC_10x6_Format:a_,RGBA_ASTC_10x8_Format:l_,RGBA_ASTC_12x10_Format:c_,RGBA_ASTC_12x12_Format:f_,RGBA_ASTC_4x4_Format:Jv,RGBA_ASTC_5x4_Format:Qv,RGBA_ASTC_5x5_Format:e_,RGBA_ASTC_6x5_Format:t_,RGBA_ASTC_6x6_Format:n_,RGBA_ASTC_8x5_Format:i_,RGBA_ASTC_8x6_Format:r_,RGBA_ASTC_8x8_Format:s_,RGBA_BPTC_Format:Fd,RGBA_ETC2_EAC_Format:$v,RGBA_PVRTC_2BPPV1_Format:jv,RGBA_PVRTC_4BPPV1_Format:qv,RGBA_S3TC_DXT1_Format:Od,RGBA_S3TC_DXT3_Format:Ud,RGBA_S3TC_DXT5_Format:kd,RGBFormat:SE,RGBIntegerFormat:Wz,RGB_BPTC_SIGNED_Format:h_,RGB_BPTC_UNSIGNED_Format:d_,RGB_ETC1_Format:Zv,RGB_ETC2_Format:Kv,RGB_PVRTC_2BPPV1_Format:Yv,RGB_PVRTC_4BPPV1_Format:Xv,RGB_S3TC_DXT1_Format:Nd,RGFormat:EE,RGIntegerFormat:oy,RawShaderMaterial:GD,Ray:nc,Raycaster:rT,Rec709Primaries:Rp,RectAreaLight:lN,RedFormat:am,RedIntegerFormat:lm,ReinhardToneMapping:XL,RenderTarget:dD,RepeatWrapping:Ep,ReplaceStencilOp:Zz,ReverseSubtractEquation:yL,RingGeometry:Ty,SIGNED_RED_GREEN_RGTC2_Format:g_,SIGNED_RED_RGTC1_Format:p_,SRGBColorSpace:Lr,SRGBTransfer:An,Scene:Yf,ShaderChunk:Gt,ShaderLib:io,ShaderMaterial:Wr,ShadowMaterial:VD,Shape:Du,ShapeGeometry:Ay,ShapePath:DG,ShapeUtils:Oo,ShortType:iy,Skeleton:dm,SkeletonHelper:xG,SkinnedMesh:BE,Source:Su,Sphere:tr,SphereGeometry:vm,Spherical:S_,SphericalHarmonics3:uN,SplineCurve:qE,SpotLight:rN,SpotLightHelper:yG,Sprite:AD,SpriteMaterial:zE,SrcAlphaFactor:Gv,SrcAlphaSaturateFactor:PL,SrcColorFactor:EL,StaticCopyUsage:d4,StaticDrawUsage:Ip,StaticReadUsage:c4,StereoCamera:j8,StreamCopyUsage:m4,StreamDrawUsage:u4,StreamReadUsage:h4,StringKeyframeTrack:rc,SubtractEquation:_L,SubtractiveBlending:bw,TOUCH:uu,TangentSpaceNormalMap:Pl,TetrahedronGeometry:Cy,Texture:dn,TextureLoader:Ly,TextureUtils:O6,TorusGeometry:by,TorusKnotGeometry:Ry,Triangle:is,TriangleFanDrawMode:qz,TriangleStripDrawMode:Yz,TrianglesDrawMode:Xz,TubeGeometry:Py,UVMapping:Sl,Uint16BufferAttribute:fy,Uint32BufferAttribute:LE,Uint8BufferAttribute:K4,Uint8ClampedBufferAttribute:$4,Uniform:iT,UniformsGroup:dG,UniformsLib:et,UniformsUtils:gD,UnsignedByteType:Vr,UnsignedInt248Type:Yu,UnsignedInt5999Type:yE,UnsignedIntType:zo,UnsignedShort4444Type:ry,UnsignedShort5551Type:sy,UnsignedShortType:Gf,VSMShadowMap:eo,Vector2:be,Vector3:W,Vector4:sn,VectorKeyframeTrack:zp,VideoTexture:t8,WebGL3DRenderTarget:z4,WebGLArrayRenderTarget:F4,WebGLCoordinateSystem:Co,WebGLCubeRenderTarget:DE,WebGLMultipleRenderTargets:NG,WebGLRenderTarget:ds,WebGLRenderer:FE,WebGLUtils:MD,WebGPUCoordinateSystem:Lp,WireframeGeometry:HD,WrapAroundEnding:Cp,ZeroCurvatureEnding:yu,ZeroFactor:wL,ZeroSlopeEnding:xu,ZeroStencilOp:jz,createCanvasElement:fD},Symbol.toStringTag,{value:"Module"}));var tl={},UG={get exports(){return tl},set exports(n){tl=n}},sc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */sc.ConcurrentRoot=1;sc.ContinuousEventPriority=4;sc.DefaultEventPriority=16;sc.DiscreteEventPriority=1;sc.IdleEventPriority=536870912;sc.LegacyRoot=0;(function(n){n.exports=sc})(UG);function kG(n){let e;const t=new Set,i=(f,h)=>{const d=typeof f=="function"?f(e):f;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(f,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const _=h(e);if(!d(p,_)){const y=p;f(p=_,y)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(f,h,d)=>h||d?s(f,h,d):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,l),l}const FG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uR=FG?_e.useEffect:_e.useLayoutEffect;function sT(n){const e=typeof n=="function"?kG(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=_e.useReducer(x=>x+1,0),o=e.getState(),a=_e.useRef(o),l=_e.useRef(i),f=_e.useRef(r),h=_e.useRef(!1),d=_e.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||f.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),uR(()=>{m&&(d.current=p),a.current=o,l.current=i,f.current=r,h.current=!1});const _=_e.useRef(o);uR(()=>{const x=()=>{try{const S=e.getState(),w=l.current(S);f.current(d.current,w)||(a.current=S,d.current=w,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==_.current&&x(),g},[]);const y=m?p:d.current;return _e.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var Gw={},zG={get exports(){return Gw},set exports(n){Gw=n}},Vp={},BG={get exports(){return Vp},set exports(n){Vp=n}},vN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,te){var k=B.length;B.push(te);e:for(;0<k;){var ce=k-1>>>1,Se=B[ce];if(0<r(Se,te))B[ce]=te,B[k]=Se,k=ce;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var te=B[0],k=B.pop();if(k!==te){B[0]=k;e:for(var ce=0,Se=B.length,Fe=Se>>>1;ce<Fe;){var ue=2*(ce+1)-1,Ee=B[ue],Te=ue+1,Pe=B[Te];if(0>r(Ee,k))Te<Se&&0>r(Pe,Ee)?(B[ce]=Pe,B[Te]=k,ce=Te):(B[ce]=Ee,B[ue]=k,ce=ue);else if(Te<Se&&0>r(Pe,k))B[ce]=Pe,B[Te]=k,ce=Te;else break e}}return te}function r(B,te){var k=B.sortIndex-te.sortIndex;return k!==0?k:B.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],f=[],h=1,d=null,p=3,m=!1,_=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var te=t(f);te!==null;){if(te.callback===null)i(f);else if(te.startTime<=B)i(f),te.sortIndex=te.expirationTime,e(l,te);else break;te=t(f)}}function E(B){if(y=!1,w(B),!_)if(t(l)!==null)_=!0,K(I);else{var te=t(f);te!==null&&ne(E,te.startTime-B)}}function I(B,te){_=!1,y&&(y=!1,g(b),b=-1),m=!0;var k=p;try{for(w(te),d=t(l);d!==null&&(!(d.expirationTime>te)||B&&!O());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,p=d.priorityLevel;var Se=ce(d.expirationTime<=te);te=n.unstable_now(),typeof Se=="function"?d.callback=Se:d===t(l)&&i(l),w(te)}else i(l);d=t(l)}if(d!==null)var Fe=!0;else{var ue=t(f);ue!==null&&ne(E,ue.startTime-te),Fe=!1}return Fe}finally{d=null,p=k,m=!1}}var R=!1,P=null,b=-1,C=5,A=-1;function O(){return!(n.unstable_now()-A<C)}function F(){if(P!==null){var B=n.unstable_now();A=B;var te=!0;try{te=P(!0,B)}finally{te?V():(R=!1,P=null)}}else R=!1}var V;if(typeof S=="function")V=function(){S(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=F,V=function(){J.postMessage(null)}}else V=function(){x(F,0)};function K(B){P=B,R||(R=!0,V())}function ne(B,te){b=x(function(){B(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){_||m||(_=!0,K(I))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var k=p;p=te;try{return B()}finally{p=k}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var k=p;p=B;try{return te()}finally{p=k}},n.unstable_scheduleCallback=function(B,te,k){var ce=n.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?ce+k:ce):k=ce,B){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=k+Se,B={id:h++,callback:te,priorityLevel:B,startTime:k,expirationTime:Se,sortIndex:-1},k>ce?(B.sortIndex=k,e(f,B),t(l)===null&&B===t(f)&&(y?(g(b),b=-1):y=!0,ne(E,k-ce))):(B.sortIndex=Se,e(l,B),_||m||(_=!0,K(I))),B},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(B){var te=p;return function(){var k=p;p=te;try{return B.apply(this,arguments)}finally{p=k}}}})(vN);(function(n){n.exports=vN})(BG);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG=function(e){var t={},i=_e,r=Vp,s=Object.assign;function o(u){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),_=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),I=Symbol.iterator;function R(u){return u===null||typeof u!="object"?null:(u=I&&u[I]||u["@@iterator"],typeof u=="function"?u:null)}function P(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case f:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case _:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case y:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return c=u.displayName||null,c!==null?c:P(u.type)||"Memo";case w:c=u._payload,u=u._init;try{return P(u(c))}catch{}}return null}function b(u){var c=u.type;switch(u.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=c.render,u=u.displayName||u.name||"",c.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(c);case 8:return c===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function C(u){var c=u,v=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,c.flags&4098&&(v=c.return),u=c.return;while(u)}return c.tag===3?v:null}function A(u){if(C(u)!==u)throw Error(o(188))}function O(u){var c=u.alternate;if(!c){if(c=C(u),c===null)throw Error(o(188));return c!==u?null:u}for(var v=u,M=c;;){var T=v.return;if(T===null)break;var D=T.alternate;if(D===null){if(M=T.return,M!==null){v=M;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===v)return A(T),u;if(D===M)return A(T),c;D=D.sibling}throw Error(o(188))}if(v.return!==M.return)v=T,M=D;else{for(var Z=!1,oe=T.child;oe;){if(oe===v){Z=!0,v=T,M=D;break}if(oe===M){Z=!0,M=T,v=D;break}oe=oe.sibling}if(!Z){for(oe=D.child;oe;){if(oe===v){Z=!0,v=D,M=T;break}if(oe===M){Z=!0,M=D,v=T;break}oe=oe.sibling}if(!Z)throw Error(o(189))}}if(v.alternate!==M)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:c}function F(u){return u=O(u),u!==null?V(u):null}function V(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var c=V(u);if(c!==null)return c;u=u.sibling}return null}function Y(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var c=Y(u);if(c!==null)return c}u=u.sibling}return null}var J=Array.isArray,K=e.getPublicInstance,ne=e.getRootHostContext,B=e.getChildHostContext,te=e.prepareForCommit,k=e.resetAfterCommit,ce=e.createInstance,Se=e.appendInitialChild,Fe=e.finalizeInitialChildren,ue=e.prepareUpdate,Ee=e.shouldSetTextContent,Te=e.createTextInstance,Pe=e.scheduleTimeout,Qe=e.cancelTimeout,ht=e.noTimeout,mt=e.isPrimaryRenderer,ut=e.supportsMutation,G=e.supportsPersistence,ve=e.supportsHydration,Re=e.getInstanceFromNode,He=e.preparePortalMount,Me=e.getCurrentEventPriority,se=e.detachDeletedInstance,Ge=e.supportsMicrotasks,Ke=e.scheduleMicrotask,j=e.supportsTestSelectors,U=e.findFiberRoot,he=e.getBoundingRect,Ie=e.getTextContent,Le=e.isHiddenSubtree,Ae=e.matchAccessibilityRole,at=e.setFocusIfFocusable,Ue=e.setupIntersectionObserver,qe=e.appendChild,gt=e.appendChildToContainer,ke=e.commitTextUpdate,$e=e.commitMount,St=e.commitUpdate,wt=e.insertBefore,We=e.insertInContainerBefore,ie=e.removeChild,we=e.removeChildFromContainer,Ve=e.resetTextContent,Q=e.hideInstance,ge=e.hideTextInstance,re=e.unhideInstance,xe=e.unhideTextInstance,Be=e.clearContainer,ct=e.cloneInstance,At=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,Qt=e.finalizeContainerChildren,Ot=e.replaceContainerChildren,_t=e.cloneHiddenInstance,st=e.cloneHiddenTextInstance,Zt=e.canHydrateInstance,je=e.canHydrateTextInstance,Dt=e.canHydrateSuspenseInstance,yt=e.isSuspenseInstancePending,Rt=e.isSuspenseInstanceFallback,pn=e.registerSuspenseInstanceRetry,Nt=e.getNextHydratableSibling,vt=e.getFirstHydratableChild,Dn=e.getFirstHydratableChildWithinContainer,yn=e.getFirstHydratableChildWithinSuspenseInstance,N=e.hydrateInstance,z=e.hydrateTextInstance,ee=e.hydrateSuspenseInstance,L=e.getNextHydratableInstanceAfterSuspenseInstance,H=e.commitHydratedContainer,X=e.commitHydratedSuspenseInstance,$=e.clearSuspenseBoundary,q=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,de=e.didNotMatchHydratedContainerTextInstance,me=e.didNotMatchHydratedTextInstance,fe;function ze(u){if(fe===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);fe=c&&c[1]||""}return`
`+fe+u}var De=!1;function Ne(u,c){if(!u||De)return"";De=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ye){var M=Ye}Reflect.construct(u,[],c)}else{try{c.call()}catch(Ye){M=Ye}u.call(c.prototype)}else{try{throw Error()}catch(Ye){M=Ye}u()}}catch(Ye){if(Ye&&M&&typeof Ye.stack=="string"){for(var T=Ye.stack.split(`
`),D=M.stack.split(`
`),Z=T.length-1,oe=D.length-1;1<=Z&&0<=oe&&T[Z]!==D[oe];)oe--;for(;1<=Z&&0<=oe;Z--,oe--)if(T[Z]!==D[oe]){if(Z!==1||oe!==1)do if(Z--,oe--,0>oe||T[Z]!==D[oe]){var Ce=`
`+T[Z].replace(" at new "," at ");return u.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",u.displayName)),Ce}while(1<=Z&&0<=oe);break}}}finally{De=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?ze(u):""}var Je=Object.prototype.hasOwnProperty,rt=[],lt=-1;function Ct(u){return{current:u}}function Ze(u){0>lt||(u.current=rt[lt],rt[lt]=null,lt--)}function Oe(u,c){lt++,rt[lt]=u.current,u.current=c}var bt={},Mt=Ct(bt),Pt=Ct(!1),on=bt;function gn(u,c){var v=u.type.contextTypes;if(!v)return bt;var M=u.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===c)return M.__reactInternalMemoizedMaskedChildContext;var T={},D;for(D in v)T[D]=c[D];return M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=c,u.__reactInternalMemoizedMaskedChildContext=T),T}function Nn(u){return u=u.childContextTypes,u!=null}function Kt(){Ze(Pt),Ze(Mt)}function Yt(u,c,v){if(Mt.current!==bt)throw Error(o(168));Oe(Mt,c),Oe(Pt,v)}function Fn(u,c,v){var M=u.stateNode;if(c=c.childContextTypes,typeof M.getChildContext!="function")return v;M=M.getChildContext();for(var T in M)if(!(T in c))throw Error(o(108,b(u)||"Unknown",T));return s({},v,M)}function Bt(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||bt,on=Mt.current,Oe(Mt,u),Oe(Pt,Pt.current),!0}function tn(u,c,v){var M=u.stateNode;if(!M)throw Error(o(169));v?(u=Fn(u,c,on),M.__reactInternalMemoizedMergedChildContext=u,Ze(Pt),Ze(Mt),Oe(Mt,u)):Ze(Pt),Oe(Pt,v)}var Tn=Math.clz32?Math.clz32:fo,_s=Math.log,rr=Math.LN2;function fo(u){return u>>>=0,u===0?32:31-(_s(u)/rr|0)|0}var Em=64,Tm=4194304;function ch(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Am(u,c){var v=u.pendingLanes;if(v===0)return 0;var M=0,T=u.suspendedLanes,D=u.pingedLanes,Z=v&268435455;if(Z!==0){var oe=Z&~T;oe!==0?M=ch(oe):(D&=Z,D!==0&&(M=ch(D)))}else Z=v&~T,Z!==0?M=ch(Z):D!==0&&(M=ch(D));if(M===0)return 0;if(c!==0&&c!==M&&!(c&T)&&(T=M&-M,D=c&-c,T>=D||T===16&&(D&4194240)!==0))return c;if(M&4&&(M|=v&16),c=u.entangledLanes,c!==0)for(u=u.entanglements,c&=M;0<c;)v=31-Tn(c),T=1<<v,M|=u[v],c&=~T;return M}function TU(u,c){switch(u){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AU(u,c){for(var v=u.suspendedLanes,M=u.pingedLanes,T=u.expirationTimes,D=u.pendingLanes;0<D;){var Z=31-Tn(D),oe=1<<Z,Ce=T[Z];Ce===-1?(!(oe&v)||oe&M)&&(T[Z]=TU(oe,c)):Ce<=c&&(u.expiredLanes|=oe),D&=~oe}}function zy(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function By(u){for(var c=[],v=0;31>v;v++)c.push(u);return c}function fh(u,c,v){u.pendingLanes|=c,c!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,c=31-Tn(c),u[c]=v}function CU(u,c){var v=u.pendingLanes&~c;u.pendingLanes=c,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=c,u.mutableReadLanes&=c,u.entangledLanes&=c,c=u.entanglements;var M=u.eventTimes;for(u=u.expirationTimes;0<v;){var T=31-Tn(v),D=1<<T;c[T]=0,M[T]=-1,u[T]=-1,v&=~D}}function Hy(u,c){var v=u.entangledLanes|=c;for(u=u.entanglements;v;){var M=31-Tn(v),T=1<<M;T&c|u[M]&c&&(u[M]|=c),v&=~T}}var cn=0;function WT(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Vy=r.unstable_scheduleCallback,XT=r.unstable_cancelCallback,bU=r.unstable_shouldYield,RU=r.unstable_requestPaint,Mi=r.unstable_now,Gy=r.unstable_ImmediatePriority,PU=r.unstable_UserBlockingPriority,Wy=r.unstable_NormalPriority,IU=r.unstable_IdlePriority,Cm=null,ho=null;function LU(u){if(ho&&typeof ho.onCommitFiberRoot=="function")try{ho.onCommitFiberRoot(Cm,u,void 0,(u.current.flags&128)===128)}catch{}}function DU(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var po=typeof Object.is=="function"?Object.is:DU,Go=null,bm=!1,Xy=!1;function YT(u){Go===null?Go=[u]:Go.push(u)}function NU(u){bm=!0,YT(u)}function mo(){if(!Xy&&Go!==null){Xy=!0;var u=0,c=cn;try{var v=Go;for(cn=1;u<v.length;u++){var M=v[u];do M=M(!0);while(M!==null)}Go=null,bm=!1}catch(T){throw Go!==null&&(Go=Go.slice(u+1)),Vy(Gy,mo),T}finally{cn=c,Xy=!1}}return null}var OU=a.ReactCurrentBatchConfig;function Rm(u,c){if(po(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var v=Object.keys(u),M=Object.keys(c);if(v.length!==M.length)return!1;for(M=0;M<v.length;M++){var T=v[M];if(!Je.call(c,T)||!po(u[T],c[T]))return!1}return!0}function UU(u){switch(u.tag){case 5:return ze(u.type);case 16:return ze("Lazy");case 13:return ze("Suspense");case 19:return ze("SuspenseList");case 0:case 2:case 15:return u=Ne(u.type,!1),u;case 11:return u=Ne(u.type.render,!1),u;case 1:return u=Ne(u.type,!0),u;default:return""}}function Ws(u,c){if(u&&u.defaultProps){c=s({},c),u=u.defaultProps;for(var v in u)c[v]===void 0&&(c[v]=u[v]);return c}return c}var Pm=Ct(null),Im=null,ac=null,Yy=null;function qy(){Yy=ac=Im=null}function qT(u,c,v){mt?(Oe(Pm,c._currentValue),c._currentValue=v):(Oe(Pm,c._currentValue2),c._currentValue2=v)}function jy(u){var c=Pm.current;Ze(Pm),mt?u._currentValue=c:u._currentValue2=c}function Zy(u,c,v){for(;u!==null;){var M=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,M!==null&&(M.childLanes|=c)):M!==null&&(M.childLanes&c)!==c&&(M.childLanes|=c),u===v)break;u=u.return}}function lc(u,c){Im=u,Yy=ac=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&c&&(jr=!0),u.firstContext=null)}function ys(u){var c=mt?u._currentValue:u._currentValue2;if(Yy!==u)if(u={context:u,memoizedValue:c,next:null},ac===null){if(Im===null)throw Error(o(308));ac=u,Im.dependencies={lanes:0,firstContext:u}}else ac=ac.next=u;return c}var go=null,Ca=!1;function Ky(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jT(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Wo(u,c){return{eventTime:u,lane:c,tag:0,payload:null,callback:null,next:null}}function ba(u,c){var v=u.updateQueue;v!==null&&(v=v.shared,ai!==null&&u.mode&1&&!(qt&2)?(u=v.interleaved,u===null?(c.next=c,go===null?go=[v]:go.push(v)):(c.next=u.next,u.next=c),v.interleaved=c):(u=v.pending,u===null?c.next=c:(c.next=u.next,u.next=c),v.pending=c))}function Lm(u,c,v){if(c=c.updateQueue,c!==null&&(c=c.shared,(v&4194240)!==0)){var M=c.lanes;M&=u.pendingLanes,v|=M,c.lanes=v,Hy(u,v)}}function ZT(u,c){var v=u.updateQueue,M=u.alternate;if(M!==null&&(M=M.updateQueue,v===M)){var T=null,D=null;if(v=v.firstBaseUpdate,v!==null){do{var Z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};D===null?T=D=Z:D=D.next=Z,v=v.next}while(v!==null);D===null?T=D=c:D=D.next=c}else T=D=c;v={baseState:M.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:M.shared,effects:M.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=c:u.next=c,v.lastBaseUpdate=c}function Dm(u,c,v,M){var T=u.updateQueue;Ca=!1;var D=T.firstBaseUpdate,Z=T.lastBaseUpdate,oe=T.shared.pending;if(oe!==null){T.shared.pending=null;var Ce=oe,Ye=Ce.next;Ce.next=null,Z===null?D=Ye:Z.next=Ye,Z=Ce;var dt=u.alternate;dt!==null&&(dt=dt.updateQueue,oe=dt.lastBaseUpdate,oe!==Z&&(oe===null?dt.firstBaseUpdate=Ye:oe.next=Ye,dt.lastBaseUpdate=Ce))}if(D!==null){var kt=T.baseState;Z=0,dt=Ye=Ce=null,oe=D;do{var It=oe.lane,wn=oe.eventTime;if((M&It)===It){dt!==null&&(dt=dt.next={eventTime:wn,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var Tt=u,Wi=oe;switch(It=c,wn=v,Wi.tag){case 1:if(Tt=Wi.payload,typeof Tt=="function"){kt=Tt.call(wn,kt,It);break e}kt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Wi.payload,It=typeof Tt=="function"?Tt.call(wn,kt,It):Tt,It==null)break e;kt=s({},kt,It);break e;case 2:Ca=!0}}oe.callback!==null&&oe.lane!==0&&(u.flags|=64,It=T.effects,It===null?T.effects=[oe]:It.push(oe))}else wn={eventTime:wn,lane:It,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},dt===null?(Ye=dt=wn,Ce=kt):dt=dt.next=wn,Z|=It;if(oe=oe.next,oe===null){if(oe=T.shared.pending,oe===null)break;It=oe,oe=It.next,It.next=null,T.lastBaseUpdate=It,T.shared.pending=null}}while(1);if(dt===null&&(Ce=kt),T.baseState=Ce,T.firstBaseUpdate=Ye,T.lastBaseUpdate=dt,c=T.shared.interleaved,c!==null){T=c;do Z|=T.lane,T=T.next;while(T!==c)}else D===null&&(T.shared.lanes=0);vc|=Z,u.lanes=Z,u.memoizedState=kt}}function KT(u,c,v){if(u=c.effects,c.effects=null,u!==null)for(c=0;c<u.length;c++){var M=u[c],T=M.callback;if(T!==null){if(M.callback=null,M=v,typeof T!="function")throw Error(o(191,T));T.call(M)}}}var $T=new i.Component().refs;function $y(u,c,v,M){c=u.memoizedState,v=v(M,c),v=v==null?c:s({},c,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Nm={isMounted:function(u){return(u=u._reactInternals)?C(u)===u:!1},enqueueSetState:function(u,c,v){u=u._reactInternals;var M=or(),T=Ia(u),D=Wo(M,T);D.payload=c,v!=null&&(D.callback=v),ba(u,D),c=Es(u,T,M),c!==null&&Lm(c,u,T)},enqueueReplaceState:function(u,c,v){u=u._reactInternals;var M=or(),T=Ia(u),D=Wo(M,T);D.tag=1,D.payload=c,v!=null&&(D.callback=v),ba(u,D),c=Es(u,T,M),c!==null&&Lm(c,u,T)},enqueueForceUpdate:function(u,c){u=u._reactInternals;var v=or(),M=Ia(u),T=Wo(v,M);T.tag=2,c!=null&&(T.callback=c),ba(u,T),c=Es(u,M,v),c!==null&&Lm(c,u,M)}};function JT(u,c,v,M,T,D,Z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(M,D,Z):c.prototype&&c.prototype.isPureReactComponent?!Rm(v,M)||!Rm(T,D):!0}function QT(u,c,v){var M=!1,T=bt,D=c.contextType;return typeof D=="object"&&D!==null?D=ys(D):(T=Nn(c)?on:Mt.current,M=c.contextTypes,D=(M=M!=null)?gn(u,T):bt),c=new c(v,D),u.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Nm,u.stateNode=c,c._reactInternals=u,M&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=T,u.__reactInternalMemoizedMaskedChildContext=D),c}function eA(u,c,v,M){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,M),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,M),c.state!==u&&Nm.enqueueReplaceState(c,c.state,null)}function Jy(u,c,v,M){var T=u.stateNode;T.props=v,T.state=u.memoizedState,T.refs=$T,Ky(u);var D=c.contextType;typeof D=="object"&&D!==null?T.context=ys(D):(D=Nn(c)?on:Mt.current,T.context=gn(u,D)),T.state=u.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&($y(u,c,D,v),T.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(c=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),c!==T.state&&Nm.enqueueReplaceState(T,T.state,null),Dm(u,v,T,M),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308)}var uc=[],cc=0,Om=null,Um=0,xs=[],Ss=0,Ul=null,Xo=1,Yo="";function kl(u,c){uc[cc++]=Um,uc[cc++]=Om,Om=u,Um=c}function tA(u,c,v){xs[Ss++]=Xo,xs[Ss++]=Yo,xs[Ss++]=Ul,Ul=u;var M=Xo;u=Yo;var T=32-Tn(M)-1;M&=~(1<<T),v+=1;var D=32-Tn(c)+T;if(30<D){var Z=T-T%5;D=(M&(1<<Z)-1).toString(32),M>>=Z,T-=Z,Xo=1<<32-Tn(c)+T|v<<T|M,Yo=D+u}else Xo=1<<D|v<<T|M,Yo=u}function Qy(u){u.return!==null&&(kl(u,1),tA(u,1,0))}function ex(u){for(;u===Om;)Om=uc[--cc],uc[cc]=null,Um=uc[--cc],uc[cc]=null;for(;u===Ul;)Ul=xs[--Ss],xs[Ss]=null,Yo=xs[--Ss],xs[Ss]=null,Xo=xs[--Ss],xs[Ss]=null}var Yr=null,qr=null,On=!1,hh=!1,Xs=null;function nA(u,c){var v=Ts(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=u,c=u.deletions,c===null?(u.deletions=[v],u.flags|=16):c.push(v)}function iA(u,c){switch(u.tag){case 5:return c=Zt(c,u.type,u.pendingProps),c!==null?(u.stateNode=c,Yr=u,qr=vt(c),!0):!1;case 6:return c=je(c,u.pendingProps),c!==null?(u.stateNode=c,Yr=u,qr=null,!0):!1;case 13:if(c=Dt(c),c!==null){var v=Ul!==null?{id:Xo,overflow:Yo}:null;return u.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},v=Ts(18,null,null,0),v.stateNode=c,v.return=u,u.child=v,Yr=u,qr=null,!0}return!1;default:return!1}}function tx(u){return(u.mode&1)!==0&&(u.flags&128)===0}function nx(u){if(On){var c=qr;if(c){var v=c;if(!iA(u,c)){if(tx(u))throw Error(o(418));c=Nt(v);var M=Yr;c&&iA(u,c)?nA(M,v):(u.flags=u.flags&-4097|2,On=!1,Yr=u)}}else{if(tx(u))throw Error(o(418));u.flags=u.flags&-4097|2,On=!1,Yr=u}}}function rA(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Yr=u}function dh(u){if(!ve||u!==Yr)return!1;if(!On)return rA(u),On=!0,!1;if(u.tag!==3&&(u.tag!==5||ae(u.type)&&!Ee(u.type,u.memoizedProps))){var c=qr;if(c){if(tx(u)){for(u=qr;u;)u=Nt(u);throw Error(o(418))}for(;c;)nA(u,c),c=Nt(c)}}if(rA(u),u.tag===13){if(!ve)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));qr=L(u)}else qr=Yr?Nt(u.stateNode):null;return!0}function fc(){ve&&(qr=Yr=null,hh=On=!1)}function ix(u){Xs===null?Xs=[u]:Xs.push(u)}function ph(u,c,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var M=v.stateNode}if(!M)throw Error(o(147,u));var T=M,D=""+u;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===D?c.ref:(c=function(Z){var oe=T.refs;oe===$T&&(oe=T.refs={}),Z===null?delete oe[D]:oe[D]=Z},c._stringRef=D,c)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function km(u,c){throw u=Object.prototype.toString.call(c),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u))}function sA(u){var c=u._init;return c(u._payload)}function oA(u){function c(pe,le){if(u){var ye=pe.deletions;ye===null?(pe.deletions=[le],pe.flags|=16):ye.push(le)}}function v(pe,le){if(!u)return null;for(;le!==null;)c(pe,le),le=le.sibling;return null}function M(pe,le){for(pe=new Map;le!==null;)le.key!==null?pe.set(le.key,le):pe.set(le.index,le),le=le.sibling;return pe}function T(pe,le){return pe=Da(pe,le),pe.index=0,pe.sibling=null,pe}function D(pe,le,ye){return pe.index=ye,u?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<le?(pe.flags|=2,le):ye):(pe.flags|=2,le)):(pe.flags|=1048576,le)}function Z(pe){return u&&pe.alternate===null&&(pe.flags|=2),pe}function oe(pe,le,ye,it){return le===null||le.tag!==6?(le=Bx(ye,pe.mode,it),le.return=pe,le):(le=T(le,ye),le.return=pe,le)}function Ce(pe,le,ye,it){var Et=ye.type;return Et===h?dt(pe,le,ye.props.children,it,ye.key):le!==null&&(le.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===w&&sA(Et)===le.type)?(it=T(le,ye.props),it.ref=ph(pe,le,ye),it.return=pe,it):(it=pg(ye.type,ye.key,ye.props,null,pe.mode,it),it.ref=ph(pe,le,ye),it.return=pe,it)}function Ye(pe,le,ye,it){return le===null||le.tag!==4||le.stateNode.containerInfo!==ye.containerInfo||le.stateNode.implementation!==ye.implementation?(le=Hx(ye,pe.mode,it),le.return=pe,le):(le=T(le,ye.children||[]),le.return=pe,le)}function dt(pe,le,ye,it,Et){return le===null||le.tag!==7?(le=Wl(ye,pe.mode,it,Et),le.return=pe,le):(le=T(le,ye),le.return=pe,le)}function kt(pe,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number")return le=Bx(""+le,pe.mode,ye),le.return=pe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case l:return ye=pg(le.type,le.key,le.props,null,pe.mode,ye),ye.ref=ph(pe,null,le),ye.return=pe,ye;case f:return le=Hx(le,pe.mode,ye),le.return=pe,le;case w:var it=le._init;return kt(pe,it(le._payload),ye)}if(J(le)||R(le))return le=Wl(le,pe.mode,ye,null),le.return=pe,le;km(pe,le)}return null}function It(pe,le,ye,it){var Et=le!==null?le.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Et!==null?null:oe(pe,le,""+ye,it);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:return ye.key===Et?Ce(pe,le,ye,it):null;case f:return ye.key===Et?Ye(pe,le,ye,it):null;case w:return Et=ye._init,It(pe,le,Et(ye._payload),it)}if(J(ye)||R(ye))return Et!==null?null:dt(pe,le,ye,it,null);km(pe,ye)}return null}function wn(pe,le,ye,it,Et){if(typeof it=="string"&&it!==""||typeof it=="number")return pe=pe.get(ye)||null,oe(le,pe,""+it,Et);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case l:return pe=pe.get(it.key===null?ye:it.key)||null,Ce(le,pe,it,Et);case f:return pe=pe.get(it.key===null?ye:it.key)||null,Ye(le,pe,it,Et);case w:var Xt=it._init;return wn(pe,le,ye,Xt(it._payload),Et)}if(J(it)||R(it))return pe=pe.get(ye)||null,dt(le,pe,it,Et,null);km(le,it)}return null}function Tt(pe,le,ye,it){for(var Et=null,Xt=null,Ft=le,fn=le=0,Ti=null;Ft!==null&&fn<ye.length;fn++){Ft.index>fn?(Ti=Ft,Ft=null):Ti=Ft.sibling;var hn=It(pe,Ft,ye[fn],it);if(hn===null){Ft===null&&(Ft=Ti);break}u&&Ft&&hn.alternate===null&&c(pe,Ft),le=D(hn,le,fn),Xt===null?Et=hn:Xt.sibling=hn,Xt=hn,Ft=Ti}if(fn===ye.length)return v(pe,Ft),On&&kl(pe,fn),Et;if(Ft===null){for(;fn<ye.length;fn++)Ft=kt(pe,ye[fn],it),Ft!==null&&(le=D(Ft,le,fn),Xt===null?Et=Ft:Xt.sibling=Ft,Xt=Ft);return On&&kl(pe,fn),Et}for(Ft=M(pe,Ft);fn<ye.length;fn++)Ti=wn(Ft,pe,fn,ye[fn],it),Ti!==null&&(u&&Ti.alternate!==null&&Ft.delete(Ti.key===null?fn:Ti.key),le=D(Ti,le,fn),Xt===null?Et=Ti:Xt.sibling=Ti,Xt=Ti);return u&&Ft.forEach(function(Na){return c(pe,Na)}),On&&kl(pe,fn),Et}function Wi(pe,le,ye,it){var Et=R(ye);if(typeof Et!="function")throw Error(o(150));if(ye=Et.call(ye),ye==null)throw Error(o(151));for(var Xt=Et=null,Ft=le,fn=le=0,Ti=null,hn=ye.next();Ft!==null&&!hn.done;fn++,hn=ye.next()){Ft.index>fn?(Ti=Ft,Ft=null):Ti=Ft.sibling;var Na=It(pe,Ft,hn.value,it);if(Na===null){Ft===null&&(Ft=Ti);break}u&&Ft&&Na.alternate===null&&c(pe,Ft),le=D(Na,le,fn),Xt===null?Et=Na:Xt.sibling=Na,Xt=Na,Ft=Ti}if(hn.done)return v(pe,Ft),On&&kl(pe,fn),Et;if(Ft===null){for(;!hn.done;fn++,hn=ye.next())hn=kt(pe,hn.value,it),hn!==null&&(le=D(hn,le,fn),Xt===null?Et=hn:Xt.sibling=hn,Xt=hn);return On&&kl(pe,fn),Et}for(Ft=M(pe,Ft);!hn.done;fn++,hn=ye.next())hn=wn(Ft,pe,fn,hn.value,it),hn!==null&&(u&&hn.alternate!==null&&Ft.delete(hn.key===null?fn:hn.key),le=D(hn,le,fn),Xt===null?Et=hn:Xt.sibling=hn,Xt=hn);return u&&Ft.forEach(function(hk){return c(pe,hk)}),On&&kl(pe,fn),Et}function As(pe,le,ye,it){if(typeof ye=="object"&&ye!==null&&ye.type===h&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:e:{for(var Et=ye.key,Xt=le;Xt!==null;){if(Xt.key===Et){if(Et=ye.type,Et===h){if(Xt.tag===7){v(pe,Xt.sibling),le=T(Xt,ye.props.children),le.return=pe,pe=le;break e}}else if(Xt.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===w&&sA(Et)===Xt.type){v(pe,Xt.sibling),le=T(Xt,ye.props),le.ref=ph(pe,Xt,ye),le.return=pe,pe=le;break e}v(pe,Xt);break}else c(pe,Xt);Xt=Xt.sibling}ye.type===h?(le=Wl(ye.props.children,pe.mode,it,ye.key),le.return=pe,pe=le):(it=pg(ye.type,ye.key,ye.props,null,pe.mode,it),it.ref=ph(pe,le,ye),it.return=pe,pe=it)}return Z(pe);case f:e:{for(Xt=ye.key;le!==null;){if(le.key===Xt)if(le.tag===4&&le.stateNode.containerInfo===ye.containerInfo&&le.stateNode.implementation===ye.implementation){v(pe,le.sibling),le=T(le,ye.children||[]),le.return=pe,pe=le;break e}else{v(pe,le);break}else c(pe,le);le=le.sibling}le=Hx(ye,pe.mode,it),le.return=pe,pe=le}return Z(pe);case w:return Xt=ye._init,As(pe,le,Xt(ye._payload),it)}if(J(ye))return Tt(pe,le,ye,it);if(R(ye))return Wi(pe,le,ye,it);km(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,le!==null&&le.tag===6?(v(pe,le.sibling),le=T(le,ye),le.return=pe,pe=le):(v(pe,le),le=Bx(ye,pe.mode,it),le.return=pe,pe=le),Z(pe)):v(pe,le)}return As}var hc=oA(!0),aA=oA(!1),mh={},ws=Ct(mh),gh=Ct(mh),dc=Ct(mh);function vo(u){if(u===mh)throw Error(o(174));return u}function rx(u,c){Oe(dc,c),Oe(gh,u),Oe(ws,mh),u=ne(c),Ze(ws),Oe(ws,u)}function pc(){Ze(ws),Ze(gh),Ze(dc)}function lA(u){var c=vo(dc.current),v=vo(ws.current);c=B(v,u.type,c),v!==c&&(Oe(gh,u),Oe(ws,c))}function sx(u){gh.current===u&&(Ze(ws),Ze(gh))}var zn=Ct(0);function Fm(u){for(var c=u;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||yt(v)||Rt(v)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ox=[];function ax(){for(var u=0;u<ox.length;u++){var c=ox[u];mt?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}ox.length=0}var zm=a.ReactCurrentDispatcher,Ms=a.ReactCurrentBatchConfig,mc=0,jn=null,Hi=null,Ei=null,Bm=!1,vh=!1,_h=0,kU=0;function Vi(){throw Error(o(321))}function lx(u,c){if(c===null)return!1;for(var v=0;v<c.length&&v<u.length;v++)if(!po(u[v],c[v]))return!1;return!0}function ux(u,c,v,M,T,D){if(mc=D,jn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,zm.current=u===null||u.memoizedState===null?HU:VU,u=v(M,T),vh){D=0;do{if(vh=!1,_h=0,25<=D)throw Error(o(301));D+=1,Ei=Hi=null,c.updateQueue=null,zm.current=GU,u=v(M,T)}while(vh)}if(zm.current=Xm,c=Hi!==null&&Hi.next!==null,mc=0,Ei=Hi=jn=null,Bm=!1,c)throw Error(o(300));return u}function cx(){var u=_h!==0;return _h=0,u}function qo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?jn.memoizedState=Ei=u:Ei=Ei.next=u,Ei}function _o(){if(Hi===null){var u=jn.alternate;u=u!==null?u.memoizedState:null}else u=Hi.next;var c=Ei===null?jn.memoizedState:Ei.next;if(c!==null)Ei=c,Hi=u;else{if(u===null)throw Error(o(310));Hi=u,u={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},Ei===null?jn.memoizedState=Ei=u:Ei=Ei.next=u}return Ei}function Fl(u,c){return typeof c=="function"?c(u):c}function Hm(u){var c=_o(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var M=Hi,T=M.baseQueue,D=v.pending;if(D!==null){if(T!==null){var Z=T.next;T.next=D.next,D.next=Z}M.baseQueue=T=D,v.pending=null}if(T!==null){D=T.next,M=M.baseState;var oe=Z=null,Ce=null,Ye=D;do{var dt=Ye.lane;if((mc&dt)===dt)Ce!==null&&(Ce=Ce.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),M=Ye.hasEagerState?Ye.eagerState:u(M,Ye.action);else{var kt={lane:dt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Ce===null?(oe=Ce=kt,Z=M):Ce=Ce.next=kt,jn.lanes|=dt,vc|=dt}Ye=Ye.next}while(Ye!==null&&Ye!==D);Ce===null?Z=M:Ce.next=oe,po(M,c.memoizedState)||(jr=!0),c.memoizedState=M,c.baseState=Z,c.baseQueue=Ce,v.lastRenderedState=M}if(u=v.interleaved,u!==null){T=u;do D=T.lane,jn.lanes|=D,vc|=D,T=T.next;while(T!==u)}else T===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function Vm(u){var c=_o(),v=c.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var M=v.dispatch,T=v.pending,D=c.memoizedState;if(T!==null){v.pending=null;var Z=T=T.next;do D=u(D,Z.action),Z=Z.next;while(Z!==T);po(D,c.memoizedState)||(jr=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),v.lastRenderedState=D}return[D,M]}function uA(){}function cA(u,c){var v=jn,M=_o(),T=c(),D=!po(M.memoizedState,T);if(D&&(M.memoizedState=T,jr=!0),M=M.queue,xh(dA.bind(null,v,M,u),[u]),M.getSnapshot!==c||D||Ei!==null&&Ei.memoizedState.tag&1){if(v.flags|=2048,yh(9,hA.bind(null,v,M,T,c),void 0,null),ai===null)throw Error(o(349));mc&30||fA(v,c,T)}return T}function fA(u,c,v){u.flags|=16384,u={getSnapshot:c,value:v},c=jn.updateQueue,c===null?(c={lastEffect:null,stores:null},jn.updateQueue=c,c.stores=[u]):(v=c.stores,v===null?c.stores=[u]:v.push(u))}function hA(u,c,v,M){c.value=v,c.getSnapshot=M,pA(c)&&Es(u,1,-1)}function dA(u,c,v){return v(function(){pA(c)&&Es(u,1,-1)})}function pA(u){var c=u.getSnapshot;u=u.value;try{var v=c();return!po(u,v)}catch{return!0}}function fx(u){var c=qo();return typeof u=="function"&&(u=u()),c.memoizedState=c.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:u},c.queue=u,u=u.dispatch=BU.bind(null,jn,u),[c.memoizedState,u]}function yh(u,c,v,M){return u={tag:u,create:c,destroy:v,deps:M,next:null},c=jn.updateQueue,c===null?(c={lastEffect:null,stores:null},jn.updateQueue=c,c.lastEffect=u.next=u):(v=c.lastEffect,v===null?c.lastEffect=u.next=u:(M=v.next,v.next=u,u.next=M,c.lastEffect=u)),u}function mA(){return _o().memoizedState}function Gm(u,c,v,M){var T=qo();jn.flags|=u,T.memoizedState=yh(1|c,v,void 0,M===void 0?null:M)}function Wm(u,c,v,M){var T=_o();M=M===void 0?null:M;var D=void 0;if(Hi!==null){var Z=Hi.memoizedState;if(D=Z.destroy,M!==null&&lx(M,Z.deps)){T.memoizedState=yh(c,v,D,M);return}}jn.flags|=u,T.memoizedState=yh(1|c,v,D,M)}function hx(u,c){return Gm(8390656,8,u,c)}function xh(u,c){return Wm(2048,8,u,c)}function gA(u,c){return Wm(4,2,u,c)}function vA(u,c){return Wm(4,4,u,c)}function _A(u,c){if(typeof c=="function")return u=u(),c(u),function(){c(null)};if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function yA(u,c,v){return v=v!=null?v.concat([u]):null,Wm(4,4,_A.bind(null,c,u),v)}function dx(){}function xA(u,c){var v=_o();c=c===void 0?null:c;var M=v.memoizedState;return M!==null&&c!==null&&lx(c,M[1])?M[0]:(v.memoizedState=[u,c],u)}function SA(u,c){var v=_o();c=c===void 0?null:c;var M=v.memoizedState;return M!==null&&c!==null&&lx(c,M[1])?M[0]:(u=u(),v.memoizedState=[u,c],u)}function FU(u,c){var v=cn;cn=v!==0&&4>v?v:4,u(!0);var M=Ms.transition;Ms.transition={};try{u(!1),c()}finally{cn=v,Ms.transition=M}}function wA(){return _o().memoizedState}function zU(u,c,v){var M=Ia(u);v={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null},MA(u)?EA(c,v):(TA(u,c,v),v=or(),u=Es(u,M,v),u!==null&&AA(u,c,M))}function BU(u,c,v){var M=Ia(u),T={lane:M,action:v,hasEagerState:!1,eagerState:null,next:null};if(MA(u))EA(c,T);else{TA(u,c,T);var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var Z=c.lastRenderedState,oe=D(Z,v);if(T.hasEagerState=!0,T.eagerState=oe,po(oe,Z))return}catch{}finally{}v=or(),u=Es(u,M,v),u!==null&&AA(u,c,M)}}function MA(u){var c=u.alternate;return u===jn||c!==null&&c===jn}function EA(u,c){vh=Bm=!0;var v=u.pending;v===null?c.next=c:(c.next=v.next,v.next=c),u.pending=c}function TA(u,c,v){ai!==null&&u.mode&1&&!(qt&2)?(u=c.interleaved,u===null?(v.next=v,go===null?go=[c]:go.push(c)):(v.next=u.next,u.next=v),c.interleaved=v):(u=c.pending,u===null?v.next=v:(v.next=u.next,u.next=v),c.pending=v)}function AA(u,c,v){if(v&4194240){var M=c.lanes;M&=u.pendingLanes,v|=M,c.lanes=v,Hy(u,v)}}var Xm={readContext:ys,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},HU={readContext:ys,useCallback:function(u,c){return qo().memoizedState=[u,c===void 0?null:c],u},useContext:ys,useEffect:hx,useImperativeHandle:function(u,c,v){return v=v!=null?v.concat([u]):null,Gm(4194308,4,_A.bind(null,c,u),v)},useLayoutEffect:function(u,c){return Gm(4194308,4,u,c)},useInsertionEffect:function(u,c){return Gm(4,2,u,c)},useMemo:function(u,c){var v=qo();return c=c===void 0?null:c,u=u(),v.memoizedState=[u,c],u},useReducer:function(u,c,v){var M=qo();return c=v!==void 0?v(c):c,M.memoizedState=M.baseState=c,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:c},M.queue=u,u=u.dispatch=zU.bind(null,jn,u),[M.memoizedState,u]},useRef:function(u){var c=qo();return u={current:u},c.memoizedState=u},useState:fx,useDebugValue:dx,useDeferredValue:function(u){var c=fx(u),v=c[0],M=c[1];return hx(function(){var T=Ms.transition;Ms.transition={};try{M(u)}finally{Ms.transition=T}},[u]),v},useTransition:function(){var u=fx(!1),c=u[0];return u=FU.bind(null,u[1]),qo().memoizedState=u,[c,u]},useMutableSource:function(){},useSyncExternalStore:function(u,c,v){var M=jn,T=qo();if(On){if(v===void 0)throw Error(o(407));v=v()}else{if(v=c(),ai===null)throw Error(o(349));mc&30||fA(M,c,v)}T.memoizedState=v;var D={value:v,getSnapshot:c};return T.queue=D,hx(dA.bind(null,M,D,u),[u]),M.flags|=2048,yh(9,hA.bind(null,M,D,v,c),void 0,null),v},useId:function(){var u=qo(),c=ai.identifierPrefix;if(On){var v=Yo,M=Xo;v=(M&~(1<<32-Tn(M)-1)).toString(32)+v,c=":"+c+"R"+v,v=_h++,0<v&&(c+="H"+v.toString(32)),c+=":"}else v=kU++,c=":"+c+"r"+v.toString(32)+":";return u.memoizedState=c},unstable_isNewReconciler:!1},VU={readContext:ys,useCallback:xA,useContext:ys,useEffect:xh,useImperativeHandle:yA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:SA,useReducer:Hm,useRef:mA,useState:function(){return Hm(Fl)},useDebugValue:dx,useDeferredValue:function(u){var c=Hm(Fl),v=c[0],M=c[1];return xh(function(){var T=Ms.transition;Ms.transition={};try{M(u)}finally{Ms.transition=T}},[u]),v},useTransition:function(){var u=Hm(Fl)[0],c=_o().memoizedState;return[u,c]},useMutableSource:uA,useSyncExternalStore:cA,useId:wA,unstable_isNewReconciler:!1},GU={readContext:ys,useCallback:xA,useContext:ys,useEffect:xh,useImperativeHandle:yA,useInsertionEffect:gA,useLayoutEffect:vA,useMemo:SA,useReducer:Vm,useRef:mA,useState:function(){return Vm(Fl)},useDebugValue:dx,useDeferredValue:function(u){var c=Vm(Fl),v=c[0],M=c[1];return xh(function(){var T=Ms.transition;Ms.transition={};try{M(u)}finally{Ms.transition=T}},[u]),v},useTransition:function(){var u=Vm(Fl)[0],c=_o().memoizedState;return[u,c]},useMutableSource:uA,useSyncExternalStore:cA,useId:wA,unstable_isNewReconciler:!1};function px(u,c){try{var v="",M=c;do v+=UU(M),M=M.return;while(M);var T=v}catch(D){T=`
Error generating stack: `+D.message+`
`+D.stack}return{value:u,source:c,stack:T}}function mx(u,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var WU=typeof WeakMap=="function"?WeakMap:Map;function CA(u,c,v){v=Wo(-1,v),v.tag=3,v.payload={element:null};var M=c.value;return v.callback=function(){ag||(ag=!0,Dx=M),mx(u,c)},v}function bA(u,c,v){v=Wo(-1,v),v.tag=3;var M=u.type.getDerivedStateFromError;if(typeof M=="function"){var T=c.value;v.payload=function(){return M(T)},v.callback=function(){mx(u,c)}}var D=u.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(v.callback=function(){mx(u,c),typeof M!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var Z=c.stack;this.componentDidCatch(c.value,{componentStack:Z!==null?Z:""})}),v}function RA(u,c,v){var M=u.pingCache;if(M===null){M=u.pingCache=new WU;var T=new Set;M.set(c,T)}else T=M.get(c),T===void 0&&(T=new Set,M.set(c,T));T.has(v)||(T.add(v),u=rk.bind(null,u,c,v),c.then(u,u))}function PA(u){do{var c;if((c=u.tag===13)&&(c=u.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return u;u=u.return}while(u!==null);return null}function IA(u,c,v,M,T){return u.mode&1?(u.flags|=65536,u.lanes=T,u):(u===c?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(c=Wo(-1,1),c.tag=2,ba(v,c))),v.lanes|=1),u)}function yo(u){u.flags|=4}function LA(u,c){if(u!==null&&u.child===c.child)return!0;if(c.flags&16)return!1;for(u=c.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Sh,wh,Ym,qm;if(ut)Sh=function(u,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)Se(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},wh=function(){},Ym=function(u,c,v,M,T){if(u=u.memoizedProps,u!==M){var D=c.stateNode,Z=vo(ws.current);v=ue(D,v,u,M,T,Z),(c.updateQueue=v)&&yo(c)}},qm=function(u,c,v,M){v!==M&&yo(c)};else if(G){Sh=function(u,c,v,M){for(var T=c.child;T!==null;){if(T.tag===5){var D=T.stateNode;v&&M&&(D=_t(D,T.type,T.memoizedProps,T)),Se(u,D)}else if(T.tag===6)D=T.stateNode,v&&M&&(D=st(D,T.memoizedProps,T)),Se(u,D);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)D=T.child,D!==null&&(D.return=T),Sh(u,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var DA=function(u,c,v,M){for(var T=c.child;T!==null;){if(T.tag===5){var D=T.stateNode;v&&M&&(D=_t(D,T.type,T.memoizedProps,T)),zt(u,D)}else if(T.tag===6)D=T.stateNode,v&&M&&(D=st(D,T.memoizedProps,T)),zt(u,D);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)D=T.child,D!==null&&(D.return=T),DA(u,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};wh=function(u,c){var v=c.stateNode;if(!LA(u,c)){u=v.containerInfo;var M=At(u);DA(M,c,!1,!1),v.pendingChildren=M,yo(c),Qt(u,M)}},Ym=function(u,c,v,M,T){var D=u.stateNode,Z=u.memoizedProps;if((u=LA(u,c))&&Z===M)c.stateNode=D;else{var oe=c.stateNode,Ce=vo(ws.current),Ye=null;Z!==M&&(Ye=ue(oe,v,Z,M,T,Ce)),u&&Ye===null?c.stateNode=D:(D=ct(D,Ye,v,Z,M,c,u,oe),Fe(D,v,M,T,Ce)&&yo(c),c.stateNode=D,u?yo(c):Sh(D,c,!1,!1))}},qm=function(u,c,v,M){v!==M?(u=vo(dc.current),v=vo(ws.current),c.stateNode=Te(M,u,v,c),yo(c)):c.stateNode=u.stateNode}}else wh=function(){},Ym=function(){},qm=function(){};function Mh(u,c){if(!On)switch(u.tailMode){case"hidden":c=u.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var M=null;v!==null;)v.alternate!==null&&(M=v),v=v.sibling;M===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:M.sibling=null}}function Gi(u){var c=u.alternate!==null&&u.alternate.child===u.child,v=0,M=0;if(c)for(var T=u.child;T!==null;)v|=T.lanes|T.childLanes,M|=T.subtreeFlags&14680064,M|=T.flags&14680064,T.return=u,T=T.sibling;else for(T=u.child;T!==null;)v|=T.lanes|T.childLanes,M|=T.subtreeFlags,M|=T.flags,T.return=u,T=T.sibling;return u.subtreeFlags|=M,u.childLanes=v,c}function XU(u,c,v){var M=c.pendingProps;switch(ex(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(c),null;case 1:return Nn(c.type)&&Kt(),Gi(c),null;case 3:return M=c.stateNode,pc(),Ze(Pt),Ze(Mt),ax(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(u===null||u.child===null)&&(dh(c)?yo(c):u===null||u.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,Xs!==null&&(Ux(Xs),Xs=null))),wh(u,c),Gi(c),null;case 5:sx(c),v=vo(dc.current);var T=c.type;if(u!==null&&c.stateNode!=null)Ym(u,c,T,M,v),u.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!M){if(c.stateNode===null)throw Error(o(166));return Gi(c),null}if(u=vo(ws.current),dh(c)){if(!ve)throw Error(o(175));u=N(c.stateNode,c.type,c.memoizedProps,v,u,c,!hh),c.updateQueue=u,u!==null&&yo(c)}else{var D=ce(T,M,v,u,c);Sh(D,c,!1,!1),c.stateNode=D,Fe(D,T,M,v,u)&&yo(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Gi(c),null;case 6:if(u&&c.stateNode!=null)qm(u,c,u.memoizedProps,M);else{if(typeof M!="string"&&c.stateNode===null)throw Error(o(166));if(u=vo(dc.current),v=vo(ws.current),dh(c)){if(!ve)throw Error(o(176));if(u=c.stateNode,M=c.memoizedProps,(v=z(u,M,c,!hh))&&(T=Yr,T!==null))switch(D=(T.mode&1)!==0,T.tag){case 3:de(T.stateNode.containerInfo,u,M,D);break;case 5:me(T.type,T.memoizedProps,T.stateNode,u,M,D)}v&&yo(c)}else c.stateNode=Te(M,u,v,c)}return Gi(c),null;case 13:if(Ze(zn),M=c.memoizedState,On&&qr!==null&&c.mode&1&&!(c.flags&128)){for(u=qr;u;)u=Nt(u);return fc(),c.flags|=98560,c}if(M!==null&&M.dehydrated!==null){if(M=dh(c),u===null){if(!M)throw Error(o(318));if(!ve)throw Error(o(344));if(u=c.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));ee(u,c)}else fc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Gi(c),null}return Xs!==null&&(Ux(Xs),Xs=null),c.flags&128?(c.lanes=v,c):(M=M!==null,v=!1,u===null?dh(c):v=u.memoizedState!==null,M&&!v&&(c.child.flags|=8192,c.mode&1&&(u===null||zn.current&1?mi===0&&(mi=3):Fx())),c.updateQueue!==null&&(c.flags|=4),Gi(c),null);case 4:return pc(),wh(u,c),u===null&&He(c.stateNode.containerInfo),Gi(c),null;case 10:return jy(c.type._context),Gi(c),null;case 17:return Nn(c.type)&&Kt(),Gi(c),null;case 19:if(Ze(zn),T=c.memoizedState,T===null)return Gi(c),null;if(M=(c.flags&128)!==0,D=T.rendering,D===null)if(M)Mh(T,!1);else{if(mi!==0||u!==null&&u.flags&128)for(u=c.child;u!==null;){if(D=Fm(u),D!==null){for(c.flags|=128,Mh(T,!1),u=D.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),c.subtreeFlags=0,u=v,M=c.child;M!==null;)v=M,T=u,v.flags&=14680066,D=v.alternate,D===null?(v.childLanes=0,v.lanes=T,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=D.childLanes,v.lanes=D.lanes,v.child=D.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=D.memoizedProps,v.memoizedState=D.memoizedState,v.updateQueue=D.updateQueue,v.type=D.type,T=D.dependencies,v.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),M=M.sibling;return Oe(zn,zn.current&1|2),c.child}u=u.sibling}T.tail!==null&&Mi()>Lx&&(c.flags|=128,M=!0,Mh(T,!1),c.lanes=4194304)}else{if(!M)if(u=Fm(D),u!==null){if(c.flags|=128,M=!0,u=u.updateQueue,u!==null&&(c.updateQueue=u,c.flags|=4),Mh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!D.alternate&&!On)return Gi(c),null}else 2*Mi()-T.renderingStartTime>Lx&&v!==1073741824&&(c.flags|=128,M=!0,Mh(T,!1),c.lanes=4194304);T.isBackwards?(D.sibling=c.child,c.child=D):(u=T.last,u!==null?u.sibling=D:c.child=D,T.last=D)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=Mi(),c.sibling=null,u=zn.current,Oe(zn,M?u&1|2:u&1),c):(Gi(c),null);case 22:case 23:return kx(),M=c.memoizedState!==null,u!==null&&u.memoizedState!==null!==M&&(c.flags|=8192),M&&c.mode&1?Zr&1073741824&&(Gi(c),ut&&c.subtreeFlags&6&&(c.flags|=8192)):Gi(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var YU=a.ReactCurrentOwner,jr=!1;function sr(u,c,v,M){c.child=u===null?aA(c,null,v,M):hc(c,u.child,v,M)}function NA(u,c,v,M,T){v=v.render;var D=c.ref;return lc(c,T),M=ux(u,c,v,M,D,T),v=cx(),u!==null&&!jr?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~T,jo(u,c,T)):(On&&v&&Qy(c),c.flags|=1,sr(u,c,M,T),c.child)}function OA(u,c,v,M,T){if(u===null){var D=v.type;return typeof D=="function"&&!zx(D)&&D.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(c.tag=15,c.type=D,UA(u,c,D,M,T)):(u=pg(v.type,null,M,c,c.mode,T),u.ref=c.ref,u.return=c,c.child=u)}if(D=u.child,!(u.lanes&T)){var Z=D.memoizedProps;if(v=v.compare,v=v!==null?v:Rm,v(Z,M)&&u.ref===c.ref)return jo(u,c,T)}return c.flags|=1,u=Da(D,M),u.ref=c.ref,u.return=c,c.child=u}function UA(u,c,v,M,T){if(u!==null&&Rm(u.memoizedProps,M)&&u.ref===c.ref)if(jr=!1,(u.lanes&T)!==0)u.flags&131072&&(jr=!0);else return c.lanes=u.lanes,jo(u,c,T);return gx(u,c,v,M,T)}function kA(u,c,v){var M=c.pendingProps,T=M.children,D=u!==null?u.memoizedState:null;if(M.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},Oe(gc,Zr),Zr|=v;else if(v&1073741824)c.memoizedState={baseLanes:0,cachePool:null},M=D!==null?D.baseLanes:v,Oe(gc,Zr),Zr|=M;else return u=D!==null?D.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:u,cachePool:null},c.updateQueue=null,Oe(gc,Zr),Zr|=u,null;else D!==null?(M=D.baseLanes|v,c.memoizedState=null):M=v,Oe(gc,Zr),Zr|=M;return sr(u,c,T,v),c.child}function FA(u,c){var v=c.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function gx(u,c,v,M,T){var D=Nn(v)?on:Mt.current;return D=gn(c,D),lc(c,T),v=ux(u,c,v,M,D,T),M=cx(),u!==null&&!jr?(c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~T,jo(u,c,T)):(On&&M&&Qy(c),c.flags|=1,sr(u,c,v,T),c.child)}function zA(u,c,v,M,T){if(Nn(v)){var D=!0;Bt(c)}else D=!1;if(lc(c,T),c.stateNode===null)u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),QT(c,v,M),Jy(c,v,M,T),M=!0;else if(u===null){var Z=c.stateNode,oe=c.memoizedProps;Z.props=oe;var Ce=Z.context,Ye=v.contextType;typeof Ye=="object"&&Ye!==null?Ye=ys(Ye):(Ye=Nn(v)?on:Mt.current,Ye=gn(c,Ye));var dt=v.getDerivedStateFromProps,kt=typeof dt=="function"||typeof Z.getSnapshotBeforeUpdate=="function";kt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(oe!==M||Ce!==Ye)&&eA(c,Z,M,Ye),Ca=!1;var It=c.memoizedState;Z.state=It,Dm(c,M,Z,T),Ce=c.memoizedState,oe!==M||It!==Ce||Pt.current||Ca?(typeof dt=="function"&&($y(c,v,dt,M),Ce=c.memoizedState),(oe=Ca||JT(c,v,oe,M,It,Ce,Ye))?(kt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=M,c.memoizedState=Ce),Z.props=M,Z.state=Ce,Z.context=Ye,M=oe):(typeof Z.componentDidMount=="function"&&(c.flags|=4194308),M=!1)}else{Z=c.stateNode,jT(u,c),oe=c.memoizedProps,Ye=c.type===c.elementType?oe:Ws(c.type,oe),Z.props=Ye,kt=c.pendingProps,It=Z.context,Ce=v.contextType,typeof Ce=="object"&&Ce!==null?Ce=ys(Ce):(Ce=Nn(v)?on:Mt.current,Ce=gn(c,Ce));var wn=v.getDerivedStateFromProps;(dt=typeof wn=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(oe!==kt||It!==Ce)&&eA(c,Z,M,Ce),Ca=!1,It=c.memoizedState,Z.state=It,Dm(c,M,Z,T);var Tt=c.memoizedState;oe!==kt||It!==Tt||Pt.current||Ca?(typeof wn=="function"&&($y(c,v,wn,M),Tt=c.memoizedState),(Ye=Ca||JT(c,v,Ye,M,It,Tt,Ce)||!1)?(dt||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(M,Tt,Ce),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(M,Tt,Ce)),typeof Z.componentDidUpdate=="function"&&(c.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Z.componentDidUpdate!="function"||oe===u.memoizedProps&&It===u.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&It===u.memoizedState||(c.flags|=1024),c.memoizedProps=M,c.memoizedState=Tt),Z.props=M,Z.state=Tt,Z.context=Ce,M=Ye):(typeof Z.componentDidUpdate!="function"||oe===u.memoizedProps&&It===u.memoizedState||(c.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||oe===u.memoizedProps&&It===u.memoizedState||(c.flags|=1024),M=!1)}return vx(u,c,v,M,D,T)}function vx(u,c,v,M,T,D){FA(u,c);var Z=(c.flags&128)!==0;if(!M&&!Z)return T&&tn(c,v,!1),jo(u,c,D);M=c.stateNode,YU.current=c;var oe=Z&&typeof v.getDerivedStateFromError!="function"?null:M.render();return c.flags|=1,u!==null&&Z?(c.child=hc(c,u.child,null,D),c.child=hc(c,null,oe,D)):sr(u,c,oe,D),c.memoizedState=M.state,T&&tn(c,v,!0),c.child}function BA(u){var c=u.stateNode;c.pendingContext?Yt(u,c.pendingContext,c.pendingContext!==c.context):c.context&&Yt(u,c.context,!1),rx(u,c.containerInfo)}function HA(u,c,v,M,T){return fc(),ix(T),c.flags|=256,sr(u,c,v,M),c.child}var jm={dehydrated:null,treeContext:null,retryLane:0};function Zm(u){return{baseLanes:u,cachePool:null}}function VA(u,c,v){var M=c.pendingProps,T=zn.current,D=!1,Z=(c.flags&128)!==0,oe;if((oe=Z)||(oe=u!==null&&u.memoizedState===null?!1:(T&2)!==0),oe?(D=!0,c.flags&=-129):(u===null||u.memoizedState!==null)&&(T|=1),Oe(zn,T&1),u===null)return nx(c),u=c.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(c.mode&1?Rt(u)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(T=M.children,u=M.fallback,D?(M=c.mode,D=c.child,T={mode:"hidden",children:T},!(M&1)&&D!==null?(D.childLanes=0,D.pendingProps=T):D=mg(T,M,0,null),u=Wl(u,M,v,null),D.return=c,u.return=c,D.sibling=u,c.child=D,c.child.memoizedState=Zm(v),c.memoizedState=jm,u):_x(c,T));if(T=u.memoizedState,T!==null){if(oe=T.dehydrated,oe!==null){if(Z)return c.flags&256?(c.flags&=-257,Km(u,c,v,Error(o(422)))):c.memoizedState!==null?(c.child=u.child,c.flags|=128,null):(D=M.fallback,T=c.mode,M=mg({mode:"visible",children:M.children},T,0,null),D=Wl(D,T,v,null),D.flags|=2,M.return=c,D.return=c,M.sibling=D,c.child=M,c.mode&1&&hc(c,u.child,null,v),c.child.memoizedState=Zm(v),c.memoizedState=jm,D);if(!(c.mode&1))c=Km(u,c,v,null);else if(Rt(oe))c=Km(u,c,v,Error(o(419)));else if(M=(v&u.childLanes)!==0,jr||M){if(M=ai,M!==null){switch(v&-v){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}M=D&(M.suspendedLanes|v)?0:D,M!==0&&M!==T.retryLane&&(T.retryLane=M,Es(u,M,-1))}Fx(),c=Km(u,c,v,Error(o(421)))}else yt(oe)?(c.flags|=128,c.child=u.child,c=sk.bind(null,u),pn(oe,c),c=null):(v=T.treeContext,ve&&(qr=yn(oe),Yr=c,On=!0,Xs=null,hh=!1,v!==null&&(xs[Ss++]=Xo,xs[Ss++]=Yo,xs[Ss++]=Ul,Xo=v.id,Yo=v.overflow,Ul=c)),c=_x(c,c.pendingProps.children),c.flags|=4096);return c}return D?(M=WA(u,c,M.children,M.fallback,v),D=c.child,T=u.child.memoizedState,D.memoizedState=T===null?Zm(v):{baseLanes:T.baseLanes|v,cachePool:null},D.childLanes=u.childLanes&~v,c.memoizedState=jm,M):(v=GA(u,c,M.children,v),c.memoizedState=null,v)}return D?(M=WA(u,c,M.children,M.fallback,v),D=c.child,T=u.child.memoizedState,D.memoizedState=T===null?Zm(v):{baseLanes:T.baseLanes|v,cachePool:null},D.childLanes=u.childLanes&~v,c.memoizedState=jm,M):(v=GA(u,c,M.children,v),c.memoizedState=null,v)}function _x(u,c){return c=mg({mode:"visible",children:c},u.mode,0,null),c.return=u,u.child=c}function GA(u,c,v,M){var T=u.child;return u=T.sibling,v=Da(T,{mode:"visible",children:v}),!(c.mode&1)&&(v.lanes=M),v.return=c,v.sibling=null,u!==null&&(M=c.deletions,M===null?(c.deletions=[u],c.flags|=16):M.push(u)),c.child=v}function WA(u,c,v,M,T){var D=c.mode;u=u.child;var Z=u.sibling,oe={mode:"hidden",children:v};return!(D&1)&&c.child!==u?(v=c.child,v.childLanes=0,v.pendingProps=oe,c.deletions=null):(v=Da(u,oe),v.subtreeFlags=u.subtreeFlags&14680064),Z!==null?M=Da(Z,M):(M=Wl(M,D,T,null),M.flags|=2),M.return=c,v.return=c,v.sibling=M,c.child=v,M}function Km(u,c,v,M){return M!==null&&ix(M),hc(c,u.child,null,v),u=_x(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function XA(u,c,v){u.lanes|=c;var M=u.alternate;M!==null&&(M.lanes|=c),Zy(u.return,c,v)}function yx(u,c,v,M,T){var D=u.memoizedState;D===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:M,tail:v,tailMode:T}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=M,D.tail=v,D.tailMode=T)}function YA(u,c,v){var M=c.pendingProps,T=M.revealOrder,D=M.tail;if(sr(u,c,M.children,v),M=zn.current,M&2)M=M&1|2,c.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&XA(u,v,c);else if(u.tag===19)XA(u,v,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}M&=1}if(Oe(zn,M),!(c.mode&1))c.memoizedState=null;else switch(T){case"forwards":for(v=c.child,T=null;v!==null;)u=v.alternate,u!==null&&Fm(u)===null&&(T=v),v=v.sibling;v=T,v===null?(T=c.child,c.child=null):(T=v.sibling,v.sibling=null),yx(c,!1,T,v,D);break;case"backwards":for(v=null,T=c.child,c.child=null;T!==null;){if(u=T.alternate,u!==null&&Fm(u)===null){c.child=T;break}u=T.sibling,T.sibling=v,v=T,T=u}yx(c,!0,v,null,D);break;case"together":yx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jo(u,c,v){if(u!==null&&(c.dependencies=u.dependencies),vc|=c.lanes,!(v&c.childLanes))return null;if(u!==null&&c.child!==u.child)throw Error(o(153));if(c.child!==null){for(u=c.child,v=Da(u,u.pendingProps),c.child=v,v.return=c;u.sibling!==null;)u=u.sibling,v=v.sibling=Da(u,u.pendingProps),v.return=c;v.sibling=null}return c.child}function qU(u,c,v){switch(c.tag){case 3:BA(c),fc();break;case 5:lA(c);break;case 1:Nn(c.type)&&Bt(c);break;case 4:rx(c,c.stateNode.containerInfo);break;case 10:qT(c,c.type._context,c.memoizedProps.value);break;case 13:var M=c.memoizedState;if(M!==null)return M.dehydrated!==null?(Oe(zn,zn.current&1),c.flags|=128,null):v&c.child.childLanes?VA(u,c,v):(Oe(zn,zn.current&1),u=jo(u,c,v),u!==null?u.sibling:null);Oe(zn,zn.current&1);break;case 19:if(M=(v&c.childLanes)!==0,u.flags&128){if(M)return YA(u,c,v);c.flags|=128}var T=c.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Oe(zn,zn.current),M)break;return null;case 22:case 23:return c.lanes=0,kA(u,c,v)}return jo(u,c,v)}function jU(u,c){switch(ex(c),c.tag){case 1:return Nn(c.type)&&Kt(),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return pc(),Ze(Pt),Ze(Mt),ax(),u=c.flags,u&65536&&!(u&128)?(c.flags=u&-65537|128,c):null;case 5:return sx(c),null;case 13:if(Ze(zn),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(o(340));fc()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return Ze(zn),null;case 4:return pc(),null;case 10:return jy(c.type._context),null;case 22:case 23:return kx(),null;case 24:return null;default:return null}}var $m=!1,zl=!1,ZU=typeof WeakSet=="function"?WeakSet:Set,tt=null;function Jm(u,c){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(M){Cr(u,c,M)}else v.current=null}function xx(u,c,v){try{v()}catch(M){Cr(u,c,M)}}var qA=!1;function KU(u,c){for(te(u.containerInfo),tt=c;tt!==null;)if(u=tt,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,tt=c;else for(;tt!==null;){u=tt;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var M=v.memoizedProps,T=v.memoizedState,D=u.stateNode,Z=D.getSnapshotBeforeUpdate(u.elementType===u.type?M:Ws(u.type,M),T);D.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:ut&&Be(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(oe){Cr(u,u.return,oe)}if(c=u.sibling,c!==null){c.return=u.return,tt=c;break}tt=u.return}return v=qA,qA=!1,v}function Bl(u,c,v){var M=c.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var T=M=M.next;do{if((T.tag&u)===u){var D=T.destroy;T.destroy=void 0,D!==void 0&&xx(c,v,D)}T=T.next}while(T!==M)}}function Eh(u,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var v=c=c.next;do{if((v.tag&u)===u){var M=v.create;v.destroy=M()}v=v.next}while(v!==c)}}function Sx(u){var c=u.ref;if(c!==null){var v=u.stateNode;switch(u.tag){case 5:u=K(v);break;default:u=v}typeof c=="function"?c(u):c.current=u}}function jA(u,c,v){if(ho&&typeof ho.onCommitFiberUnmount=="function")try{ho.onCommitFiberUnmount(Cm,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(u=c.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var M=u=u.next;do{var T=M,D=T.destroy;T=T.tag,D!==void 0&&(T&2||T&4)&&xx(c,v,D),M=M.next}while(M!==u)}break;case 1:if(Jm(c,v),u=c.stateNode,typeof u.componentWillUnmount=="function")try{u.props=c.memoizedProps,u.state=c.memoizedState,u.componentWillUnmount()}catch(Z){Cr(c,v,Z)}break;case 5:Jm(c,v);break;case 4:ut?eC(u,c,v):G&&G&&(c=c.stateNode.containerInfo,v=At(c),Ot(c,v))}}function ZA(u,c,v){for(var M=c;;)if(jA(u,M,v),M.child===null||ut&&M.tag===4){if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function KA(u){var c=u.alternate;c!==null&&(u.alternate=null,KA(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&se(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function $A(u){return u.tag===5||u.tag===3||u.tag===4}function JA(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||$A(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function QA(u){if(ut){e:{for(var c=u.return;c!==null;){if($A(c))break e;c=c.return}throw Error(o(160))}var v=c;switch(v.tag){case 5:c=v.stateNode,v.flags&32&&(Ve(c),v.flags&=-33),v=JA(u),Mx(u,v,c);break;case 3:case 4:c=v.stateNode.containerInfo,v=JA(u),wx(u,v,c);break;default:throw Error(o(161))}}}function wx(u,c,v){var M=u.tag;if(M===5||M===6)u=u.stateNode,c?We(v,u,c):gt(v,u);else if(M!==4&&(u=u.child,u!==null))for(wx(u,c,v),u=u.sibling;u!==null;)wx(u,c,v),u=u.sibling}function Mx(u,c,v){var M=u.tag;if(M===5||M===6)u=u.stateNode,c?wt(v,u,c):qe(v,u);else if(M!==4&&(u=u.child,u!==null))for(Mx(u,c,v),u=u.sibling;u!==null;)Mx(u,c,v),u=u.sibling}function eC(u,c,v){for(var M=c,T=!1,D,Z;;){if(!T){T=M.return;e:for(;;){if(T===null)throw Error(o(160));switch(D=T.stateNode,T.tag){case 5:Z=!1;break e;case 3:D=D.containerInfo,Z=!0;break e;case 4:D=D.containerInfo,Z=!0;break e}T=T.return}T=!0}if(M.tag===5||M.tag===6)ZA(u,M,v),Z?we(D,M.stateNode):ie(D,M.stateNode);else if(M.tag===18)Z?q(D,M.stateNode):$(D,M.stateNode);else if(M.tag===4){if(M.child!==null){D=M.stateNode.containerInfo,Z=!0,M.child.return=M,M=M.child;continue}}else if(jA(u,M,v),M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return,M.tag===4&&(T=!1)}M.sibling.return=M.return,M=M.sibling}}function Ex(u,c){if(ut){switch(c.tag){case 0:case 11:case 14:case 15:Bl(3,c,c.return),Eh(3,c),Bl(5,c,c.return);return;case 1:return;case 5:var v=c.stateNode;if(v!=null){var M=c.memoizedProps;u=u!==null?u.memoizedProps:M;var T=c.type,D=c.updateQueue;c.updateQueue=null,D!==null&&St(v,D,T,u,M,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));v=c.memoizedProps,ke(c.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&H(c.stateNode.containerInfo);return;case 12:return;case 13:Qm(c);return;case 19:Qm(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:Bl(3,c,c.return),Eh(3,c),Bl(5,c,c.return);return;case 12:return;case 13:Qm(c);return;case 19:Qm(c);return;case 3:ve&&u!==null&&u.memoizedState.isDehydrated&&H(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(G){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,Ot(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function Qm(u){var c=u.updateQueue;if(c!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new ZU),c.forEach(function(M){var T=ok.bind(null,u,M);v.has(M)||(v.add(M),M.then(T,T))})}}function $U(u,c){for(tt=c;tt!==null;){c=tt;var v=c.deletions;if(v!==null)for(var M=0;M<v.length;M++){var T=v[M];try{var D=u;ut?eC(D,T,c):ZA(D,T,c);var Z=T.alternate;Z!==null&&(Z.return=null),T.return=null}catch(Et){Cr(T,c,Et)}}if(v=c.child,c.subtreeFlags&12854&&v!==null)v.return=c,tt=v;else for(;tt!==null;){c=tt;try{var oe=c.flags;if(oe&32&&ut&&Ve(c.stateNode),oe&512){var Ce=c.alternate;if(Ce!==null){var Ye=Ce.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}if(oe&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var dt=c.alternate;(dt===null||dt.memoizedState===null)&&(Ix=Mi())}break;case 22:var kt=c.memoizedState!==null,It=c.alternate,wn=It!==null&&It.memoizedState!==null;if(v=c,ut){e:if(M=v,T=kt,D=null,ut)for(var Tt=M;;){if(Tt.tag===5){if(D===null){D=Tt;var Wi=Tt.stateNode;T?Q(Wi):re(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(D===null){var As=Tt.stateNode;T?ge(As):xe(As,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===M)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===M)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===M)break e;D===Tt&&(D=null),Tt=Tt.return}D===Tt&&(D=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(kt&&!wn&&v.mode&1){tt=v;for(var pe=v.child;pe!==null;){for(v=tt=pe;tt!==null;){M=tt;var le=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Bl(4,M,M.return);break;case 1:Jm(M,M.return);var ye=M.stateNode;if(typeof ye.componentWillUnmount=="function"){var it=M.return;try{ye.props=M.memoizedProps,ye.state=M.memoizedState,ye.componentWillUnmount()}catch(Et){Cr(M,it,Et)}}break;case 5:Jm(M,M.return);break;case 22:if(M.memoizedState!==null){iC(v);continue}}le!==null?(le.return=M,tt=le):iC(v)}pe=pe.sibling}}}switch(oe&4102){case 2:QA(c),c.flags&=-3;break;case 6:QA(c),c.flags&=-3,Ex(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,Ex(c.alternate,c);break;case 4:Ex(c.alternate,c)}}catch(Et){Cr(c,c.return,Et)}if(v=c.sibling,v!==null){v.return=c.return,tt=v;break}tt=c.return}}}function JU(u,c,v){tt=u,tC(u)}function tC(u,c,v){for(var M=(u.mode&1)!==0;tt!==null;){var T=tt,D=T.child;if(T.tag===22&&M){var Z=T.memoizedState!==null||$m;if(!Z){var oe=T.alternate,Ce=oe!==null&&oe.memoizedState!==null||zl;oe=$m;var Ye=zl;if($m=Z,(zl=Ce)&&!Ye)for(tt=T;tt!==null;)Z=tt,Ce=Z.child,Z.tag===22&&Z.memoizedState!==null?rC(T):Ce!==null?(Ce.return=Z,tt=Ce):rC(T);for(;D!==null;)tt=D,tC(D),D=D.sibling;tt=T,$m=oe,zl=Ye}nC(u)}else T.subtreeFlags&8772&&D!==null?(D.return=T,tt=D):nC(u)}}function nC(u){for(;tt!==null;){var c=tt;if(c.flags&8772){var v=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:zl||Eh(5,c);break;case 1:var M=c.stateNode;if(c.flags&4&&!zl)if(v===null)M.componentDidMount();else{var T=c.elementType===c.type?v.memoizedProps:Ws(c.type,v.memoizedProps);M.componentDidUpdate(T,v.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var D=c.updateQueue;D!==null&&KT(c,D,M);break;case 3:var Z=c.updateQueue;if(Z!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=K(c.child.stateNode);break;case 1:v=c.child.stateNode}KT(c,Z,v)}break;case 5:var oe=c.stateNode;v===null&&c.flags&4&&$e(oe,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(ve&&c.memoizedState===null){var Ce=c.alternate;if(Ce!==null){var Ye=Ce.memoizedState;if(Ye!==null){var dt=Ye.dehydrated;dt!==null&&X(dt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}zl||c.flags&512&&Sx(c)}catch(kt){Cr(c,c.return,kt)}}if(c===u){tt=null;break}if(v=c.sibling,v!==null){v.return=c.return,tt=v;break}tt=c.return}}function iC(u){for(;tt!==null;){var c=tt;if(c===u){tt=null;break}var v=c.sibling;if(v!==null){v.return=c.return,tt=v;break}tt=c.return}}function rC(u){for(;tt!==null;){var c=tt;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{Eh(4,c)}catch(Ce){Cr(c,v,Ce)}break;case 1:var M=c.stateNode;if(typeof M.componentDidMount=="function"){var T=c.return;try{M.componentDidMount()}catch(Ce){Cr(c,T,Ce)}}var D=c.return;try{Sx(c)}catch(Ce){Cr(c,D,Ce)}break;case 5:var Z=c.return;try{Sx(c)}catch(Ce){Cr(c,Z,Ce)}}}catch(Ce){Cr(c,c.return,Ce)}if(c===u){tt=null;break}var oe=c.sibling;if(oe!==null){oe.return=c.return,tt=oe;break}tt=c.return}}var eg=0,tg=1,ng=2,ig=3,rg=4;if(typeof Symbol=="function"&&Symbol.for){var Th=Symbol.for;eg=Th("selector.component"),tg=Th("selector.has_pseudo_class"),ng=Th("selector.role"),ig=Th("selector.test_id"),rg=Th("selector.text")}function Tx(u){var c=Re(u);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if(u=U(u),u===null)throw Error(o(362));return u.stateNode.current}function Ax(u,c){switch(c.$$typeof){case eg:if(u.type===c.value)return!0;break;case tg:e:{c=c.value,u=[u,0];for(var v=0;v<u.length;){var M=u[v++],T=u[v++],D=c[T];if(M.tag!==5||!Le(M)){for(;D!=null&&Ax(M,D);)T++,D=c[T];if(T===c.length){c=!0;break e}else for(M=M.child;M!==null;)u.push(M,T),M=M.sibling}}c=!1}return c;case ng:if(u.tag===5&&Ae(u.stateNode,c.value))return!0;break;case rg:if((u.tag===5||u.tag===6)&&(u=Ie(u),u!==null&&0<=u.indexOf(c.value)))return!0;break;case ig:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Cx(u){switch(u.$$typeof){case eg:return"<"+(P(u.value)||"Unknown")+">";case tg:return":has("+(Cx(u)||"")+")";case ng:return'[role="'+u.value+'"]';case rg:return'"'+u.value+'"';case ig:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function sC(u,c){var v=[];u=[u,0];for(var M=0;M<u.length;){var T=u[M++],D=u[M++],Z=c[D];if(T.tag!==5||!Le(T)){for(;Z!=null&&Ax(T,Z);)D++,Z=c[D];if(D===c.length)v.push(T);else for(T=T.child;T!==null;)u.push(T,D),T=T.sibling}}return v}function bx(u,c){if(!j)throw Error(o(363));u=Tx(u),u=sC(u,c),c=[],u=Array.from(u);for(var v=0;v<u.length;){var M=u[v++];if(M.tag===5)Le(M)||c.push(M.stateNode);else for(M=M.child;M!==null;)u.push(M),M=M.sibling}return c}var QU=Math.ceil,sg=a.ReactCurrentDispatcher,Rx=a.ReactCurrentOwner,ei=a.ReactCurrentBatchConfig,qt=0,ai=null,li=null,Ni=0,Zr=0,gc=Ct(0),mi=0,Ah=null,vc=0,og=0,Px=0,Ch=null,Tr=null,Ix=0,Lx=1/0;function _c(){Lx=Mi()+500}var ag=!1,Dx=null,Ra=null,lg=!1,Pa=null,ug=0,bh=0,Nx=null,cg=-1,fg=0;function or(){return qt&6?Mi():cg!==-1?cg:cg=Mi()}function Ia(u){return u.mode&1?qt&2&&Ni!==0?Ni&-Ni:OU.transition!==null?(fg===0&&(u=Em,Em<<=1,!(Em&4194240)&&(Em=64),fg=u),fg):(u=cn,u!==0?u:Me()):1}function Es(u,c,v){if(50<bh)throw bh=0,Nx=null,Error(o(185));var M=hg(u,c);return M===null?null:(fh(M,c,v),(!(qt&2)||M!==ai)&&(M===ai&&(!(qt&2)&&(og|=c),mi===4&&La(M,Ni)),Ar(M,v),c===1&&qt===0&&!(u.mode&1)&&(_c(),bm&&mo())),M)}function hg(u,c){u.lanes|=c;var v=u.alternate;for(v!==null&&(v.lanes|=c),v=u,u=u.return;u!==null;)u.childLanes|=c,v=u.alternate,v!==null&&(v.childLanes|=c),v=u,u=u.return;return v.tag===3?v.stateNode:null}function Ar(u,c){var v=u.callbackNode;AU(u,c);var M=Am(u,u===ai?Ni:0);if(M===0)v!==null&&XT(v),u.callbackNode=null,u.callbackPriority=0;else if(c=M&-M,u.callbackPriority!==c){if(v!=null&&XT(v),c===1)u.tag===0?NU(aC.bind(null,u)):YT(aC.bind(null,u)),Ge?Ke(function(){qt===0&&mo()}):Vy(Gy,mo),v=null;else{switch(WT(M)){case 1:v=Gy;break;case 4:v=PU;break;case 16:v=Wy;break;case 536870912:v=IU;break;default:v=Wy}v=gC(v,oC.bind(null,u))}u.callbackPriority=c,u.callbackNode=v}}function oC(u,c){if(cg=-1,fg=0,qt&6)throw Error(o(327));var v=u.callbackNode;if(Gl()&&u.callbackNode!==v)return null;var M=Am(u,u===ai?Ni:0);if(M===0)return null;if(M&30||M&u.expiredLanes||c)c=dg(u,M);else{c=M;var T=qt;qt|=2;var D=cC();(ai!==u||Ni!==c)&&(_c(),Hl(u,c));do try{nk();break}catch(oe){uC(u,oe)}while(1);qy(),sg.current=D,qt=T,li!==null?c=0:(ai=null,Ni=0,c=mi)}if(c!==0){if(c===2&&(T=zy(u),T!==0&&(M=T,c=Ox(u,T))),c===1)throw v=Ah,Hl(u,0),La(u,M),Ar(u,Mi()),v;if(c===6)La(u,M);else{if(T=u.current.alternate,!(M&30)&&!ek(T)&&(c=dg(u,M),c===2&&(D=zy(u),D!==0&&(M=D,c=Ox(u,D))),c===1))throw v=Ah,Hl(u,0),La(u,M),Ar(u,Mi()),v;switch(u.finishedWork=T,u.finishedLanes=M,c){case 0:case 1:throw Error(o(345));case 2:Vl(u,Tr);break;case 3:if(La(u,M),(M&130023424)===M&&(c=Ix+500-Mi(),10<c)){if(Am(u,0)!==0)break;if(T=u.suspendedLanes,(T&M)!==M){or(),u.pingedLanes|=u.suspendedLanes&T;break}u.timeoutHandle=Pe(Vl.bind(null,u,Tr),c);break}Vl(u,Tr);break;case 4:if(La(u,M),(M&4194240)===M)break;for(c=u.eventTimes,T=-1;0<M;){var Z=31-Tn(M);D=1<<Z,Z=c[Z],Z>T&&(T=Z),M&=~D}if(M=T,M=Mi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*QU(M/1960))-M,10<M){u.timeoutHandle=Pe(Vl.bind(null,u,Tr),M);break}Vl(u,Tr);break;case 5:Vl(u,Tr);break;default:throw Error(o(329))}}}return Ar(u,Mi()),u.callbackNode===v?oC.bind(null,u):null}function Ox(u,c){var v=Ch;return u.current.memoizedState.isDehydrated&&(Hl(u,c).flags|=256),u=dg(u,c),u!==2&&(c=Tr,Tr=v,c!==null&&Ux(c)),u}function Ux(u){Tr===null?Tr=u:Tr.push.apply(Tr,u)}function ek(u){for(var c=u;;){if(c.flags&16384){var v=c.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var M=0;M<v.length;M++){var T=v[M],D=T.getSnapshot;T=T.value;try{if(!po(D(),T))return!1}catch{return!1}}}if(v=c.child,c.subtreeFlags&16384&&v!==null)v.return=c,c=v;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function La(u,c){for(c&=~Px,c&=~og,u.suspendedLanes|=c,u.pingedLanes&=~c,u=u.expirationTimes;0<c;){var v=31-Tn(c),M=1<<v;u[v]=-1,c&=~M}}function aC(u){if(qt&6)throw Error(o(327));Gl();var c=Am(u,0);if(!(c&1))return Ar(u,Mi()),null;var v=dg(u,c);if(u.tag!==0&&v===2){var M=zy(u);M!==0&&(c=M,v=Ox(u,M))}if(v===1)throw v=Ah,Hl(u,0),La(u,c),Ar(u,Mi()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=c,Vl(u,Tr),Ar(u,Mi()),null}function lC(u){Pa!==null&&Pa.tag===0&&!(qt&6)&&Gl();var c=qt;qt|=1;var v=ei.transition,M=cn;try{if(ei.transition=null,cn=1,u)return u()}finally{cn=M,ei.transition=v,qt=c,!(qt&6)&&mo()}}function kx(){Zr=gc.current,Ze(gc)}function Hl(u,c){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==ht&&(u.timeoutHandle=ht,Qe(v)),li!==null)for(v=li.return;v!==null;){var M=v;switch(ex(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Kt();break;case 3:pc(),Ze(Pt),Ze(Mt),ax();break;case 5:sx(M);break;case 4:pc();break;case 13:Ze(zn);break;case 19:Ze(zn);break;case 10:jy(M.type._context);break;case 22:case 23:kx()}v=v.return}if(ai=u,li=u=Da(u.current,null),Ni=Zr=c,mi=0,Ah=null,Px=og=vc=0,Tr=Ch=null,go!==null){for(c=0;c<go.length;c++)if(v=go[c],M=v.interleaved,M!==null){v.interleaved=null;var T=M.next,D=v.pending;if(D!==null){var Z=D.next;D.next=T,M.next=Z}v.pending=M}go=null}return u}function uC(u,c){do{var v=li;try{if(qy(),zm.current=Xm,Bm){for(var M=jn.memoizedState;M!==null;){var T=M.queue;T!==null&&(T.pending=null),M=M.next}Bm=!1}if(mc=0,Ei=Hi=jn=null,vh=!1,_h=0,Rx.current=null,v===null||v.return===null){mi=1,Ah=c,li=null;break}e:{var D=u,Z=v.return,oe=v,Ce=c;if(c=Ni,oe.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Ye=Ce,dt=oe,kt=dt.tag;if(!(dt.mode&1)&&(kt===0||kt===11||kt===15)){var It=dt.alternate;It?(dt.updateQueue=It.updateQueue,dt.memoizedState=It.memoizedState,dt.lanes=It.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var wn=PA(Z);if(wn!==null){wn.flags&=-257,IA(wn,Z,oe,D,c),wn.mode&1&&RA(D,Ye,c),c=wn,Ce=Ye;var Tt=c.updateQueue;if(Tt===null){var Wi=new Set;Wi.add(Ce),c.updateQueue=Wi}else Tt.add(Ce);break e}else{if(!(c&1)){RA(D,Ye,c),Fx();break e}Ce=Error(o(426))}}else if(On&&oe.mode&1){var As=PA(Z);if(As!==null){!(As.flags&65536)&&(As.flags|=256),IA(As,Z,oe,D,c),ix(Ce);break e}}D=Ce,mi!==4&&(mi=2),Ch===null?Ch=[D]:Ch.push(D),Ce=px(Ce,oe),oe=Z;do{switch(oe.tag){case 3:oe.flags|=65536,c&=-c,oe.lanes|=c;var pe=CA(oe,Ce,c);ZT(oe,pe);break e;case 1:D=Ce;var le=oe.type,ye=oe.stateNode;if(!(oe.flags&128)&&(typeof le.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Ra===null||!Ra.has(ye)))){oe.flags|=65536,c&=-c,oe.lanes|=c;var it=bA(oe,D,c);ZT(oe,it);break e}}oe=oe.return}while(oe!==null)}hC(v)}catch(Et){c=Et,li===v&&v!==null&&(li=v=v.return);continue}break}while(1)}function cC(){var u=sg.current;return sg.current=Xm,u===null?Xm:u}function Fx(){(mi===0||mi===3||mi===2)&&(mi=4),ai===null||!(vc&268435455)&&!(og&268435455)||La(ai,Ni)}function dg(u,c){var v=qt;qt|=2;var M=cC();ai===u&&Ni===c||Hl(u,c);do try{tk();break}catch(T){uC(u,T)}while(1);if(qy(),qt=v,sg.current=M,li!==null)throw Error(o(261));return ai=null,Ni=0,mi}function tk(){for(;li!==null;)fC(li)}function nk(){for(;li!==null&&!bU();)fC(li)}function fC(u){var c=mC(u.alternate,u,Zr);u.memoizedProps=u.pendingProps,c===null?hC(u):li=c,Rx.current=null}function hC(u){var c=u;do{var v=c.alternate;if(u=c.return,c.flags&32768){if(v=jU(v,c),v!==null){v.flags&=32767,li=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{mi=6,li=null;return}}else if(v=XU(v,c,Zr),v!==null){li=v;return}if(c=c.sibling,c!==null){li=c;return}li=c=u}while(c!==null);mi===0&&(mi=5)}function Vl(u,c){var v=cn,M=ei.transition;try{ei.transition=null,cn=1,ik(u,c,v)}finally{ei.transition=M,cn=v}return null}function ik(u,c,v){do Gl();while(Pa!==null);if(qt&6)throw Error(o(327));var M=u.finishedWork,T=u.finishedLanes;if(M===null)return null;if(u.finishedWork=null,u.finishedLanes=0,M===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var D=M.lanes|M.childLanes;if(CU(u,D),u===ai&&(li=ai=null,Ni=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||lg||(lg=!0,gC(Wy,function(){return Gl(),null})),D=(M.flags&15990)!==0,M.subtreeFlags&15990||D){D=ei.transition,ei.transition=null;var Z=cn;cn=1;var oe=qt;qt|=4,Rx.current=null,KU(u,M),$U(u,M),k(u.containerInfo),u.current=M,JU(M),RU(),qt=oe,cn=Z,ei.transition=D}else u.current=M;if(lg&&(lg=!1,Pa=u,ug=T),D=u.pendingLanes,D===0&&(Ra=null),LU(M.stateNode),Ar(u,Mi()),c!==null)for(v=u.onRecoverableError,M=0;M<c.length;M++)v(c[M]);if(ag)throw ag=!1,u=Dx,Dx=null,u;return ug&1&&u.tag!==0&&Gl(),D=u.pendingLanes,D&1?u===Nx?bh++:(bh=0,Nx=u):bh=0,mo(),null}function Gl(){if(Pa!==null){var u=WT(ug),c=ei.transition,v=cn;try{if(ei.transition=null,cn=16>u?16:u,Pa===null)var M=!1;else{if(u=Pa,Pa=null,ug=0,qt&6)throw Error(o(331));var T=qt;for(qt|=4,tt=u.current;tt!==null;){var D=tt,Z=D.child;if(tt.flags&16){var oe=D.deletions;if(oe!==null){for(var Ce=0;Ce<oe.length;Ce++){var Ye=oe[Ce];for(tt=Ye;tt!==null;){var dt=tt;switch(dt.tag){case 0:case 11:case 15:Bl(8,dt,D)}var kt=dt.child;if(kt!==null)kt.return=dt,tt=kt;else for(;tt!==null;){dt=tt;var It=dt.sibling,wn=dt.return;if(KA(dt),dt===Ye){tt=null;break}if(It!==null){It.return=wn,tt=It;break}tt=wn}}}var Tt=D.alternate;if(Tt!==null){var Wi=Tt.child;if(Wi!==null){Tt.child=null;do{var As=Wi.sibling;Wi.sibling=null,Wi=As}while(Wi!==null)}}tt=D}}if(D.subtreeFlags&2064&&Z!==null)Z.return=D,tt=Z;else e:for(;tt!==null;){if(D=tt,D.flags&2048)switch(D.tag){case 0:case 11:case 15:Bl(9,D,D.return)}var pe=D.sibling;if(pe!==null){pe.return=D.return,tt=pe;break e}tt=D.return}}var le=u.current;for(tt=le;tt!==null;){Z=tt;var ye=Z.child;if(Z.subtreeFlags&2064&&ye!==null)ye.return=Z,tt=ye;else e:for(Z=le;tt!==null;){if(oe=tt,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:Eh(9,oe)}}catch(Et){Cr(oe,oe.return,Et)}if(oe===Z){tt=null;break e}var it=oe.sibling;if(it!==null){it.return=oe.return,tt=it;break e}tt=oe.return}}if(qt=T,mo(),ho&&typeof ho.onPostCommitFiberRoot=="function")try{ho.onPostCommitFiberRoot(Cm,u)}catch{}M=!0}return M}finally{cn=v,ei.transition=c}}return!1}function dC(u,c,v){c=px(v,c),c=CA(u,c,1),ba(u,c),c=or(),u=hg(u,1),u!==null&&(fh(u,1,c),Ar(u,c))}function Cr(u,c,v){if(u.tag===3)dC(u,u,v);else for(;c!==null;){if(c.tag===3){dC(c,u,v);break}else if(c.tag===1){var M=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Ra===null||!Ra.has(M))){u=px(v,u),u=bA(c,u,1),ba(c,u),u=or(),c=hg(c,1),c!==null&&(fh(c,1,u),Ar(c,u));break}}c=c.return}}function rk(u,c,v){var M=u.pingCache;M!==null&&M.delete(c),c=or(),u.pingedLanes|=u.suspendedLanes&v,ai===u&&(Ni&v)===v&&(mi===4||mi===3&&(Ni&130023424)===Ni&&500>Mi()-Ix?Hl(u,0):Px|=v),Ar(u,c)}function pC(u,c){c===0&&(u.mode&1?(c=Tm,Tm<<=1,!(Tm&130023424)&&(Tm=4194304)):c=1);var v=or();u=hg(u,c),u!==null&&(fh(u,c,v),Ar(u,v))}function sk(u){var c=u.memoizedState,v=0;c!==null&&(v=c.retryLane),pC(u,v)}function ok(u,c){var v=0;switch(u.tag){case 13:var M=u.stateNode,T=u.memoizedState;T!==null&&(v=T.retryLane);break;case 19:M=u.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(c),pC(u,v)}var mC;mC=function(u,c,v){if(u!==null)if(u.memoizedProps!==c.pendingProps||Pt.current)jr=!0;else{if(!(u.lanes&v)&&!(c.flags&128))return jr=!1,qU(u,c,v);jr=!!(u.flags&131072)}else jr=!1,On&&c.flags&1048576&&tA(c,Um,c.index);switch(c.lanes=0,c.tag){case 2:var M=c.type;u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps;var T=gn(c,Mt.current);lc(c,v),T=ux(null,c,M,u,T,v);var D=cx();return c.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Nn(M)?(D=!0,Bt(c)):D=!1,c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,Ky(c),T.updater=Nm,c.stateNode=T,T._reactInternals=c,Jy(c,M,u,v),c=vx(null,c,M,!0,D,v)):(c.tag=0,On&&D&&Qy(c),sr(null,c,T,v),c=c.child),c;case 16:M=c.elementType;e:{switch(u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),u=c.pendingProps,T=M._init,M=T(M._payload),c.type=M,T=c.tag=lk(M),u=Ws(M,u),T){case 0:c=gx(null,c,M,u,v);break e;case 1:c=zA(null,c,M,u,v);break e;case 11:c=NA(null,c,M,u,v);break e;case 14:c=OA(null,c,M,Ws(M.type,u),v);break e}throw Error(o(306,M,""))}return c;case 0:return M=c.type,T=c.pendingProps,T=c.elementType===M?T:Ws(M,T),gx(u,c,M,T,v);case 1:return M=c.type,T=c.pendingProps,T=c.elementType===M?T:Ws(M,T),zA(u,c,M,T,v);case 3:e:{if(BA(c),u===null)throw Error(o(387));M=c.pendingProps,D=c.memoizedState,T=D.element,jT(u,c),Dm(c,M,null,v);var Z=c.memoizedState;if(M=Z.element,ve&&D.isDehydrated)if(D={element:M,isDehydrated:!1,cache:Z.cache,transitions:Z.transitions},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){T=Error(o(423)),c=HA(u,c,M,v,T);break e}else if(M!==T){T=Error(o(424)),c=HA(u,c,M,v,T);break e}else for(ve&&(qr=Dn(c.stateNode.containerInfo),Yr=c,On=!0,Xs=null,hh=!1),v=aA(c,null,M,v),c.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(fc(),M===T){c=jo(u,c,v);break e}sr(u,c,M,v)}c=c.child}return c;case 5:return lA(c),u===null&&nx(c),M=c.type,T=c.pendingProps,D=u!==null?u.memoizedProps:null,Z=T.children,Ee(M,T)?Z=null:D!==null&&Ee(M,D)&&(c.flags|=32),FA(u,c),sr(u,c,Z,v),c.child;case 6:return u===null&&nx(c),null;case 13:return VA(u,c,v);case 4:return rx(c,c.stateNode.containerInfo),M=c.pendingProps,u===null?c.child=hc(c,null,M,v):sr(u,c,M,v),c.child;case 11:return M=c.type,T=c.pendingProps,T=c.elementType===M?T:Ws(M,T),NA(u,c,M,T,v);case 7:return sr(u,c,c.pendingProps,v),c.child;case 8:return sr(u,c,c.pendingProps.children,v),c.child;case 12:return sr(u,c,c.pendingProps.children,v),c.child;case 10:e:{if(M=c.type._context,T=c.pendingProps,D=c.memoizedProps,Z=T.value,qT(c,M,Z),D!==null)if(po(D.value,Z)){if(D.children===T.children&&!Pt.current){c=jo(u,c,v);break e}}else for(D=c.child,D!==null&&(D.return=c);D!==null;){var oe=D.dependencies;if(oe!==null){Z=D.child;for(var Ce=oe.firstContext;Ce!==null;){if(Ce.context===M){if(D.tag===1){Ce=Wo(-1,v&-v),Ce.tag=2;var Ye=D.updateQueue;if(Ye!==null){Ye=Ye.shared;var dt=Ye.pending;dt===null?Ce.next=Ce:(Ce.next=dt.next,dt.next=Ce),Ye.pending=Ce}}D.lanes|=v,Ce=D.alternate,Ce!==null&&(Ce.lanes|=v),Zy(D.return,v,c),oe.lanes|=v;break}Ce=Ce.next}}else if(D.tag===10)Z=D.type===c.type?null:D.child;else if(D.tag===18){if(Z=D.return,Z===null)throw Error(o(341));Z.lanes|=v,oe=Z.alternate,oe!==null&&(oe.lanes|=v),Zy(Z,v,c),Z=D.sibling}else Z=D.child;if(Z!==null)Z.return=D;else for(Z=D;Z!==null;){if(Z===c){Z=null;break}if(D=Z.sibling,D!==null){D.return=Z.return,Z=D;break}Z=Z.return}D=Z}sr(u,c,T.children,v),c=c.child}return c;case 9:return T=c.type,M=c.pendingProps.children,lc(c,v),T=ys(T),M=M(T),c.flags|=1,sr(u,c,M,v),c.child;case 14:return M=c.type,T=Ws(M,c.pendingProps),T=Ws(M.type,T),OA(u,c,M,T,v);case 15:return UA(u,c,c.type,c.pendingProps,v);case 17:return M=c.type,T=c.pendingProps,T=c.elementType===M?T:Ws(M,T),u!==null&&(u.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,Nn(M)?(u=!0,Bt(c)):u=!1,lc(c,v),QT(c,M,T),Jy(c,M,T,v),vx(null,c,M,!0,u,v);case 19:return YA(u,c,v);case 22:return kA(u,c,v)}throw Error(o(156,c.tag))};function gC(u,c){return Vy(u,c)}function ak(u,c,v,M){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(u,c,v,M){return new ak(u,c,v,M)}function zx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function lk(u){if(typeof u=="function")return zx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===y)return 11;if(u===S)return 14}return 2}function Da(u,c){var v=u.alternate;return v===null?(v=Ts(u.tag,c,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=c,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,c=u.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function pg(u,c,v,M,T,D){var Z=2;if(M=u,typeof u=="function")zx(u)&&(Z=1);else if(typeof u=="string")Z=5;else e:switch(u){case h:return Wl(v.children,T,D,c);case d:Z=8,T|=8;break;case p:return u=Ts(12,v,c,T|2),u.elementType=p,u.lanes=D,u;case x:return u=Ts(13,v,c,T),u.elementType=x,u.lanes=D,u;case g:return u=Ts(19,v,c,T),u.elementType=g,u.lanes=D,u;case E:return mg(v,T,D,c);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:Z=10;break e;case _:Z=9;break e;case y:Z=11;break e;case S:Z=14;break e;case w:Z=16,M=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return c=Ts(Z,v,c,T),c.elementType=u,c.type=M,c.lanes=D,c}function Wl(u,c,v,M){return u=Ts(7,u,M,c),u.lanes=v,u}function mg(u,c,v,M){return u=Ts(22,u,M,c),u.elementType=E,u.lanes=v,u.stateNode={},u}function Bx(u,c,v){return u=Ts(6,u,null,c),u.lanes=v,u}function Hx(u,c,v){return c=Ts(4,u.children!==null?u.children:[],u.key,c),c.lanes=v,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}function uk(u,c,v,M,T){this.tag=c,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ht,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=By(0),this.expirationTimes=By(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=By(0),this.identifierPrefix=M,this.onRecoverableError=T,ve&&(this.mutableSourceEagerHydrationData=null)}function vC(u,c,v,M,T,D,Z,oe,Ce){return u=new uk(u,c,v,oe,Ce),c===1?(c=1,D===!0&&(c|=8)):c=0,D=Ts(3,null,null,c),u.current=D,D.stateNode=u,D.memoizedState={element:M,isDehydrated:v,cache:null,transitions:null},Ky(D),u}function _C(u){if(!u)return bt;u=u._reactInternals;e:{if(C(u)!==u||u.tag!==1)throw Error(o(170));var c=u;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Nn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(Nn(v))return Fn(u,v,c)}return c}function yC(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=F(c),u===null?null:u.stateNode}function xC(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<c?v:c}}function Vx(u,c){xC(u,c),(u=u.alternate)&&xC(u,c)}function ck(u){return u=F(u),u===null?null:u.stateNode}function fk(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var c=or();Es(u,134217728,c),Vx(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var c=or(),v=Ia(u);Es(u,v,c),Vx(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var c=u.stateNode;if(c.current.memoizedState.isDehydrated){var v=ch(c.pendingLanes);v!==0&&(Hy(c,v|1),Ar(c,Mi()),!(qt&6)&&(_c(),mo()))}break;case 13:var M=or();lC(function(){return Es(u,1,M)}),Vx(u,1)}},t.batchedUpdates=function(u,c){var v=qt;qt|=1;try{return u(c)}finally{qt=v,qt===0&&(_c(),bm&&mo())}},t.createComponentSelector=function(u){return{$$typeof:eg,value:u}},t.createContainer=function(u,c,v,M,T,D,Z){return vC(u,c,!1,null,v,M,T,D,Z)},t.createHasPseudoClassSelector=function(u){return{$$typeof:tg,value:u}},t.createHydrationContainer=function(u,c,v,M,T,D,Z,oe,Ce){return u=vC(v,M,!0,u,T,D,Z,oe,Ce),u.context=_C(null),v=u.current,M=or(),T=Ia(v),D=Wo(M,T),D.callback=c??null,ba(v,D),u.current.lanes=T,fh(u,T,M),Ar(u,M),u},t.createPortal=function(u,c,v){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:M==null?null:""+M,children:u,containerInfo:c,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:ng,value:u}},t.createTestNameSelector=function(u){return{$$typeof:ig,value:u}},t.createTextSelector=function(u){return{$$typeof:rg,value:u}},t.deferredUpdates=function(u){var c=cn,v=ei.transition;try{return ei.transition=null,cn=16,u()}finally{cn=c,ei.transition=v}},t.discreteUpdates=function(u,c,v,M,T){var D=cn,Z=ei.transition;try{return ei.transition=null,cn=1,u(c,v,M,T)}finally{cn=D,ei.transition=Z,qt===0&&_c()}},t.findAllNodes=bx,t.findBoundingRects=function(u,c){if(!j)throw Error(o(363));c=bx(u,c),u=[];for(var v=0;v<c.length;v++)u.push(he(c[v]));for(c=u.length-1;0<c;c--){v=u[c];for(var M=v.x,T=M+v.width,D=v.y,Z=D+v.height,oe=c-1;0<=oe;oe--)if(c!==oe){var Ce=u[oe],Ye=Ce.x,dt=Ye+Ce.width,kt=Ce.y,It=kt+Ce.height;if(M>=Ye&&D>=kt&&T<=dt&&Z<=It){u.splice(c,1);break}else if(M!==Ye||v.width!==Ce.width||It<D||kt>Z){if(!(D!==kt||v.height!==Ce.height||dt<M||Ye>T)){Ye>M&&(Ce.width+=Ye-M,Ce.x=M),dt<T&&(Ce.width=T-Ye),u.splice(c,1);break}}else{kt>D&&(Ce.height+=kt-D,Ce.y=D),It<Z&&(Ce.height=Z-kt),u.splice(c,1);break}}}return u},t.findHostInstance=yC,t.findHostInstanceWithNoPortals=function(u){return u=O(u),u=u!==null?Y(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return yC(u)},t.flushControlled=function(u){var c=qt;qt|=1;var v=ei.transition,M=cn;try{ei.transition=null,cn=1,u()}finally{cn=M,ei.transition=v,qt=c,qt===0&&(_c(),mo())}},t.flushPassiveEffects=Gl,t.flushSync=lC,t.focusWithin=function(u,c){if(!j)throw Error(o(363));for(u=Tx(u),c=sC(u,c),c=Array.from(c),u=0;u<c.length;){var v=c[u++];if(!Le(v)){if(v.tag===5&&at(v.stateNode))return!0;for(v=v.child;v!==null;)c.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return cn},t.getFindAllNodesFailureDescription=function(u,c){if(!j)throw Error(o(363));var v=0,M=[];u=[Tx(u),0];for(var T=0;T<u.length;){var D=u[T++],Z=u[T++],oe=c[Z];if((D.tag!==5||!Le(D))&&(Ax(D,oe)&&(M.push(Cx(oe)),Z++,Z>v&&(v=Z)),Z<c.length))for(D=D.child;D!==null;)u.push(D,Z),D=D.sibling}if(v<c.length){for(u=[];v<c.length;v++)u.push(Cx(c[v]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return K(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:ck,findFiberByHostInstance:u.findFiberByHostInstance||fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)u=!0;else{try{Cm=c.inject(u),ho=c}catch{}u=!!c.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,c,v,M){if(!j)throw Error(o(363));u=bx(u,c);var T=Ue(u,v,M).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(u,c){var v=c._getVersion;v=v(c._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[c,v]:u.mutableSourceEagerHydrationData.push(c,v)},t.runWithPriority=function(u,c){var v=cn;try{return cn=u,c()}finally{cn=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,c,v,M){var T=c.current,D=or(),Z=Ia(T);return v=_C(v),c.context===null?c.context=v:c.pendingContext=v,c=Wo(D,Z),c.payload={element:u},M=M===void 0?null:M,M!==null&&(c.callback=M),ba(T,c),u=Es(T,Z,D),u!==null&&Lm(u,T,Z),Z},t};(function(n){n.exports=HG})(zG);const VG=s3(Gw),GG=n=>typeof n=="object"&&typeof n.then=="function",Eu=[];function _N(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function yN(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Eu)if(_N(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Eu.indexOf(r);s!==-1&&Eu.splice(s,1)},promise:(GG(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Eu.push(r),!t)throw r.promise}const WG=(n,e,t)=>yN(n,e,!1,t),XG=(n,e,t)=>void yN(n,e,!0,t),YG=n=>{if(n===void 0||n.length===0)Eu.splice(0,Eu.length);else{const e=Eu.find(t=>_N(n,t.keys,t.equal));e&&e.remove()}},oT={},xN=n=>void Object.assign(oT,n);function qG(n,e){function t(h,{args:d=[],attach:p,...m},_){let y=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=jc(g,{type:h,root:_,attach:p,primitive:!0})}else{const g=oT[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=jc(new g(...d),{type:h,root:_,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof Wt?x.__r3f.attach="geometry":x instanceof Bi&&(x.__r3f.attach="material")),y!=="inject"&&iS(x,m),x}function i(h,d){let p=!1;if(d){var m,_;(m=d.__r3f)!=null&&m.attach?nS(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(_=h.__r3f)==null||_.objects.push(d),d.__r3f||jc(d,{}),d.__r3f.parent=h,Xw(d),Zc(d)}}function r(h,d,p){let m=!1;if(d){var _,y;if((_=d.__r3f)!=null&&_.attach)nS(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:d});const x=h.children.filter(S=>S!==d),g=x.indexOf(p);h.children=[...x.slice(0,g),d,...x.slice(g)],m=!0}m||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||jc(d,{}),d.__r3f.parent=h,Xw(d),Zc(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,_,y;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(E=>E!==d)),(_=d.__r3f)!=null&&_.attach)pR(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var x;h.remove(d),(x=d.__r3f)!=null&&x.root&&tW(av(d),d)}const S=(y=d.__r3f)==null?void 0:y.primitive,w=!S&&(p===void 0?d.dispose!==null:p);if(!S){var g;s((g=d.__r3f)==null?void 0:g.objects,d,w),s(d.children,d,w)}if(delete d.__r3f,w&&d.dispose&&d.type!=="Scene"){const E=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Vp.unstable_scheduleCallback(Vp.unstable_IdlePriority,E):E()}Zc(h)}}function a(h,d,p,m){var _;const y=(_=h.__r3f)==null?void 0:_.parent;if(!y)return;const x=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(y,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(y,x),x.raycast&&x.__r3f.eventCount&&av(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:VG({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;const p=(d=h==null?void 0:h.__r3f)!=null?d:{};return Boolean(p.handlers)},prepareUpdate(h,d,p,m){var _;if(((_=h==null?void 0:h.__r3f)!=null?_:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,...S}=m,{args:w=[],children:E,...I}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((P,b)=>P!==w[b]))return[!0];const R=CN(h,S,I,!0);return R.changes.length?[!1,R]:null}},commitUpdate(h,[d,p],m,_,y,x){d?a(h,m,y,x):iS(h,p)},commitMount(h,d,p,m){var _;const y=(_=h.__r3f)!=null?_:{};h.raycast&&y.handlers&&y.eventCount&&av(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>jc(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&pR(m,h,p),h.isObject3D&&(h.visible=!1),Zc(h)},unhideInstance(h,d){var p;const{attach:m,parent:_}=(p=h.__r3f)!=null?p:{};m&&_&&nS(_,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Zc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():tl.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&bn.fun(performance.now)?performance.now:bn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:bn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:bn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:iS}}var cR,fR;const tS=n=>"colorSpace"in n||"outputColorSpace"in n,SN=()=>{var n;return(n=oT.ColorManagement)!=null?n:null},wN=n=>n&&n.isOrthographicCamera,jG=n=>n&&n.hasOwnProperty("current"),xm=typeof window<"u"&&((cR=window.document)!=null&&cR.createElement||((fR=window.navigator)==null?void 0:fR.product)==="ReactNative")?_e.useLayoutEffect:_e.useEffect;function MN(n){const e=_e.useRef(n);return xm(()=>void(e.current=n),[n]),e}function ZG({set:n}){return xm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class EN extends _e.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}EN.getDerivedStateFromError=()=>({error:!0});const TN="__default",hR=new Map,KG=n=>n&&!!n.memoized&&!!n.changes;function AN(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Zh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function av(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const bn={obj:n=>n===Object(n)&&!bn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(bn.str(n)||bn.num(n)||bn.boo(n))return n===e;const s=bn.obj(n);if(s&&i==="reference")return n===e;const o=bn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!bn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(bn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function $G(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function JG(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function jc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Ww(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const dR=/-\d+$/;function nS(n,e,t){if(bn.str(t)){if(dR.test(t)){const s=t.replace(dR,""),{target:o,key:a}=Ww(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=Ww(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function pR(n,e,t){var i,r;if(bn.str(t)){const{target:s,key:o}=Ww(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function CN(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},f=!1){const h=n.__r3f,d=Object.entries(r),p=[];if(f){const _=Object.keys(l);for(let y=0;y<_.length;y++)r.hasOwnProperty(_[y])||d.unshift([_[y],TN+"remove"])}d.forEach(([_,y])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&_==="object"||bn.equ(y,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return p.push([_,y,!0,[]]);let g=[];_.includes("-")&&(g=_.split("-")),p.push([_,y,!1,g]);for(const S in r){const w=r[S];S.startsWith(`${_}-`)&&p.push([S,w,!1,S.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const QG=typeof process<"u"&&!1;function iS(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=KG(e)?e:CN(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[d,p,m,_]=a[h];if(tS(n)){const S="srgb",w="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?S:w):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?S:w)}let y=n,x=y[d];if(_.length&&(x=_.reduce((g,S)=>g[S],n),!(x&&x.set))){const[g,...S]=_.reverse();y=S.reverse().reduce((w,E)=>w[E],n),d=g}if(p===TN+"remove")if(y.constructor){let g=hR.get(y.constructor);g||(g=new y.constructor,hR.set(y.constructor,g)),p=g[d]}else p=0;if(m&&i)p?i.handlers[d]=p:delete i.handlers[d],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Lu)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(QG?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const g=x instanceof nt;!g&&x.setScalar?x.setScalar(p):x instanceof Lu&&p instanceof Lu?x.mask=p.mask:x.set(p),!SN()&&s&&!s.linear&&g&&x.convertSRGBToLinear()}}else if(y[d]=p,y[d]instanceof dn&&y[d].format===ri&&y[d].type===Vr&&s){const g=y[d];tS(g)&&tS(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}Zc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const h=av(n).getState().internal,d=h.interaction.indexOf(n);d>-1&&h.interaction.splice(d,1),i.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&Xw(n),n}function Zc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Xw(n){n.onUpdate==null||n.onUpdate(n)}function bN(n,e){n.manual||(wN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function T0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function eW(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return tl.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tl.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tl.ContinuousEventPriority;default:return tl.DefaultEventPriority}}function RN(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function tW(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{RN(t.capturedMap,e,i,r)})}function nW(n){function e(l){const{internal:f}=n.getState(),h=l.offsetX-f.initialClick[0],d=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=f.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,f){const h=n.getState(),d=new Set,p=[],m=f?f(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const S=Zh(m[g]);S&&(S.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function _(g){const S=Zh(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var w;S.events.compute==null||S.events.compute(l,S,(w=S.previousRoot)==null?void 0:w.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let y=m.flatMap(_).sort((g,S)=>{const w=Zh(g.object),E=Zh(S.object);return!w||!E?g.distance-S.distance:E.events.priority-w.events.priority||g.distance-S.distance}).filter(g=>{const S=T0(g);return d.has(S)?!1:(d.add(S),!0)});h.events.filter&&(y=h.events.filter(y,h));for(const g of y){let S=g.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(T0(g.intersection))||p.push(g.intersection);return p}function r(l,f,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const _ of l){const y=Zh(_.object)||p,{raycaster:x,pointer:g,camera:S,internal:w}=y,E=new W(g.x,g.y,0).unproject(S),I=A=>{var O,F;return(O=(F=w.capturedMap.get(A))==null?void 0:F.has(_.eventObject))!=null?O:!1},R=A=>{const O={intersection:_,target:f.target};w.capturedMap.has(A)?w.capturedMap.get(A).set(_.eventObject,O):w.capturedMap.set(A,new Map([[_.eventObject,O]])),f.target.setPointerCapture(A)},P=A=>{const O=w.capturedMap.get(A);O&&RN(w.capturedMap,_.eventObject,O,A)};let b={};for(let A in f){let O=f[A];typeof O!="function"&&(b[A]=O)}let C={..._,...b,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:E,ray:x.ray,camera:S,stopPropagation(){const A="pointerId"in f&&w.capturedMap.get(f.pointerId);if((!A||A.has(_.eventObject))&&(C.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(O=>O.eventObject===_.eventObject))){const O=l.slice(0,l.indexOf(_));s([...O,_])}},target:{hasPointerCapture:I,setPointerCapture:R,releasePointerCapture:P},currentTarget:{hasPointerCapture:I,setPointerCapture:R,releasePointerCapture:P},nativeEvent:f};if(d(C),m.stopped===!0)break}}return l}function s(l){const{internal:f}=n.getState();for(const h of f.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(f.hovered.delete(T0(h)),p!=null&&p.eventCount){const _={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(_),m.onPointerLeave==null||m.onPointerLeave(_)}}}function o(l,f){for(let h=0;h<f.length;h++){const d=f[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:h}=n.getState();"pointerId"in f&&h.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(f.pointerId)&&(h.capturedMap.delete(f.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),g=_?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(w=>w.eventObject)),_&&!x.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(x);function S(w){const E=w.eventObject,I=E.__r3f,R=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const P=T0(w),b=p.hovered.get(P);b?b.stopped&&w.stopPropagation():(p.hovered.set(P,w),R.onPointerOver==null||R.onPointerOver(w),R.onPointerEnter==null||R.onPointerEnter(w))}R.onPointerMove==null||R.onPointerMove(w)}else{const P=R[l];P?(!_||p.initialHits.includes(E))&&(o(h,p.interaction.filter(b=>!p.initialHits.includes(b))),P(w)):_&&p.initialHits.includes(E)&&o(h,p.interaction.filter(b=>!p.initialHits.includes(b)))}}r(x,h,g,S)}}return{handlePointer:a}}const iW=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],PN=n=>!!(n!=null&&n.render),aT=_e.createContext(null),rW=(n,e)=>{const t=sT((a,l)=>{const f=new W,h=new W,d=new W;function p(g=l().camera,S=h,w=l().size){const{width:E,height:I,top:R,left:P}=w,b=E/I;S instanceof W?d.copy(S):d.set(...S);const C=g.getWorldPosition(f).distanceTo(d);if(wN(g))return{width:E/g.zoom,height:I/g.zoom,top:R,left:P,factor:1,distance:C,aspect:b};{const A=g.fov*Math.PI/180,O=2*Math.tan(A/2)*C,F=O*(E/I);return{width:F,height:O,top:R,left:P,factor:E/F,distance:C,aspect:b}}}let m;const _=g=>a(S=>({performance:{...S.performance,current:g}})),y=new be;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new eT,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&_(g.performance.min),m=setTimeout(()=>_(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,w,E,I)=>{const R=l().camera,P={width:g,height:S,top:E||0,left:I||0,updateStyle:w};a(b=>({size:P,viewport:{...b.viewport,...p(R,h,P)}}))},setDpr:g=>a(S=>{const w=AN(g);return{viewport:{...S.viewport,dpr:w,initialDpr:S.viewport.initialDpr||w}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:_e.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,w)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:g,priority:S,store:w}),E.subscribers=E.subscribers.sort((I,R)=>I.priority-R.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(R=>R.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:f,gl:h,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||f.dpr!==s){var p;r=l,s=f.dpr,bN(a,l),h.setPixelRatio(f.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let A0,sW=new Set,oW=new Set,aW=new Set;function rS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Kh(n,e){switch(n){case"before":return rS(sW,e);case"after":return rS(oW,e);case"tail":return rS(aW,e)}}let sS,oS;function aS(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),sS=e.internal.subscribers,A0=0;A0<sS.length;A0++)oS=sS[A0],oS.ref.current(oS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function lW(n){let e=!1,t=!1,i,r,s;function o(f){r=requestAnimationFrame(o),e=!0,i=0,Kh("before",f),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=aS(f,s))}if(t=!1,Kh("after",f),i===0)return Kh("tail",f),e=!1,cancelAnimationFrame(r)}function a(f,h=1){var d;if(!f)return n.forEach(p=>a(p.store.getState(),h));(d=f.gl.xr)!=null&&d.isPresenting||!f.internal.active||f.frameloop==="never"||(h>1?f.internal.frames=Math.min(60,f.internal.frames+h):t?f.internal.frames=2:f.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(f,h=!0,d,p){if(h&&Kh("before",f),d)aS(f,d,p);else for(const m of n.values())aS(f,m.store.getState());h&&Kh("after",f)}return{loop:o,invalidate:a,advance:l}}function lT(){const n=_e.useContext(aT);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ir(n=t=>t,e){return lT()(n,e)}function Ny(n,e=0){const t=lT(),i=t.getState().internal.subscribe,r=MN(n);return xm(()=>i(r,e,t),[e,i,t]),null}const mR=new WeakMap;function IN(n,e){return function(t,...i){let r=mR.get(t);return r||(r=new t,mR.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,$G(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function lh(n,e,t,i){const r=Array.isArray(e)?e:[e],s=WG(IN(t,i),[n,...r],{equal:bn.equ});return Array.isArray(e)?s:s[0]}lh.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return XG(IN(t),[n,...i])};lh.clear=function(n,e){const t=Array.isArray(e)?e:[e];return YG([n,...t])};const jf=new Map,{invalidate:gR,advance:vR}=lW(jf),{reconciler:Gp,applyProps:ja}=qG(jf,eW),Hc={objects:"shallow",strict:!1},uW=(n,e)=>{const t=typeof n=="function"?n(e):n;return PN(t)?t:new FE({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function cW(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function fW(n){const e=jf.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||rW(gR,vR),o=t||Gp.createContainer(s,tl.ConcurrentRoot,null,!1,null,"",r,null);e||jf.set(n,{fiber:o,store:s});let a,l=!1,f;return{configure(h={}){let{gl:d,size:p,scene:m,events:_,onCreated:y,shadows:x=!1,linear:g=!1,flat:S=!1,legacy:w=!1,orthographic:E=!1,frameloop:I="always",dpr:R=[1,2],performance:P,raycaster:b,camera:C,onPointerMissed:A}=h,O=s.getState(),F=O.gl;O.gl||O.set({gl:F=uW(d,n)});let V=O.raycaster;V||O.set({raycaster:V=new rT});const{params:Y,...J}=b||{};if(bn.equ(J,V,Hc)||ja(V,{...J}),bn.equ(Y,V.params,Hc)||ja(V,{params:{...V.params,...Y}}),!O.camera||O.camera===f&&!bn.equ(f,C,Hc)){f=C;const k=C instanceof cm,ce=k?C:E?new bo(0,0,0,0,.1,1e3):new Jn(75,0,.1,1e3);k||(ce.position.z=5,C&&(ja(ce,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(ce.manual=!0,ce.updateProjectionMatrix())),!O.camera&&!(C!=null&&C.rotation)&&ce.lookAt(0,0,0)),O.set({camera:ce}),V.camera=ce}if(!O.scene){let k;m instanceof Yf?k=m:(k=new Yf,m&&ja(k,m)),O.set({scene:jc(k)})}if(!O.xr){var K;const k=(Fe,ue)=>{const Ee=s.getState();Ee.frameloop!=="never"&&vR(Fe,!0,Ee,ue)},ce=()=>{const Fe=s.getState();Fe.gl.xr.enabled=Fe.gl.xr.isPresenting,Fe.gl.xr.setAnimationLoop(Fe.gl.xr.isPresenting?k:null),Fe.gl.xr.isPresenting||gR(Fe)},Se={connect(){const Fe=s.getState().gl;Fe.xr.addEventListener("sessionstart",ce),Fe.xr.addEventListener("sessionend",ce)},disconnect(){const Fe=s.getState().gl;Fe.xr.removeEventListener("sessionstart",ce),Fe.xr.removeEventListener("sessionend",ce)}};typeof((K=F.xr)==null?void 0:K.addEventListener)=="function"&&Se.connect(),O.set({xr:Se})}if(F.shadowMap){const k=F.shadowMap.enabled,ce=F.shadowMap.type;if(F.shadowMap.enabled=!!x,bn.boo(x))F.shadowMap.type=Ld;else if(bn.str(x)){var ne;const Se={basic:gL,percentage:ty,soft:Ld,variance:eo};F.shadowMap.type=(ne=Se[x])!=null?ne:Ld}else bn.obj(x)&&Object.assign(F.shadowMap,x);(k!==F.shadowMap.enabled||ce!==F.shadowMap.type)&&(F.shadowMap.needsUpdate=!0)}const B=SN();B&&("enabled"in B?B.enabled=!w:"legacyMode"in B&&(B.legacyMode=w)),l||ja(F,{outputEncoding:g?3e3:3001,toneMapping:S?No:vE}),O.legacy!==w&&O.set(()=>({legacy:w})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==S&&O.set(()=>({flat:S})),d&&!bn.fun(d)&&!PN(d)&&!bn.equ(d,F,Hc)&&ja(F,d),_&&!O.events.handlers&&O.set({events:_(s)});const te=cW(n,p);return bn.equ(te,O.size,Hc)||O.setSize(te.width,te.height,te.updateStyle,te.top,te.left),R&&O.viewport.dpr!==AN(R)&&O.setDpr(R),O.frameloop!==I&&O.setFrameloop(I),O.onPointerMissed||O.set({onPointerMissed:A}),P&&!bn.equ(P,O.performance,Hc)&&O.set(k=>({performance:{...k.performance,...P}})),a=y,l=!0,this},render(h){return l||this.configure(),Gp.updateContainer(ot(hW,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){LN(n)}}}function hW({store:n,children:e,onCreated:t,rootElement:i}){return xm(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ot(aT.Provider,{value:n,children:e})}function LN(n,e){const t=jf.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Gp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),JG(r),jf.delete(n),e&&e(n)}catch{}},500)})}}function dW(n,e,t){return ot(pW,{children:n,container:e,state:t},e.uuid)}function pW({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,o=lT(),[a]=_e.useState(()=>new rT),[l]=_e.useState(()=>new be),f=_e.useCallback((d,p)=>{const m={...d};Object.keys(d).forEach(y=>{(iW.includes(y)||d[y]!==p[y]&&p[y])&&delete m[y]});let _;if(p&&r){const y=p.camera;_=d.viewport.getCurrentViewport(y,new W,r),y!==d.camera&&bN(y,r)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...p==null?void 0:p.events,...i},size:{...d.size,...r},viewport:{...d.viewport,..._},...s}},[n]),[h]=_e.useState(()=>{const d=o.getState();return sT((m,_)=>({...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...i},size:{...d.size,...r},...s,set:m,get:_,setEvents:y=>m(x=>({...x,events:{...x.events,...y}}))}))});return _e.useEffect(()=>{const d=o.subscribe(p=>h.setState(m=>f(p,m)));return()=>{d()}},[f]),_e.useEffect(()=>{h.setState(d=>f(o.getState(),d))},[f]),_e.useEffect(()=>()=>{h.destroy()},[]),ot(z_,{children:Gp.createPortal(ot(aT.Provider,{value:h,children:e}),h,null)})}Gp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:_e.version});function Yw(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}Yw.debounce=Yw;var _R=Yw;function mW(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=_e.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=_e.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=_e.useRef(!1);_e.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,_]=_e.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:w,top:E,width:I,height:R,bottom:P,right:b,x:C,y:A}=l.current.element.getBoundingClientRect(),O={left:w,top:E,width:I,height:R,bottom:P,right:b,x:C,y:A};l.current.element instanceof HTMLElement&&r&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),d.current&&!yW(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[S,h?_R(S,h):S,f?_R(S,f):S]},[a,r,f,h]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",_,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(_),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",_,{capture:!0,passive:!0})))}const g=S=>{!S||S===l.current.element||(y(),l.current.element=S,l.current.scrollContainers=DN(S),x())};return vW(_,Boolean(t)),gW(m),_e.useEffect(()=>{y(),x()},[t,_,m]),_e.useEffect(()=>y,[]),[g,o,p]}function gW(n){_e.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function vW(n,e){_e.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function DN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...DN(n.parentElement)]}const _W=["x","y","top","bottom","left","right","width","height"],yW=(n,e)=>_W.every(t=>n[t]===e[t]);var xW=Object.defineProperty,SW=Object.defineProperties,wW=Object.getOwnPropertyDescriptors,yR=Object.getOwnPropertySymbols,MW=Object.prototype.hasOwnProperty,EW=Object.prototype.propertyIsEnumerable,xR=(n,e,t)=>e in n?xW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,SR=(n,e)=>{for(var t in e||(e={}))MW.call(e,t)&&xR(n,t,e[t]);if(yR)for(var t of yR(e))EW.call(e,t)&&xR(n,t,e[t]);return n},TW=(n,e)=>SW(n,wW(e)),wR,MR;typeof window<"u"&&((wR=window.document)!=null&&wR.createElement||((MR=window.navigator)==null?void 0:MR.product)==="ReactNative")?_e.useLayoutEffect:_e.useEffect;function NN(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=NN(i,e,t);if(r)return r;i=e?null:i.sibling}}function ON(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const ER=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=ER;return}return ER.apply(this,arguments)};const uT=ON(_e.createContext(null));class UN extends _e.Component{render(){return _e.createElement(uT.Provider,{value:this._reactInternals},this.props.children)}}function AW(){const n=_e.useContext(uT);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=_e.useId();return _e.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=NN(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function CW(){const n=AW(),[e]=_e.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==uT&&!e.has(r)&&e.set(r,_e.useContext(ON(r)))}t=t.return}return e}function bW(){const n=CW();return _e.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>_e.createElement(e,null,_e.createElement(t.Provider,TW(SR({},i),{value:n.get(t)}))),e=>_e.createElement(UN,SR({},e))),[n])}const lS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function RW(n){const{handlePointer:e}=nW(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(lS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,f]=lS[o];t.addEventListener(l,a,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=lS[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const PW=_e.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=RW,eventSource:a,eventPrefix:l,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:_,dpr:y,performance:x,raycaster:g,camera:S,scene:w,onPointerMissed:E,onCreated:I,...R},P){_e.useMemo(()=>xN(OG),[]);const b=bW(),[C,A]=mW({scroll:!0,debounce:{scroll:50,resize:0},...i}),O=_e.useRef(null),F=_e.useRef(null);_e.useImperativeHandle(P,()=>O.current);const V=MN(E),[Y,J]=_e.useState(!1),[K,ne]=_e.useState(!1);if(Y)throw Y;if(K)throw K;const B=_e.useRef(null);return xm(()=>{const k=O.current;A.width>0&&A.height>0&&k&&(B.current||(B.current=fW(k)),B.current.configure({gl:s,events:o,shadows:f,linear:h,flat:d,legacy:p,orthographic:m,frameloop:_,dpr:y,performance:x,raycaster:g,camera:S,scene:w,size:A,onPointerMissed:(...ce)=>V.current==null?void 0:V.current(...ce),onCreated:ce=>{ce.events.connect==null||ce.events.connect(a?jG(a)?a.current:a:F.current),l&&ce.setEvents({compute:(Se,Fe)=>{const ue=Se[l+"X"],Ee=Se[l+"Y"];Fe.pointer.set(ue/Fe.size.width*2-1,-(Ee/Fe.size.height)*2+1),Fe.raycaster.setFromCamera(Fe.pointer,Fe.camera)}}),I==null||I(ce)}}),B.current.render(ot(b,{children:ot(EN,{set:ne,children:ot(_e.Suspense,{fallback:ot(ZG,{set:J}),children:e})})})))}),_e.useEffect(()=>{const k=O.current;if(k)return()=>LN(k)},[]),ot("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:a?"none":"auto",...r},...R,children:ot("div",{ref:C,style:{width:"100%",height:"100%"},children:ot("canvas",{ref:O,style:{display:"block"},children:t})})})}),IW=_e.forwardRef(function(e,t){return ot(UN,{children:ot(PW,{...e,ref:t})})});function LW(n,e="pointer",t="auto",i=document.body){_e.useEffect(()=>{if(n)return i.style.cursor=e,()=>void(i.style.cursor=t)},[n])}let $h=0;const DW=sT(n=>(gf.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-$h)/(i-$h)*100})},gf.onLoad=()=>{n({active:!1})},gf.onError=e=>n(t=>({errors:[...t.errors,e]})),gf.onProgress=(e,t,i)=>{t===i&&($h=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-$h)/(i-$h)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),NW=n=>`Loading ${n.toFixed(2)}%`;function OW({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:i,dataInterpolation:r=NW,initialState:s=o=>o}){const{active:o,progress:a}=DW(),l=_e.useRef(0),f=_e.useRef(0),h=_e.useRef(null),[d,p]=_e.useState(s(o));_e.useEffect(()=>{let _;return o!==d&&(_=setTimeout(()=>p(o),300)),()=>clearTimeout(_)},[d,o]);const m=_e.useCallback(()=>{h.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),h.current.innerText=r(l.current),l.current<a&&(f.current=requestAnimationFrame(m)))},[r,a]);return _e.useEffect(()=>(m(),()=>cancelAnimationFrame(f.current)),[m]),d?_e.createElement("div",{style:{...C0.container,opacity:o?1:0,...n}},_e.createElement("div",null,_e.createElement("div",{style:{...C0.inner,...e}},_e.createElement("div",{style:{...C0.bar,transform:`scaleX(${a/100})`,...t}}),_e.createElement("span",{ref:h,style:{...C0.data,...i}})))):null}const C0={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Vd(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function UW(n,e){if(n){if(typeof n=="string")return qw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qw(n,e)}}function kW(n){if(Array.isArray(n))return qw(n)}function FW(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function zW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BW(n){return kW(n)||FW(n)||UW(n)||zW()}new be;new be;function HW(n,e,t){return Math.max(e,Math.min(t,n))}function VW(n,e){return HW(n-Math.floor(n/e)*e,0,e)}function GW(n,e){var t=VW(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function kN(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var bs=function n(e,t,i){var r=this;kN(this,n),Vd(this,"dot2",function(s,o){return r.x*s+r.y*o}),Vd(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},WW=[new bs(1,1,0),new bs(-1,1,0),new bs(1,-1,0),new bs(-1,-1,0),new bs(1,0,1),new bs(-1,0,1),new bs(1,0,-1),new bs(-1,0,-1),new bs(0,1,1),new bs(0,-1,1),new bs(0,1,-1),new bs(0,-1,-1)],TR=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],AR=new Array(512),CR=new Array(512),XW=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=TR[t]^e&255:i=TR[t]^e>>8&255,AR[t]=AR[t+256]=i,CR[t]=CR[t+256]=WW[i%12]}};XW(0);function YW(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function bR(n){var e=YW(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var qW=function n(e){var t=this;kN(this,n),Vd(this,"seed",0),Vd(this,"init",function(i){t.seed=i,t.value=bR(i)}),Vd(this,"value",bR(this.seed)),this.init(e)};new qW(Math.random());var jW=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},FN=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},ZW=function(e){return e},KW={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},$W={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},JW={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},QW={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},e9={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},t9={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function xi(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:FN,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;i=Math.max(1e-4,i);var f=2/i,h=o(f*r),d=n[e]-t,p=t,m=s*i;d=Math.min(Math.max(d,-m),m),t=n[e]-d;var _=(n.__damp[l]+f*d)*r;n.__damp[l]=(n.__damp[l]-f*_)*h;var y=t+(d+_)*h;return p-n[e]>0==y>p&&(y=p,n.__damp[l]=(y-p)/r),n[e]=y,!0}var n9=function(e){return e&&e.isCamera},i9=function(e){return e&&e.isLight},Jh=new W,RR=new oi,PR=new oi,Qh=new Lt,uS=new W;function r9(n,e,t,i,r,s,o){typeof e=="number"?Jh.setScalar(e):Array.isArray(e)?Jh.set(e[0],e[1],e[2]):Jh.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),uS.setFromMatrixPosition(n.matrixWorld),n9(n)||i9(n)?Qh.lookAt(uS,Jh,n.up):Qh.lookAt(Jh,uS,n.up),w_(n.quaternion,PR.setFromRotationMatrix(Qh),t,i,r,s,o),a&&(Qh.extractRotation(a.matrixWorld),RR.setFromRotationMatrix(Qh),w_(n.quaternion,PR.copy(n.quaternion).premultiply(RR.invert()),t,i,r,s,o))}function Cf(n,e,t,i,r,s,o,a){return xi(n,e,n[e]+GW(n[e],t),i,r,s,o,a)}var ed=new be,IR,LR;function s9(n,e,t,i,r,s,o){return typeof e=="number"?ed.setScalar(e):Array.isArray(e)?ed.set(e[0],e[1]):ed.copy(e),IR=xi(n,"x",ed.x,t,i,r,s,o),LR=xi(n,"y",ed.y,t,i,r,s,o),IR||LR}var Vc=new W,DR,NR,OR;function jw(n,e,t,i,r,s,o){return typeof e=="number"?Vc.setScalar(e):Array.isArray(e)?Vc.set(e[0],e[1],e[2]):Vc.copy(e),DR=xi(n,"x",Vc.x,t,i,r,s,o),NR=xi(n,"y",Vc.y,t,i,r,s,o),OR=xi(n,"z",Vc.z,t,i,r,s,o),DR||NR||OR}var iu=new sn,UR,kR,FR,zR;function o9(n,e,t,i,r,s,o){return typeof e=="number"?iu.setScalar(e):Array.isArray(e)?iu.set(e[0],e[1],e[2],e[3]):iu.copy(e),UR=xi(n,"x",iu.x,t,i,r,s,o),kR=xi(n,"y",iu.y,t,i,r,s,o),FR=xi(n,"z",iu.z,t,i,r,s,o),zR=xi(n,"w",iu.w,t,i,r,s,o),UR||kR||FR||zR}var td=new Gr,BR,HR,VR;function a9(n,e,t,i,r,s,o){return Array.isArray(e)?td.set(e[0],e[1],e[2],e[3]):td.copy(e),BR=Cf(n,"x",td.x,t,i,r,s,o),HR=Cf(n,"y",td.y,t,i,r,s,o),VR=Cf(n,"z",td.z,t,i,r,s,o),BR||HR||VR}var Gc=new nt,GR,WR,XR;function l9(n,e,t,i,r,s,o){return e instanceof nt?Gc.copy(e):Array.isArray(e)?Gc.setRGB(e[0],e[1],e[2]):Gc.set(e),GR=xi(n,"r",Gc.r,t,i,r,s,o),WR=xi(n,"g",Gc.g,t,i,r,s,o),XR=xi(n,"b",Gc.b,t,i,r,s,o),GR||WR||XR}var Ks=new oi,ta=new sn,YR=new sn,nd=new sn,qR,jR,ZR,KR;function w_(n,e,t,i,r,s,o){var a=n;Array.isArray(e)?Ks.set(e[0],e[1],e[2],e[3]):Ks.copy(e);var l=n.dot(Ks)>0?1:-1;return Ks.x*=l,Ks.y*=l,Ks.z*=l,Ks.w*=l,qR=xi(n,"x",Ks.x,t,i,r,s,o),jR=xi(n,"y",Ks.y,t,i,r,s,o),ZR=xi(n,"z",Ks.z,t,i,r,s,o),KR=xi(n,"w",Ks.w,t,i,r,s,o),ta.set(n.x,n.y,n.z,n.w).normalize(),YR.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),nd.copy(ta).multiplyScalar(YR.dot(ta)/ta.dot(ta)),a.__damp.velocity_x-=nd.x,a.__damp.velocity_y-=nd.y,a.__damp.velocity_z-=nd.z,a.__damp.velocity_w-=nd.w,n.set(ta.x,ta.y,ta.z,ta.w),qR||jR||ZR||KR}var id=new S_,$R,JR,QR;function u9(n,e,t,i,r,s,o){return Array.isArray(e)?id.set(e[0],e[1],e[2]):id.copy(e),$R=xi(n,"radius",id.radius,t,i,r,s,o),JR=Cf(n,"phi",id.phi,t,i,r,s,o),QR=Cf(n,"theta",id.theta,t,i,r,s,o),$R||JR||QR}var b0=new Lt,eP=new W,tP=new oi,nP=new W,iP,rP,sP;function c9(n,e,t,i,r,s,o){var a=n;return a.__damp===void 0&&(a.__damp={position:new W,rotation:new oi,scale:new W},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?b0.set.apply(b0,BW(e)):b0.copy(e),b0.decompose(eP,tP,nP),iP=jw(a.__damp.position,eP,t,i,r,s,o),rP=w_(a.__damp.rotation,tP,t,i,r,s,o),sP=jw(a.__damp.scale,nP,t,i,r,s,o),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),iP||rP||sP}var oP=Object.freeze({__proto__:null,rsqw:jW,exp:FN,linear:ZW,sine:KW,cubic:$W,quint:JW,circ:QW,quart:e9,expo:t9,damp:xi,dampLookAt:r9,dampAngle:Cf,damp2:s9,damp3:jw,damp4:o9,dampE:a9,dampC:l9,dampQ:w_,dampS:u9,dampM:c9}),Ns=Uint8Array,nl=Uint16Array,Zw=Uint32Array,zN=new Ns([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),BN=new Ns([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f9=new Ns([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),HN=function(n,e){for(var t=new nl(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new Zw(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},VN=HN(zN,2),GN=VN[0],h9=VN[1];GN[28]=258,h9[258]=28;var d9=HN(BN,0),p9=d9[0],Kw=new nl(32768);for(var In=0;In<32768;++In){var Wa=(In&43690)>>>1|(In&21845)<<1;Wa=(Wa&52428)>>>2|(Wa&13107)<<2,Wa=(Wa&61680)>>>4|(Wa&3855)<<4,Kw[In]=((Wa&65280)>>>8|(Wa&255)<<8)>>>1}var Gd=function(n,e,t){for(var i=n.length,r=0,s=new nl(e);r<i;++r)++s[n[r]-1];var o=new nl(e);for(r=0;r<e;++r)o[r]=o[r-1]+s[r-1]<<1;var a;if(t){a=new nl(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var f=r<<4|n[r],h=e-n[r],d=o[n[r]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)a[Kw[d]>>>l]=f}else for(a=new nl(i),r=0;r<i;++r)n[r]&&(a[r]=Kw[o[n[r]-1]++]>>>15-n[r]);return a},Sm=new Ns(288);for(var In=0;In<144;++In)Sm[In]=8;for(var In=144;In<256;++In)Sm[In]=9;for(var In=256;In<280;++In)Sm[In]=7;for(var In=280;In<288;++In)Sm[In]=8;var WN=new Ns(32);for(var In=0;In<32;++In)WN[In]=5;var m9=Gd(Sm,9,1),g9=Gd(WN,5,1),cS=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},$s=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},fS=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},v9=function(n){return(n/8|0)+(n&7&&1)},_9=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof nl?nl:n instanceof Zw?Zw:Ns)(t-e);return i.set(n.subarray(e,t)),i},y9=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Ns(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ns(i*3));var o=function(Te){var Pe=e.length;if(Te>Pe){var Qe=new Ns(Math.max(Pe*2,Te));Qe.set(e),e=Qe}},a=t.f||0,l=t.p||0,f=t.b||0,h=t.l,d=t.d,p=t.m,m=t.n,_=i*8;do{if(!h){t.f=a=$s(n,l,1);var y=$s(n,l+1,3);if(l+=3,y)if(y==1)h=m9,d=g9,p=9,m=5;else if(y==2){var w=$s(n,l,31)+257,E=$s(n,l+10,15)+4,I=w+$s(n,l+5,31)+1;l+=14;for(var R=new Ns(I),P=new Ns(19),b=0;b<E;++b)P[f9[b]]=$s(n,l+b*3,7);l+=E*3;for(var C=cS(P),A=(1<<C)-1,O=Gd(P,C,1),b=0;b<I;){var F=O[$s(n,l,A)];l+=F&15;var x=F>>>4;if(x<16)R[b++]=x;else{var V=0,Y=0;for(x==16?(Y=3+$s(n,l,3),l+=2,V=R[b-1]):x==17?(Y=3+$s(n,l,7),l+=3):x==18&&(Y=11+$s(n,l,127),l+=7);Y--;)R[b++]=V}}var J=R.subarray(0,w),K=R.subarray(w);p=cS(J),m=cS(K),h=Gd(J,p,1),d=Gd(K,m,1)}else throw"invalid block type";else{var x=v9(l)+4,g=n[x-4]|n[x-3]<<8,S=x+g;if(S>i){if(s)throw"unexpected EOF";break}r&&o(f+g),e.set(n.subarray(x,S),f),t.b=f+=g,t.p=l=S*8;continue}if(l>_){if(s)throw"unexpected EOF";break}}r&&o(f+131072);for(var ne=(1<<p)-1,B=(1<<m)-1,te=l;;te=l){var V=h[fS(n,l)&ne],k=V>>>4;if(l+=V&15,l>_){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(k<256)e[f++]=k;else if(k==256){te=l,h=null;break}else{var ce=k-254;if(k>264){var b=k-257,Se=zN[b];ce=$s(n,l,(1<<Se)-1)+GN[b],l+=Se}var Fe=d[fS(n,l)&B],ue=Fe>>>4;if(!Fe)throw"invalid distance";l+=Fe&15;var K=p9[ue];if(ue>3){var Se=BN[ue];K+=fS(n,l)&(1<<Se)-1,l+=Se}if(l>_){if(s)throw"unexpected EOF";break}r&&o(f+131072);for(var Ee=f+ce;f<Ee;f+=4)e[f]=e[f-K],e[f+1]=e[f+1-K],e[f+2]=e[f+2-K],e[f+3]=e[f+3-K];f=Ee}}t.l=h,t.p=te,t.b=f,h&&(a=1,t.m=p,t.d=d,t.n=m)}while(!a);return f==e.length?e:_9(e,0,f)},x9=new Ns(0),S9=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function R0(n,e){return y9((S9(n),n.subarray(2,-4)),e)}var w9=typeof TextDecoder<"u"&&new TextDecoder,M9=0;try{w9.decode(x9,{stream:!0}),M9=1}catch{}const E9=n=>n&&n.isCubeTexture;class T9 extends Xn{constructor(e,t){var i,r;const s=E9(e),a=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(a)),f=Math.pow(2,l),h=3*Math.max(f,16*7),d=4*f,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(rm.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new mm(1,16),g=new Wr({uniforms:y,fragmentShader:_,vertexShader:m,side:ro});super(x,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var A9=Object.defineProperty,C9=(n,e,t)=>e in n?A9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ut=(n,e,t)=>(C9(n,typeof e!="symbol"?e+"":e,t),t);const P0=new nc,aP=new sa,b9=Math.cos(70*(Math.PI/180)),lP=(n,e)=>(n%e+e)%e;let R9=class extends Ho{constructor(e,t){super(),Ut(this,"object"),Ut(this,"domElement"),Ut(this,"enabled",!0),Ut(this,"target",new W),Ut(this,"minDistance",0),Ut(this,"maxDistance",1/0),Ut(this,"minZoom",0),Ut(this,"maxZoom",1/0),Ut(this,"minPolarAngle",0),Ut(this,"maxPolarAngle",Math.PI),Ut(this,"minAzimuthAngle",-1/0),Ut(this,"maxAzimuthAngle",1/0),Ut(this,"enableDamping",!1),Ut(this,"dampingFactor",.05),Ut(this,"enableZoom",!0),Ut(this,"zoomSpeed",1),Ut(this,"enableRotate",!0),Ut(this,"rotateSpeed",1),Ut(this,"enablePan",!0),Ut(this,"panSpeed",1),Ut(this,"screenSpacePanning",!0),Ut(this,"keyPanSpeed",7),Ut(this,"zoomToCursor",!1),Ut(this,"autoRotate",!1),Ut(this,"autoRotateSpeed",2),Ut(this,"reverseOrbit",!1),Ut(this,"reverseHorizontalOrbit",!1),Ut(this,"reverseVerticalOrbit",!1),Ut(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ut(this,"mouseButtons",{LEFT:lu.ROTATE,MIDDLE:lu.DOLLY,RIGHT:lu.PAN}),Ut(this,"touches",{ONE:uu.ROTATE,TWO:uu.DOLLY_PAN}),Ut(this,"target0"),Ut(this,"position0"),Ut(this,"zoom0"),Ut(this,"_domElementKeyEvents",null),Ut(this,"getPolarAngle"),Ut(this,"getAzimuthalAngle"),Ut(this,"setPolarAngle"),Ut(this,"setAzimuthalAngle"),Ut(this,"getDistance"),Ut(this,"listenToKeyEvents"),Ut(this,"stopListenToKeyEvents"),Ut(this,"saveState"),Ut(this,"reset"),Ut(this,"update"),Ut(this,"connect"),Ut(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=ie=>{let we=lP(ie,2*Math.PI),Ve=h.phi;Ve<0&&(Ve+=2*Math.PI),we<0&&(we+=2*Math.PI);let Q=Math.abs(we-Ve);2*Math.PI-Q<Q&&(we<Ve?we+=2*Math.PI:Ve+=2*Math.PI),d.phi=we-Ve,i.update()},this.setAzimuthalAngle=ie=>{let we=lP(ie,2*Math.PI),Ve=h.theta;Ve<0&&(Ve+=2*Math.PI),we<0&&(we+=2*Math.PI);let Q=Math.abs(we-Ve);2*Math.PI-Q<Q&&(we<Ve?we+=2*Math.PI:Ve+=2*Math.PI),d.theta=we-Ve,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",Ue),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ue),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ie=new W,we=new W(0,1,0),Ve=new oi().setFromUnitVectors(e.up,we),Q=Ve.clone().invert(),ge=new W,re=new oi,xe=2*Math.PI;return function(){const ct=i.object.position;Ve.setFromUnitVectors(e.up,we),Q.copy(Ve).invert(),ie.copy(ct).sub(i.target),ie.applyQuaternion(Ve),h.setFromVector3(ie),i.autoRotate&&l===a.NONE&&Y(F()),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let At=i.minAzimuthAngle,zt=i.maxAzimuthAngle;isFinite(At)&&isFinite(zt)&&(At<-Math.PI?At+=xe:At>Math.PI&&(At-=xe),zt<-Math.PI?zt+=xe:zt>Math.PI&&(zt-=xe),At<=zt?h.theta=Math.max(At,Math.min(zt,h.theta)):h.theta=h.theta>(At+zt)/2?Math.max(At,h.theta):Math.min(zt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&C||i.object.isOrthographicCamera?h.radius=Se(h.radius):h.radius=Se(h.radius*p),ie.setFromSpherical(h),ie.applyQuaternion(Q),ct.copy(i.target).add(ie),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Qt=!1;if(i.zoomToCursor&&C){let Ot=null;if(i.object instanceof Jn&&i.object.isPerspectiveCamera){const _t=ie.length();Ot=Se(_t*p);const st=_t-Ot;i.object.position.addScaledVector(P,st),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const _t=new W(b.x,b.y,0);_t.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Qt=!0;const st=new W(b.x,b.y,0);st.unproject(i.object),i.object.position.sub(st).add(_t),i.object.updateMatrixWorld(),Ot=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ot!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ot).add(i.object.position):(P0.origin.copy(i.object.position),P0.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(P0.direction))<b9?e.lookAt(i.target):(aP.setFromNormalAndCoplanarPoint(i.object.up,i.target),P0.intersectPlane(aP,i.target))))}else i.object instanceof bo&&i.object.isOrthographicCamera&&(Qt=p!==1,Qt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,C=!1,Qt||ge.distanceToSquared(i.object.position)>f||8*(1-re.dot(i.object.quaternion))>f?(i.dispatchEvent(r),ge.copy(i.object.position),re.copy(i.object.quaternion),Qt=!1,!0):!1}})(),this.connect=ie=>{ie===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ie,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ke),i.domElement.addEventListener("pointerdown",U),i.domElement.addEventListener("pointercancel",Ie),i.domElement.addEventListener("wheel",at)},this.dispose=()=>{var ie,we,Ve,Q,ge,re;i.domElement&&(i.domElement.style.touchAction="auto"),(ie=i.domElement)==null||ie.removeEventListener("contextmenu",ke),(we=i.domElement)==null||we.removeEventListener("pointerdown",U),(Ve=i.domElement)==null||Ve.removeEventListener("pointercancel",Ie),(Q=i.domElement)==null||Q.removeEventListener("wheel",at),(ge=i.domElement)==null||ge.ownerDocument.removeEventListener("pointermove",he),(re=i.domElement)==null||re.ownerDocument.removeEventListener("pointerup",Ie),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ue)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const f=1e-6,h=new S_,d=new S_;let p=1;const m=new W,_=new be,y=new be,x=new be,g=new be,S=new be,w=new be,E=new be,I=new be,R=new be,P=new W,b=new be;let C=!1;const A=[],O={};function F(){return 2*Math.PI/60/60*i.autoRotateSpeed}function V(){return Math.pow(.95,i.zoomSpeed)}function Y(ie){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=ie:d.theta-=ie}function J(ie){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=ie:d.phi-=ie}const K=(()=>{const ie=new W;return function(Ve,Q){ie.setFromMatrixColumn(Q,0),ie.multiplyScalar(-Ve),m.add(ie)}})(),ne=(()=>{const ie=new W;return function(Ve,Q){i.screenSpacePanning===!0?ie.setFromMatrixColumn(Q,1):(ie.setFromMatrixColumn(Q,0),ie.crossVectors(i.object.up,ie)),ie.multiplyScalar(Ve),m.add(ie)}})(),B=(()=>{const ie=new W;return function(Ve,Q){const ge=i.domElement;if(ge&&i.object instanceof Jn&&i.object.isPerspectiveCamera){const re=i.object.position;ie.copy(re).sub(i.target);let xe=ie.length();xe*=Math.tan(i.object.fov/2*Math.PI/180),K(2*Ve*xe/ge.clientHeight,i.object.matrix),ne(2*Q*xe/ge.clientHeight,i.object.matrix)}else ge&&i.object instanceof bo&&i.object.isOrthographicCamera?(K(Ve*(i.object.right-i.object.left)/i.object.zoom/ge.clientWidth,i.object.matrix),ne(Q*(i.object.top-i.object.bottom)/i.object.zoom/ge.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function te(ie){i.object instanceof Jn&&i.object.isPerspectiveCamera||i.object instanceof bo&&i.object.isOrthographicCamera?p/=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(ie){i.object instanceof Jn&&i.object.isPerspectiveCamera||i.object instanceof bo&&i.object.isOrthographicCamera?p*=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ce(ie){if(!i.zoomToCursor||!i.domElement)return;C=!0;const we=i.domElement.getBoundingClientRect(),Ve=ie.clientX-we.left,Q=ie.clientY-we.top,ge=we.width,re=we.height;b.x=Ve/ge*2-1,b.y=-(Q/re)*2+1,P.set(b.x,b.y,1).unproject(i.object).sub(i.object.position).normalize()}function Se(ie){return Math.max(i.minDistance,Math.min(i.maxDistance,ie))}function Fe(ie){_.set(ie.clientX,ie.clientY)}function ue(ie){ce(ie),E.set(ie.clientX,ie.clientY)}function Ee(ie){g.set(ie.clientX,ie.clientY)}function Te(ie){y.set(ie.clientX,ie.clientY),x.subVectors(y,_).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(Y(2*Math.PI*x.x/we.clientHeight),J(2*Math.PI*x.y/we.clientHeight)),_.copy(y),i.update()}function Pe(ie){I.set(ie.clientX,ie.clientY),R.subVectors(I,E),R.y>0?te(V()):R.y<0&&k(V()),E.copy(I),i.update()}function Qe(ie){S.set(ie.clientX,ie.clientY),w.subVectors(S,g).multiplyScalar(i.panSpeed),B(w.x,w.y),g.copy(S),i.update()}function ht(ie){ce(ie),ie.deltaY<0?k(V()):ie.deltaY>0&&te(V()),i.update()}function mt(ie){let we=!1;switch(ie.code){case i.keys.UP:B(0,i.keyPanSpeed),we=!0;break;case i.keys.BOTTOM:B(0,-i.keyPanSpeed),we=!0;break;case i.keys.LEFT:B(i.keyPanSpeed,0),we=!0;break;case i.keys.RIGHT:B(-i.keyPanSpeed,0),we=!0;break}we&&(ie.preventDefault(),i.update())}function ut(){if(A.length==1)_.set(A[0].pageX,A[0].pageY);else{const ie=.5*(A[0].pageX+A[1].pageX),we=.5*(A[0].pageY+A[1].pageY);_.set(ie,we)}}function G(){if(A.length==1)g.set(A[0].pageX,A[0].pageY);else{const ie=.5*(A[0].pageX+A[1].pageX),we=.5*(A[0].pageY+A[1].pageY);g.set(ie,we)}}function ve(){const ie=A[0].pageX-A[1].pageX,we=A[0].pageY-A[1].pageY,Ve=Math.sqrt(ie*ie+we*we);E.set(0,Ve)}function Re(){i.enableZoom&&ve(),i.enablePan&&G()}function He(){i.enableZoom&&ve(),i.enableRotate&&ut()}function Me(ie){if(A.length==1)y.set(ie.pageX,ie.pageY);else{const Ve=We(ie),Q=.5*(ie.pageX+Ve.x),ge=.5*(ie.pageY+Ve.y);y.set(Q,ge)}x.subVectors(y,_).multiplyScalar(i.rotateSpeed);const we=i.domElement;we&&(Y(2*Math.PI*x.x/we.clientHeight),J(2*Math.PI*x.y/we.clientHeight)),_.copy(y)}function se(ie){if(A.length==1)S.set(ie.pageX,ie.pageY);else{const we=We(ie),Ve=.5*(ie.pageX+we.x),Q=.5*(ie.pageY+we.y);S.set(Ve,Q)}w.subVectors(S,g).multiplyScalar(i.panSpeed),B(w.x,w.y),g.copy(S)}function Ge(ie){const we=We(ie),Ve=ie.pageX-we.x,Q=ie.pageY-we.y,ge=Math.sqrt(Ve*Ve+Q*Q);I.set(0,ge),R.set(0,Math.pow(I.y/E.y,i.zoomSpeed)),te(R.y),E.copy(I)}function Ke(ie){i.enableZoom&&Ge(ie),i.enablePan&&se(ie)}function j(ie){i.enableZoom&&Ge(ie),i.enableRotate&&Me(ie)}function U(ie){var we,Ve;i.enabled!==!1&&(A.length===0&&((we=i.domElement)==null||we.ownerDocument.addEventListener("pointermove",he),(Ve=i.domElement)==null||Ve.ownerDocument.addEventListener("pointerup",Ie)),$e(ie),ie.pointerType==="touch"?qe(ie):Le(ie))}function he(ie){i.enabled!==!1&&(ie.pointerType==="touch"?gt(ie):Ae(ie))}function Ie(ie){var we,Ve,Q;St(ie),A.length===0&&((we=i.domElement)==null||we.releasePointerCapture(ie.pointerId),(Ve=i.domElement)==null||Ve.ownerDocument.removeEventListener("pointermove",he),(Q=i.domElement)==null||Q.ownerDocument.removeEventListener("pointerup",Ie)),i.dispatchEvent(o),l=a.NONE}function Le(ie){let we;switch(ie.button){case 0:we=i.mouseButtons.LEFT;break;case 1:we=i.mouseButtons.MIDDLE;break;case 2:we=i.mouseButtons.RIGHT;break;default:we=-1}switch(we){case lu.DOLLY:if(i.enableZoom===!1)return;ue(ie),l=a.DOLLY;break;case lu.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enablePan===!1)return;Ee(ie),l=a.PAN}else{if(i.enableRotate===!1)return;Fe(ie),l=a.ROTATE}break;case lu.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(i.enableRotate===!1)return;Fe(ie),l=a.ROTATE}else{if(i.enablePan===!1)return;Ee(ie),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ae(ie){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Te(ie);break;case a.DOLLY:if(i.enableZoom===!1)return;Pe(ie);break;case a.PAN:if(i.enablePan===!1)return;Qe(ie);break}}function at(ie){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ie.preventDefault(),i.dispatchEvent(s),ht(ie),i.dispatchEvent(o))}function Ue(ie){i.enabled===!1||i.enablePan===!1||mt(ie)}function qe(ie){switch(wt(ie),A.length){case 1:switch(i.touches.ONE){case uu.ROTATE:if(i.enableRotate===!1)return;ut(),l=a.TOUCH_ROTATE;break;case uu.PAN:if(i.enablePan===!1)return;G(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case uu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Re(),l=a.TOUCH_DOLLY_PAN;break;case uu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;He(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function gt(ie){switch(wt(ie),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Me(ie),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;se(ie),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ke(ie),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;j(ie),i.update();break;default:l=a.NONE}}function ke(ie){i.enabled!==!1&&ie.preventDefault()}function $e(ie){A.push(ie)}function St(ie){delete O[ie.pointerId];for(let we=0;we<A.length;we++)if(A[we].pointerId==ie.pointerId){A.splice(we,1);return}}function wt(ie){let we=O[ie.pointerId];we===void 0&&(we=new be,O[ie.pointerId]=we),we.set(ie.pageX,ie.pageY)}function We(ie){const we=ie.pointerId===A[0].pointerId?A[1]:A[0];return O[we.pointerId]}t!==void 0&&this.connect(t),this.update()}};class P9 extends $E{constructor(e){super(e),this.type=Ii}parse(e){const o=function(b,C){switch(b){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},h=`
`,d=function(b,C,A){C=C||1024;let F=b.pos,V=-1,Y=0,J="",K=String.fromCharCode.apply(null,new Uint16Array(b.subarray(F,F+128)));for(;0>(V=K.indexOf(h))&&Y<C&&F<b.byteLength;)J+=K,Y+=K.length,F+=128,K+=String.fromCharCode.apply(null,new Uint16Array(b.subarray(F,F+128)));return-1<V?(A!==!1&&(b.pos+=Y+V+1),J+K.slice(0,V)):!1},p=function(b){const C=/^#\?(\S+)/,A=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let J,K;for((b.pos>=b.byteLength||!(J=d(b)))&&o(1,"no header found"),(K=J.match(C))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=K[1],Y.string+=J+`
`;J=d(b),J!==!1;){if(Y.string+=J+`
`,J.charAt(0)==="#"){Y.comments+=J+`
`;continue}if((K=J.match(A))&&(Y.gamma=parseFloat(K[1])),(K=J.match(O))&&(Y.exposure=parseFloat(K[1])),(K=J.match(F))&&(Y.valid|=2,Y.format=K[1]),(K=J.match(V))&&(Y.valid|=4,Y.height=parseInt(K[1],10),Y.width=parseInt(K[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},m=function(b,C,A){const O=C;if(O<8||O>32767||b[0]!==2||b[1]!==2||b[2]&128)return new Uint8Array(b);O!==(b[2]<<8|b[3])&&o(3,"wrong scanline width");const F=new Uint8Array(4*C*A);F.length||o(4,"unable to allocate buffer space");let V=0,Y=0;const J=4*O,K=new Uint8Array(4),ne=new Uint8Array(J);let B=A;for(;B>0&&Y<b.byteLength;){Y+4>b.byteLength&&o(1),K[0]=b[Y++],K[1]=b[Y++],K[2]=b[Y++],K[3]=b[Y++],(K[0]!=2||K[1]!=2||(K[2]<<8|K[3])!=O)&&o(3,"bad rgbe scanline format");let te=0,k;for(;te<J&&Y<b.byteLength;){k=b[Y++];const Se=k>128;if(Se&&(k-=128),(k===0||te+k>J)&&o(3,"bad scanline data"),Se){const Fe=b[Y++];for(let ue=0;ue<k;ue++)ne[te++]=Fe}else ne.set(b.subarray(Y,Y+k),te),te+=k,Y+=k}const ce=O;for(let Se=0;Se<ce;Se++){let Fe=0;F[V]=ne[Se+Fe],Fe+=O,F[V+1]=ne[Se+Fe],Fe+=O,F[V+2]=ne[Se+Fe],Fe+=O,F[V+3]=ne[Se+Fe],V+=4}B--}return F},_=function(b,C,A,O){const F=b[C+3],V=Math.pow(2,F-128)/255;A[O+0]=b[C+0]*V,A[O+1]=b[C+1]*V,A[O+2]=b[C+2]*V,A[O+3]=1},y=function(b,C,A,O){const F=b[C+3],V=Math.pow(2,F-128)/255;A[O+0]=wu.toHalfFloat(Math.min(b[C+0]*V,65504)),A[O+1]=wu.toHalfFloat(Math.min(b[C+1]*V,65504)),A[O+2]=wu.toHalfFloat(Math.min(b[C+2]*V,65504)),A[O+3]=wu.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const g=p(x),S=g.width,w=g.height,E=m(x.subarray(x.pos),S,w);let I,R,P;switch(this.type){case Wn:P=E.length/4;const b=new Float32Array(P*4);for(let A=0;A<P;A++)_(E,A*4,b,A*4);I=b,R=Wn;break;case Ii:P=E.length/4;const C=new Uint16Array(P*4);for(let A=0;A<P;A++)y(E,A*4,C,A*4);I=C,R=Ii;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:w,data:I,header:g.string,gamma:g.gamma,exposure:g.exposure,type:R}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Wn:case Ii:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=_n,o.magFilter=_n,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}}const rd="colorSpace"in new dn;class I9 extends $E{constructor(e){super(e),this.type=Ii}parse(e){const C=Math.pow(2.7182818,2.2);function A(N,z){for(var ee=0,L=0;L<65536;++L)(L==0||N[L>>3]&1<<(L&7))&&(z[ee++]=L);for(var H=ee-1;ee<65536;)z[ee++]=0;return H}function O(N){for(var z=0;z<16384;z++)N[z]={},N[z].len=0,N[z].lit=0,N[z].p=null}const F={l:0,c:0,lc:0};function V(N,z,ee,L,H){for(;ee<N;)z=z<<8|ie(L,H),ee+=8;ee-=N,F.l=z>>ee&(1<<N)-1,F.c=z,F.lc=ee}const Y=new Array(59);function J(N){for(var z=0;z<=58;++z)Y[z]=0;for(var z=0;z<65537;++z)Y[N[z]]+=1;for(var ee=0,z=58;z>0;--z){var L=ee+Y[z]>>1;Y[z]=ee,ee=L}for(var z=0;z<65537;++z){var H=N[z];H>0&&(N[z]=H|Y[H]++<<6)}}function K(N,z,ee,L,H,X,$){for(var q=ee,ae=0,de=0;H<=X;H++){if(q.value-ee.value>L)return!1;V(6,ae,de,N,q);var me=F.l;if(ae=F.c,de=F.lc,$[H]=me,me==63){if(q.value-ee.value>L)throw"Something wrong with hufUnpackEncTable";V(8,ae,de,N,q);var fe=F.l+6;if(ae=F.c,de=F.lc,H+fe>X+1)throw"Something wrong with hufUnpackEncTable";for(;fe--;)$[H++]=0;H--}else if(me>=59){var fe=me-59+2;if(H+fe>X+1)throw"Something wrong with hufUnpackEncTable";for(;fe--;)$[H++]=0;H--}}J($)}function ne(N){return N&63}function B(N){return N>>6}function te(N,z,ee,L){for(;z<=ee;z++){var H=B(N[z]),X=ne(N[z]);if(H>>X)throw"Invalid table entry";if(X>14){var $=L[H>>X-14];if($.len)throw"Invalid table entry";if($.lit++,$.p){var q=$.p;$.p=new Array($.lit);for(var ae=0;ae<$.lit-1;++ae)$.p[ae]=q[ae]}else $.p=new Array(1);$.p[$.lit-1]=z}else if(X)for(var de=0,ae=1<<14-X;ae>0;ae--){var $=L[(H<<14-X)+de];if($.len||$.p)throw"Invalid table entry";$.len=X,$.lit=z,de++}}return!0}const k={c:0,lc:0};function ce(N,z,ee,L){N=N<<8|ie(ee,L),z+=8,k.c=N,k.lc=z}const Se={c:0,lc:0};function Fe(N,z,ee,L,H,X,$,q,ae,de){if(N==z){L<8&&(ce(ee,L,H,$),ee=k.c,L=k.lc),L-=8;var me=ee>>L,me=new Uint8Array([me])[0];if(ae.value+me>de)return!1;for(var fe=q[ae.value-1];me-- >0;)q[ae.value++]=fe}else if(ae.value<de)q[ae.value++]=N;else return!1;Se.c=ee,Se.lc=L}function ue(N){return N&65535}function Ee(N){var z=ue(N);return z>32767?z-65536:z}const Te={a:0,b:0};function Pe(N,z){var ee=Ee(N),L=Ee(z),H=L,X=ee+(H&1)+(H>>1),$=X,q=X-H;Te.a=$,Te.b=q}function Qe(N,z){var ee=ue(N),L=ue(z),H=ee-(L>>1)&65535,X=L+H-32768&65535;Te.a=X,Te.b=H}function ht(N,z,ee,L,H,X,$){for(var q=$<16384,ae=ee>H?H:ee,de=1,me;de<=ae;)de<<=1;for(de>>=1,me=de,de>>=1;de>=1;){for(var fe=0,ze=fe+X*(H-me),De=X*de,Ne=X*me,Je=L*de,rt=L*me,lt,Ct,Ze,Oe;fe<=ze;fe+=Ne){for(var bt=fe,Mt=fe+L*(ee-me);bt<=Mt;bt+=rt){var Pt=bt+Je,on=bt+De,gn=on+Je;q?(Pe(N[bt+z],N[on+z]),lt=Te.a,Ze=Te.b,Pe(N[Pt+z],N[gn+z]),Ct=Te.a,Oe=Te.b,Pe(lt,Ct),N[bt+z]=Te.a,N[Pt+z]=Te.b,Pe(Ze,Oe),N[on+z]=Te.a,N[gn+z]=Te.b):(Qe(N[bt+z],N[on+z]),lt=Te.a,Ze=Te.b,Qe(N[Pt+z],N[gn+z]),Ct=Te.a,Oe=Te.b,Qe(lt,Ct),N[bt+z]=Te.a,N[Pt+z]=Te.b,Qe(Ze,Oe),N[on+z]=Te.a,N[gn+z]=Te.b)}if(ee&de){var on=bt+De;q?Pe(N[bt+z],N[on+z]):Qe(N[bt+z],N[on+z]),lt=Te.a,N[on+z]=Te.b,N[bt+z]=lt}}if(H&de)for(var bt=fe,Mt=fe+L*(ee-me);bt<=Mt;bt+=rt){var Pt=bt+Je;q?Pe(N[bt+z],N[Pt+z]):Qe(N[bt+z],N[Pt+z]),lt=Te.a,N[Pt+z]=Te.b,N[bt+z]=lt}me=de,de>>=1}return fe}function mt(N,z,ee,L,H,X,$,q,ae,de){for(var me=0,fe=0,ze=q,De=Math.trunc(H.value+(X+7)/8);H.value<De;)for(ce(me,fe,ee,H),me=k.c,fe=k.lc;fe>=14;){var Ne=me>>fe-14&16383,Je=z[Ne];if(Je.len)fe-=Je.len,Fe(Je.lit,$,me,fe,ee,L,H,ae,de,ze),me=Se.c,fe=Se.lc;else{if(!Je.p)throw"hufDecode issues";var rt;for(rt=0;rt<Je.lit;rt++){for(var lt=ne(N[Je.p[rt]]);fe<lt&&H.value<De;)ce(me,fe,ee,H),me=k.c,fe=k.lc;if(fe>=lt&&B(N[Je.p[rt]])==(me>>fe-lt&(1<<lt)-1)){fe-=lt,Fe(Je.p[rt],$,me,fe,ee,L,H,ae,de,ze),me=Se.c,fe=Se.lc;break}}if(rt==Je.lit)throw"hufDecode issues"}}var Ct=8-X&7;for(me>>=Ct,fe-=Ct;fe>0;){var Je=z[me<<14-fe&16383];if(Je.len)fe-=Je.len,Fe(Je.lit,$,me,fe,ee,L,H,ae,de,ze),me=Se.c,fe=Se.lc;else throw"hufDecode issues"}return!0}function ut(N,z,ee,L,H,X){var $={value:0},q=ee.value,ae=We(z,ee),de=We(z,ee);ee.value+=4;var me=We(z,ee);if(ee.value+=4,ae<0||ae>=65537||de<0||de>=65537)throw"Something wrong with HUF_ENCSIZE";var fe=new Array(65537),ze=new Array(16384);O(ze);var De=L-(ee.value-q);if(K(N,z,ee,De,ae,de,fe),me>8*(L-(ee.value-q)))throw"Something wrong with hufUncompress";te(fe,ae,de,ze),mt(fe,ze,N,z,ee,me,de,X,H,$)}function G(N,z,ee){for(var L=0;L<ee;++L)z[L]=N[z[L]]}function ve(N){for(var z=1;z<N.length;z++){var ee=N[z-1]+N[z]-128;N[z]=ee}}function Re(N,z){for(var ee=0,L=Math.floor((N.length+1)/2),H=0,X=N.length-1;!(H>X||(z[H++]=N[ee++],H>X));)z[H++]=N[L++]}function He(N){for(var z=N.byteLength,ee=new Array,L=0,H=new DataView(N);z>0;){var X=H.getInt8(L++);if(X<0){var $=-X;z-=$+1;for(var q=0;q<$;q++)ee.push(H.getUint8(L++))}else{var $=X;z-=2;for(var ae=H.getUint8(L++),q=0;q<$+1;q++)ee.push(ae)}}return ee}function Me(N,z,ee,L,H,X){var Pt=new DataView(X.buffer),$=ee[N.idx[0]].width,q=ee[N.idx[0]].height,ae=3,de=Math.floor($/8),me=Math.ceil($/8),fe=Math.ceil(q/8),ze=$-(me-1)*8,De=q-(fe-1)*8,Ne={value:0},Je=new Array(ae),rt=new Array(ae),lt=new Array(ae),Ct=new Array(ae),Ze=new Array(ae);for(let Yt=0;Yt<ae;++Yt)Ze[Yt]=z[N.idx[Yt]],Je[Yt]=Yt<1?0:Je[Yt-1]+me*fe,rt[Yt]=new Float32Array(64),lt[Yt]=new Uint16Array(64),Ct[Yt]=new Uint16Array(me*64);for(let Yt=0;Yt<fe;++Yt){var Oe=8;Yt==fe-1&&(Oe=De);var bt=8;for(let Bt=0;Bt<me;++Bt){Bt==me-1&&(bt=ze);for(let tn=0;tn<ae;++tn)lt[tn].fill(0),lt[tn][0]=H[Je[tn]++],se(Ne,L,lt[tn]),Ge(lt[tn],rt[tn]),Ke(rt[tn]);j(rt);for(let tn=0;tn<ae;++tn)U(rt[tn],Ct[tn],Bt*64)}let Fn=0;for(let Bt=0;Bt<ae;++Bt){const tn=ee[N.idx[Bt]].type;for(let Tn=8*Yt;Tn<8*Yt+Oe;++Tn){Fn=Ze[Bt][Tn];for(let _s=0;_s<de;++_s){const rr=_s*64+(Tn&7)*8;Pt.setUint16(Fn+0*2*tn,Ct[Bt][rr+0],!0),Pt.setUint16(Fn+1*2*tn,Ct[Bt][rr+1],!0),Pt.setUint16(Fn+2*2*tn,Ct[Bt][rr+2],!0),Pt.setUint16(Fn+3*2*tn,Ct[Bt][rr+3],!0),Pt.setUint16(Fn+4*2*tn,Ct[Bt][rr+4],!0),Pt.setUint16(Fn+5*2*tn,Ct[Bt][rr+5],!0),Pt.setUint16(Fn+6*2*tn,Ct[Bt][rr+6],!0),Pt.setUint16(Fn+7*2*tn,Ct[Bt][rr+7],!0),Fn+=8*2*tn}}if(de!=me)for(let Tn=8*Yt;Tn<8*Yt+Oe;++Tn){const _s=Ze[Bt][Tn]+8*de*2*tn,rr=de*64+(Tn&7)*8;for(let fo=0;fo<bt;++fo)Pt.setUint16(_s+fo*2*tn,Ct[Bt][rr+fo],!0)}}}for(var Mt=new Uint16Array($),Pt=new DataView(X.buffer),on=0;on<ae;++on){ee[N.idx[on]].decoded=!0;var gn=ee[N.idx[on]].type;if(ee[on].type==2)for(var Nn=0;Nn<q;++Nn){const Yt=Ze[on][Nn];for(var Kt=0;Kt<$;++Kt)Mt[Kt]=Pt.getUint16(Yt+Kt*2*gn,!0);for(var Kt=0;Kt<$;++Kt)Pt.setFloat32(Yt+Kt*2*gn,re(Mt[Kt]),!0)}}}function se(N,z,ee){for(var L,H=1;H<64;)L=z[N.value],L==65280?H=64:L>>8==255?H+=L&255:(ee[H]=L,H++),N.value++}function Ge(N,z){z[0]=re(N[0]),z[1]=re(N[1]),z[2]=re(N[5]),z[3]=re(N[6]),z[4]=re(N[14]),z[5]=re(N[15]),z[6]=re(N[27]),z[7]=re(N[28]),z[8]=re(N[2]),z[9]=re(N[4]),z[10]=re(N[7]),z[11]=re(N[13]),z[12]=re(N[16]),z[13]=re(N[26]),z[14]=re(N[29]),z[15]=re(N[42]),z[16]=re(N[3]),z[17]=re(N[8]),z[18]=re(N[12]),z[19]=re(N[17]),z[20]=re(N[25]),z[21]=re(N[30]),z[22]=re(N[41]),z[23]=re(N[43]),z[24]=re(N[9]),z[25]=re(N[11]),z[26]=re(N[18]),z[27]=re(N[24]),z[28]=re(N[31]),z[29]=re(N[40]),z[30]=re(N[44]),z[31]=re(N[53]),z[32]=re(N[10]),z[33]=re(N[19]),z[34]=re(N[23]),z[35]=re(N[32]),z[36]=re(N[39]),z[37]=re(N[45]),z[38]=re(N[52]),z[39]=re(N[54]),z[40]=re(N[20]),z[41]=re(N[22]),z[42]=re(N[33]),z[43]=re(N[38]),z[44]=re(N[46]),z[45]=re(N[51]),z[46]=re(N[55]),z[47]=re(N[60]),z[48]=re(N[21]),z[49]=re(N[34]),z[50]=re(N[37]),z[51]=re(N[47]),z[52]=re(N[50]),z[53]=re(N[56]),z[54]=re(N[59]),z[55]=re(N[61]),z[56]=re(N[35]),z[57]=re(N[36]),z[58]=re(N[48]),z[59]=re(N[49]),z[60]=re(N[57]),z[61]=re(N[58]),z[62]=re(N[62]),z[63]=re(N[63])}function Ke(N){const z=.5*Math.cos(.7853975),ee=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),H=.5*Math.cos(3*3.14159/16),X=.5*Math.cos(5*3.14159/16),$=.5*Math.cos(3*3.14159/8),q=.5*Math.cos(7*3.14159/16);for(var ae=new Array(4),de=new Array(4),me=new Array(4),fe=new Array(4),ze=0;ze<8;++ze){var De=ze*8;ae[0]=L*N[De+2],ae[1]=$*N[De+2],ae[2]=L*N[De+6],ae[3]=$*N[De+6],de[0]=ee*N[De+1]+H*N[De+3]+X*N[De+5]+q*N[De+7],de[1]=H*N[De+1]-q*N[De+3]-ee*N[De+5]-X*N[De+7],de[2]=X*N[De+1]-ee*N[De+3]+q*N[De+5]+H*N[De+7],de[3]=q*N[De+1]-X*N[De+3]+H*N[De+5]-ee*N[De+7],me[0]=z*(N[De+0]+N[De+4]),me[3]=z*(N[De+0]-N[De+4]),me[1]=ae[0]+ae[3],me[2]=ae[1]-ae[2],fe[0]=me[0]+me[1],fe[1]=me[3]+me[2],fe[2]=me[3]-me[2],fe[3]=me[0]-me[1],N[De+0]=fe[0]+de[0],N[De+1]=fe[1]+de[1],N[De+2]=fe[2]+de[2],N[De+3]=fe[3]+de[3],N[De+4]=fe[3]-de[3],N[De+5]=fe[2]-de[2],N[De+6]=fe[1]-de[1],N[De+7]=fe[0]-de[0]}for(var Ne=0;Ne<8;++Ne)ae[0]=L*N[16+Ne],ae[1]=$*N[16+Ne],ae[2]=L*N[48+Ne],ae[3]=$*N[48+Ne],de[0]=ee*N[8+Ne]+H*N[24+Ne]+X*N[40+Ne]+q*N[56+Ne],de[1]=H*N[8+Ne]-q*N[24+Ne]-ee*N[40+Ne]-X*N[56+Ne],de[2]=X*N[8+Ne]-ee*N[24+Ne]+q*N[40+Ne]+H*N[56+Ne],de[3]=q*N[8+Ne]-X*N[24+Ne]+H*N[40+Ne]-ee*N[56+Ne],me[0]=z*(N[Ne]+N[32+Ne]),me[3]=z*(N[Ne]-N[32+Ne]),me[1]=ae[0]+ae[3],me[2]=ae[1]-ae[2],fe[0]=me[0]+me[1],fe[1]=me[3]+me[2],fe[2]=me[3]-me[2],fe[3]=me[0]-me[1],N[0+Ne]=fe[0]+de[0],N[8+Ne]=fe[1]+de[1],N[16+Ne]=fe[2]+de[2],N[24+Ne]=fe[3]+de[3],N[32+Ne]=fe[3]-de[3],N[40+Ne]=fe[2]-de[2],N[48+Ne]=fe[1]-de[1],N[56+Ne]=fe[0]-de[0]}function j(N){for(var z=0;z<64;++z){var ee=N[0][z],L=N[1][z],H=N[2][z];N[0][z]=ee+1.5747*H,N[1][z]=ee-.1873*L-.4682*H,N[2][z]=ee+1.8556*L}}function U(N,z,ee){for(var L=0;L<64;++L)z[ee+L]=wu.toHalfFloat(he(N[L]))}function he(N){return N<=1?Math.sign(N)*Math.pow(Math.abs(N),2.2):Math.sign(N)*Math.pow(C,Math.abs(N)-1)}function Ie(N){return new DataView(N.array.buffer,N.offset.value,N.size)}function Le(N){var z=N.viewer.buffer.slice(N.offset.value,N.offset.value+N.size),ee=new Uint8Array(He(z)),L=new Uint8Array(ee.length);return ve(ee),Re(ee,L),new DataView(L.buffer)}function Ae(N){var z=N.array.slice(N.offset.value,N.offset.value+N.size),ee=R0(z),L=new Uint8Array(ee.length);return ve(ee),Re(ee,L),new DataView(L.buffer)}function at(N){for(var z=N.viewer,ee={value:N.offset.value},L=new Uint16Array(N.width*N.scanlineBlockSize*(N.channels*N.type)),H=new Uint8Array(8192),X=0,$=new Array(N.channels),q=0;q<N.channels;q++)$[q]={},$[q].start=X,$[q].end=$[q].start,$[q].nx=N.width,$[q].ny=N.lines,$[q].size=N.type,X+=$[q].nx*$[q].ny*$[q].size;var ae=xe(z,ee),de=xe(z,ee);if(de>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ae<=de)for(var q=0;q<de-ae+1;q++)H[q+ae]=we(z,ee);var me=new Uint16Array(65536),fe=A(H,me),ze=We(z,ee);ut(N.array,z,ee,ze,L,X);for(var q=0;q<N.channels;++q)for(var De=$[q],Ne=0;Ne<$[q].size;++Ne)ht(L,De.start+Ne,De.nx,De.size,De.ny,De.nx*De.size,fe);G(me,L,X);for(var Je=0,rt=new Uint8Array(L.buffer.byteLength),lt=0;lt<N.lines;lt++)for(var Ct=0;Ct<N.channels;Ct++){var De=$[Ct],Ze=De.nx*De.size,Oe=new Uint8Array(L.buffer,De.end*2,Ze*2);rt.set(Oe,Je),Je+=Ze*2,De.end+=Ze}return new DataView(rt.buffer)}function Ue(N){var z=N.array.slice(N.offset.value,N.offset.value+N.size),ee=R0(z);const L=N.lines*N.channels*N.width,H=N.type==1?new Uint16Array(L):new Uint32Array(L);let X=0,$=0;const q=new Array(4);for(let ae=0;ae<N.lines;ae++)for(let de=0;de<N.channels;de++){let me=0;switch(N.type){case 1:q[0]=X,q[1]=q[0]+N.width,X=q[1]+N.width;for(let fe=0;fe<N.width;++fe){const ze=ee[q[0]++]<<8|ee[q[1]++];me+=ze,H[$]=me,$++}break;case 2:q[0]=X,q[1]=q[0]+N.width,q[2]=q[1]+N.width,X=q[2]+N.width;for(let fe=0;fe<N.width;++fe){const ze=ee[q[0]++]<<24|ee[q[1]++]<<16|ee[q[2]++]<<8;me+=ze,H[$]=me,$++}break}}return new DataView(H.buffer)}function qe(N){var z=N.viewer,ee={value:N.offset.value},L=new Uint8Array(N.width*N.lines*(N.channels*N.type*2)),H={version:Ve(z,ee),unknownUncompressedSize:Ve(z,ee),unknownCompressedSize:Ve(z,ee),acCompressedSize:Ve(z,ee),dcCompressedSize:Ve(z,ee),rleCompressedSize:Ve(z,ee),rleUncompressedSize:Ve(z,ee),rleRawSize:Ve(z,ee),totalAcUncompressedCount:Ve(z,ee),totalDcUncompressedCount:Ve(z,ee),acCompression:Ve(z,ee)};if(H.version<2)throw"EXRLoader.parse: "+Nt.compression+" version "+H.version+" is unsupported";for(var X=new Array,$=xe(z,ee)-2;$>0;){var q=gt(z.buffer,ee),ae=we(z,ee),de=ae>>2&3,me=(ae>>4)-1,fe=new Int8Array([me])[0],ze=we(z,ee);X.push({name:q,index:fe,type:ze,compression:de}),$-=q.length+3}for(var De=Nt.channels,Ne=new Array(N.channels),Je=0;Je<N.channels;++Je){var rt=Ne[Je]={},lt=De[Je];rt.name=lt.name,rt.compression=0,rt.decoded=!1,rt.type=lt.pixelType,rt.pLinear=lt.pLinear,rt.width=N.width,rt.height=N.lines}for(var Ct={idx:new Array(3)},Ze=0;Ze<N.channels;++Ze)for(var rt=Ne[Ze],Je=0;Je<X.length;++Je){var Oe=X[Je];rt.name==Oe.name&&(rt.compression=Oe.compression,Oe.index>=0&&(Ct.idx[Oe.index]=Ze),rt.offset=Ze)}if(H.acCompressedSize>0)switch(H.acCompression){case 0:var Pt=new Uint16Array(H.totalAcUncompressedCount);ut(N.array,z,ee,H.acCompressedSize,Pt,H.totalAcUncompressedCount);break;case 1:var bt=N.array.slice(ee.value,ee.value+H.totalAcUncompressedCount),Mt=R0(bt),Pt=new Uint16Array(Mt.buffer);ee.value+=H.totalAcUncompressedCount;break}if(H.dcCompressedSize>0){var on={array:N.array,offset:ee,size:H.dcCompressedSize},gn=new Uint16Array(Ae(on).buffer);ee.value+=H.dcCompressedSize}if(H.rleRawSize>0){var bt=N.array.slice(ee.value,ee.value+H.rleCompressedSize),Mt=R0(bt),Nn=He(Mt.buffer);ee.value+=H.rleCompressedSize}for(var Kt=0,Yt=new Array(Ne.length),Je=0;Je<Yt.length;++Je)Yt[Je]=new Array;for(var Fn=0;Fn<N.lines;++Fn)for(var Bt=0;Bt<Ne.length;++Bt)Yt[Bt].push(Kt),Kt+=Ne[Bt].width*N.type*2;Me(Ct,Yt,Ne,Pt,gn,L);for(var Je=0;Je<Ne.length;++Je){var rt=Ne[Je];if(!rt.decoded)switch(rt.compression){case 2:for(var tn=0,Tn=0,Fn=0;Fn<N.lines;++Fn){for(var _s=Yt[Je][tn],rr=0;rr<rt.width;++rr){for(var fo=0;fo<2*rt.type;++fo)L[_s++]=Nn[Tn+fo*rt.width*rt.height];Tn++}tn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function gt(N,z){for(var ee=new Uint8Array(N),L=0;ee[z.value+L]!=0;)L+=1;var H=new TextDecoder().decode(ee.slice(z.value,z.value+L));return z.value=z.value+L+1,H}function ke(N,z,ee){var L=new TextDecoder().decode(new Uint8Array(N).slice(z.value,z.value+ee));return z.value=z.value+ee,L}function $e(N,z){var ee=wt(N,z),L=We(N,z);return[ee,L]}function St(N,z){var ee=We(N,z),L=We(N,z);return[ee,L]}function wt(N,z){var ee=N.getInt32(z.value,!0);return z.value=z.value+4,ee}function We(N,z){var ee=N.getUint32(z.value,!0);return z.value=z.value+4,ee}function ie(N,z){var ee=N[z.value];return z.value=z.value+1,ee}function we(N,z){var ee=N.getUint8(z.value);return z.value=z.value+1,ee}const Ve=function(N,z){let ee;return"getBigInt64"in DataView.prototype?ee=Number(N.getBigInt64(z.value,!0)):ee=N.getUint32(z.value+4,!0)+Number(N.getUint32(z.value,!0)<<32),z.value+=8,ee};function Q(N,z){var ee=N.getFloat32(z.value,!0);return z.value+=4,ee}function ge(N,z){return wu.toHalfFloat(Q(N,z))}function re(N){var z=(N&31744)>>10,ee=N&1023;return(N>>15?-1:1)*(z?z===31?ee?NaN:1/0:Math.pow(2,z-15)*(1+ee/1024):6103515625e-14*(ee/1024))}function xe(N,z){var ee=N.getUint16(z.value,!0);return z.value+=2,ee}function Be(N,z){return re(xe(N,z))}function ct(N,z,ee,L){for(var H=ee.value,X=[];ee.value<H+L-1;){var $=gt(z,ee),q=wt(N,ee),ae=we(N,ee);ee.value+=3;var de=wt(N,ee),me=wt(N,ee);X.push({name:$,pixelType:q,pLinear:ae,xSampling:de,ySampling:me})}return ee.value+=1,X}function At(N,z){var ee=Q(N,z),L=Q(N,z),H=Q(N,z),X=Q(N,z),$=Q(N,z),q=Q(N,z),ae=Q(N,z),de=Q(N,z);return{redX:ee,redY:L,greenX:H,greenY:X,blueX:$,blueY:q,whiteX:ae,whiteY:de}}function zt(N,z){var ee=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=we(N,z);return ee[L]}function Qt(N,z){var ee=We(N,z),L=We(N,z),H=We(N,z),X=We(N,z);return{xMin:ee,yMin:L,xMax:H,yMax:X}}function Ot(N,z){var ee=["INCREASING_Y"],L=we(N,z);return ee[L]}function _t(N,z){var ee=Q(N,z),L=Q(N,z);return[ee,L]}function st(N,z){var ee=Q(N,z),L=Q(N,z),H=Q(N,z);return[ee,L,H]}function Zt(N,z,ee,L,H){if(L==="string"||L==="stringvector"||L==="iccProfile")return ke(z,ee,H);if(L==="chlist")return ct(N,z,ee,H);if(L==="chromaticities")return At(N,ee);if(L==="compression")return zt(N,ee);if(L==="box2i")return Qt(N,ee);if(L==="lineOrder")return Ot(N,ee);if(L==="float")return Q(N,ee);if(L==="v2f")return _t(N,ee);if(L==="v3f")return st(N,ee);if(L==="int")return wt(N,ee);if(L==="rational")return $e(N,ee);if(L==="timecode")return St(N,ee);if(L==="preview")return ee.value+=H,"skipped";ee.value+=H}function je(N,z,ee){const L={};if(N.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=N.getUint8(4);const H=N.getUint8(5);L.spec={singleTile:!!(H&2),longName:!!(H&4),deepFormat:!!(H&8),multiPart:!!(H&16)},ee.value=8;for(var X=!0;X;){var $=gt(z,ee);if($==0)X=!1;else{var q=gt(z,ee),ae=We(N,ee),de=Zt(N,z,ee,q,ae);de===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${q}'.`):L[$]=de}}if(H&-5)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function Dt(N,z,ee,L,H){const X={size:0,viewer:z,array:ee,offset:L,width:N.dataWindow.xMax-N.dataWindow.xMin+1,height:N.dataWindow.yMax-N.dataWindow.yMin+1,channels:N.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:N.channels[0].pixelType,uncompress:null,getter:null,format:null,[rd?"colorSpace":"encoding"]:null};switch(N.compression){case"NO_COMPRESSION":X.lines=1,X.uncompress=Ie;break;case"RLE_COMPRESSION":X.lines=1,X.uncompress=Le;break;case"ZIPS_COMPRESSION":X.lines=1,X.uncompress=Ae;break;case"ZIP_COMPRESSION":X.lines=16,X.uncompress=Ae;break;case"PIZ_COMPRESSION":X.lines=32,X.uncompress=at;break;case"PXR24_COMPRESSION":X.lines=16,X.uncompress=Ue;break;case"DWAA_COMPRESSION":X.lines=32,X.uncompress=qe;break;case"DWAB_COMPRESSION":X.lines=256,X.uncompress=qe;break;default:throw"EXRLoader.parse: "+N.compression+" is unsupported"}if(X.scanlineBlockSize=X.lines,X.type==1)switch(H){case Wn:X.getter=Be,X.inputSize=2;break;case Ii:X.getter=xe,X.inputSize=2;break}else if(X.type==2)switch(H){case Wn:X.getter=Q,X.inputSize=4;break;case Ii:X.getter=ge,X.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+X.type+" for "+N.compression+".";X.blockCount=(N.dataWindow.yMax+1)/X.scanlineBlockSize;for(var $=0;$<X.blockCount;$++)Ve(z,L);X.outputChannels=X.channels==3?4:X.channels;const q=X.width*X.height*X.outputChannels;switch(H){case Wn:X.byteArray=new Float32Array(q),X.channels<X.outputChannels&&X.byteArray.fill(1,0,q);break;case Ii:X.byteArray=new Uint16Array(q),X.channels<X.outputChannels&&X.byteArray.fill(15360,0,q);break;default:console.error("THREE.EXRLoader: unsupported type: ",H);break}return X.bytesPerLine=X.width*X.inputSize*X.channels,X.outputChannels==4?X.format=ri:X.format=am,rd?X.colorSpace="srgb-linear":X.encoding=3e3,X}const yt=new DataView(e),Rt=new Uint8Array(e),pn={value:0},Nt=je(yt,e,pn),vt=Dt(Nt,yt,Rt,pn,this.type),Dn={value:0},yn={R:0,G:1,B:2,A:3,Y:0};for(let N=0;N<vt.height/vt.scanlineBlockSize;N++){const z=We(yt,pn);vt.size=We(yt,pn),vt.lines=z+vt.scanlineBlockSize>vt.height?vt.height-z:vt.scanlineBlockSize;const L=vt.size<vt.lines*vt.bytesPerLine?vt.uncompress(vt):Ie(vt);pn.value+=vt.size;for(let H=0;H<vt.scanlineBlockSize;H++){const X=H+N*vt.scanlineBlockSize;if(X>=vt.height)break;for(let $=0;$<vt.channels;$++){const q=yn[Nt.channels[$].name];for(let ae=0;ae<vt.width;ae++){Dn.value=(H*(vt.channels*vt.width)+$*vt.width+ae)*vt.inputSize;const de=(vt.height-1-X)*(vt.width*vt.outputChannels)+ae*vt.outputChannels+q;vt.byteArray[de]=vt.getter(L,Dn)}}}}return{header:Nt,width:vt.width,height:vt.height,data:vt.byteArray,format:vt.format,[rd?"colorSpace":"encoding"]:vt[rd?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){rd?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=_n,o.magFilter=_n,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,i,r)}}const hS=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function bf(n,e){const t=Ir(s=>s.gl),i=lh(Ly,hS(n)?Object.values(n):n);return _e.useLayoutEffect(()=>{e==null||e(i)},[e]),_e.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof dn?s=[i]:hS(i)&&(s=Object.values(i)),s.forEach(o=>{o instanceof dn&&t.initTexture(o)})}},[t,i]),_e.useMemo(()=>{if(hS(n)){const s={};let o=0;for(const a in n)s[a]=i[o++];return s}else return i},[n,i])}bf.preload=n=>lh.preload(Ly,n);bf.clear=n=>lh.clear(Ly,n);const L9=_e.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...f},h)=>{const d=Ir(R=>R.invalidate),p=Ir(R=>R.camera),m=Ir(R=>R.gl),_=Ir(R=>R.events),y=Ir(R=>R.setEvents),x=Ir(R=>R.set),g=Ir(R=>R.get),S=Ir(R=>R.performance),w=e||p,E=i||_.connected||m.domElement,I=_e.useMemo(()=>new R9(w),[w]);return Ny(()=>{I.enabled&&I.update()},-1),_e.useEffect(()=>(s&&I.connect(s===!0?E:s),I.connect(E),()=>void I.dispose()),[s,E,t,I,d]),_e.useEffect(()=>{const R=C=>{d(),t&&S.regress(),o&&o(C)},P=C=>{a&&a(C)},b=C=>{l&&l(C)};return I.addEventListener("change",R),I.addEventListener("start",P),I.addEventListener("end",b),()=>{I.removeEventListener("start",P),I.removeEventListener("end",b),I.removeEventListener("change",R)}},[o,a,l,I,d,y]),_e.useEffect(()=>{if(n){const R=g().controls;return x({controls:I}),()=>x({controls:R})}},[n,I]),_e.createElement("primitive",Vv({ref:h,object:I,enableDamping:r},f))}),D9=3e3,N9=3001,O9=_e.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],...o},a)=>{const l=_e.useRef(null);_e.useImperativeHandle(a,()=>l.current,[]);const f=_e.useRef(Math.random()*1e4);return Ny(h=>{var d,p;if(!e||t===0)return;const m=f.current+h.clock.getElapsedTime();l.current.rotation.x=Math.cos(m/4*t)/8*i,l.current.rotation.y=Math.sin(m/4*t)/8*i,l.current.rotation.z=Math.sin(m/4*t)/20*i;let _=Math.sin(m/4*t)/10;_=RE.mapLinear(_,-.1,.1,(d=s==null?void 0:s[0])!==null&&d!==void 0?d:-.1,(p=s==null?void 0:s[1])!==null&&p!==void 0?p:.1),l.current.position.y=_*r,l.current.updateMatrix()}),_e.createElement("group",o,_e.createElement("group",{ref:l,matrixAutoUpdate:!1},n))}),XN=(n,e,t)=>{let i;switch(n){case Vr:i=new Uint8ClampedArray(e*t*4);break;case Ii:i=new Uint16Array(e*t*4);break;case zo:i=new Uint32Array(e*t*4);break;case ny:i=new Int8Array(e*t*4);break;case iy:i=new Int16Array(e*t*4);break;case om:i=new Int32Array(e*t*4);break;case Wn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let I0;const U9=(n,e,t,i)=>{if(I0!==void 0)return I0;const r=new ds(1,1,i);e.setRenderTarget(r);const s=new Xn(new Ll,new Aa({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=XN(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,o),r.dispose(),s.geometry.dispose(),s.material.dispose(),I0=o[0]!==0,I0};class cT{constructor(e){var t,i,r,s,o,a,l,f,h,d,p,m,_,y,x,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(w){throw this._renderer.setRenderTarget(null),w}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const S={format:ri,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:_n,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter:_n,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:pi,wrapT:((_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapT:pi};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=cT.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Yf,this._camera=new bo,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!U9(this._type,this._renderer,this._camera,S)){let w;switch(this._type){case Ii:w=this._renderer.extensions.has("EXT_color_buffer_float")?Wn:void 0;break}w!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Wn}`),this._type=w):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Xn(new Ll,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ds(this.width,this.height,S),this._renderTarget.texture.mapping=((x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping)!==void 0?(g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping:Sl}static instantiateRenderer(){const e=new FE;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=XN(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new ao(this.toArray(),this.width,this.height,ri,this._type,(e==null?void 0:e.mapping)||Sl,(e==null?void 0:e.wrapS)||pi,(e==null?void 0:e.wrapT)||pi,(e==null?void 0:e.magFilter)||_n,(e==null?void 0:e.minFilter)||_n,(e==null?void 0:e.anisotropy)||1,Gs);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Wr&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof dn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof dn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const k9=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,F9=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class z9 extends Wr{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:f,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:k9,fragmentShader:F9,uniforms:{sdr:{value:f},gainMap:{value:h},gamma:{value:new W(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new W().fromArray(t)},offsetSdr:{value:new W().fromArray(i)},gainMapMin:{value:new W().fromArray(r)},gainMapMax:{value:new W().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:Do,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class YN extends Error{}class qN extends Error{}const sd=(n,e,t)=>{var i;let r;const s=(i=n.attributes.getNamedItem(e))===null||i===void 0?void 0:i.nodeValue;if(s)r=s;else{const o=n.getElementsByTagName(e)[0];if(o){const a=o.getElementsByTagName("rdf:li");if(a.length===3)r=Array.from(a).map(l=>l.innerHTML);else throw new Error(`Gainmap metadata contains an array of items for ${e} but its length is not 3`)}else{if(t)return t;throw new Error(`Can't find ${e} in gainmap metadata`)}}return r},B9=n=>{var e,t;let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(n):i=n.toString();let r=i.indexOf("<x:xmpmeta");const s=new DOMParser;for(;r!==-1;){const o=i.indexOf("x:xmpmeta>",r);i.slice(r,o+10);const a=i.slice(r,o+10);try{const f=s.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],h=sd(f,"hdrgm:GainMapMin","0"),d=sd(f,"hdrgm:GainMapMax"),p=sd(f,"hdrgm:Gamma","1"),m=sd(f,"hdrgm:OffsetSDR","0.015625"),_=sd(f,"hdrgm:OffsetHDR","0.015625");let y=(e=f.attributes.getNamedItem("hdrgm:HDRCapacityMin"))===null||e===void 0?void 0:e.nodeValue;y||(y="0");const x=(t=f.attributes.getNamedItem("hdrgm:HDRCapacityMax"))===null||t===void 0?void 0:t.nodeValue;if(!x)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(h)?h.map(g=>parseFloat(g)):[parseFloat(h),parseFloat(h),parseFloat(h)],gainMapMax:Array.isArray(d)?d.map(g=>parseFloat(g)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(p)?p.map(g=>parseFloat(g)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetSdr:Array.isArray(m)?m.map(g=>parseFloat(g)):[parseFloat(m),parseFloat(m),parseFloat(m)],offsetHdr:Array.isArray(_)?_.map(g=>parseFloat(g)):[parseFloat(_),parseFloat(_),parseFloat(_)],hdrCapacityMin:parseFloat(y),hdrCapacityMax:parseFloat(x)}}catch{}r=i.indexOf("<x:xmpmeta",o)}};class H9{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,l=0,f;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(s.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(f=s.getUint8(a+1),r&&console.log(`Marker: ${f.toString(16)}`),f===226){r&&console.log("Found APP2 marker (0xffe2)");const h=a+4;if(s.getUint32(h)===1297106432){const d=h+4;let p;if(s.getUint16(d)===18761)p=!1;else if(s.getUint16(d)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(d+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=s.getUint32(d+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=d+m,y=s.getUint16(_,!p),x=_+2;let g=0;for(let I=x;I<x+12*y;I+=12)s.getUint16(I,!p)===45057&&(g=s.getUint32(I+8,!p));const S=4,w=_+2+y*12+S,E=[];for(let I=w;I<w+g*16;I+=16){const R={MPType:s.getUint32(I,!p),size:s.getUint32(I+4,!p),dataOffset:s.getUint32(I+8,!p),dependantImages:s.getUint32(I+12,!p),start:-1,end:-1,isFII:!1};R.dataOffset?(R.start=d+R.dataOffset,R.isFII=!1):(R.start=0,R.isFII=!0),R.end=R.start+R.size,E.push(R)}if(this.options.extractNonFII&&E.length){const I=new Blob([s]),R=[];for(const P of E){if(P.isFII&&!this.options.extractFII)continue;const b=I.slice(P.start,P.end+1,"image/jpeg");R.push(b)}t(R)}}}a+=2+s.getUint16(a+2)}})}}const V9=async n=>{const e=B9(n);if(!e)throw new qN("Gain map XMP metadata not found");const i=await new H9({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new YN("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},uP=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class jN extends Er{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Iy}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new z9({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new dn,sdr:new dn});return new cT({width:16,height:16,type:Ii,colorSpace:Gs,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,f=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?uP(s):Promise.resolve(void 0),uP(o)]);l=p[0],a=p[1],f=!0}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const h=new dn(l||new ImageData(2,2),Sl,pi,pi,_n,Iw,ri,Vr,1,Gs);h.flipY=f,h.needsUpdate=!0;const d=new dn(a,Sl,pi,pi,_n,Iw,ri,Vr,1,Lr);d.flipY=f,d.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=h,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class G9 extends jN{load([e,t,i],r,s,o){const a=this.prepareQuadRenderer();let l,f,h;const d=async()=>{if(l&&f&&h){try{await this.render(a,h,l,f)}catch(C){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof o=="function"&&o(C),a.disposeOnDemandRenderer();return}typeof r=="function"&&r(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),a.disposeOnDemandRenderer()}};let p=!0,m=0,_=0,y=!0,x=0,g=0,S=!0,w=0,E=0;const I=()=>{if(typeof s=="function"){const C=m+x+w,A=_+g+E,O=p&&y&&S;s(new ProgressEvent("progress",{lengthComputable:O,loaded:A,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const R=new cs(this._internalLoadingManager);R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(this.withCredentials),R.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await d()},C=>{p=C.lengthComputable,_=C.loaded,m=C.total,I()},C=>{this.manager.itemError(e),typeof o=="function"&&o(C)});const P=new cs(this._internalLoadingManager);P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setPath(this.path),P.setWithCredentials(this.withCredentials),P.load(t,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");f=C,await d()},C=>{y=C.lengthComputable,g=C.loaded,x=C.total,I()},C=>{this.manager.itemError(t),typeof o=="function"&&o(C)});const b=new cs(this._internalLoadingManager);return b.setRequestHeader(this.requestHeader),b.setPath(this.path),b.setWithCredentials(this.withCredentials),b.load(i,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");h=JSON.parse(C),await d()},C=>{S=C.lengthComputable,E=C.loaded,w=C.total,I()},C=>{this.manager.itemError(i),typeof o=="function"&&o(C)}),a}}class W9 extends jN{load(e,t,i,r){const s=this.prepareQuadRenderer(),o=new cs(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let f,h,d;try{const p=await V9(l);f=p.sdr,h=p.gainMap,d=p.metadata}catch(p){if(p instanceof qN||p instanceof YN)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),d={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=l;else throw p}try{await this.render(s,d,f,h)}catch(p){this.manager.itemError(e),typeof r=="function"&&r(p),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof r=="function"&&r(a)}),s}}const dS={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},X9="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",L0=n=>Array.isArray(n);function ZN({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:i=void 0,extensions:r}={}){var s;let o=null,a=!1,l;if(t){if(!(t in dS))throw new Error("Preset must be one of: "+Object.keys(dS).join(", "));n=dS[t],e=X9}const f=L0(n)&&n.length===6,h=L0(n)&&n.length===3&&n.some(x=>x.endsWith("json")),d=L0(n)?n[0]:n;if(a=L0(n),l=f?"cube":h?"webp":d.startsWith("data:application/exr")?"exr":d.startsWith("data:application/hdr")?"hdr":d.startsWith("data:image/jpeg")?"jpg":(s=d.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l==="cube"?nN:l==="hdr"?P9:l==="exr"?I9:l==="jpg"||l==="jpeg"?W9:l==="webp"?G9:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const p=Ir(x=>x.gl),m=lh(o,a?[n]:n,x=>{(l==="webp"||l==="jpg"||l==="jpeg")&&x.setRenderer(p),x.setPath==null||x.setPath(e),r&&r(x)});let _=a?m[0]:m;if(l==="jpg"||l==="jpeg"||l==="webp"){var y;_=(y=_.renderTarget)==null?void 0:y.texture}return _.mapping=f?Fo:Vf,"colorSpace"in _?_.colorSpace=i??f?"srgb":"srgb-linear":_.encoding=i??f?N9:D9,_}const Y9=n=>n.current&&n.current.isScene,q9=n=>Y9(n)?n.current:n;function fT(n,e,t,i,r={}){var s,o,a,l,f;r={backgroundBlurriness:(s=r.blur)!==null&&s!==void 0?s:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const h=q9(e||t),d=h.background,p=h.environment,m={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(o=(a=h.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&o!==void 0?o:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(l=(f=h.environmentRotation)==null||f.clone==null?void 0:f.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(h.environment=i),n&&(h.background=i),ja(h,r),()=>{n!=="only"&&(h.environment=p),n&&(h.background=d),ja(h,m)}}function hT({scene:n,background:e=!1,map:t,...i}){const r=Ir(s=>s.scene);return _e.useLayoutEffect(()=>{if(t)return fT(e,n,r,t,i)}),null}function KN({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...l}){const f=ZN(l),h=Ir(d=>d.scene);return _e.useLayoutEffect(()=>fT(n,e,h,f,{blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),null}function j9({children:n,near:e=1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:o=!1,blur:a,backgroundBlurriness:l,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:p,scene:m,files:_,path:y,preset:x=void 0,extensions:g}){const S=Ir(b=>b.gl),w=Ir(b=>b.scene),E=_e.useRef(null),[I]=_e.useState(()=>new Yf),R=_e.useMemo(()=>{const b=new DE(i);return b.texture.type=Ii,b},[i]);_e.useLayoutEffect(()=>(r===1&&E.current.update(S,I),fT(o,m,w,R.texture,{blur:a,backgroundBlurriness:l,backgroundIntensity:f,backgroundRotation:h,environmentIntensity:d,environmentRotation:p})),[n,I,R.texture,m,w,o,r,S]);let P=1;return Ny(()=>{(r===1/0||P<r)&&(E.current.update(S,I),P++)}),_e.createElement(_e.Fragment,null,dW(_e.createElement(_e.Fragment,null,n,_e.createElement("cubeCamera",{ref:E,args:[e,t,R]}),_||x?_e.createElement(KN,{background:!0,files:_,preset:x,path:y,extensions:g}):s?_e.createElement(hT,{background:!0,map:s,extensions:g}):null),I))}function Z9(n){var e,t,i,r;const s=ZN(n),o=n.map||s;_e.useMemo(()=>xN({GroundProjectedEnvImpl:T9}),[]);const a=_e.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,h=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return _e.createElement(_e.Fragment,null,_e.createElement(hT,Vv({},n,{map:o})),_e.createElement("groundProjectedEnvImpl",{args:a,scale:h,height:l,radius:f}))}function K9(n){return n.ground?_e.createElement(Z9,n):n.map?_e.createElement(hT,n):n.children?_e.createElement(j9,n):_e.createElement(KN,n)}let $9=0;function dT(n,e){const t=`atom${++$9}`,i={toString:()=>t};return typeof n=="function"?i.read=n:(i.init=n,i.read=J9,i.write=Q9),e&&(i.write=e),i}function J9(n){return n(this)}function Q9(n,e,t){return e(this,typeof t=="function"?t(n(this)):t)}const pS=(n,e)=>n.unstable_is?n.unstable_is(e):e===n,cP=n=>"init"in n,fP=n=>!!n.write,M_=new WeakMap,e7=(n,e)=>{M_.set(n,e),n.catch(()=>{}).finally(()=>M_.delete(n))},hP=(n,e)=>{const t=M_.get(n);t&&(M_.delete(n),t(e))},dP=(n,e)=>{n.status="fulfilled",n.value=e},pP=(n,e)=>{n.status="rejected",n.reason=e},t7=n=>typeof(n==null?void 0:n.then)=="function",od=(n,e)=>!!n&&"v"in n&&"v"in e&&Object.is(n.v,e.v),mP=(n,e)=>!!n&&"e"in n&&"e"in e&&Object.is(n.e,e.e),Wc=n=>!!n&&"v"in n&&n.v instanceof Promise,n7=(n,e)=>"v"in n&&"v"in e&&n.v.orig&&n.v.orig===e.v.orig,D0=n=>{if("e"in n)throw n.e;return n.v},i7=()=>{const n=new WeakMap,e=new WeakMap,t=[],i=new WeakMap;let r,s;const o=b=>n.get(b),a=(b,C)=>{C.d.forEach((A,O)=>{if(!i.has(O)){const F=o(O);i.set(O,[F,new Set]),F&&a(O,F)}i.get(O)[1].add(b)})},l=(b,C)=>{var A;const O=o(b);if(n.set(b,C),(A=t[t.length-1])==null||A.add(b),i.has(b)||(i.set(b,[O,new Set]),a(b,C)),Wc(O)){const F="v"in C?C.v instanceof Promise?C.v:Promise.resolve(C.v):Promise.reject(C.e);O.v!==F&&hP(O.v,F)}},f=(b,C,A,O)=>{const F=new Map(O?C.d:null);let V=!1;A.forEach((Y,J)=>{!Y&&pS(b,J)&&(Y=C),Y&&(F.set(J,Y),C.d.get(J)!==Y&&(V=!0))}),(V||C.d.size!==F.size)&&(C.d=F)},h=(b,C,A,O)=>{const F=o(b),V={d:(F==null?void 0:F.d)||new Map,v:C};if(A&&f(b,V,A,O),od(F,V)&&F.d===V.d)return F;if(Wc(F)&&Wc(V)&&n7(F,V)){if(F.d===V.d)return F;V.v=F.v}return l(b,V),V},d=(b,C,A,O)=>{if(t7(C)){let F;const V=()=>{const J=o(b);if(!Wc(J)||J.v!==Y)return;const K=h(b,Y,A);e.has(b)&&J.d!==K.d&&I(b,K,J.d)},Y=new Promise((J,K)=>{let ne=!1;C.then(B=>{ne||(ne=!0,dP(Y,B),J(B),V())},B=>{ne||(ne=!0,pP(Y,B),K(B),V())}),F=B=>{ne||(ne=!0,B.then(te=>dP(Y,te),te=>pP(Y,te)),J(B))}});return Y.orig=C,Y.status="pending",e7(Y,J=>{J&&(F(J),O==null||O())}),h(b,Y,A,!0)}return h(b,C,A)},p=(b,C,A)=>{const O=o(b),F={d:(O==null?void 0:O.d)||new Map,e:C};return A&&f(b,F,A),mP(O,F)&&O.d===F.d?O:(l(b,F),F)},m=(b,C)=>{const A=o(b);if(!(C!=null&&C(b))&&A&&(e.has(b)||Array.from(A.d).every(([ne,B])=>{if(ne===b)return!0;const te=m(ne,C);return te===B||od(te,B)})))return A;const O=new Map;let F=!0;const V=ne=>{if(pS(b,ne)){const te=o(ne);if(te)return O.set(ne,te),D0(te);if(cP(ne))return O.set(ne,void 0),ne.init;throw new Error("no atom init")}const B=m(ne,C);return O.set(ne,B),D0(B)};let Y,J;const K={get signal(){return Y||(Y=new AbortController),Y.signal},get setSelf(){return!J&&fP(b)&&(J=(...ne)=>{if(!F)return g(b,...ne)}),J}};try{const ne=b.read(V,K);return d(b,ne,O,()=>Y==null?void 0:Y.abort())}catch(ne){return p(b,ne,O)}finally{F=!1}},_=b=>D0(m(b)),y=b=>{const C=J=>{var K,ne;const B=new Set((K=e.get(J))==null?void 0:K.t);return(ne=i.get(J))==null||ne[1].forEach(te=>{B.add(te)}),B},A=new Array,O=new Set,F=J=>{if(!O.has(J)){O.add(J);for(const K of C(J))J!==K&&F(K);A.push(J)}};F(b);const V=new Set([b]),Y=J=>O.has(J);for(let J=A.length-1;J>=0;--J){const K=A[J],ne=o(K);if(!ne)continue;let B=!1;for(const te of ne.d.keys())if(te!==K&&V.has(te)){B=!0;break}if(B){const te=m(K,Y);a(K,te),od(ne,te)||V.add(K)}O.delete(K)}},x=(b,...C)=>{const A=V=>D0(m(V)),O=(V,...Y)=>{const J=t.length>0;J||t.push(new Set([V]));let K;if(pS(b,V)){if(!cP(V))throw new Error("atom not writable");const ne=o(V),B=d(V,Y[0]);od(ne,B)||y(V)}else K=x(V,...Y);if(!J){const ne=R(t.pop())}return K};return b.write(A,O,...C)},g=(b,...C)=>{t.push(new Set([b]));const A=x(b,...C),O=R(t.pop());return A},S=(b,C,A)=>{var O;const F=e.get(b);if(F)return C&&F.t.add(C),F;const V=A||[];(O=o(b))==null||O.d.forEach((J,K)=>{K!==b&&S(K,b,V)}),m(b);const Y={t:new Set(C&&[C]),l:new Set};if(e.set(b,Y),fP(b)&&b.onMount){const{onMount:J}=b;V.push(()=>{const K=J((...ne)=>g(b,...ne));K&&(Y.u=K)})}return A||V.forEach(J=>J()),Y},w=(b,C)=>!C.l.size&&(!C.t.size||C.t.size===1&&C.t.has(b)),E=(b,C)=>{if(!w(b,C))return;const A=C.u;A&&A(),e.delete(b);const O=o(b);O&&(Wc(O)&&hP(O.v),O.d.forEach((F,V)=>{if(V!==b){const Y=e.get(V);Y&&(Y.t.delete(b),E(V,Y))}}))},I=(b,C,A)=>{const O=new Set(C.d.keys()),F=new Set;A==null||A.forEach((V,Y)=>{if(O.has(Y)){O.delete(Y);return}F.add(Y);const J=e.get(Y);J&&J.t.delete(b)}),O.forEach(V=>{S(V,b)}),F.forEach(V=>{const Y=e.get(V);Y&&E(V,Y)})},R=b=>{let C;const A=[],O=F=>{var V;if(!i.has(F))return;const[Y,J]=i.get(F);i.delete(F),A.push([F,Y]),J.forEach(O),(V=o(F))==null||V.d.forEach((K,ne)=>O(ne))};b.forEach(O),A.forEach(([F,V])=>{const Y=o(F);if(Y&&Y!==V){const J=e.get(F);J&&Y.d!==(V==null?void 0:V.d)&&I(F,Y,V==null?void 0:V.d),J&&!(!Wc(V)&&(od(V,Y)||mP(V,Y)))&&J.l.forEach(K=>K())}})};return{get:_,set:g,sub:(b,C)=>{const A=S(b),O=R([b]),F=A.l;return F.add(C),()=>{F.delete(C),E(b,A)}}}};let mS;const r7=()=>(mS||(mS=i7()),mS),s7=r7,o7=_e.createContext(void 0),$N=n=>{const e=_e.useContext(o7);return(n==null?void 0:n.store)||e||s7()},a7=n=>typeof(n==null?void 0:n.then)=="function",l7=ma.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}),n)});function u7(n,e){const t=$N(e),[[i,r,s],o]=_e.useReducer(f=>{const h=t.get(n);return Object.is(f[0],h)&&f[1]===t&&f[2]===n?f:[h,t,n]},void 0,()=>[t.get(n),t,n]);let a=i;(r!==t||s!==n)&&(o(),a=t.get(n));const l=e==null?void 0:e.delay;return _e.useEffect(()=>{const f=t.sub(n,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),f},[t,n,l]),_e.useDebugValue(a),a7(a)?l7(a):a}function c7(n,e){const t=$N(e);return _e.useCallback((...r)=>t.set(n,...r),[t,n])}function Wd(n,e){return[u7(n,e),c7(n,e)]}const f7=Math.PI/180;function gP(n){return n*f7}var JN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vP=ma.createContext&&ma.createContext(JN),h7=["attr","size","title"];function d7(n,e){if(n==null)return{};var t=p7(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function p7(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function E_(){return E_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},E_.apply(this,arguments)}function _P(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function T_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(t),!0).forEach(function(i){m7(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_P(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function m7(n,e,t){return e=g7(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g7(n){var e=v7(n,"string");return typeof e=="symbol"?e:e+""}function v7(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QN(n){return n&&n.map((e,t)=>ma.createElement(e.tag,T_({key:t},e.attr),QN(e.child)))}function uh(n){return e=>ma.createElement(_7,E_({attr:T_({},n.attr)},e),QN(n.child))}function _7(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=d7(n,h7),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),ma.createElement("svg",E_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:T_(T_({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ma.createElement("title",null,s),n.children)};return vP!==void 0?ma.createElement(vP.Consumer,null,t=>e(t)):e(JN)}function y7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(n)}function x7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(n)}function S7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"},child:[]},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"},child:[]}]})(n)}function w7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(n)}function M7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"},child:[]}]})(n)}function E7(n){return uh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"},child:[]},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"},child:[]},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"},child:[]}]})(n)}function ia(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function eO(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var fs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Zf={duration:.5,overwrite:!1,delay:0},pT,Fi,kn,Us=1e8,En=1/Us,$w=Math.PI*2,T7=$w/4,A7=0,tO=Math.sqrt,C7=Math.cos,b7=Math.sin,Di=function(e){return typeof e=="string"},Qn=function(e){return typeof e=="function"},Ma=function(e){return typeof e=="number"},mT=function(e){return typeof e>"u"},Bo=function(e){return typeof e=="object"},Fr=function(e){return e!==!1},gT=function(){return typeof window<"u"},N0=function(e){return Qn(e)||Di(e)},nO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},nr=Array.isArray,Jw=/(?:-?\.?\d|\.)+/gi,iO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,vf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,gS=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,rO=/[+-]=-?[.\d]+/,sO=/[^,'"\[\]\s]+/gi,R7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Hn,wo,Qw,vT,ps={},A_={},oO,aO=function(e){return(A_=Kf(e,ps))&&Xr},_T=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Wp=function(e,t){return!t&&console.warn(e)},lO=function(e,t){return e&&(ps[e]=t)&&A_&&(A_[e]=t)||ps},Xp=function(){return 0},P7={suppressEvents:!0,isStart:!0,kill:!1},lv={suppressEvents:!0,kill:!1},I7={suppressEvents:!0},yT={},gl=[],eM={},uO,ts={},vS={},yP=30,uv=[],xT="",ST=function(e){var t=e[0],i,r;if(Bo(t)||Qn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=uv.length;r--&&!uv[r].targetTest(t););i=uv[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new DO(e[r],i)))||e.splice(r,1);return e},Nu=function(e){return e._gsap||ST(ks(e))[0]._gsap},cO=function(e,t,i){return(i=e[t])&&Qn(i)?e[t]():mT(i)&&e.getAttribute&&e.getAttribute(t)||i},zr=function(e,t){return(e=e.split(",")).forEach(t)||e},ni=function(e){return Math.round(e*1e5)/1e5||0},hi=function(e){return Math.round(e*1e7)/1e7||0},Rf=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},L7=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},C_=function(){var e=gl.length,t=gl.slice(0),i,r;for(eM={},gl.length=0,i=0;i<e;i++)r=t[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},wT=function(e){return!!(e._initted||e._startAt||e.add)},fO=function(e,t,i,r){gl.length&&!Fi&&C_(),e.render(t,i,r||!!(Fi&&t<0&&wT(e))),gl.length&&!Fi&&C_()},hO=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(sO).length<2?t:Di(e)?e.trim():e},dO=function(e){return e},ms=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},D7=function(e){return function(t,i){for(var r in i)r in t||r==="duration"&&e||r==="ease"||(t[r]=i[r])}},Kf=function(e,t){for(var i in t)e[i]=t[i];return e},xP=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Bo(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},b_=function(e,t){var i={},r;for(r in e)r in t||(i[r]=e[r]);return i},Xd=function(e){var t=e.parent||Hn,i=e.keyframes?D7(nr(e.keyframes)):ms;if(Fr(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},N7=function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0},pO=function(e,t,i,r,s){i===void 0&&(i="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},Oy=function(e,t,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},El=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ou=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},O7=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},tM=function(e,t,i,r){return e._startAt&&(Fi?e._startAt.revert(lv):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},U7=function n(e){return!e||e._ts&&n(e.parent)},SP=function(e){return e._repeat?$f(e._tTime,e=e.duration()+e._rDelay)*e:0},$f=function(e,t){var i=Math.floor(e=hi(e/t));return e&&i===e?i-1:i},R_=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Uy=function(e){return e._end=hi(e._start+(e._tDur/Math.abs(e._ts||e._rts||En)||0))},ky=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=hi(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Uy(e),i._dirty||Ou(i,e)),e},mO=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=R_(e.rawTime(),t),(!t._dur||wm(0,t.totalDuration(),i)-t._tTime>En)&&t.render(i,!0)),Ou(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-En}},To=function(e,t,i,r){return t.parent&&El(t),t._start=hi((Ma(i)?i:i||e!==Hn?Rs(e,i,t):e._time)+t._delay),t._end=hi(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),pO(e,t,"_first","_last",e._sort?"_start":0),nM(t)||(e._recent=t),r||mO(e,t),e._ts<0&&ky(e,e._tTime),e},gO=function(e,t){return(ps.ScrollTrigger||_T("scrollTrigger",t))&&ps.ScrollTrigger.create(t,e)},vO=function(e,t,i,r,s){if(ET(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!Fi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&uO!==rs.frame)return gl.push(e),e._lazy=[s,r],1},k7=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},nM=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},F7=function(e,t,i,r){var s=e.ratio,o=t<0||!t&&(!e._start&&k7(e)&&!(!e._initted&&nM(e))||(e._ts<0||e._dp._ts<0)&&!nM(e))?0:1,a=e._rDelay,l=0,f,h,d;if(a&&e._repeat&&(l=wm(0,e._tDur,t),h=$f(l,a),e._yoyo&&h&1&&(o=1-o),h!==$f(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Fi||r||e._zTime===En||!t&&e._zTime){if(!e._initted&&vO(e,t,r,i,l))return;for(d=e._zTime,e._zTime=t||(i?En:0),i||(i=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,f=e._pt;f;)f.r(o,f.d),f=f._next;t<0&&tM(e,t,i,!0),e._onUpdate&&!i&&as(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&as(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&El(e,1),!i&&!Fi&&(as(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},z7=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},Jf=function(e,t,i,r){var s=e._repeat,o=hi(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:hi(o*(s+1)+e._rDelay*s):o,a>0&&!r&&ky(e,e._tTime=e._tDur*a),e.parent&&Uy(e),i||Ou(e.parent,e),e},wP=function(e){return e instanceof gr?Ou(e):Jf(e,e._dur)},B7={_start:0,endTime:Xp,totalDuration:Xp},Rs=function n(e,t,i){var r=e.labels,s=e._recent||B7,o=e.duration()>=Us?s.endTime(!1):e._dur,a,l,f;return Di(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),f=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(a<0?s:i).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),f&&i&&(l=l/100*(nr(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},Yd=function(e,t,i){var r=Ma(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Fr(l.vars.inherit)&&l.parent;o.immediateRender=Fr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new fi(t[0],o,t[s+1])},Ol=function(e,t){return e||e===0?t(e):t},wm=function(e,t,i){return i<e?e:i>t?t:i},Qi=function(e,t){return!Di(e)||!(t=R7.exec(e))?"":t[1]},H7=function(e,t,i){return Ol(i,function(r){return wm(e,t,r)})},iM=[].slice,_O=function(e,t){return e&&Bo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Bo(e[0]))&&!e.nodeType&&e!==wo},V7=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(r){var s;return Di(r)&&!t||_O(r,1)?(s=i).push.apply(s,ks(r)):i.push(r)})||i},ks=function(e,t,i){return kn&&!t&&kn.selector?kn.selector(e):Di(e)&&!i&&(Qw||!Qf())?iM.call((t||vT).querySelectorAll(e),0):nr(e)?V7(e,i):_O(e)?iM.call(e,0):e?[e]:[]},rM=function(e){return e=ks(e)[0]||Wp("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return ks(t,i.querySelectorAll?i:i===e?Wp("Invalid scope")||vT.createElement("div"):e)}},yO=function(e){return e.sort(function(){return .5-Math.random()})},xO=function(e){if(Qn(e))return e;var t=Bo(e)?e:{each:e},i=Uu(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,f=t.axis,h=r,d=r;return Di(r)?h=d={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(h=r[0],d=r[1]),function(p,m,_){var y=(_||t).length,x=o[y],g,S,w,E,I,R,P,b,C;if(!x){if(C=t.grid==="auto"?0:(t.grid||[1,Us])[1],!C){for(P=-Us;P<(P=_[C++].getBoundingClientRect().left)&&C<y;);C<y&&C--}for(x=o[y]=[],g=l?Math.min(C,y)*h-.5:r%C,S=C===Us?0:l?y*d/C-.5:r/C|0,P=0,b=Us,R=0;R<y;R++)w=R%C-g,E=S-(R/C|0),x[R]=I=f?Math.abs(f==="y"?E:w):tO(w*w+E*E),I>P&&(P=I),I<b&&(b=I);r==="random"&&yO(x),x.max=P-b,x.min=b,x.v=y=(parseFloat(t.amount)||parseFloat(t.each)*(C>y?y-1:f?f==="y"?y/C:C:Math.max(C,y/C))||0)*(r==="edges"?-1:1),x.b=y<0?s-y:s,x.u=Qi(t.amount||t.each)||0,i=i&&y<0?PO(i):i}return y=(x[p]-x.min)/x.max||0,hi(x.b+(i?i(y):y)*x.v)+x.u}},sM=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=hi(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Ma(i)?0:Qi(i))}},SO=function(e,t){var i=nr(e),r,s;return!i&&Bo(e)&&(r=i=e.radius||Us,e.values?(e=ks(e.values),(s=!Ma(e[0]))&&(r*=r)):e=sM(e.increment)),Ol(t,i?Qn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),f=Us,h=0,d=e.length,p,m;d--;)s?(p=e[d].x-a,m=e[d].y-l,p=p*p+m*m):p=Math.abs(e[d]-a),p<f&&(f=p,h=d);return h=!r||f<=r?e[h]:o,s||h===o||Ma(o)?h:h+Qi(o)}:sM(e))},wO=function(e,t,i,r){return Ol(nr(e)?!t:i===!0?!!(i=0):!r,function(){return nr(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*r)/r})},G7=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,o){return o(s)},r)}},W7=function(e,t){return function(i){return e(parseFloat(i))+(t||Qi(i))}},X7=function(e,t,i){return EO(e,t,0,1,i)},MO=function(e,t,i){return Ol(i,function(r){return e[~~t(r)]})},Y7=function n(e,t,i){var r=t-e;return nr(e)?MO(e,n(0,e.length),t):Ol(i,function(s){return(r+(s-e)%r)%r+e})},q7=function n(e,t,i){var r=t-e,s=r*2;return nr(e)?MO(e,n(0,e.length-1),t):Ol(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},Yp=function(e){for(var t=0,i="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?sO:Jw),i+=e.substr(t,r-t)+wO(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},EO=function(e,t,i,r,s){var o=t-e,a=r-i;return Ol(s,function(l){return i+((l-e)/o*a||0)})},j7=function n(e,t,i,r){var s=isNaN(e+t)?0:function(m){return(1-m)*e+m*t};if(!s){var o=Di(e),a={},l,f,h,d,p;if(i===!0&&(r=1)&&(i=null),o)e={p:e},t={p:t};else if(nr(e)&&!nr(t)){for(h=[],d=e.length,p=d-2,f=1;f<d;f++)h.push(n(e[f-1],e[f]));d--,s=function(_){_*=d;var y=Math.min(p,~~_);return h[y](_-y)},i=t}else r||(e=Kf(nr(e)?[]:{},e));if(!h){for(l in t)MT.call(a,e,l,"get",t[l]);s=function(_){return CT(_,a)||(o?e.p:e)}}}return Ol(i,s)},MP=function(e,t,i){var r=e.labels,s=Us,o,a,l;for(o in r)a=r[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},as=function(e,t,i){var r=e.vars,s=r[t],o=kn,a=e._ctx,l,f,h;if(s)return l=r[t+"Params"],f=r.callbackScope||e,i&&gl.length&&C_(),a&&(kn=a),h=l?s.apply(f,l):s.call(f),kn=o,h},gd=function(e){return El(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Fi),e.progress()<1&&as(e,"onInterrupt"),e},_f,TO=[],AO=function(e){if(e)if(e=!e.name&&e.default||e,gT()||e.headless){var t=e.name,i=Qn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Xp,render:CT,add:MT,kill:cX,modifier:uX,rawVars:0},o={targetTest:0,get:0,getSetter:AT,aliases:{},register:0};if(Qf(),e!==r){if(ts[t])return;ms(r,ms(b_(e,s),o)),Kf(r.prototype,Kf(s,b_(e,o))),ts[r.prop=t]=r,e.targetTest&&(uv.push(r),yT[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}lO(t,r),e.register&&e.register(Xr,r,Br)}else TO.push(e)},Mn=255,vd={aqua:[0,Mn,Mn],lime:[0,Mn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mn],navy:[0,0,128],white:[Mn,Mn,Mn],olive:[128,128,0],yellow:[Mn,Mn,0],orange:[Mn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mn,0,0],pink:[Mn,192,203],cyan:[0,Mn,Mn],transparent:[Mn,Mn,Mn,0]},_S=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*Mn+.5|0},CO=function(e,t,i){var r=e?Ma(e)?[e>>16,e>>8&Mn,e&Mn]:0:vd.black,s,o,a,l,f,h,d,p,m,_;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),vd[e])r=vd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Mn,r&Mn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Mn,e&Mn]}else if(e.substr(0,3)==="hsl"){if(r=_=e.match(Jw),!t)l=+r[0]%360/360,f=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(f+1):h+f-h*f,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=_S(l+1/3,s,o),r[1]=_S(l,s,o),r[2]=_S(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(iO),i&&r.length<4&&(r[3]=1),r}else r=e.match(Jw)||vd.transparent;r=r.map(Number)}return t&&!_&&(s=r[0]/Mn,o=r[1]/Mn,a=r[2]/Mn,d=Math.max(s,o,a),p=Math.min(s,o,a),h=(d+p)/2,d===p?l=f=0:(m=d-p,f=h>.5?m/(2-d-p):m/(d+p),l=d===s?(o-a)/m+(o<a?6:0):d===o?(a-s)/m+2:(s-o)/m+4,l*=60),r[0]=~~(l+.5),r[1]=~~(f*100+.5),r[2]=~~(h*100+.5)),i&&r.length<4&&(r[3]=1),r},bO=function(e){var t=[],i=[],r=-1;return e.split(vl).forEach(function(s){var o=s.match(vf)||[];t.push.apply(t,o),i.push(r+=o.length+1)}),t.c=i,t},EP=function(e,t,i){var r="",s=(e+r).match(vl),o=t?"hsla(":"rgba(",a=0,l,f,h,d;if(!s)return e;if(s=s.map(function(p){return(p=CO(p,t,1))&&o+(t?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(h=bO(e),l=i.c,l.join(r)!==h.c.join(r)))for(f=e.replace(vl,"1").split(vf),d=f.length-1;a<d;a++)r+=f[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!f)for(f=e.split(vl),d=f.length-1;a<d;a++)r+=f[a]+s[a];return r+f[d]},vl=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in vd)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Z7=/hsl[a]?\(/,RO=function(e){var t=e.join(" "),i;if(vl.lastIndex=0,vl.test(t))return i=Z7.test(t),e[1]=EP(e[1],i),e[0]=EP(e[0],i,bO(e[1])),!0},qp,rs=function(){var n=Date.now,e=500,t=33,i=n(),r=i,s=1e3/240,o=s,a=[],l,f,h,d,p,m,_=function y(x){var g=n()-r,S=x===!0,w,E,I,R;if((g>e||g<0)&&(i+=g-t),r+=g,I=r-i,w=I-o,(w>0||S)&&(R=++d.frame,p=I-d.time*1e3,d.time=I=I/1e3,o+=w+(w>=s?4:s-w),E=1),S||(l=f(y)),E)for(m=0;m<a.length;m++)a[m](I,p,R,x)};return d={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(x){return p/(1e3/(x||60))},wake:function(){oO&&(!Qw&&gT()&&(wo=Qw=window,vT=wo.document||{},ps.gsap=Xr,(wo.gsapVersions||(wo.gsapVersions=[])).push(Xr.version),aO(A_||wo.GreenSockGlobals||!wo.gsap&&wo||{}),TO.forEach(AO)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),f=h||function(x){return setTimeout(x,o-d.time*1e3+1|0)},qp=1,_(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),qp=0,f=Xp},lagSmoothing:function(x,g){e=x||1/0,t=Math.min(g||33,e)},fps:function(x){s=1e3/(x||240),o=d.time*1e3+s},add:function(x,g,S){var w=g?function(E,I,R,P){x(E,I,R,P),d.remove(w)}:x;return d.remove(x),a[S?"unshift":"push"](w),Qf(),w},remove:function(x,g){~(g=a.indexOf(x))&&a.splice(g,1)&&m>=g&&m--},_listeners:a},d}(),Qf=function(){return!qp&&rs.wake()},rn={},K7=/^[\d.\-M][\d.\-,\s]/,$7=/["']/g,J7=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,o=i.length,a,l,f;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,f=l.substr(0,a),t[r]=isNaN(f)?f.replace($7,"").trim():+f,r=l.substr(a+1).trim();return t},Q7=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)},eX=function(e){var t=(e+"").split("("),i=rn[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[J7(t[1])]:Q7(e).split(",").map(hO)):rn._CE&&K7.test(e)?rn._CE("",e):i},PO=function(e){return function(t){return 1-e(1-t)}},IO=function n(e,t){for(var i=e._first,r;i;)i instanceof gr?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Uu=function(e,t){return e&&(Qn(e)?e:rn[e]||eX(e))||t},oc=function(e,t,i,r){i===void 0&&(i=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:r},o;return zr(e,function(a){rn[a]=ps[a]=s,rn[o=a.toLowerCase()]=i;for(var l in s)rn[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=rn[a+"."+l]=s[l]}),s},LO=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},yS=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/$w*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*b7((h-o)*s)+1},l=e==="out"?a:e==="in"?function(f){return 1-a(1-f)}:LO(a);return s=$w/s,l.config=function(f,h){return n(e,f,h)},l},xS=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:LO(i);return r.config=function(s){return n(e,s)},r};zr("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;oc(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});rn.Linear.easeNone=rn.none=rn.Linear.easeIn;oc("Elastic",yS("in"),yS("out"),yS());(function(n,e){var t=1/e,i=2*t,r=2.5*t,s=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<r?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};oc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);oc("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});oc("Circ",function(n){return-(tO(1-n*n)-1)});oc("Sine",function(n){return n===1?1:-C7(n*T7)+1});oc("Back",xS("in"),xS("out"),xS());rn.SteppedEase=rn.steps=ps.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0,o=1-En;return function(a){return((r*wm(0,o,a)|0)+s)*i}}};Zf.ease=rn["quad.out"];zr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return xT+=n+","+n+"Params,"});var DO=function(e,t){this.id=A7++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:cO,this.set=t?t.getSetter:AT},jp=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jf(this,+t.duration,1,1),this.data=t.data,kn&&(this._ctx=kn,kn.data.push(this)),qp||rs.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Jf(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Qf(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ky(this,i),!s._dp||s.parent||mO(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&To(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===En||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),fO(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+SP(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+SP(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?$f(this._tTime,s)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-En?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?R_(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-En?0:this._rts,this.totalTime(wm(-Math.abs(this._delay),this.totalDuration(),s),r!==!1),Uy(this),O7(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==En&&(this._tTime-=En)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&To(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Fr(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?R_(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=I7);var r=Fi;return Fi=i,wT(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Fi=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,wP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,wP(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Rs(this,i),Fr(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Fr(r)),this._dur||(this._zTime=-En),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-En:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-En,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-En)},e.eventCallback=function(i,r,s){var o=this.vars;return arguments.length>1?(r?(o[i]=r,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete o[i],this):o[i]},e.then=function(i){var r=this;return new Promise(function(s){var o=Qn(i)?i:dO,a=function(){var f=r.then;r.then=null,Qn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=f),s(o),r.then=f};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){gd(this)},n}();ms(jp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-En,_prom:0,_ps:!1,_rts:1});var gr=function(n){eO(e,n);function e(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Fr(i.sortChildren),Hn&&To(i.parent||Hn,ia(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&gO(ia(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Yd(0,arguments,this),this},t.from=function(r,s,o){return Yd(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Yd(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Xd(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new fi(r,s,Rs(this,o),1),this},t.call=function(r,s,o){return To(this,fi.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,f,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=f,o.onCompleteParams=h,o.parent=this,new fi(r,o,Rs(this,l)),this},t.staggerFrom=function(r,s,o,a,l,f,h){return o.runBackwards=1,Xd(o).immediateRender=Fr(o.immediateRender),this.staggerTo(r,s,o,a,l,f,h)},t.staggerFromTo=function(r,s,o,a,l,f,h,d){return a.startAt=o,Xd(a).immediateRender=Fr(a.immediateRender),this.staggerTo(r,s,a,l,f,h,d)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,f=this._dur,h=r<=0?0:hi(r),d=this._zTime<0!=r<0&&(this._initted||!f),p,m,_,y,x,g,S,w,E,I,R,P;if(this!==Hn&&h>l&&r>=0&&(h=l),h!==this._tTime||o||d){if(a!==this._time&&f&&(h+=this._time-a,r+=this._time-a),p=h,E=this._start,w=this._ts,g=!w,d&&(f||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(R=this._yoyo,x=f+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(x*100+r,s,o);if(p=hi(h%x),h===l?(y=this._repeat,p=f):(I=hi(h/x),y=~~I,y&&y===I&&(p=f,y--),p>f&&(p=f)),I=$f(this._tTime,x),!a&&this._tTime&&I!==y&&this._tTime-I*x-this._dur<=0&&(I=y),R&&y&1&&(p=f-p,P=1),y!==I&&!this._lock){var b=R&&I&1,C=b===(R&&y&1);if(y<I&&(b=!b),a=b?0:h%f?f:h,this._lock=1,this.render(a||(P?0:hi(y*x)),s,!f)._lock=0,this._tTime=h,!s&&this.parent&&as(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,l=this._tDur,C&&(this._lock=2,a=b?f:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;IO(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=z7(this,hi(a),hi(p)),S&&(h-=p-(p=S._start))),this._tTime=h,this._time=p,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&h&&!s&&!I&&(as(this,"onStart"),this._tTime!==h))return this;if(p>=a&&r>=0)for(m=this._first;m;){if(_=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!g){S=0,_&&(h+=this._zTime=-En);break}}m=_}else{m=this._last;for(var A=r<0?r:p;m;){if(_=m._prev,(m._act||A<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(A-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(A-m._start)*m._ts,s,o||Fi&&wT(m)),p!==this._time||!this._ts&&!g){S=0,_&&(h+=this._zTime=A?-En:En);break}}m=_}}if(S&&!s&&(this.pause(),S.render(p>=a?0:-En)._zTime=p>=a?1:-1,this._ts))return this._start=E,Uy(this),this.render(r,s,o);this._onUpdate&&!s&&as(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(E===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((r||!f)&&(h===l&&this._ts>0||!h&&this._ts<0)&&El(this,1),!s&&!(r<0&&!a)&&(h||a||!l)&&(as(this,h===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Ma(s)||(s=Rs(this,s,r)),!(r instanceof jp)){if(nr(r))return r.forEach(function(a){return o.add(a,s)}),this;if(Di(r))return this.addLabel(r,s);if(Qn(r))r=fi.delayedCall(0,r);else return this}return this!==r?To(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Us);for(var l=[],f=this._first;f;)f._start>=a&&(f instanceof fi?s&&l.push(f):(o&&l.push(f),r&&l.push.apply(l,f.getChildren(!0,s,o)))),f=f._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return Di(r)?this.removeLabel(r):Qn(r)?this.killTweensOf(r):(r.parent===this&&Oy(this,r),r===this._recent&&(this._recent=this._last),Ou(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=hi(rs.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Rs(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=fi.delayedCall(0,s||Xp,o);return a.data="isPause",this._hasPause=1,To(this,a,Rs(this,r))},t.removePause=function(r){var s=this._first;for(r=Rs(this,r);s;)s._start===r&&s.data==="isPause"&&El(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)il!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=ks(r),l=this._first,f=Ma(s),h;l;)l instanceof fi?L7(l._targets,a)&&(f?(!il||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Rs(o,r),l=s,f=l.startAt,h=l.onStart,d=l.onStartParams,p=l.immediateRender,m,_=fi.to(o,ms({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(f&&"time"in f?f.time:o._time))/o.timeScale())||En,onStart:function(){if(o.pause(),!m){var x=s.duration||Math.abs((a-(f&&"time"in f?f.time:o._time))/o.timeScale());_._dur!==x&&Jf(_,x,0,1).render(_._time,!0,!0),m=1}h&&h.apply(_,d||[])}},s));return p?_.render(0):_},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,ms({startAt:{time:Rs(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),MP(this,Rs(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),MP(this,Rs(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+En)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,f;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(f in l)l[f]>=o&&(l[f]+=r);return Ou(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Ou(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=Us,f,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;a;)f=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,To(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=f;Jf(o,o===Hn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Hn._ts&&(fO(Hn,R_(r,Hn)),uO=rs.frame),rs.frame>=yP){yP+=fs.autoSleep||120;var s=Hn._first;if((!s||!s._ts)&&fs.autoSleep&&rs._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||rs.sleep()}}},e}(jp);ms(gr.prototype,{_lock:0,_hasPause:0,_forcing:0});var tX=function(e,t,i,r,s,o,a){var l=new Br(this._pt,e,t,0,1,zO,null,s),f=0,h=0,d,p,m,_,y,x,g,S;for(l.b=i,l.e=r,i+="",r+="",(g=~r.indexOf("random("))&&(r=Yp(r)),o&&(S=[i,r],o(S,e,t),i=S[0],r=S[1]),p=i.match(gS)||[];d=gS.exec(r);)_=d[0],y=r.substring(f,d.index),m?m=(m+1)%5:y.substr(-5)==="rgba("&&(m=1),_!==p[h++]&&(x=parseFloat(p[h-1])||0,l._pt={_next:l._pt,p:y||h===1?y:",",s:x,c:_.charAt(1)==="="?Rf(x,_)-x:parseFloat(_)-x,m:m&&m<4?Math.round:0},f=gS.lastIndex);return l.c=f<r.length?r.substring(f,r.length):"",l.fp=a,(rO.test(r)||g)&&(l.e=0),this._pt=l,l},MT=function(e,t,i,r,s,o,a,l,f,h){Qn(r)&&(r=r(s||0,e,o));var d=e[t],p=i!=="get"?i:Qn(d)?f?e[t.indexOf("set")||!Qn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():d,m=Qn(d)?f?oX:kO:TT,_;if(Di(r)&&(~r.indexOf("random(")&&(r=Yp(r)),r.charAt(1)==="="&&(_=Rf(p,r)+(Qi(p)||0),(_||_===0)&&(r=_))),!h||p!==r||oM)return!isNaN(p*r)&&r!==""?(_=new Br(this._pt,e,t,+p||0,r-(p||0),typeof d=="boolean"?lX:FO,0,m),f&&(_.fp=f),a&&_.modifier(a,this,e),this._pt=_):(!d&&!(t in e)&&_T(t,r),tX.call(this,e,t,p,r,m,l||fs.stringFilter,f))},nX=function(e,t,i,r,s){if(Qn(e)&&(e=qd(e,s,t,i,r)),!Bo(e)||e.style&&e.nodeType||nr(e)||nO(e))return Di(e)?qd(e,s,t,i,r):e;var o={},a;for(a in e)o[a]=qd(e[a],s,t,i,r);return o},NO=function(e,t,i,r,s,o){var a,l,f,h;if(ts[e]&&(a=new ts[e]).init(s,a.rawVars?t[e]:nX(t[e],r,s,o,i),i,r,o)!==!1&&(i._pt=l=new Br(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==_f))for(f=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)f[a._props[h]]=l;return a},il,oM,ET=function n(e,t,i){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,f=r.onUpdate,h=r.runBackwards,d=r.yoyoEase,p=r.keyframes,m=r.autoRevert,_=e._dur,y=e._startAt,x=e._targets,g=e.parent,S=g&&g.data==="nested"?g.vars.targets:x,w=e._overwrite==="auto"&&!pT,E=e.timeline,I,R,P,b,C,A,O,F,V,Y,J,K,ne;if(E&&(!p||!s)&&(s="none"),e._ease=Uu(s,Zf.ease),e._yEase=d?PO(Uu(d===!0?s:d,Zf.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!E&&!!r.runBackwards,!E||p&&!r.stagger){if(F=x[0]?Nu(x[0]).harness:0,K=F&&r[F.prop],I=b_(r,yT),y&&(y._zTime<0&&y.progress(1),t<0&&h&&a&&!m?y.render(-1,!0):y.revert(h&&_?lv:P7),y._lazy=0),o){if(El(e._startAt=fi.set(x,ms({data:"isStart",overwrite:!1,parent:g,immediateRender:!0,lazy:!y&&Fr(l),startAt:null,delay:0,onUpdate:f&&function(){return as(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fi||!a&&!m)&&e._startAt.revert(lv),a&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(h&&_&&!y){if(t&&(a=!1),P=ms({overwrite:!1,data:"isFromStart",lazy:a&&!y&&Fr(l),immediateRender:a,stagger:0,parent:g},I),K&&(P[F.prop]=K),El(e._startAt=fi.set(x,P)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Fi?e._startAt.revert(lv):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,En,En);else if(!t)return}for(e._pt=e._ptCache=0,l=_&&Fr(l)||l&&!_,R=0;R<x.length;R++){if(C=x[R],O=C._gsap||ST(x)[R]._gsap,e._ptLookup[R]=Y={},eM[O.id]&&gl.length&&C_(),J=S===x?R:S.indexOf(C),F&&(V=new F).init(C,K||I,e,J,S)!==!1&&(e._pt=b=new Br(e._pt,C,V.name,0,1,V.render,V,0,V.priority),V._props.forEach(function(B){Y[B]=b}),V.priority&&(A=1)),!F||K)for(P in I)ts[P]&&(V=NO(P,I,e,J,C,S))?V.priority&&(A=1):Y[P]=b=MT.call(e,C,P,"get",I[P],J,S,0,r.stringFilter);e._op&&e._op[R]&&e.kill(C,e._op[R]),w&&e._pt&&(il=e,Hn.killTweensOf(C,Y,e.globalTime(t)),ne=!e.parent,il=0),e._pt&&l&&(eM[O.id]=1)}A&&BO(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!ne,p&&t<=0&&E.render(Us,!0,!0)},iX=function(e,t,i,r,s,o,a,l){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,d,p,m;if(!f)for(f=e._ptCache[t]=[],p=e._ptLookup,m=e._targets.length;m--;){if(h=p[m][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return oM=1,e.vars[t]="+=0",ET(e,a),oM=0,l?Wp(t+" not eligible for reset"):1;f.push(h)}for(m=f.length;m--;)d=f[m],h=d._pt||d,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=i-h.s,d.e&&(d.e=ni(i)+Qi(d.e)),d.b&&(d.b=h.s+Qi(d.b))},rX=function(e,t){var i=e[0]?Nu(e[0]).harness:0,r=i&&i.aliases,s,o,a,l;if(!r)return t;s=Kf({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},sX=function(e,t,i,r){var s=t.ease||r||"power1.inOut",o,a;if(nr(t))a=i[e]||(i[e]=[]),t.forEach(function(l,f){return a.push({t:f/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},qd=function(e,t,i,r,s){return Qn(e)?e.call(t,i,r,s):Di(e)&&~e.indexOf("random(")?Yp(e):e},OO=xT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",UO={};zr(OO+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return UO[n]=1});var fi=function(n){eO(e,n);function e(i,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=n.call(this,o?r:Xd(r))||this;var l=a.vars,f=l.duration,h=l.delay,d=l.immediateRender,p=l.stagger,m=l.overwrite,_=l.keyframes,y=l.defaults,x=l.scrollTrigger,g=l.yoyoEase,S=r.parent||Hn,w=(nr(i)||nO(i)?Ma(i[0]):"length"in r)?[i]:ks(i),E,I,R,P,b,C,A,O;if(a._targets=w.length?ST(w):Wp("GSAP target "+i+" not found. https://gsap.com",!fs.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=m,_||p||N0(f)||N0(h)){if(r=a.vars,E=a.timeline=new gr({data:"nested",defaults:y||{},targets:S&&S.data==="nested"?S.vars.targets:w}),E.kill(),E.parent=E._dp=ia(a),E._start=0,p||N0(f)||N0(h)){if(P=w.length,A=p&&xO(p),Bo(p))for(b in p)~OO.indexOf(b)&&(O||(O={}),O[b]=p[b]);for(I=0;I<P;I++)R=b_(r,UO),R.stagger=0,g&&(R.yoyoEase=g),O&&Kf(R,O),C=w[I],R.duration=+qd(f,ia(a),I,C,w),R.delay=(+qd(h,ia(a),I,C,w)||0)-a._delay,!p&&P===1&&R.delay&&(a._delay=h=R.delay,a._start+=h,R.delay=0),E.to(C,R,A?A(I,C,w):0),E._ease=rn.none;E.duration()?f=h=0:a.timeline=0}else if(_){Xd(ms(E.vars.defaults,{ease:"none"})),E._ease=Uu(_.ease||r.ease||"none");var F=0,V,Y,J;if(nr(_))_.forEach(function(K){return E.to(w,K,">")}),E.duration();else{R={};for(b in _)b==="ease"||b==="easeEach"||sX(b,_[b],R,_.easeEach);for(b in R)for(V=R[b].sort(function(K,ne){return K.t-ne.t}),F=0,I=0;I<V.length;I++)Y=V[I],J={ease:Y.e,duration:(Y.t-(I?V[I-1].t:0))/100*f},J[b]=Y.v,E.to(w,J,F),F+=J.duration;E.duration()<f&&E.to({},{duration:f-E.duration()})}}f||a.duration(f=E.duration())}else a.timeline=0;return m===!0&&!pT&&(il=ia(a),Hn.killTweensOf(w),il=0),To(S,ia(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(d||!f&&!_&&a._start===hi(S._time)&&Fr(d)&&U7(ia(a))&&S.data!=="nested")&&(a._tTime=-En,a.render(Math.max(0,-h)||0)),x&&gO(ia(a),x),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,f=this._dur,h=r<0,d=r>l-En&&!h?l:r<En?0:r,p,m,_,y,x,g,S,w,E;if(!f)F7(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(p=d,w=this.timeline,this._repeat){if(y=f+this._rDelay,this._repeat<-1&&h)return this.totalTime(y*100+r,s,o);if(p=hi(d%y),d===l?(_=this._repeat,p=f):(x=hi(d/y),_=~~x,_&&_===x?(p=f,_--):p>f&&(p=f)),g=this._yoyo&&_&1,g&&(E=this._yEase,p=f-p),x=$f(this._tTime,y),p===a&&!o&&this._initted&&_===x)return this._tTime=d,this;_!==x&&(w&&this._yEase&&IO(w,g),this.vars.repeatRefresh&&!g&&!this._lock&&p!==y&&this._initted&&(this._lock=o=1,this.render(hi(y*_),!0).invalidate()._lock=0))}if(!this._initted){if(vO(this,h?r:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==x))return this;if(f!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(E||this._ease)(p/f),this._from&&(this.ratio=S=1-S),!a&&d&&!s&&!x&&(as(this,"onStart"),this._tTime!==d))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;w&&w.render(r<0?r:w._dur*w._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&tM(this,r,s,o),as(this,"onUpdate")),this._repeat&&_!==x&&this.vars.onRepeat&&!s&&this.parent&&as(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&tM(this,r,!0,!0),(r||!f)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&El(this,1),!s&&!(h&&!a)&&(d||a||g)&&(as(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){qp||rs.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||ET(this,f),h=this._ease(f/this._dur),iX(this,r,s,o,a,h,f,l)?this.resetTo(r,s,o,a,1):(ky(this,0),this.parent||pO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?gd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Fi),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,il&&il.vars.overwrite!==!0)._first||gd(this),this.parent&&o!==this.timeline.totalDuration()&&Jf(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?ks(r):a,f=this._ptLookup,h=this._pt,d,p,m,_,y,x,g;if((!s||s==="all")&&N7(a,l))return s==="all"&&(this._pt=0),gd(this);for(d=this._op=this._op||[],s!=="all"&&(Di(s)&&(y={},zr(s,function(S){return y[S]=1}),s=y),s=rX(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){p=f[g],s==="all"?(d[g]=s,_=p,m={}):(m=d[g]=d[g]||{},_=s);for(y in _)x=p&&p[y],x&&((!("kill"in x.d)||x.d.kill(y)===!0)&&Oy(this,x,"_pt"),delete p[y]),m!=="all"&&(m[y]=1)}return this._initted&&!this._pt&&h&&gd(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Yd(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Yd(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Hn.killTweensOf(r,s,o)},e}(jp);ms(fi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});zr("staggerTo,staggerFrom,staggerFromTo",function(n){fi[n]=function(){var e=new gr,t=iM.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var TT=function(e,t,i){return e[t]=i},kO=function(e,t,i){return e[t](i)},oX=function(e,t,i,r){return e[t](r.fp,i)},aX=function(e,t,i){return e.setAttribute(t,i)},AT=function(e,t){return Qn(e[t])?kO:mT(e[t])&&e.setAttribute?aX:TT},FO=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},lX=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},zO=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},CT=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},uX=function(e,t,i,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,i),s=o},cX=function(e){for(var t=this._pt,i,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?Oy(this,t,"_pt"):t.dep||(i=1),t=r;return!i},fX=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},BO=function(e){for(var t=e._pt,i,r,s,o;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=i}e._pt=s},Br=function(){function n(t,i,r,s,o,a,l,f,h){this.t=i,this.s=s,this.c=o,this.p=r,this.r=a||FO,this.d=l||this,this.set=f||TT,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=fX,this.m=i,this.mt=s,this.tween=r},n}();zr(xT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return yT[n]=1});ps.TweenMax=ps.TweenLite=fi;ps.TimelineLite=ps.TimelineMax=gr;Hn=new gr({sortChildren:!1,defaults:Zf,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});fs.stringFilter=RO;var ku=[],cv={},hX=[],TP=0,dX=0,SS=function(e){return(cv[e]||hX).map(function(t){return t()})},aM=function(){var e=Date.now(),t=[];e-TP>2&&(SS("matchMediaInit"),ku.forEach(function(i){var r=i.queries,s=i.conditions,o,a,l,f;for(a in r)o=wo.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,f=1);f&&(i.revert(),l&&t.push(i))}),SS("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),TP=e,SS("matchMedia"))},HO=function(){function n(t,i){this.selector=i&&rM(i),this.data=[],this._r=[],this.isReverted=!1,this.id=dX++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){Qn(i)&&(s=r,r=i,i=Qn);var o=this,a=function(){var f=kn,h=o.selector,d;return f&&f!==o&&f.data.push(o),s&&(o.selector=rM(s)),kn=o,d=r.apply(o,arguments),Qn(d)&&o._r.push(d),kn=f,o.selector=h,o.isReverted=!1,d};return o.last=a,i===Qn?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var r=kn;kn=null,i(this),kn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof fi&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,f;l--;)f=s.data[l],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),l=s.data.length;l--;)f=s.data[l],f instanceof gr?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof fi)&&f.revert&&f.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=ku.length;o--;)ku[o].id===this.id&&ku.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),pX=function(){function n(t){this.contexts=[],this.scope=t,kn&&kn.data.push(this)}var e=n.prototype;return e.add=function(i,r,s){Bo(i)||(i={matches:i});var o=new HO(0,s||this.scope),a=o.conditions={},l,f,h;kn&&!o.selector&&(o.selector=kn.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=i;for(f in i)f==="all"?h=1:(l=wo.matchMedia(i[f]),l&&(ku.indexOf(o)<0&&ku.push(o),(a[f]=l.matches)&&(h=1),l.addListener?l.addListener(aM):l.addEventListener("change",aM)));return h&&r(o,function(d){return o.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),P_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return AO(r)})},timeline:function(e){return new gr(e)},getTweensOf:function(e,t){return Hn.getTweensOf(e,t)},getProperty:function(e,t,i,r){Di(e)&&(e=ks(e)[0]);var s=Nu(e||{}).get,o=i?dO:hO;return i==="native"&&(i=""),e&&(t?o((ts[t]&&ts[t].get||s)(e,t,i,r)):function(a,l,f){return o((ts[a]&&ts[a].get||s)(e,a,l,f))})},quickSetter:function(e,t,i){if(e=ks(e),e.length>1){var r=e.map(function(h){return Xr.quickSetter(h,t,i)}),s=r.length;return function(h){for(var d=s;d--;)r[d](h)}}e=e[0]||{};var o=ts[t],a=Nu(e),l=a.harness&&(a.harness.aliases||{})[t]||t,f=o?function(h){var d=new o;_f._pt=0,d.init(e,i?h+i:h,_f,0,[e]),d.render(1,d),_f._pt&&CT(1,_f)}:a.set(e,l);return o?f:function(h){return f(e,l,i?h+i:h,a,1)}},quickTo:function(e,t,i){var r,s=Xr.to(e,ms((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),o=function(l,f,h){return s.resetTo(t,l,f,h)};return o.tween=s,o},isTweening:function(e){return Hn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Uu(e.ease,Zf.ease)),xP(Zf,e||{})},config:function(e){return xP(fs,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!ts[a]&&!ps[a]&&Wp(t+" effect requires "+a+" plugin.")}),vS[t]=function(a,l,f){return i(ks(a),ms(l||{},s),f)},o&&(gr.prototype[t]=function(a,l,f){return this.add(vS[t](a,Bo(l)?l:(f=l)&&{},this),f)})},registerEase:function(e,t){rn[e]=Uu(t)},parseEase:function(e,t){return arguments.length?Uu(e,t):rn},getById:function(e){return Hn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new gr(e),r,s;for(i.smoothChildTiming=Fr(e.smoothChildTiming),Hn.remove(i),i._dp=0,i._time=i._tTime=Hn._time,r=Hn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof fi&&r.vars.onComplete===r._targets[0]))&&To(i,r,r._start-r._delay),r=s;return To(Hn,i,0),i},context:function(e,t){return e?new HO(e,t):kn},matchMedia:function(e){return new pX(e)},matchMediaRefresh:function(){return ku.forEach(function(e){var t=e.conditions,i,r;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||aM()},addEventListener:function(e,t){var i=cv[e]||(cv[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=cv[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:Y7,wrapYoyo:q7,distribute:xO,random:wO,snap:SO,normalize:X7,getUnit:Qi,clamp:H7,splitColor:CO,toArray:ks,selector:rM,mapRange:EO,pipe:G7,unitize:W7,interpolate:j7,shuffle:yO},install:aO,effects:vS,ticker:rs,updateRoot:gr.updateRoot,plugins:ts,globalTimeline:Hn,core:{PropTween:Br,globals:lO,Tween:fi,Timeline:gr,Animation:jp,getCache:Nu,_removeLinkedListItem:Oy,reverting:function(){return Fi},context:function(e){return e&&kn&&(kn.data.push(e),e._ctx=kn),kn},suppressOverwrites:function(e){return pT=e}}};zr("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return P_[n]=fi[n]});rs.add(gr.updateRoot);_f=P_.to({},{duration:0});var mX=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},gX=function(e,t){var i=e._targets,r,s,o;for(r in t)for(s=i.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=mX(o,r)),o&&o.modifier&&o.modifier(t[r],e,i[s],r))},wS=function(e,t){return{name:e,headless:1,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,f;if(Di(s)&&(l={},zr(s,function(h){return l[h]=1}),s=l),t){l={};for(f in s)l[f]=t(s[f]);s=l}gX(a,s)}}}},Xr=P_.registerPlugin({name:"attr",init:function(e,t,i,r,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)Fi?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},wS("roundProps",sM),wS("modifiers"),wS("snap",SO))||P_;fi.version=gr.version=Xr.version="3.13.0";oO=1;gT()&&Qf();rn.Power0;rn.Power1;rn.Power2;rn.Power3;rn.Power4;rn.Linear;rn.Quad;rn.Cubic;rn.Quart;rn.Quint;rn.Strong;rn.Elastic;rn.Back;rn.SteppedEase;rn.Bounce;rn.Sine;rn.Expo;rn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var AP,rl,Pf,bT,Tu,CP,RT,vX=function(){return typeof window<"u"},Ea={},hu=180/Math.PI,If=Math.PI/180,Xc=Math.atan2,bP=1e8,PT=/([A-Z])/g,_X=/(left|right|width|margin|padding|x)/i,yX=/[\s,\(]\S/,Ro={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},lM=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},xX=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},SX=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},wX=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},VO=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},GO=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},MX=function(e,t,i){return e.style[t]=i},EX=function(e,t,i){return e.style.setProperty(t,i)},TX=function(e,t,i){return e._gsap[t]=i},AX=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},CX=function(e,t,i,r,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},bX=function(e,t,i,r,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},Gn="transform",Hr=Gn+"Origin",RX=function n(e,t){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Ea&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ro[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=oa(r,a)}):this.tfm[e]=o.x?o[e]:oa(r,e),e===Hr&&(this.tfm.zOrigin=o.zOrigin);else return Ro.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(Gn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Hr,t,"")),e=Gn}(s||t)&&this.props.push(e,t,s[e])},WO=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},PX=function(){var e=this.props,t=this.target,i=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(PT,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=RT(),(!s||!s.isStart)&&!i[Gn]&&(WO(i),r.zOrigin&&i[Hr]&&(i[Hr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},XO=function(e,t){var i={target:e,props:[],revert:PX,save:RX};return e._gsap||Xr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return i.save(r)}),i},YO,uM=function(e,t){var i=rl.createElementNS?rl.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):rl.createElement(e);return i&&i.style?i:rl.createElement(e)},Fs=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(PT,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,eh(t)||t,1)||""},RP="O,Moz,ms,Ms,Webkit".split(","),eh=function(e,t,i){var r=t||Tu,s=r.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(RP[o]+e in s););return o<0?null:(o===3?"ms":o>=0?RP[o]:"")+e},cM=function(){vX()&&window.document&&(AP=window,rl=AP.document,Pf=rl.documentElement,Tu=uM("div")||{style:{}},uM("div"),Gn=eh(Gn),Hr=Gn+"Origin",Tu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",YO=!!eh("perspective"),RT=Xr.core.reverting,bT=1)},PP=function(e){var t=e.ownerSVGElement,i=uM("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",i.appendChild(r),Pf.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),Pf.removeChild(i),s},IP=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},qO=function(e){var t,i;try{t=e.getBBox()}catch{t=PP(e),i=1}return t&&(t.width||t.height)||i||(t=PP(e)),t&&!t.width&&!t.x&&!t.y?{x:+IP(e,["x","cx","x1"])||0,y:+IP(e,["y","cy","y1"])||0,width:0,height:0}:t},jO=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&qO(e))},Ku=function(e,t){if(t){var i=e.style,r;t in Ea&&t!==Hr&&(t=Gn),i.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(r==="--"?t:t.replace(PT,"-$1").toLowerCase())):i.removeAttribute(t)}},sl=function(e,t,i,r,s,o){var a=new Br(e._pt,t,i,0,1,o?GO:VO);return e._pt=a,a.b=r,a.e=s,e._props.push(i),a},LP={deg:1,rad:1,turn:1},IX={grid:1,flex:1},Tl=function n(e,t,i,r){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Tu.style,l=_X.test(t),f=e.tagName.toLowerCase()==="svg",h=(f?"client":"offset")+(l?"Width":"Height"),d=100,p=r==="px",m=r==="%",_,y,x,g;if(r===o||!s||LP[r]||LP[o])return s;if(o!=="px"&&!p&&(s=n(e,t,i,"px")),g=e.getCTM&&jO(e),(m||o==="%")&&(Ea[t]||~t.indexOf("adius")))return _=g?e.getBBox()[l?"width":"height"]:e[h],ni(m?s/_*d:s/100*_);if(a[l?"width":"height"]=d+(p?o:r),y=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!f?e:e.parentNode,g&&(y=(e.ownerSVGElement||{}).parentNode),(!y||y===rl||!y.appendChild)&&(y=rl.body),x=y._gsap,x&&m&&x.width&&l&&x.time===rs.time&&!x.uncache)return ni(s/x.width*d);if(m&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=d+r,_=e[h],S?e.style[t]=S:Ku(e,t)}else(m||o==="%")&&!IX[Fs(y,"display")]&&(a.position=Fs(e,"position")),y===e&&(a.position="static"),y.appendChild(Tu),_=Tu[h],y.removeChild(Tu),a.position="absolute";return l&&m&&(x=Nu(y),x.time=rs.time,x.width=y[h]),ni(p?_*s/d:_&&s?d/_*s:0)},oa=function(e,t,i,r){var s;return bT||cM(),t in Ro&&t!=="transform"&&(t=Ro[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ea[t]&&t!=="transform"?(s=Kp(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:L_(Fs(e,Hr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=I_[t]&&I_[t](e,t,i)||Fs(e,t)||cO(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Tl(e,t,s,i)+i:s},LX=function(e,t,i,r){if(!i||i==="none"){var s=eh(t,e,1),o=s&&Fs(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=Fs(e,"borderTopColor"))}var a=new Br(this._pt,e.style,t,0,1,zO),l=0,f=0,h,d,p,m,_,y,x,g,S,w,E,I;if(a.b=i,a.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Fs(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(y=e.style[t],e.style[t]=r,r=Fs(e,t)||r,y?e.style[t]=y:Ku(e,t)),h=[i,r],RO(h),i=h[0],r=h[1],p=i.match(vf)||[],I=r.match(vf)||[],I.length){for(;d=vf.exec(r);)x=d[0],S=r.substring(l,d.index),_?_=(_+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(_=1),x!==(y=p[f++]||"")&&(m=parseFloat(y)||0,E=y.substr((m+"").length),x.charAt(1)==="="&&(x=Rf(m,x)+E),g=parseFloat(x),w=x.substr((g+"").length),l=vf.lastIndex-w.length,w||(w=w||fs.units[t]||E,l===r.length&&(r+=w,a.e+=w)),E!==w&&(m=Tl(e,t,y,w)||0),a._pt={_next:a._pt,p:S||f===1?S:",",s:m,c:g-m,m:_&&_<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?GO:VO;return rO.test(r)&&(a.e=0),this._pt=a,a},DP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},DX=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),t[0]=DP[i]||i,t[1]=DP[r]||r,t.join(" ")},NX=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,r=i.style,s=t.u,o=i._gsap,a,l,f;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),f=s.length;--f>-1;)a=s[f],Ea[a]&&(l=1,a=a==="transformOrigin"?Hr:Gn),Ku(i,a);l&&(Ku(i,Gn),o&&(o.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Kp(i,1),o.uncache=1,WO(r)))}},I_={clearProps:function(e,t,i,r,s){if(s.data!=="isFromStart"){var o=e._pt=new Br(e._pt,t,i,0,0,NX);return o.u=r,o.pr=-10,o.tween=s,e._props.push(i),1}}},Zp=[1,0,0,1,0,0],ZO={},KO=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},NP=function(e){var t=Fs(e,Gn);return KO(t)?Zp:t.substr(7).match(iO).map(ni)},IT=function(e,t){var i=e._gsap||Nu(e),r=e.style,s=NP(e),o,a,l,f;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Zp:s):(s===Zp&&!e.offsetParent&&e!==Pf&&!i.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,a=e.nextElementSibling,Pf.appendChild(e)),s=NP(e),l?r.display=l:Ku(e,"display"),f&&(a?o.insertBefore(e,a):o?o.appendChild(e):Pf.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},fM=function(e,t,i,r,s,o){var a=e._gsap,l=s||IT(e,!0),f=a.xOrigin||0,h=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,m=l[0],_=l[1],y=l[2],x=l[3],g=l[4],S=l[5],w=t.split(" "),E=parseFloat(w[0])||0,I=parseFloat(w[1])||0,R,P,b,C;i?l!==Zp&&(P=m*x-_*y)&&(b=E*(x/P)+I*(-y/P)+(y*S-x*g)/P,C=E*(-_/P)+I*(m/P)-(m*S-_*g)/P,E=b,I=C):(R=qO(e),E=R.x+(~w[0].indexOf("%")?E/100*R.width:E),I=R.y+(~(w[1]||w[0]).indexOf("%")?I/100*R.height:I)),r||r!==!1&&a.smooth?(g=E-f,S=I-h,a.xOffset=d+(g*m+S*y)-g,a.yOffset=p+(g*_+S*x)-S):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=I,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!i,e.style[Hr]="0px 0px",o&&(sl(o,a,"xOrigin",f,E),sl(o,a,"yOrigin",h,I),sl(o,a,"xOffset",d,a.xOffset),sl(o,a,"yOffset",p,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+I)},Kp=function(e,t){var i=e._gsap||new DO(e);if("x"in i&&!t&&!i.uncache)return i;var r=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),f=Fs(e,Hr)||"0",h,d,p,m,_,y,x,g,S,w,E,I,R,P,b,C,A,O,F,V,Y,J,K,ne,B,te,k,ce,Se,Fe,ue,Ee;return h=d=p=y=x=g=S=w=E=0,m=_=1,i.svg=!!(e.getCTM&&jO(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Gn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Gn]!=="none"?l[Gn]:"")),r.scale=r.rotate=r.translate="none"),P=IT(e,i.svg),i.svg&&(i.uncache?(B=e.getBBox(),f=i.xOrigin-B.x+"px "+(i.yOrigin-B.y)+"px",ne=""):ne=!t&&e.getAttribute("data-svg-origin"),fM(e,ne||f,!!ne||i.originIsAbsolute,i.smooth!==!1,P)),I=i.xOrigin||0,R=i.yOrigin||0,P!==Zp&&(O=P[0],F=P[1],V=P[2],Y=P[3],h=J=P[4],d=K=P[5],P.length===6?(m=Math.sqrt(O*O+F*F),_=Math.sqrt(Y*Y+V*V),y=O||F?Xc(F,O)*hu:0,S=V||Y?Xc(V,Y)*hu+y:0,S&&(_*=Math.abs(Math.cos(S*If))),i.svg&&(h-=I-(I*O+R*V),d-=R-(I*F+R*Y))):(Ee=P[6],Fe=P[7],k=P[8],ce=P[9],Se=P[10],ue=P[11],h=P[12],d=P[13],p=P[14],b=Xc(Ee,Se),x=b*hu,b&&(C=Math.cos(-b),A=Math.sin(-b),ne=J*C+k*A,B=K*C+ce*A,te=Ee*C+Se*A,k=J*-A+k*C,ce=K*-A+ce*C,Se=Ee*-A+Se*C,ue=Fe*-A+ue*C,J=ne,K=B,Ee=te),b=Xc(-V,Se),g=b*hu,b&&(C=Math.cos(-b),A=Math.sin(-b),ne=O*C-k*A,B=F*C-ce*A,te=V*C-Se*A,ue=Y*A+ue*C,O=ne,F=B,V=te),b=Xc(F,O),y=b*hu,b&&(C=Math.cos(b),A=Math.sin(b),ne=O*C+F*A,B=J*C+K*A,F=F*C-O*A,K=K*C-J*A,O=ne,J=B),x&&Math.abs(x)+Math.abs(y)>359.9&&(x=y=0,g=180-g),m=ni(Math.sqrt(O*O+F*F+V*V)),_=ni(Math.sqrt(K*K+Ee*Ee)),b=Xc(J,K),S=Math.abs(b)>2e-4?b*hu:0,E=ue?1/(ue<0?-ue:ue):0),i.svg&&(ne=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!KO(Fs(e,Gn)),ne&&e.setAttribute("transform",ne))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=y<=0?180:-180,y+=y<=0?180:-180):(_*=-1,S+=S<=0?180:-180)),t=t||i.uncache,i.x=h-((i.xPercent=h&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=ni(m),i.scaleY=ni(_),i.rotation=ni(y)+a,i.rotationX=ni(x)+a,i.rotationY=ni(g)+a,i.skewX=S+a,i.skewY=w+a,i.transformPerspective=E+o,(i.zOrigin=parseFloat(f.split(" ")[2])||!t&&i.zOrigin||0)&&(r[Hr]=L_(f)),i.xOffset=i.yOffset=0,i.force3D=fs.force3D,i.renderTransform=i.svg?UX:YO?$O:OX,i.uncache=0,i},L_=function(e){return(e=e.split(" "))[0]+" "+e[1]},MS=function(e,t,i){var r=Qi(t);return ni(parseFloat(t)+parseFloat(Tl(e,"x",i+"px",r)))+r},OX=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,$O(e,t)},ru="0deg",ad="0px",su=") ",$O=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,f=i.rotation,h=i.rotationY,d=i.rotationX,p=i.skewX,m=i.skewY,_=i.scaleX,y=i.scaleY,x=i.transformPerspective,g=i.force3D,S=i.target,w=i.zOrigin,E="",I=g==="auto"&&e&&e!==1||g===!0;if(w&&(d!==ru||h!==ru)){var R=parseFloat(h)*If,P=Math.sin(R),b=Math.cos(R),C;R=parseFloat(d)*If,C=Math.cos(R),o=MS(S,o,P*C*-w),a=MS(S,a,-Math.sin(R)*-w),l=MS(S,l,b*C*-w+w)}x!==ad&&(E+="perspective("+x+su),(r||s)&&(E+="translate("+r+"%, "+s+"%) "),(I||o!==ad||a!==ad||l!==ad)&&(E+=l!==ad||I?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+su),f!==ru&&(E+="rotate("+f+su),h!==ru&&(E+="rotateY("+h+su),d!==ru&&(E+="rotateX("+d+su),(p!==ru||m!==ru)&&(E+="skew("+p+", "+m+su),(_!==1||y!==1)&&(E+="scale("+_+", "+y+su),S.style[Gn]=E||"translate(0, 0)"},UX=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,f=i.skewX,h=i.skewY,d=i.scaleX,p=i.scaleY,m=i.target,_=i.xOrigin,y=i.yOrigin,x=i.xOffset,g=i.yOffset,S=i.forceCSS,w=parseFloat(o),E=parseFloat(a),I,R,P,b,C;l=parseFloat(l),f=parseFloat(f),h=parseFloat(h),h&&(h=parseFloat(h),f+=h,l+=h),l||f?(l*=If,f*=If,I=Math.cos(l)*d,R=Math.sin(l)*d,P=Math.sin(l-f)*-p,b=Math.cos(l-f)*p,f&&(h*=If,C=Math.tan(f-h),C=Math.sqrt(1+C*C),P*=C,b*=C,h&&(C=Math.tan(h),C=Math.sqrt(1+C*C),I*=C,R*=C)),I=ni(I),R=ni(R),P=ni(P),b=ni(b)):(I=d,b=p,R=P=0),(w&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(w=Tl(m,"x",o,"px"),E=Tl(m,"y",a,"px")),(_||y||x||g)&&(w=ni(w+_-(_*I+y*P)+x),E=ni(E+y-(_*R+y*b)+g)),(r||s)&&(C=m.getBBox(),w=ni(w+r/100*C.width),E=ni(E+s/100*C.height)),C="matrix("+I+","+R+","+P+","+b+","+w+","+E+")",m.setAttribute("transform",C),S&&(m.style[Gn]=C)},kX=function(e,t,i,r,s){var o=360,a=Di(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?hu:1),f=l-r,h=r+f+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(f%=o,f!==f%(o/2)&&(f+=f<0?o:-o)),d==="cw"&&f<0?f=(f+o*bP)%o-~~(f/o)*o:d==="ccw"&&f>0&&(f=(f-o*bP)%o-~~(f/o)*o)),e._pt=p=new Br(e._pt,t,i,r,f,xX),p.e=h,p.u="deg",e._props.push(i),p},OP=function(e,t){for(var i in t)e[i]=t[i];return e},FX=function(e,t,i){var r=OP({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,f,h,d,p,m,_;r.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),o[Gn]=t,a=Kp(i,1),Ku(i,Gn),i.setAttribute("transform",f)):(f=getComputedStyle(i)[Gn],o[Gn]=t,a=Kp(i,1),o[Gn]=f);for(l in Ea)f=r[l],h=a[l],f!==h&&s.indexOf(l)<0&&(m=Qi(f),_=Qi(h),d=m!==_?Tl(i,l,f,_):parseFloat(f),p=parseFloat(h),e._pt=new Br(e._pt,a,l,d,p-d,lM),e._pt.u=_||0,e._props.push(l));OP(a,r)};zr("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",o=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(a){return e<2?n+a:"border"+a+n});I_[e>1?"border"+n:n]=function(a,l,f,h,d){var p,m;if(arguments.length<4)return p=o.map(function(_){return oa(a,_,f)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(h+"").split(" "),m={},o.forEach(function(_,y){return m[_]=p[y]=p[y]||p[(y-1)/2|0]}),a.init(l,m,d)}});var JO={name:"css",register:cM,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var o=this._props,a=e.style,l=i.vars.startAt,f,h,d,p,m,_,y,x,g,S,w,E,I,R,P,b;bT||cM(),this.styles=this.styles||XO(e),b=this.styles.props,this.tween=i;for(y in t)if(y!=="autoRound"&&(h=t[y],!(ts[y]&&NO(y,t,i,r,e,s)))){if(m=typeof h,_=I_[y],m==="function"&&(h=h.call(i,r,e,s),m=typeof h),m==="string"&&~h.indexOf("random(")&&(h=Yp(h)),_)_(this,e,y,h,i)&&(P=1);else if(y.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(y)+"").trim(),h+="",vl.lastIndex=0,vl.test(f)||(x=Qi(f),g=Qi(h)),g?x!==g&&(f=Tl(e,y,f,g)+g):x&&(h+=x),this.add(a,"setProperty",f,h,r,s,0,0,y),o.push(y),b.push(y,0,a[y]);else if(m!=="undefined"){if(l&&y in l?(f=typeof l[y]=="function"?l[y].call(i,r,e,s):l[y],Di(f)&&~f.indexOf("random(")&&(f=Yp(f)),Qi(f+"")||f==="auto"||(f+=fs.units[y]||Qi(oa(e,y))||""),(f+"").charAt(1)==="="&&(f=oa(e,y))):f=oa(e,y),p=parseFloat(f),S=m==="string"&&h.charAt(1)==="="&&h.substr(0,2),S&&(h=h.substr(2)),d=parseFloat(h),y in Ro&&(y==="autoAlpha"&&(p===1&&oa(e,"visibility")==="hidden"&&d&&(p=0),b.push("visibility",0,a.visibility),sl(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),y!=="scale"&&y!=="transform"&&(y=Ro[y],~y.indexOf(",")&&(y=y.split(",")[0]))),w=y in Ea,w){if(this.styles.save(y),m==="string"&&h.substring(0,6)==="var(--"&&(h=Fs(e,h.substring(4,h.indexOf(")"))),d=parseFloat(h)),E||(I=e._gsap,I.renderTransform&&!t.parseTransform||Kp(e,t.parseTransform),R=t.smoothOrigin!==!1&&I.smooth,E=this._pt=new Br(this._pt,a,Gn,0,1,I.renderTransform,I,0,-1),E.dep=1),y==="scale")this._pt=new Br(this._pt,I,"scaleY",I.scaleY,(S?Rf(I.scaleY,S+d):d)-I.scaleY||0,lM),this._pt.u=0,o.push("scaleY",y),y+="X";else if(y==="transformOrigin"){b.push(Hr,0,a[Hr]),h=DX(h),I.svg?fM(e,h,0,R,0,this):(g=parseFloat(h.split(" ")[2])||0,g!==I.zOrigin&&sl(this,I,"zOrigin",I.zOrigin,g),sl(this,a,y,L_(f),L_(h)));continue}else if(y==="svgOrigin"){fM(e,h,1,R,0,this);continue}else if(y in ZO){kX(this,I,y,p,S?Rf(p,S+h):h);continue}else if(y==="smoothOrigin"){sl(this,I,"smooth",I.smooth,h);continue}else if(y==="force3D"){I[y]=h;continue}else if(y==="transform"){FX(this,h,e);continue}}else y in a||(y=eh(y)||y);if(w||(d||d===0)&&(p||p===0)&&!yX.test(h)&&y in a)x=(f+"").substr((p+"").length),d||(d=0),g=Qi(h)||(y in fs.units?fs.units[y]:x),x!==g&&(p=Tl(e,y,f,g)),this._pt=new Br(this._pt,w?I:a,y,p,(S?Rf(p,S+d):d)-p,!w&&(g==="px"||y==="zIndex")&&t.autoRound!==!1?wX:lM),this._pt.u=g||0,x!==g&&g!=="%"&&(this._pt.b=f,this._pt.r=SX);else if(y in a)LX.call(this,e,y,f,S?S+h:h);else if(y in e)this.add(e,y,f||e[y],S?S+h:h,r,s);else if(y!=="parseTransform"){_T(y,h);continue}w||(y in a?b.push(y,0,a[y]):typeof e[y]=="function"?b.push(y,2,e[y]()):b.push(y,1,f||e[y])),o.push(y)}}P&&BO(this)},render:function(e,t){if(t.tween._time||!RT())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:oa,aliases:Ro,getSetter:function(e,t,i){var r=Ro[t];return r&&r.indexOf(",")<0&&(t=r),t in Ea&&t!==Hr&&(e._gsap.x||oa(e,"x"))?i&&CP===i?t==="scale"?AX:TX:(CP=i||{})&&(t==="scale"?CX:bX):e.style&&!mT(e.style[t])?MX:~t.indexOf("-")?EX:AT(e,t)},core:{_removeProperty:Ku,_getMatrix:IT}};Xr.utils.checkPrefix=eh;Xr.core.getStyleSaver=XO;(function(n,e,t,i){var r=zr(n+","+e+","+t,function(s){Ea[s]=1});zr(e,function(s){fs.units[s]="deg",ZO[s]=1}),Ro[r[13]]=n+","+e,zr(i,function(s){var o=s.split(":");Ro[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");zr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){fs.units[n]="px"});Xr.registerPlugin(JO);var LT=Xr.registerPlugin(JO)||Xr;LT.core.Tween;function UP(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function zX(n,e,t){return e&&UP(n.prototype,e),t&&UP(n,t),n}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ui,fv,ss,ol,al,Lf,QO,du,jd,eU,pa,Js,tU,nU=function(){return Ui||typeof window<"u"&&(Ui=window.gsap)&&Ui.registerPlugin&&Ui},iU=1,yf=[],Jt=[],Uo=[],Zd=Date.now,hM=function(e,t){return t},BX=function(){var e=jd.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,Jt),r.push.apply(r,Uo),Jt=i,Uo=r,hM=function(o,a){return t[o](a)}},_l=function(e,t){return~Uo.indexOf(e)&&Uo[Uo.indexOf(e)+1][t]},Kd=function(e){return!!~eU.indexOf(e)},ur=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:r!==!1,capture:!!s})},lr=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},O0="scrollLeft",U0="scrollTop",dM=function(){return pa&&pa.isPressed||Jt.cache++},D_=function(e,t){var i=function r(s){if(s||s===0){iU&&(ss.history.scrollRestoration="manual");var o=pa&&pa.isPressed;s=r.v=Math.round(s)||(pa&&pa.iOS?1:0),e(s),r.cacheID=Jt.cache,o&&hM("ss",s)}else(t||Jt.cache!==r.cacheID||hM("ref"))&&(r.cacheID=Jt.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},vr={s:O0,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:D_(function(n){return arguments.length?ss.scrollTo(n,_i.sc()):ss.pageXOffset||ol[O0]||al[O0]||Lf[O0]||0})},_i={s:U0,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:vr,sc:D_(function(n){return arguments.length?ss.scrollTo(vr.sc(),n):ss.pageYOffset||ol[U0]||al[U0]||Lf[U0]||0})},Pr=function(e,t){return(t&&t._ctx&&t._ctx.selector||Ui.utils.toArray)(e)[0]||(typeof e=="string"&&Ui.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},HX=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},Al=function(e,t){var i=t.s,r=t.sc;Kd(e)&&(e=ol.scrollingElement||al);var s=Jt.indexOf(e),o=r===_i.sc?1:2;!~s&&(s=Jt.push(e)-1),Jt[s+o]||ur(e,"scroll",dM);var a=Jt[s+o],l=a||(Jt[s+o]=D_(_l(e,i),!0)||(Kd(e)?r:D_(function(f){return arguments.length?e[i]=f:e[i]})));return l.target=e,a||(l.smooth=Ui.getProperty(e,"scrollBehavior")==="smooth"),l},pM=function(e,t,i){var r=e,s=e,o=Zd(),a=o,l=t||50,f=Math.max(500,l*3),h=function(_,y){var x=Zd();y||x-o>l?(s=r,r=_,a=o,o=x):i?r+=_:r=s+(_-s)/(x-a)*(o-a)},d=function(){s=r=i?0:r,a=o=0},p=function(_){var y=a,x=s,g=Zd();return(_||_===0)&&_!==r&&h(_),o===a||g-a>f?0:(r+(i?x:-x))/((i?g:o)-y)*1e3};return{update:h,reset:d,getVelocity:p}},ld=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},kP=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},rU=function(){jd=Ui.core.globals().ScrollTrigger,jd&&jd.core&&BX()},sU=function(e){return Ui=e||nU(),!fv&&Ui&&typeof document<"u"&&document.body&&(ss=window,ol=document,al=ol.documentElement,Lf=ol.body,eU=[ss,ol,al,Lf],Ui.utils.clamp,tU=Ui.core.context||function(){},du="onpointerenter"in Lf?"pointer":"mouse",QO=si.isTouch=ss.matchMedia&&ss.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in ss||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Js=si.eventTypes=("ontouchstart"in al?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in al?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return iU=0},500),rU(),fv=1),fv};vr.op=_i;Jt.cache=0;var si=function(){function n(t){this.init(t)}var e=n.prototype;return e.init=function(i){fv||sU(Ui)||console.warn("Please gsap.registerPlugin(Observer)"),jd||rU();var r=i.tolerance,s=i.dragMinimum,o=i.type,a=i.target,l=i.lineHeight,f=i.debounce,h=i.preventDefault,d=i.onStop,p=i.onStopDelay,m=i.ignore,_=i.wheelSpeed,y=i.event,x=i.onDragStart,g=i.onDragEnd,S=i.onDrag,w=i.onPress,E=i.onRelease,I=i.onRight,R=i.onLeft,P=i.onUp,b=i.onDown,C=i.onChangeX,A=i.onChangeY,O=i.onChange,F=i.onToggleX,V=i.onToggleY,Y=i.onHover,J=i.onHoverEnd,K=i.onMove,ne=i.ignoreCheck,B=i.isNormalizer,te=i.onGestureStart,k=i.onGestureEnd,ce=i.onWheel,Se=i.onEnable,Fe=i.onDisable,ue=i.onClick,Ee=i.scrollSpeed,Te=i.capture,Pe=i.allowClicks,Qe=i.lockAxis,ht=i.onLockAxis;this.target=a=Pr(a)||al,this.vars=i,m&&(m=Ui.utils.toArray(m)),r=r||1e-9,s=s||0,_=_||1,Ee=Ee||1,o=o||"wheel,touch,pointer",f=f!==!1,l||(l=parseFloat(ss.getComputedStyle(Lf).lineHeight)||22);var mt,ut,G,ve,Re,He,Me,se=this,Ge=0,Ke=0,j=i.passive||!h&&i.passive!==!1,U=Al(a,vr),he=Al(a,_i),Ie=U(),Le=he(),Ae=~o.indexOf("touch")&&!~o.indexOf("pointer")&&Js[0]==="pointerdown",at=Kd(a),Ue=a.ownerDocument||ol,qe=[0,0,0],gt=[0,0,0],ke=0,$e=function(){return ke=Zd()},St=function(st,Zt){return(se.event=st)&&m&&HX(st.target,m)||Zt&&Ae&&st.pointerType!=="touch"||ne&&ne(st,Zt)},wt=function(){se._vx.reset(),se._vy.reset(),ut.pause(),d&&d(se)},We=function(){var st=se.deltaX=kP(qe),Zt=se.deltaY=kP(gt),je=Math.abs(st)>=r,Dt=Math.abs(Zt)>=r;O&&(je||Dt)&&O(se,st,Zt,qe,gt),je&&(I&&se.deltaX>0&&I(se),R&&se.deltaX<0&&R(se),C&&C(se),F&&se.deltaX<0!=Ge<0&&F(se),Ge=se.deltaX,qe[0]=qe[1]=qe[2]=0),Dt&&(b&&se.deltaY>0&&b(se),P&&se.deltaY<0&&P(se),A&&A(se),V&&se.deltaY<0!=Ke<0&&V(se),Ke=se.deltaY,gt[0]=gt[1]=gt[2]=0),(ve||G)&&(K&&K(se),G&&(x&&G===1&&x(se),S&&S(se),G=0),ve=!1),He&&!(He=!1)&&ht&&ht(se),Re&&(ce(se),Re=!1),mt=0},ie=function(st,Zt,je){qe[je]+=st,gt[je]+=Zt,se._vx.update(st),se._vy.update(Zt),f?mt||(mt=requestAnimationFrame(We)):We()},we=function(st,Zt){Qe&&!Me&&(se.axis=Me=Math.abs(st)>Math.abs(Zt)?"x":"y",He=!0),Me!=="y"&&(qe[2]+=st,se._vx.update(st,!0)),Me!=="x"&&(gt[2]+=Zt,se._vy.update(Zt,!0)),f?mt||(mt=requestAnimationFrame(We)):We()},Ve=function(st){if(!St(st,1)){st=ld(st,h);var Zt=st.clientX,je=st.clientY,Dt=Zt-se.x,yt=je-se.y,Rt=se.isDragging;se.x=Zt,se.y=je,(Rt||(Dt||yt)&&(Math.abs(se.startX-Zt)>=s||Math.abs(se.startY-je)>=s))&&(G=Rt?2:1,Rt||(se.isDragging=!0),we(Dt,yt))}},Q=se.onPress=function(_t){St(_t,1)||_t&&_t.button||(se.axis=Me=null,ut.pause(),se.isPressed=!0,_t=ld(_t),Ge=Ke=0,se.startX=se.x=_t.clientX,se.startY=se.y=_t.clientY,se._vx.reset(),se._vy.reset(),ur(B?a:Ue,Js[1],Ve,j,!0),se.deltaX=se.deltaY=0,w&&w(se))},ge=se.onRelease=function(_t){if(!St(_t,1)){lr(B?a:Ue,Js[1],Ve,!0);var st=!isNaN(se.y-se.startY),Zt=se.isDragging,je=Zt&&(Math.abs(se.x-se.startX)>3||Math.abs(se.y-se.startY)>3),Dt=ld(_t);!je&&st&&(se._vx.reset(),se._vy.reset(),h&&Pe&&Ui.delayedCall(.08,function(){if(Zd()-ke>300&&!_t.defaultPrevented){if(_t.target.click)_t.target.click();else if(Ue.createEvent){var yt=Ue.createEvent("MouseEvents");yt.initMouseEvent("click",!0,!0,ss,1,Dt.screenX,Dt.screenY,Dt.clientX,Dt.clientY,!1,!1,!1,!1,0,null),_t.target.dispatchEvent(yt)}}})),se.isDragging=se.isGesturing=se.isPressed=!1,d&&Zt&&!B&&ut.restart(!0),G&&We(),g&&Zt&&g(se),E&&E(se,je)}},re=function(st){return st.touches&&st.touches.length>1&&(se.isGesturing=!0)&&te(st,se.isDragging)},xe=function(){return(se.isGesturing=!1)||k(se)},Be=function(st){if(!St(st)){var Zt=U(),je=he();ie((Zt-Ie)*Ee,(je-Le)*Ee,1),Ie=Zt,Le=je,d&&ut.restart(!0)}},ct=function(st){if(!St(st)){st=ld(st,h),ce&&(Re=!0);var Zt=(st.deltaMode===1?l:st.deltaMode===2?ss.innerHeight:1)*_;ie(st.deltaX*Zt,st.deltaY*Zt,0),d&&!B&&ut.restart(!0)}},At=function(st){if(!St(st)){var Zt=st.clientX,je=st.clientY,Dt=Zt-se.x,yt=je-se.y;se.x=Zt,se.y=je,ve=!0,d&&ut.restart(!0),(Dt||yt)&&we(Dt,yt)}},zt=function(st){se.event=st,Y(se)},Qt=function(st){se.event=st,J(se)},Ot=function(st){return St(st)||ld(st,h)&&ue(se)};ut=se._dc=Ui.delayedCall(p||.25,wt).pause(),se.deltaX=se.deltaY=0,se._vx=pM(0,50,!0),se._vy=pM(0,50,!0),se.scrollX=U,se.scrollY=he,se.isDragging=se.isGesturing=se.isPressed=!1,tU(this),se.enable=function(_t){return se.isEnabled||(ur(at?Ue:a,"scroll",dM),o.indexOf("scroll")>=0&&ur(at?Ue:a,"scroll",Be,j,Te),o.indexOf("wheel")>=0&&ur(a,"wheel",ct,j,Te),(o.indexOf("touch")>=0&&QO||o.indexOf("pointer")>=0)&&(ur(a,Js[0],Q,j,Te),ur(Ue,Js[2],ge),ur(Ue,Js[3],ge),Pe&&ur(a,"click",$e,!0,!0),ue&&ur(a,"click",Ot),te&&ur(Ue,"gesturestart",re),k&&ur(Ue,"gestureend",xe),Y&&ur(a,du+"enter",zt),J&&ur(a,du+"leave",Qt),K&&ur(a,du+"move",At)),se.isEnabled=!0,se.isDragging=se.isGesturing=se.isPressed=ve=G=!1,se._vx.reset(),se._vy.reset(),Ie=U(),Le=he(),_t&&_t.type&&Q(_t),Se&&Se(se)),se},se.disable=function(){se.isEnabled&&(yf.filter(function(_t){return _t!==se&&Kd(_t.target)}).length||lr(at?Ue:a,"scroll",dM),se.isPressed&&(se._vx.reset(),se._vy.reset(),lr(B?a:Ue,Js[1],Ve,!0)),lr(at?Ue:a,"scroll",Be,Te),lr(a,"wheel",ct,Te),lr(a,Js[0],Q,Te),lr(Ue,Js[2],ge),lr(Ue,Js[3],ge),lr(a,"click",$e,!0),lr(a,"click",Ot),lr(Ue,"gesturestart",re),lr(Ue,"gestureend",xe),lr(a,du+"enter",zt),lr(a,du+"leave",Qt),lr(a,du+"move",At),se.isEnabled=se.isPressed=se.isDragging=!1,Fe&&Fe(se))},se.kill=se.revert=function(){se.disable();var _t=yf.indexOf(se);_t>=0&&yf.splice(_t,1),pa===se&&(pa=0)},yf.push(se),B&&Kd(a)&&(pa=se),se.enable(y)},zX(n,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),n}();si.version="3.13.0";si.create=function(n){return new si(n)};si.register=sU;si.getAll=function(){return yf.slice()};si.getById=function(n){return yf.filter(function(e){return e.vars.id===n})[0]};nU()&&Ui.registerPlugin(si);/*!
 * ScrollTrigger 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var pt,Kc,$t,Cn,ns,vn,DT,N_,$p,$d,_d,k0,Ki,Fy,mM,dr,FP,zP,$c,oU,ES,aU,fr,gM,lU,uU,Xa,vM,NT,Df,OT,O_,_M,TS,F0=1,$i=Date.now,AS=$i(),Bs=0,yd=0,BP=function(e,t,i){var r=es(e)&&(e.substr(0,6)==="clamp("||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},HP=function(e,t){return t&&(!es(e)||e.substr(0,6)!=="clamp(")?"clamp("+e+")":e},VX=function n(){return yd&&requestAnimationFrame(n)},VP=function(){return Fy=1},GP=function(){return Fy=0},Mo=function(e){return e},xd=function(e){return Math.round(e*1e5)/1e5||0},cU=function(){return typeof window<"u"},fU=function(){return pt||cU()&&(pt=window.gsap)&&pt.registerPlugin&&pt},$u=function(e){return!!~DT.indexOf(e)},hU=function(e){return(e==="Height"?OT:$t["inner"+e])||ns["client"+e]||vn["client"+e]},dU=function(e){return _l(e,"getBoundingClientRect")||($u(e)?function(){return gv.width=$t.innerWidth,gv.height=OT,gv}:function(){return ua(e)})},GX=function(e,t,i){var r=i.d,s=i.d2,o=i.a;return(o=_l(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?hU(s):e["client"+s])||0}},WX=function(e,t){return!t||~Uo.indexOf(e)?dU(e):function(){return gv}},Po=function(e,t){var i=t.s,r=t.d2,s=t.d,o=t.a;return Math.max(0,(i="scroll"+r)&&(o=_l(e,i))?o()-dU(e)()[s]:$u(e)?(ns[i]||vn[i])-hU(r):e[i]-e["offset"+r])},z0=function(e,t){for(var i=0;i<$c.length;i+=3)(!t||~t.indexOf($c[i+1]))&&e($c[i],$c[i+1],$c[i+2])},es=function(e){return typeof e=="string"},er=function(e){return typeof e=="function"},Sd=function(e){return typeof e=="number"},pu=function(e){return typeof e=="object"},ud=function(e,t,i){return e&&e.progress(t?0:1)&&i&&e.pause()},CS=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},Yc=Math.abs,pU="left",mU="top",UT="right",kT="bottom",Fu="width",zu="height",Jd="Right",Qd="Left",ep="Top",tp="Bottom",ci="padding",Ls="margin",th="Width",FT="Height",gi="px",Ds=function(e){return $t.getComputedStyle(e)},XX=function(e){var t=Ds(e).position;e.style.position=t==="absolute"||t==="fixed"?t:"relative"},WP=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ua=function(e,t){var i=t&&Ds(e)[mM]!=="matrix(1, 0, 0, 1, 0, 0)"&&pt.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return i&&i.progress(0).kill(),r},U_=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},gU=function(e){var t=[],i=e.labels,r=e.duration(),s;for(s in i)t.push(i[s]/r);return t},YX=function(e){return function(t){return pt.utils.snap(gU(e),t)}},zT=function(e){var t=pt.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(r,s){return r-s});return i?function(r,s,o){o===void 0&&(o=.001);var a;if(!s)return t(r);if(s>0){for(r-=o,a=0;a<i.length;a++)if(i[a]>=r)return i[a];return i[a-1]}else for(a=i.length,r+=o;a--;)if(i[a]<=r)return i[a];return i[0]}:function(r,s,o){o===void 0&&(o=.001);var a=t(r);return!s||Math.abs(a-r)<o||a-r<0==s<0?a:t(s<0?r-e:r+e)}},qX=function(e){return function(t,i){return zT(gU(e))(t,i.direction)}},B0=function(e,t,i,r){return i.split(",").forEach(function(s){return e(t,s,r)})},bi=function(e,t,i,r,s){return e.addEventListener(t,i,{passive:!r,capture:!!s})},Ci=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},H0=function(e,t,i){i=i&&i.wheelHandler,i&&(e(t,"wheel",i),e(t,"touchmove",i))},XP={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},V0={toggleActions:"play",anticipatePin:0},k_={top:0,left:0,center:.5,bottom:1,right:1},hv=function(e,t){if(es(e)){var i=e.indexOf("="),r=~i?+(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(r*=t/100),e=e.substr(0,i-1)),e=r+(e in k_?k_[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},G0=function(e,t,i,r,s,o,a,l){var f=s.startColor,h=s.endColor,d=s.fontSize,p=s.indent,m=s.fontWeight,_=Cn.createElement("div"),y=$u(i)||_l(i,"pinType")==="fixed",x=e.indexOf("scroller")!==-1,g=y?vn:i,S=e.indexOf("start")!==-1,w=S?f:h,E="border-color:"+w+";font-size:"+d+";color:"+w+";font-weight:"+m+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return E+="position:"+((x||l)&&y?"fixed;":"absolute;"),(x||l||!y)&&(E+=(r===_i?UT:kT)+":"+(o+parseFloat(p))+"px;"),a&&(E+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),_._isStart=S,_.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),_.style.cssText=E,_.innerText=t||t===0?e+"-"+t:e,g.children[0]?g.insertBefore(_,g.children[0]):g.appendChild(_),_._offset=_["offset"+r.op.d2],dv(_,0,r,S),_},dv=function(e,t,i,r){var s={display:"block"},o=i[r?"os2":"p2"],a=i[r?"p2":"os2"];e._isFlipped=r,s[i.a+"Percent"]=r?-100:0,s[i.a]=r?"1px":0,s["border"+o+th]=1,s["border"+a+th]=0,s[i.p]=t+"px",pt.set(e,s)},jt=[],yM={},Jp,YP=function(){return $i()-Bs>34&&(Jp||(Jp=requestAnimationFrame(va)))},qc=function(){(!fr||!fr.isPressed||fr.startX>vn.clientWidth)&&(Jt.cache++,fr?Jp||(Jp=requestAnimationFrame(va)):va(),Bs||Qu("scrollStart"),Bs=$i())},bS=function(){uU=$t.innerWidth,lU=$t.innerHeight},wd=function(e){Jt.cache++,(e===!0||!Ki&&!aU&&!Cn.fullscreenElement&&!Cn.webkitFullscreenElement&&(!gM||uU!==$t.innerWidth||Math.abs($t.innerHeight-lU)>$t.innerHeight*.25))&&N_.restart(!0)},Ju={},jX=[],vU=function n(){return Ci(en,"scrollEnd",n)||Au(!0)},Qu=function(e){return Ju[e]&&Ju[e].map(function(t){return t()})||jX},Jr=[],_U=function(e){for(var t=0;t<Jr.length;t+=5)(!e||Jr[t+4]&&Jr[t+4].query===e)&&(Jr[t].style.cssText=Jr[t+1],Jr[t].getBBox&&Jr[t].setAttribute("transform",Jr[t+2]||""),Jr[t+3].uncache=1)},BT=function(e,t){var i;for(dr=0;dr<jt.length;dr++)i=jt[dr],i&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));O_=!0,t&&_U(t),t||Qu("revert")},yU=function(e,t){Jt.cache++,(t||!pr)&&Jt.forEach(function(i){return er(i)&&i.cacheID++&&(i.rec=0)}),es(e)&&($t.history.scrollRestoration=NT=e)},pr,Bu=0,qP,ZX=function(){if(qP!==Bu){var e=qP=Bu;requestAnimationFrame(function(){return e===Bu&&Au(!0)})}},xU=function(){vn.appendChild(Df),OT=!fr&&Df.offsetHeight||$t.innerHeight,vn.removeChild(Df)},jP=function(e){return $p(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},Au=function(e,t){if(ns=Cn.documentElement,vn=Cn.body,DT=[$t,Cn,ns,vn],Bs&&!e&&!O_){bi(en,"scrollEnd",vU);return}xU(),pr=en.isRefreshing=!0,Jt.forEach(function(r){return er(r)&&++r.cacheID&&(r.rec=r())});var i=Qu("refreshInit");oU&&en.sort(),t||BT(),Jt.forEach(function(r){er(r)&&(r.smooth&&(r.target.style.scrollBehavior="auto"),r(0))}),jt.slice(0).forEach(function(r){return r.refresh()}),O_=!1,jt.forEach(function(r){if(r._subPinOffset&&r.pin){var s=r.vars.horizontal?"offsetWidth":"offsetHeight",o=r.pin[s];r.revert(!0,1),r.adjustPinSpacing(r.pin[s]-o),r.refresh()}}),_M=1,jP(!0),jt.forEach(function(r){var s=Po(r.scroller,r._dir),o=r.vars.end==="max"||r._endClamp&&r.end>s,a=r._startClamp&&r.start>=s;(o||a)&&r.setPositions(a?s-1:r.start,o?Math.max(a?s:r.start+1,s):r.end,!0)}),jP(!1),_M=0,i.forEach(function(r){return r&&r.render&&r.render(-1)}),Jt.forEach(function(r){er(r)&&(r.smooth&&requestAnimationFrame(function(){return r.target.style.scrollBehavior="smooth"}),r.rec&&r(r.rec))}),yU(NT,1),N_.pause(),Bu++,pr=2,va(2),jt.forEach(function(r){return er(r.vars.onRefresh)&&r.vars.onRefresh(r)}),pr=en.isRefreshing=!1,Qu("refresh")},xM=0,pv=1,np,va=function(e){if(e===2||!pr&&!O_){en.isUpdating=!0,np&&np.update(0);var t=jt.length,i=$i(),r=i-AS>=50,s=t&&jt[0].scroll();if(pv=xM>s?-1:1,pr||(xM=s),r&&(Bs&&!Fy&&i-Bs>200&&(Bs=0,Qu("scrollEnd")),_d=AS,AS=i),pv<0){for(dr=t;dr-- >0;)jt[dr]&&jt[dr].update(0,r);pv=1}else for(dr=0;dr<t;dr++)jt[dr]&&jt[dr].update(0,r);en.isUpdating=!1}Jp=0},SM=[pU,mU,kT,UT,Ls+tp,Ls+Jd,Ls+ep,Ls+Qd,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],mv=SM.concat([Fu,zu,"boxSizing","max"+th,"max"+FT,"position",Ls,ci,ci+ep,ci+Jd,ci+tp,ci+Qd]),KX=function(e,t,i){Nf(i);var r=e._gsap;if(r.spacerIsNative)Nf(r.spacerState);else if(e._gsap.swappedIn){var s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))}e._gsap.swappedIn=!1},RS=function(e,t,i,r){if(!e._gsap.swappedIn){for(var s=SM.length,o=t.style,a=e.style,l;s--;)l=SM[s],o[l]=i[l];o.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(o.display="inline-block"),a[kT]=a[UT]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[Fu]=U_(e,vr)+gi,o[zu]=U_(e,_i)+gi,o[ci]=a[Ls]=a[mU]=a[pU]="0",Nf(r),a[Fu]=a["max"+th]=i[Fu],a[zu]=a["max"+FT]=i[zu],a[ci]=i[ci],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},$X=/([A-Z])/g,Nf=function(e){if(e){var t=e.t.style,i=e.length,r=0,s,o;for((e.t._gsap||pt.core.getCache(e.t)).uncache=1;r<i;r+=2)o=e[r+1],s=e[r],o?t[s]=o:t[s]&&t.removeProperty(s.replace($X,"-$1").toLowerCase())}},W0=function(e){for(var t=mv.length,i=e.style,r=[],s=0;s<t;s++)r.push(mv[s],i[mv[s]]);return r.t=e,r},JX=function(e,t,i){for(var r=[],s=e.length,o=i?8:0,a;o<s;o+=2)a=e[o],r.push(a,a in t?t[a]:e[o+1]);return r.t=e.t,r},gv={left:0,top:0},ZP=function(e,t,i,r,s,o,a,l,f,h,d,p,m,_){er(e)&&(e=e(l)),es(e)&&e.substr(0,3)==="max"&&(e=p+(e.charAt(4)==="="?hv("0"+e.substr(3),i):0));var y=m?m.time():0,x,g,S;if(m&&m.seek(0),isNaN(e)||(e=+e),Sd(e))m&&(e=pt.utils.mapRange(m.scrollTrigger.start,m.scrollTrigger.end,0,p,e)),a&&dv(a,i,r,!0);else{er(t)&&(t=t(l));var w=(e||"0").split(" "),E,I,R,P;S=Pr(t,l)||vn,E=ua(S)||{},(!E||!E.left&&!E.top)&&Ds(S).display==="none"&&(P=S.style.display,S.style.display="block",E=ua(S),P?S.style.display=P:S.style.removeProperty("display")),I=hv(w[0],E[r.d]),R=hv(w[1]||"0",i),e=E[r.p]-f[r.p]-h+I+s-R,a&&dv(a,R,r,i-R<20||a._isStart&&R>20),i-=i-R}if(_&&(l[_]=e||-.001,e<0&&(e=0)),o){var b=e+i,C=o._isStart;x="scroll"+r.d2,dv(o,b,r,C&&b>20||!C&&(d?Math.max(vn[x],ns[x]):o.parentNode[x])<=b+1),d&&(f=ua(a),d&&(o.style[r.op.p]=f[r.op.p]-r.op.m-o._offset+gi))}return m&&S&&(x=ua(S),m.seek(p),g=ua(S),m._caScrollDist=x[r.p]-g[r.p],e=e/m._caScrollDist*p),m&&m.seek(y),m?e:Math.round(e)},QX=/(webkit|moz|length|cssText|inset)/i,KP=function(e,t,i,r){if(e.parentNode!==t){var s=e.style,o,a;if(t===vn){e._stOrig=s.cssText,a=Ds(e);for(o in a)!+o&&!QX.test(o)&&a[o]&&typeof s[o]=="string"&&o!=="0"&&(s[o]=a[o]);s.top=i,s.left=r}else s.cssText=e._stOrig;pt.core.getCache(e).uncache=1,t.appendChild(e)}},SU=function(e,t,i){var r=t,s=r;return function(o){var a=Math.round(e());return a!==r&&a!==s&&Math.abs(a-r)>3&&Math.abs(a-s)>3&&(o=a,i&&i()),s=r,r=Math.round(o),r}},X0=function(e,t,i){var r={};r[t.p]="+="+i,pt.set(e,r)},$P=function(e,t){var i=Al(e,t),r="_scroll"+t.p2,s=function o(a,l,f,h,d){var p=o.tween,m=l.onComplete,_={};f=f||i();var y=SU(i,f,function(){p.kill(),o.tween=0});return d=h&&d||0,h=h||a-f,p&&p.kill(),l[r]=a,l.inherit=!1,l.modifiers=_,_[r]=function(){return y(f+h*p.ratio+d*p.ratio*p.ratio)},l.onUpdate=function(){Jt.cache++,o.tween&&va()},l.onComplete=function(){o.tween=0,m&&m.call(p)},p=o.tween=pt.to(e,l),p};return e[r]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},bi(e,"wheel",i.wheelHandler),en.isTouch&&bi(e,"touchmove",i.wheelHandler),s},en=function(){function n(t,i){Kc||n.register(pt)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),vM(this),this.init(t,i)}var e=n.prototype;return e.init=function(i,r){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!yd){this.update=this.refresh=this.kill=Mo;return}i=WP(es(i)||Sd(i)||i.nodeType?{trigger:i}:i,V0);var s=i,o=s.onUpdate,a=s.toggleClass,l=s.id,f=s.onToggle,h=s.onRefresh,d=s.scrub,p=s.trigger,m=s.pin,_=s.pinSpacing,y=s.invalidateOnRefresh,x=s.anticipatePin,g=s.onScrubComplete,S=s.onSnapComplete,w=s.once,E=s.snap,I=s.pinReparent,R=s.pinSpacer,P=s.containerAnimation,b=s.fastScrollEnd,C=s.preventOverlaps,A=i.horizontal||i.containerAnimation&&i.horizontal!==!1?vr:_i,O=!d&&d!==0,F=Pr(i.scroller||$t),V=pt.core.getCache(F),Y=$u(F),J=("pinType"in i?i.pinType:_l(F,"pinType")||Y&&"fixed")==="fixed",K=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],ne=O&&i.toggleActions.split(" "),B="markers"in i?i.markers:V0.markers,te=Y?0:parseFloat(Ds(F)["border"+A.p2+th])||0,k=this,ce=i.onRefreshInit&&function(){return i.onRefreshInit(k)},Se=GX(F,Y,A),Fe=WX(F,Y),ue=0,Ee=0,Te=0,Pe=Al(F,A),Qe,ht,mt,ut,G,ve,Re,He,Me,se,Ge,Ke,j,U,he,Ie,Le,Ae,at,Ue,qe,gt,ke,$e,St,wt,We,ie,we,Ve,Q,ge,re,xe,Be,ct,At,zt,Qt;if(k._startClamp=k._endClamp=!1,k._dir=A,x*=45,k.scroller=F,k.scroll=P?P.time.bind(P):Pe,ut=Pe(),k.vars=i,r=r||i.animation,"refreshPriority"in i&&(oU=1,i.refreshPriority===-9999&&(np=k)),V.tweenScroll=V.tweenScroll||{top:$P(F,_i),left:$P(F,vr)},k.tweenTo=Qe=V.tweenScroll[A.p],k.scrubDuration=function(je){re=Sd(je)&&je,re?ge?ge.duration(je):ge=pt.to(r,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:re,paused:!0,onComplete:function(){return g&&g(k)}}):(ge&&ge.progress(1).kill(),ge=0)},r&&(r.vars.lazy=!1,r._initted&&!k.isReverted||r.vars.immediateRender!==!1&&i.immediateRender!==!1&&r.duration()&&r.render(0,!0,!0),k.animation=r.pause(),r.scrollTrigger=k,k.scrubDuration(d),Ve=0,l||(l=r.vars.id)),E&&((!pu(E)||E.push)&&(E={snapTo:E}),"scrollBehavior"in vn.style&&pt.set(Y?[vn,ns]:F,{scrollBehavior:"auto"}),Jt.forEach(function(je){return er(je)&&je.target===(Y?Cn.scrollingElement||ns:F)&&(je.smooth=!1)}),mt=er(E.snapTo)?E.snapTo:E.snapTo==="labels"?YX(r):E.snapTo==="labelsDirectional"?qX(r):E.directional!==!1?function(je,Dt){return zT(E.snapTo)(je,$i()-Ee<500?0:Dt.direction)}:pt.utils.snap(E.snapTo),xe=E.duration||{min:.1,max:2},xe=pu(xe)?$d(xe.min,xe.max):$d(xe,xe),Be=pt.delayedCall(E.delay||re/2||.1,function(){var je=Pe(),Dt=$i()-Ee<500,yt=Qe.tween;if((Dt||Math.abs(k.getVelocity())<10)&&!yt&&!Fy&&ue!==je){var Rt=(je-ve)/U,pn=r&&!O?r.totalProgress():Rt,Nt=Dt?0:(pn-Q)/($i()-_d)*1e3||0,vt=pt.utils.clamp(-Rt,1-Rt,Yc(Nt/2)*Nt/.185),Dn=Rt+(E.inertia===!1?0:vt),yn,N,z=E,ee=z.onStart,L=z.onInterrupt,H=z.onComplete;if(yn=mt(Dn,k),Sd(yn)||(yn=Dn),N=Math.max(0,Math.round(ve+yn*U)),je<=Re&&je>=ve&&N!==je){if(yt&&!yt._initted&&yt.data<=Yc(N-je))return;E.inertia===!1&&(vt=yn-Rt),Qe(N,{duration:xe(Yc(Math.max(Yc(Dn-pn),Yc(yn-pn))*.185/Nt/.05||0)),ease:E.ease||"power3",data:Yc(N-je),onInterrupt:function(){return Be.restart(!0)&&L&&L(k)},onComplete:function(){k.update(),ue=Pe(),r&&!O&&(ge?ge.resetTo("totalProgress",yn,r._tTime/r._tDur):r.progress(yn)),Ve=Q=r&&!O?r.totalProgress():k.progress,S&&S(k),H&&H(k)}},je,vt*U,N-je-vt*U),ee&&ee(k,Qe.tween)}}else k.isActive&&ue!==je&&Be.restart(!0)}).pause()),l&&(yM[l]=k),p=k.trigger=Pr(p||m!==!0&&m),Qt=p&&p._gsap&&p._gsap.stRevert,Qt&&(Qt=Qt(k)),m=m===!0?p:Pr(m),es(a)&&(a={targets:p,className:a}),m&&(_===!1||_===Ls||(_=!_&&m.parentNode&&m.parentNode.style&&Ds(m.parentNode).display==="flex"?!1:ci),k.pin=m,ht=pt.core.getCache(m),ht.spacer?he=ht.pinState:(R&&(R=Pr(R),R&&!R.nodeType&&(R=R.current||R.nativeElement),ht.spacerIsNative=!!R,R&&(ht.spacerState=W0(R))),ht.spacer=Ae=R||Cn.createElement("div"),Ae.classList.add("pin-spacer"),l&&Ae.classList.add("pin-spacer-"+l),ht.pinState=he=W0(m)),i.force3D!==!1&&pt.set(m,{force3D:!0}),k.spacer=Ae=ht.spacer,we=Ds(m),$e=we[_+A.os2],Ue=pt.getProperty(m),qe=pt.quickSetter(m,A.a,gi),RS(m,Ae,we),Le=W0(m)),B){Ke=pu(B)?WP(B,XP):XP,se=G0("scroller-start",l,F,A,Ke,0),Ge=G0("scroller-end",l,F,A,Ke,0,se),at=se["offset"+A.op.d2];var Ot=Pr(_l(F,"content")||F);He=this.markerStart=G0("start",l,Ot,A,Ke,at,0,P),Me=this.markerEnd=G0("end",l,Ot,A,Ke,at,0,P),P&&(zt=pt.quickSetter([He,Me],A.a,gi)),!J&&!(Uo.length&&_l(F,"fixedMarkers")===!0)&&(XX(Y?vn:F),pt.set([se,Ge],{force3D:!0}),wt=pt.quickSetter(se,A.a,gi),ie=pt.quickSetter(Ge,A.a,gi))}if(P){var _t=P.vars.onUpdate,st=P.vars.onUpdateParams;P.eventCallback("onUpdate",function(){k.update(0,0,1),_t&&_t.apply(P,st||[])})}if(k.previous=function(){return jt[jt.indexOf(k)-1]},k.next=function(){return jt[jt.indexOf(k)+1]},k.revert=function(je,Dt){if(!Dt)return k.kill(!0);var yt=je!==!1||!k.enabled,Rt=Ki;yt!==k.isReverted&&(yt&&(ct=Math.max(Pe(),k.scroll.rec||0),Te=k.progress,At=r&&r.progress()),He&&[He,Me,se,Ge].forEach(function(pn){return pn.style.display=yt?"none":"block"}),yt&&(Ki=k,k.update(yt)),m&&(!I||!k.isActive)&&(yt?KX(m,Ae,he):RS(m,Ae,Ds(m),St)),yt||k.update(yt),Ki=Rt,k.isReverted=yt)},k.refresh=function(je,Dt,yt,Rt){if(!((Ki||!k.enabled)&&!Dt)){if(m&&je&&Bs){bi(n,"scrollEnd",vU);return}!pr&&ce&&ce(k),Ki=k,Qe.tween&&!yt&&(Qe.tween.kill(),Qe.tween=0),ge&&ge.pause(),y&&r&&(r.revert({kill:!1}).invalidate(),r.getChildren&&r.getChildren(!0,!0,!1).forEach(function(Oe){return Oe.vars.immediateRender&&Oe.render(0,!0,!0)})),k.isReverted||k.revert(!0,!0),k._subPinOffset=!1;var pn=Se(),Nt=Fe(),vt=P?P.duration():Po(F,A),Dn=U<=.01||!U,yn=0,N=Rt||0,z=pu(yt)?yt.end:i.end,ee=i.endTrigger||p,L=pu(yt)?yt.start:i.start||(i.start===0||!p?0:m?"0 0":"0 100%"),H=k.pinnedContainer=i.pinnedContainer&&Pr(i.pinnedContainer,k),X=p&&Math.max(0,jt.indexOf(k))||0,$=X,q,ae,de,me,fe,ze,De,Ne,Je,rt,lt,Ct,Ze;for(B&&pu(yt)&&(Ct=pt.getProperty(se,A.p),Ze=pt.getProperty(Ge,A.p));$-- >0;)ze=jt[$],ze.end||ze.refresh(0,1)||(Ki=k),De=ze.pin,De&&(De===p||De===m||De===H)&&!ze.isReverted&&(rt||(rt=[]),rt.unshift(ze),ze.revert(!0,!0)),ze!==jt[$]&&(X--,$--);for(er(L)&&(L=L(k)),L=BP(L,"start",k),ve=ZP(L,p,pn,A,Pe(),He,se,k,Nt,te,J,vt,P,k._startClamp&&"_startClamp")||(m?-.001:0),er(z)&&(z=z(k)),es(z)&&!z.indexOf("+=")&&(~z.indexOf(" ")?z=(es(L)?L.split(" ")[0]:"")+z:(yn=hv(z.substr(2),pn),z=es(L)?L:(P?pt.utils.mapRange(0,P.duration(),P.scrollTrigger.start,P.scrollTrigger.end,ve):ve)+yn,ee=p)),z=BP(z,"end",k),Re=Math.max(ve,ZP(z||(ee?"100% 0":vt),ee,pn,A,Pe()+yn,Me,Ge,k,Nt,te,J,vt,P,k._endClamp&&"_endClamp"))||-.001,yn=0,$=X;$--;)ze=jt[$],De=ze.pin,De&&ze.start-ze._pinPush<=ve&&!P&&ze.end>0&&(q=ze.end-(k._startClamp?Math.max(0,ze.start):ze.start),(De===p&&ze.start-ze._pinPush<ve||De===H)&&isNaN(L)&&(yn+=q*(1-ze.progress)),De===m&&(N+=q));if(ve+=yn,Re+=yn,k._startClamp&&(k._startClamp+=yn),k._endClamp&&!pr&&(k._endClamp=Re||-.001,Re=Math.min(Re,Po(F,A))),U=Re-ve||(ve-=.01)&&.001,Dn&&(Te=pt.utils.clamp(0,1,pt.utils.normalize(ve,Re,ct))),k._pinPush=N,He&&yn&&(q={},q[A.a]="+="+yn,H&&(q[A.p]="-="+Pe()),pt.set([He,Me],q)),m&&!(_M&&k.end>=Po(F,A)))q=Ds(m),me=A===_i,de=Pe(),gt=parseFloat(Ue(A.a))+N,!vt&&Re>1&&(lt=(Y?Cn.scrollingElement||ns:F).style,lt={style:lt,value:lt["overflow"+A.a.toUpperCase()]},Y&&Ds(vn)["overflow"+A.a.toUpperCase()]!=="scroll"&&(lt.style["overflow"+A.a.toUpperCase()]="scroll")),RS(m,Ae,q),Le=W0(m),ae=ua(m,!0),Ne=J&&Al(F,me?vr:_i)(),_?(St=[_+A.os2,U+N+gi],St.t=Ae,$=_===ci?U_(m,A)+U+N:0,$&&(St.push(A.d,$+gi),Ae.style.flexBasis!=="auto"&&(Ae.style.flexBasis=$+gi)),Nf(St),H&&jt.forEach(function(Oe){Oe.pin===H&&Oe.vars.pinSpacing!==!1&&(Oe._subPinOffset=!0)}),J&&Pe(ct)):($=U_(m,A),$&&Ae.style.flexBasis!=="auto"&&(Ae.style.flexBasis=$+gi)),J&&(fe={top:ae.top+(me?de-ve:Ne)+gi,left:ae.left+(me?Ne:de-ve)+gi,boxSizing:"border-box",position:"fixed"},fe[Fu]=fe["max"+th]=Math.ceil(ae.width)+gi,fe[zu]=fe["max"+FT]=Math.ceil(ae.height)+gi,fe[Ls]=fe[Ls+ep]=fe[Ls+Jd]=fe[Ls+tp]=fe[Ls+Qd]="0",fe[ci]=q[ci],fe[ci+ep]=q[ci+ep],fe[ci+Jd]=q[ci+Jd],fe[ci+tp]=q[ci+tp],fe[ci+Qd]=q[ci+Qd],Ie=JX(he,fe,I),pr&&Pe(0)),r?(Je=r._initted,ES(1),r.render(r.duration(),!0,!0),ke=Ue(A.a)-gt+U+N,We=Math.abs(U-ke)>1,J&&We&&Ie.splice(Ie.length-2,2),r.render(0,!0,!0),Je||r.invalidate(!0),r.parent||r.totalTime(r.totalTime()),ES(0)):ke=U,lt&&(lt.value?lt.style["overflow"+A.a.toUpperCase()]=lt.value:lt.style.removeProperty("overflow-"+A.a));else if(p&&Pe()&&!P)for(ae=p.parentNode;ae&&ae!==vn;)ae._pinOffset&&(ve-=ae._pinOffset,Re-=ae._pinOffset),ae=ae.parentNode;rt&&rt.forEach(function(Oe){return Oe.revert(!1,!0)}),k.start=ve,k.end=Re,ut=G=pr?ct:Pe(),!P&&!pr&&(ut<ct&&Pe(ct),k.scroll.rec=0),k.revert(!1,!0),Ee=$i(),Be&&(ue=-1,Be.restart(!0)),Ki=0,r&&O&&(r._initted||At)&&r.progress()!==At&&r.progress(At||0,!0).render(r.time(),!0,!0),(Dn||Te!==k.progress||P||y||r&&!r._initted)&&(r&&!O&&(r._initted||Te||r.vars.immediateRender!==!1)&&r.totalProgress(P&&ve<-.001&&!Te?pt.utils.normalize(ve,Re,0):Te,!0),k.progress=Dn||(ut-ve)/U===Te?0:Te),m&&_&&(Ae._pinOffset=Math.round(k.progress*ke)),ge&&ge.invalidate(),isNaN(Ct)||(Ct-=pt.getProperty(se,A.p),Ze-=pt.getProperty(Ge,A.p),X0(se,A,Ct),X0(He,A,Ct-(Rt||0)),X0(Ge,A,Ze),X0(Me,A,Ze-(Rt||0))),Dn&&!pr&&k.update(),h&&!pr&&!j&&(j=!0,h(k),j=!1)}},k.getVelocity=function(){return(Pe()-G)/($i()-_d)*1e3||0},k.endAnimation=function(){ud(k.callbackAnimation),r&&(ge?ge.progress(1):r.paused()?O||ud(r,k.direction<0,1):ud(r,r.reversed()))},k.labelToScroll=function(je){return r&&r.labels&&(ve||k.refresh()||ve)+r.labels[je]/r.duration()*U||0},k.getTrailing=function(je){var Dt=jt.indexOf(k),yt=k.direction>0?jt.slice(0,Dt).reverse():jt.slice(Dt+1);return(es(je)?yt.filter(function(Rt){return Rt.vars.preventOverlaps===je}):yt).filter(function(Rt){return k.direction>0?Rt.end<=ve:Rt.start>=Re})},k.update=function(je,Dt,yt){if(!(P&&!yt&&!je)){var Rt=pr===!0?ct:k.scroll(),pn=je?0:(Rt-ve)/U,Nt=pn<0?0:pn>1?1:pn||0,vt=k.progress,Dn,yn,N,z,ee,L,H,X;if(Dt&&(G=ut,ut=P?Pe():Rt,E&&(Q=Ve,Ve=r&&!O?r.totalProgress():Nt)),x&&m&&!Ki&&!F0&&Bs&&(!Nt&&ve<Rt+(Rt-G)/($i()-_d)*x?Nt=1e-4:Nt===1&&Re>Rt+(Rt-G)/($i()-_d)*x&&(Nt=.9999)),Nt!==vt&&k.enabled){if(Dn=k.isActive=!!Nt&&Nt<1,yn=!!vt&&vt<1,L=Dn!==yn,ee=L||!!Nt!=!!vt,k.direction=Nt>vt?1:-1,k.progress=Nt,ee&&!Ki&&(N=Nt&&!vt?0:Nt===1?1:vt===1?2:3,O&&(z=!L&&ne[N+1]!=="none"&&ne[N+1]||ne[N],X=r&&(z==="complete"||z==="reset"||z in r))),C&&(L||X)&&(X||d||!r)&&(er(C)?C(k):k.getTrailing(C).forEach(function(de){return de.endAnimation()})),O||(ge&&!Ki&&!F0?(ge._dp._time-ge._start!==ge._time&&ge.render(ge._dp._time-ge._start),ge.resetTo?ge.resetTo("totalProgress",Nt,r._tTime/r._tDur):(ge.vars.totalProgress=Nt,ge.invalidate().restart())):r&&r.totalProgress(Nt,!!(Ki&&(Ee||je)))),m){if(je&&_&&(Ae.style[_+A.os2]=$e),!J)qe(xd(gt+ke*Nt));else if(ee){if(H=!je&&Nt>vt&&Re+1>Rt&&Rt+1>=Po(F,A),I)if(!je&&(Dn||H)){var $=ua(m,!0),q=Rt-ve;KP(m,vn,$.top+(A===_i?q:0)+gi,$.left+(A===_i?0:q)+gi)}else KP(m,Ae);Nf(Dn||H?Ie:Le),We&&Nt<1&&Dn||qe(gt+(Nt===1&&!H?ke:0))}}E&&!Qe.tween&&!Ki&&!F0&&Be.restart(!0),a&&(L||w&&Nt&&(Nt<1||!TS))&&$p(a.targets).forEach(function(de){return de.classList[Dn||w?"add":"remove"](a.className)}),o&&!O&&!je&&o(k),ee&&!Ki?(O&&(X&&(z==="complete"?r.pause().totalProgress(1):z==="reset"?r.restart(!0).pause():z==="restart"?r.restart(!0):r[z]()),o&&o(k)),(L||!TS)&&(f&&L&&CS(k,f),K[N]&&CS(k,K[N]),w&&(Nt===1?k.kill(!1,1):K[N]=0),L||(N=Nt===1?1:3,K[N]&&CS(k,K[N]))),b&&!Dn&&Math.abs(k.getVelocity())>(Sd(b)?b:2500)&&(ud(k.callbackAnimation),ge?ge.progress(1):ud(r,z==="reverse"?1:!Nt,1))):O&&o&&!Ki&&o(k)}if(ie){var ae=P?Rt/P.duration()*(P._caScrollDist||0):Rt;wt(ae+(se._isFlipped?1:0)),ie(ae)}zt&&zt(-Rt/P.duration()*(P._caScrollDist||0))}},k.enable=function(je,Dt){k.enabled||(k.enabled=!0,bi(F,"resize",wd),Y||bi(F,"scroll",qc),ce&&bi(n,"refreshInit",ce),je!==!1&&(k.progress=Te=0,ut=G=ue=Pe()),Dt!==!1&&k.refresh())},k.getTween=function(je){return je&&Qe?Qe.tween:ge},k.setPositions=function(je,Dt,yt,Rt){if(P){var pn=P.scrollTrigger,Nt=P.duration(),vt=pn.end-pn.start;je=pn.start+vt*je/Nt,Dt=pn.start+vt*Dt/Nt}k.refresh(!1,!1,{start:HP(je,yt&&!!k._startClamp),end:HP(Dt,yt&&!!k._endClamp)},Rt),k.update()},k.adjustPinSpacing=function(je){if(St&&je){var Dt=St.indexOf(A.d)+1;St[Dt]=parseFloat(St[Dt])+je+gi,St[1]=parseFloat(St[1])+je+gi,Nf(St)}},k.disable=function(je,Dt){if(k.enabled&&(je!==!1&&k.revert(!0,!0),k.enabled=k.isActive=!1,Dt||ge&&ge.pause(),ct=0,ht&&(ht.uncache=1),ce&&Ci(n,"refreshInit",ce),Be&&(Be.pause(),Qe.tween&&Qe.tween.kill()&&(Qe.tween=0)),!Y)){for(var yt=jt.length;yt--;)if(jt[yt].scroller===F&&jt[yt]!==k)return;Ci(F,"resize",wd),Y||Ci(F,"scroll",qc)}},k.kill=function(je,Dt){k.disable(je,Dt),ge&&!Dt&&ge.kill(),l&&delete yM[l];var yt=jt.indexOf(k);yt>=0&&jt.splice(yt,1),yt===dr&&pv>0&&dr--,yt=0,jt.forEach(function(Rt){return Rt.scroller===k.scroller&&(yt=1)}),yt||pr||(k.scroll.rec=0),r&&(r.scrollTrigger=null,je&&r.revert({kill:!1}),Dt||r.kill()),He&&[He,Me,se,Ge].forEach(function(Rt){return Rt.parentNode&&Rt.parentNode.removeChild(Rt)}),np===k&&(np=0),m&&(ht&&(ht.uncache=1),yt=0,jt.forEach(function(Rt){return Rt.pin===m&&yt++}),yt||(ht.spacer=0)),i.onKill&&i.onKill(k)},jt.push(k),k.enable(!1,!1),Qt&&Qt(k),r&&r.add&&!U){var Zt=k.update;k.update=function(){k.update=Zt,Jt.cache++,ve||Re||k.refresh()},pt.delayedCall(.01,k.update),U=.01,ve=Re=0}else k.refresh();m&&ZX()},n.register=function(i){return Kc||(pt=i||fU(),cU()&&window.document&&n.enable(),Kc=yd),Kc},n.defaults=function(i){if(i)for(var r in i)V0[r]=i[r];return V0},n.disable=function(i,r){yd=0,jt.forEach(function(o){return o[r?"kill":"disable"](i)}),Ci($t,"wheel",qc),Ci(Cn,"scroll",qc),clearInterval(k0),Ci(Cn,"touchcancel",Mo),Ci(vn,"touchstart",Mo),B0(Ci,Cn,"pointerdown,touchstart,mousedown",VP),B0(Ci,Cn,"pointerup,touchend,mouseup",GP),N_.kill(),z0(Ci);for(var s=0;s<Jt.length;s+=3)H0(Ci,Jt[s],Jt[s+1]),H0(Ci,Jt[s],Jt[s+2])},n.enable=function(){if($t=window,Cn=document,ns=Cn.documentElement,vn=Cn.body,pt&&($p=pt.utils.toArray,$d=pt.utils.clamp,vM=pt.core.context||Mo,ES=pt.core.suppressOverwrites||Mo,NT=$t.history.scrollRestoration||"auto",xM=$t.pageYOffset||0,pt.core.globals("ScrollTrigger",n),vn)){yd=1,Df=document.createElement("div"),Df.style.height="100vh",Df.style.position="absolute",xU(),VX(),si.register(pt),n.isTouch=si.isTouch,Xa=si.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),gM=si.isTouch===1,bi($t,"wheel",qc),DT=[$t,Cn,ns,vn],pt.matchMedia?(n.matchMedia=function(f){var h=pt.matchMedia(),d;for(d in f)h.add(d,f[d]);return h},pt.addEventListener("matchMediaInit",function(){return BT()}),pt.addEventListener("matchMediaRevert",function(){return _U()}),pt.addEventListener("matchMedia",function(){Au(0,1),Qu("matchMedia")}),pt.matchMedia().add("(orientation: portrait)",function(){return bS(),bS})):console.warn("Requires GSAP 3.11.0 or later"),bS(),bi(Cn,"scroll",qc);var i=vn.hasAttribute("style"),r=vn.style,s=r.borderTopStyle,o=pt.core.Animation.prototype,a,l;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",a=ua(vn),_i.m=Math.round(a.top+_i.sc())||0,vr.m=Math.round(a.left+vr.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),i||(vn.setAttribute("style",""),vn.removeAttribute("style")),k0=setInterval(YP,250),pt.delayedCall(.5,function(){return F0=0}),bi(Cn,"touchcancel",Mo),bi(vn,"touchstart",Mo),B0(bi,Cn,"pointerdown,touchstart,mousedown",VP),B0(bi,Cn,"pointerup,touchend,mouseup",GP),mM=pt.utils.checkPrefix("transform"),mv.push(mM),Kc=$i(),N_=pt.delayedCall(.2,Au).pause(),$c=[Cn,"visibilitychange",function(){var f=$t.innerWidth,h=$t.innerHeight;Cn.hidden?(FP=f,zP=h):(FP!==f||zP!==h)&&wd()},Cn,"DOMContentLoaded",Au,$t,"load",Au,$t,"resize",wd],z0(bi),jt.forEach(function(f){return f.enable(0,1)}),l=0;l<Jt.length;l+=3)H0(Ci,Jt[l],Jt[l+1]),H0(Ci,Jt[l],Jt[l+2])}},n.config=function(i){"limitCallbacks"in i&&(TS=!!i.limitCallbacks);var r=i.syncInterval;r&&clearInterval(k0)||(k0=r)&&setInterval(YP,r),"ignoreMobileResize"in i&&(gM=n.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(z0(Ci)||z0(bi,i.autoRefreshEvents||"none"),aU=(i.autoRefreshEvents+"").indexOf("resize")===-1)},n.scrollerProxy=function(i,r){var s=Pr(i),o=Jt.indexOf(s),a=$u(s);~o&&Jt.splice(o,a?6:2),r&&(a?Uo.unshift($t,r,vn,r,ns,r):Uo.unshift(s,r))},n.clearMatchMedia=function(i){jt.forEach(function(r){return r._ctx&&r._ctx.query===i&&r._ctx.kill(!0,!0)})},n.isInViewport=function(i,r,s){var o=(es(i)?Pr(i):i).getBoundingClientRect(),a=o[s?Fu:zu]*r||0;return s?o.right-a>0&&o.left+a<$t.innerWidth:o.bottom-a>0&&o.top+a<$t.innerHeight},n.positionInViewport=function(i,r,s){es(i)&&(i=Pr(i));var o=i.getBoundingClientRect(),a=o[s?Fu:zu],l=r==null?a/2:r in k_?k_[r]*a:~r.indexOf("%")?parseFloat(r)*a/100:parseFloat(r)||0;return s?(o.left+l)/$t.innerWidth:(o.top+l)/$t.innerHeight},n.killAll=function(i){if(jt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var r=Ju.killAll||[];Ju={},r.forEach(function(s){return s()})}},n}();en.version="3.13.0";en.saveStyles=function(n){return n?$p(n).forEach(function(e){if(e&&e.style){var t=Jr.indexOf(e);t>=0&&Jr.splice(t,5),Jr.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),pt.core.getCache(e),vM())}}):Jr};en.revert=function(n,e){return BT(!n,e)};en.create=function(n,e){return new en(n,e)};en.refresh=function(n){return n?wd(!0):(Kc||en.register())&&Au(!0)};en.update=function(n){return++Jt.cache&&va(n===!0?2:0)};en.clearScrollMemory=yU;en.maxScroll=function(n,e){return Po(n,e?vr:_i)};en.getScrollFunc=function(n,e){return Al(Pr(n),e?vr:_i)};en.getById=function(n){return yM[n]};en.getAll=function(){return jt.filter(function(n){return n.vars.id!=="ScrollSmoother"})};en.isScrolling=function(){return!!Bs};en.snapDirectional=zT;en.addEventListener=function(n,e){var t=Ju[n]||(Ju[n]=[]);~t.indexOf(e)||t.push(e)};en.removeEventListener=function(n,e){var t=Ju[n],i=t&&t.indexOf(e);i>=0&&t.splice(i,1)};en.batch=function(n,e){var t=[],i={},r=e.interval||.016,s=e.batchMax||1e9,o=function(f,h){var d=[],p=[],m=pt.delayedCall(r,function(){h(d,p),d=[],p=[]}).pause();return function(_){d.length||m.restart(!0),d.push(_.trigger),p.push(_),s<=d.length&&m.progress(1)}},a;for(a in e)i[a]=a.substr(0,2)==="on"&&er(e[a])&&a!=="onRefreshInit"?o(a,e[a]):e[a];return er(s)&&(s=s(),bi(en,"refresh",function(){return s=e.batchMax()})),$p(n).forEach(function(l){var f={};for(a in i)f[a]=i[a];f.trigger=l,t.push(en.create(f))}),t};var JP=function(e,t,i,r){return t>r?e(r):t<0&&e(0),i>r?(r-t)/(i-t):i<0?t/(t-i):1},PS=function n(e,t){t===!0?e.style.removeProperty("touch-action"):e.style.touchAction=t===!0?"auto":t?"pan-"+t+(si.isTouch?" pinch-zoom":""):"none",e===ns&&n(vn,t)},Y0={auto:1,scroll:1},eY=function(e){var t=e.event,i=e.target,r=e.axis,s=(t.changedTouches?t.changedTouches[0]:t).target,o=s._gsap||pt.core.getCache(s),a=$i(),l;if(!o._isScrollT||a-o._isScrollT>2e3){for(;s&&s!==vn&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(Y0[(l=Ds(s)).overflowY]||Y0[l.overflowX]));)s=s.parentNode;o._isScroll=s&&s!==i&&!$u(s)&&(Y0[(l=Ds(s)).overflowY]||Y0[l.overflowX]),o._isScrollT=a}(o._isScroll||r==="x")&&(t.stopPropagation(),t._gsapAllow=!0)},wU=function(e,t,i,r){return si.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&eY,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return i&&bi(Cn,si.eventTypes[0],e3,!1,!0)},onDisable:function(){return Ci(Cn,si.eventTypes[0],e3,!0)}})},tY=/(input|label|select|textarea)/i,QP,e3=function(e){var t=tY.test(e.target.tagName);(t||QP)&&(e._gsapAllow=!0,QP=t)},nY=function(e){pu(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t=e,i=t.normalizeScrollX,r=t.momentum,s=t.allowNestedScroll,o=t.onRelease,a,l,f=Pr(e.target)||ns,h=pt.core.globals().ScrollSmoother,d=h&&h.get(),p=Xa&&(e.content&&Pr(e.content)||d&&e.content!==!1&&!d.smooth()&&d.content()),m=Al(f,_i),_=Al(f,vr),y=1,x=(si.isTouch&&$t.visualViewport?$t.visualViewport.scale*$t.visualViewport.width:$t.outerWidth)/$t.innerWidth,g=0,S=er(r)?function(){return r(a)}:function(){return r||2.8},w,E,I=wU(f,e.type,!0,s),R=function(){return E=!1},P=Mo,b=Mo,C=function(){l=Po(f,_i),b=$d(Xa?1:0,l),i&&(P=$d(0,Po(f,vr))),w=Bu},A=function(){p._gsap.y=xd(parseFloat(p._gsap.y)+m.offset)+"px",p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(p._gsap.y)+", 0, 1)",m.offset=m.cacheID=0},O=function(){if(E){requestAnimationFrame(R);var B=xd(a.deltaY/2),te=b(m.v-B);if(p&&te!==m.v+m.offset){m.offset=te-m.v;var k=xd((parseFloat(p&&p._gsap.y)||0)-m.offset);p.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+k+", 0, 1)",p._gsap.y=k+"px",m.cacheID=Jt.cache,va()}return!0}m.offset&&A(),E=!0},F,V,Y,J,K=function(){C(),F.isActive()&&F.vars.scrollY>l&&(m()>l?F.progress(1)&&m(l):F.resetTo("scrollY",l))};return p&&pt.set(p,{y:"+=0"}),e.ignoreCheck=function(ne){return Xa&&ne.type==="touchmove"&&O()||y>1.05&&ne.type!=="touchstart"||a.isGesturing||ne.touches&&ne.touches.length>1},e.onPress=function(){E=!1;var ne=y;y=xd(($t.visualViewport&&$t.visualViewport.scale||1)/x),F.pause(),ne!==y&&PS(f,y>1.01?!0:i?!1:"x"),V=_(),Y=m(),C(),w=Bu},e.onRelease=e.onGestureStart=function(ne,B){if(m.offset&&A(),!B)J.restart(!0);else{Jt.cache++;var te=S(),k,ce;i&&(k=_(),ce=k+te*.05*-ne.velocityX/.227,te*=JP(_,k,ce,Po(f,vr)),F.vars.scrollX=P(ce)),k=m(),ce=k+te*.05*-ne.velocityY/.227,te*=JP(m,k,ce,Po(f,_i)),F.vars.scrollY=b(ce),F.invalidate().duration(te).play(.01),(Xa&&F.vars.scrollY>=l||k>=l-1)&&pt.to({},{onUpdate:K,duration:te})}o&&o(ne)},e.onWheel=function(){F._ts&&F.pause(),$i()-g>1e3&&(w=0,g=$i())},e.onChange=function(ne,B,te,k,ce){if(Bu!==w&&C(),B&&i&&_(P(k[2]===B?V+(ne.startX-ne.x):_()+B-k[1])),te){m.offset&&A();var Se=ce[2]===te,Fe=Se?Y+ne.startY-ne.y:m()+te-ce[1],ue=b(Fe);Se&&Fe!==ue&&(Y+=ue-Fe),m(ue)}(te||B)&&va()},e.onEnable=function(){PS(f,i?!1:"x"),en.addEventListener("refresh",K),bi($t,"resize",K),m.smooth&&(m.target.style.scrollBehavior="auto",m.smooth=_.smooth=!1),I.enable()},e.onDisable=function(){PS(f,!0),Ci($t,"resize",K),en.removeEventListener("refresh",K),I.kill()},e.lockAxis=e.lockAxis!==!1,a=new si(e),a.iOS=Xa,Xa&&!m()&&m(1),Xa&&pt.ticker.add(Mo),J=a._dc,F=pt.to(a,{ease:"power4",paused:!0,inherit:!1,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:SU(m,m(),function(){return F.pause()})},onUpdate:va,onComplete:J.vars.onComplete}),a};en.sort=function(n){if(er(n))return jt.sort(n);var e=$t.pageYOffset||0;return en.getAll().forEach(function(t){return t._sortY=t.trigger?e+t.trigger.getBoundingClientRect().top:t.start+$t.innerHeight}),jt.sort(n||function(t,i){return(t.vars.refreshPriority||0)*-1e6+(t.vars.containerAnimation?1e6:t._sortY)-((i.vars.containerAnimation?1e6:i._sortY)+(i.vars.refreshPriority||0)*-1e6)})};en.observe=function(n){return new si(n)};en.normalizeScroll=function(n){if(typeof n>"u")return fr;if(n===!0&&fr)return fr.enable();if(n===!1){fr&&fr.kill(),fr=n;return}var e=n instanceof si?n:nY(n);return fr&&fr.target===e.target&&fr.kill(),$u(e.target)&&(fr=e),e};en.core={_getVelocityProp:pM,_inputObserver:wU,_scrollers:Jt,_proxies:Uo,bridge:{ss:function(){Bs||Qu("scrollStart"),Bs=$i()},ref:function(){return Ki}}};fU()&&pt.registerPlugin(en);LT.registerPlugin(en);const Ja=["DSC00680","2","3","4","5","6","7","8","9","10","17","18","11","12","13","14","15","16"],HT=dT(0),iY=dT(.5),rY=dT(!1),ko=[{front:"book-cover",back:Ja[0]}];for(let n=1;n<Ja.length-1;n+=2)ko.push({front:Ja[n%Ja.length],back:Ja[(n+1)%Ja.length]});ko.push({front:Ja[Ja.length-1],back:"book-back"});const t3=({text:n,className:e="",delay:t=.03})=>{const i=_e.useRef(null);return _e.useEffect(()=>{if(!i.current)return;const r=Array.from(i.current.querySelectorAll("[data-char]"));LT.fromTo(r,{y:20,opacity:0},{y:0,opacity:1,duration:.6,ease:"power3.out",stagger:t,scrollTrigger:{trigger:i.current,start:"top 95%",once:!0}})},[]),ot("p",{ref:i,className:e,children:n.split("").map((r,s)=>ot("span",{"data-char":!0,className:"inline-block will-change-transform",children:r===" "?" ":r},s))})},sY=()=>{var h;const[n,e]=Wd(HT),[t,i]=Wd(iY),[r,s]=Wd(rY),[o,a]=_e.useState(!1),l=_e.useRef(null);_e.useEffect(()=>{new Audio("/audios/page-flip-01a.mp3").play().catch(()=>{})},[n]),_e.useEffect(()=>{const d=new Audio("/audios/hand.mp3");d.loop=!0,d.volume=t,d.preload="auto",d.crossOrigin="anonymous",l.current=d,(async()=>{if(l.current)try{l.current.muted=!1,await l.current.play(),s(!0),a(!1)}catch{try{l.current.muted=!0,await l.current.play(),s(!0),a(!0)}catch{s(!1),a(!1)}}})();const m=async()=>{if(l.current){if(o||l.current.muted)try{l.current.muted=!1,l.current.paused&&await l.current.play(),a(!1),s(!0)}catch{}window.removeEventListener("pointerdown",m),window.removeEventListener("keydown",m)}};return window.addEventListener("pointerdown",m),window.addEventListener("keydown",m),()=>{window.removeEventListener("pointerdown",m),window.removeEventListener("keydown",m),d.pause(),l.current=null}},[]),_e.useEffect(()=>{l.current&&(l.current.volume=t)},[t]);const f=async()=>{const d=l.current;if(d)try{r?(d.pause(),s(!1)):((o||d.muted)&&(d.muted=!1),await d.play(),s(!0),a(!1))}catch{}};return Rr(z_,{children:[Rr("main",{className:"pointer-events-none select-none z-10 fixed inset-0 flex justify-between flex-col",children:[ot("a",{className:"pointer-events-auto mt-10 ml-10",href:"https://lessons.wawasensei.dev/courses/react-three-fiber",children:ot("img",{className:"w-20",src:"/images/wawasensei-white.png",alt:"Logo"})}),ot("div",{className:"w-full pointer-events-auto flex justify-center pb-[calc(env(safe-area-inset-bottom)+100px)] sm:pb-5",children:Rr("div",{className:`flex items-center gap-2 px-4 py-2\r
               text-white rounded-full \r
               border border-white/25 \r
               backdrop-blur-xl \r
               bg-white/10 \r
               shadow-[0_8px_24px_rgba(0,0,0,0.25),inset_0_1px_0_rgba(255,255,255,0.2)]\r
               hover:bg-white/15 transition-all duration-200`,children:[ot("button",{className:`px-3 py-1 rounded-full text-[11px] sm:text-xs uppercase tracking-wide transition-all duration-200
        ${n===0?"bg-white/90 text-black border border-white":"bg-white/10 border border-white/20 hover:bg-white/20"}`,onClick:()=>e(0),children:"COVER"}),ot("button",{className:"rounded-full p-1.5 bg-white/10 border border-white/20 hover:bg-white/20 transition",onClick:()=>e(Math.max(0,n-1)),"aria-label":"Previous page",children:ot(y7,{size:13})}),ot("button",{className:"rounded-full p-1.5 bg-white/10 border border-white/20 hover:bg-white/20 transition",onClick:()=>e(Math.min(ko.length-1,n+1)),"aria-label":"Next page",children:ot(x7,{size:13})}),ot("button",{className:`px-3 py-1 rounded-full text-[11px] sm:text-xs uppercase tracking-wide transition-all duration-200
        ${n===ko.length?"bg-white/90 text-black border border-white":"bg-white/10 border border-white/20 hover:bg-white/20"}`,onClick:()=>e(ko.length),children:"BACK"})]})})]}),Rr("div",{className:"pointer-events-auto fixed right-4 sm:left-5 sm:right-auto bottom-[calc(env(safe-area-inset-bottom)+110px)] sm:bottom-5 z-50",children:[Rr("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-xl border border-white/20 rounded-full px-3 py-1.5 text-white shadow-lg hover:bg-white/20 transition-all duration-200",children:[ot("button",{onClick:f,className:"rounded-full p-1.5 hover:bg-white/20 transition","aria-label":r?"Pause":"Play",title:o?"Nhấn để bật tiếng":r?"Tạm dừng":"Phát",children:r?ot(S7,{size:14}):ot(w7,{size:14})}),Rr("div",{className:"flex items-center gap-1",children:[t>0&&!((h=l.current)!=null&&h.muted)?ot(M7,{size:13}):ot(E7,{size:13}),ot("input",{type:"range",min:0,max:1,step:.01,value:t,onChange:d=>i(parseFloat(d.target.value)),className:"w-20 sm:w-32 h-0.5 accent-white cursor-pointer","aria-label":"Background music volume"})]}),Rr("span",{className:"hidden sm:inline text-[10px] opacity-70 font-mono w-8 text-right",children:[Math.round(t*100),"%"]})]}),r&&o&&ot("div",{className:"mt-2 text-[11px] text-white/90 bg-black/40 border border-white/15 px-2 py-1 rounded-md",children:"Đang phát im lặng — nhấn Play để bật tiếng"})]}),Rr("div",{className:"fixed right-6 bottom-[calc(env(safe-area-inset-bottom)+180px)] sm:bottom-28 z-40 text-right pointer-events-none select-none",children:[ot(t3,{text:"11:00 — 25.10.2025",className:"text-white/95 text-sm md:text-base font-semibold tracking-wide drop-shadow"}),ot(t3,{text:"FPT University Can Tho Campus",className:"text-white/80 text-xs md:text-sm mt-1 drop-shadow",delay:.02})]}),ot("div",{className:"fixed inset-0 flex items-center -rotate-2 select-none z-0",children:Rr("div",{className:"relative",children:[Rr("div",{className:"bg-white/0 animate-horizontal-scroll flex items-center gap-8 w-max px-8",children:[ot("h1",{className:"shrink-0 text-white text-10xl font-black ",children:"Huynh Khac Huy"}),ot("h2",{className:"shrink-0 text-white text-8xl italic font-light",children:"Graduation"}),ot("h2",{className:"shrink-0 text-white text-12xl font-bold",children:"Ceremony"}),ot("h2",{className:"shrink-0 text-transparent text-12xl font-bold italic outline-text",children:"11:00"}),ot("h2",{className:"shrink-0 text-white text-9xl font-medium",children:"25.10.2025"}),ot("h2",{className:"shrink-0 text-white text-9xl font-extralight italic",children:"FPT University"}),ot("h2",{className:"shrink-0 text-white text-13xl font-bold",children:"Software Engineering"}),ot("h2",{className:"shrink-0 text-transparent text-13xl font-bold outline-text italic",children:"Creative"})]}),Rr("div",{className:"absolute top-0 left-0 bg-white/0 animate-horizontal-scroll-2 flex items-center gap-8 px-8 w-max",children:[ot("h1",{className:"shrink-0 text-white text-10xl font-black ",children:"Huynh Khac Huy"}),ot("h2",{className:"shrink-0 text-white text-8xl italic font-light",children:"Graduation"}),ot("h2",{className:"shrink-0 text-white text-12xl font-bold",children:"Ceremony"}),ot("h2",{className:"shrink-0 text-transparent text-12xl font-bold italic outline-text",children:"11:00"}),ot("h2",{className:"shrink-0 text-white text-9xl font-medium",children:"25.10.2025"}),ot("h2",{className:"shrink-0 text-white text-9xl font-extralight italic",children:"FPT University"}),ot("h2",{className:"shrink-0 text-white text-13xl font-bold",children:"Software Engineering"}),ot("h2",{className:"shrink-0 text-transparent text-13xl font-bold outline-text italic",children:"Creative"})]})]})})]})},oY=.5,aY=.3,lY=.18,uY=.05,cY=.09,VT=1.28,fY=1.71,wM=.003,GT=30,vv=VT/GT,Mm=new Il(VT,fY,wM,GT,2);Mm.translate(VT/2,0,0);const n3=Mm.attributes.position,i3=new W,MU=[],EU=[];for(let n=0;n<n3.count;n++){i3.fromBufferAttribute(n3,n);const e=i3.x,t=Math.max(0,Math.floor(e/vv));let i=e%vv/vv;MU.push(t,t+1,0,0),EU.push(1-i,i,0,0)}Mm.setAttribute("skinIndex",new fy(MU,4));Mm.setAttribute("skinWeight",new xt(EU,4));const ip=new nt("white"),r3=new nt("orange"),hY=[new ha({color:ip}),new ha({color:"#111"}),new ha({color:ip}),new ha({color:ip})];ko.forEach(n=>{bf.preload(`/textures/${n.front}.jpg`),bf.preload(`/textures/${n.back}.jpg`),bf.preload("/textures/book-cover-roughness.jpg")});const dY=({number:n,front:e,back:t,page:i,opened:r,bookClosed:s,...o})=>{const[a,l,f]=bf([`/textures/${e}.jpg`,`/textures/${t}.jpg`,...n===0||n===ko.length-1?["/textures/book-cover-roughness.jpg"]:[]]);a.colorSpace=l.colorSpace=Lr;const h=_e.useRef(),d=_e.useRef(0),p=_e.useRef(r),m=_e.useRef(),_=_e.useMemo(()=>{const w=[];for(let P=0;P<=GT;P++){let b=new gy;w.push(b),P===0?b.position.x=0:b.position.x=vv,P>0&&w[P-1].add(b)}const E=new dm(w),I=[...hY,new ha({color:ip,map:a,...n===0?{roughnessMap:f}:{roughness:.1},emissive:r3,emissiveIntensity:0}),new ha({color:ip,map:l,...n===ko.length-1?{roughnessMap:f}:{roughness:.1},emissive:r3,emissiveIntensity:0})],R=new BE(Mm,I);return R.castShadow=!0,R.receiveShadow=!0,R.frustumCulled=!1,R.add(E.bones[0]),R.bind(E),R},[]);Ny((w,E)=>{if(!m.current)return;const I=g?.22:0;m.current.material[4].emissiveIntensity=m.current.material[5].emissiveIntensity=RE.lerp(m.current.material[4].emissiveIntensity,I,.1),p.current!==r&&(d.current=+new Date,p.current=r);let R=Math.min(400,new Date-d.current)/400;R=Math.sin(R*Math.PI);let P=r?-Math.PI/2:Math.PI/2;s||(P+=gP(n*.8));const b=m.current.skeleton.bones;for(let C=0;C<b.length;C++){const A=C===0?h.current:b[C],O=C<8?Math.sin(C*.2+.25):0,F=C>=8?Math.cos(C*.3+.09):0,V=Math.sin(C*Math.PI*(1/b.length))*R;let Y=lY*O*P-uY*F*P+cY*V*P,J=gP(Math.sign(P)*2);s&&(C===0?(Y=P,J=0):(Y=0,J=0)),oP.dampAngle(A.rotation,"y",Y,oY,E);const K=C>8?Math.sin(C*Math.PI*(1/b.length)-.5)*R:0;oP.dampAngle(A.rotation,"x",J*K,aY,E)}});const[y,x]=Wd(HT),[g,S]=_e.useState(!1);return LW(g),ot("group",{...o,ref:h,onPointerEnter:w=>{w.stopPropagation(),S(!0)},onPointerLeave:w=>{w.stopPropagation(),S(!1)},onClick:w=>{w.stopPropagation(),x(r?n:n+1),S(!1)},children:ot("primitive",{object:_,ref:m,"position-z":-n*wM+i*wM})})},pY=({...n})=>{const[e]=Wd(HT),[t,i]=_e.useState(e);return _e.useEffect(()=>{let r;const s=()=>{i(o=>{if(e===o)return o;if(r=setTimeout(()=>{s()},Math.abs(e-o)>2?50:150),e>o)return o+1;if(e<o)return o-1})};return s(),()=>{clearTimeout(r)}},[e]),ot("group",{...n,"rotation-y":-Math.PI/2,children:[...ko].map((r,s)=>ot(dY,{page:t,number:s,opened:t>s,bookClosed:t===0||t===ko.length,...r},s))})},mY=()=>Rr(z_,{children:[ot(O9,{"rotation-x":-Math.PI/4,floatIntensity:1,speed:2,rotationIntensity:2,children:ot(pY,{})}),ot(L9,{}),ot(K9,{preset:"studio"}),ot("directionalLight",{position:[2,5,2],intensity:2.5,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-bias":-1e-4}),Rr("mesh",{"position-y":-1.5,"rotation-x":-Math.PI/2,receiveShadow:!0,children:[ot("planeGeometry",{args:[100,100]}),ot("shadowMaterial",{transparent:!0,opacity:.2})]})]});function gY(){return Rr(z_,{children:[ot(sY,{}),ot(OW,{}),ot(IW,{shadows:!0,camera:{position:[-.5,1,window.innerWidth>800?4:9],fov:45},children:ot("group",{"position-y":0,children:ot(_e.Suspense,{fallback:null,children:ot(mY,{})})})})]})}IS.createRoot(document.getElementById("root")).render(ot(ma.StrictMode,{children:ot(gY,{})}));
